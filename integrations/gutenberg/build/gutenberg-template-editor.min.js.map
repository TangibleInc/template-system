{"version":3,"file":"gutenberg-template-editor.min.js","sources":["../../../../../../node_modules/fast-deep-equal/es6/index.js","../gutenberg-template-editor/blocks/template/ServerSideRender.tsx","../gutenberg-template-editor/blocks/template/index.tsx","../gutenberg-template-editor/index.tsx"],"sourcesContent":["'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n  var envHasBigInt64Array = typeof BigInt64Array !== 'undefined';\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n    if ((a instanceof Map) && (b instanceof Map)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      for (i of a.entries())\n        if (!equal(i[1], b.get(i[0]))) return false;\n      return true;\n    }\n\n    if ((a instanceof Set) && (b instanceof Set)) {\n      if (a.size !== b.size) return false;\n      for (i of a.entries())\n        if (!b.has(i[0])) return false;\n      return true;\n    }\n\n    if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (a[i] !== b[i]) return false;\n      return true;\n    }\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","/**\n * Based on https://github.com/WordPress/gutenberg/blob/trunk/packages/server-side-render/src/server-side-render.js\n *\n * Forked to support callback onFetchResponseRendered, used by dynamic module loader\n */\nimport fastDeepEqual from 'fast-deep-equal/es6'\n\nconst { wp } = window\nconst {\n  apiFetch,\n  blocks: {\n    __experimentalSanitizeBlockAttributes,\n    sanitizeBlockAttributes\n  },\n  components: { Placeholder, Spinner },\n  compose: { useDebounce, usePrevious },\n  element: { RawHTML, useEffect, useRef, useState },\n  i18n: { __, sprintf },\n  url: { addQueryArgs }\n} = wp\n\nfunction Content({\n  className,\n  children,\n  onMount\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (onMount) onMount(ref.current)\n  }, [])\n  return <div ref={ref} className=\"tangible-server-side-render\">\n    <RawHTML className={ className }>{ children }</RawHTML>\n  </div>\n}\n\nconst EMPTY_OBJECT = {};\n\nexport function rendererPath( block, attributes = null, urlQueryArgs = {} ) {\n\treturn addQueryArgs( `/wp/v2/block-renderer/${ block }`, {\n\t\tcontext: 'edit',\n\t\t...( null !== attributes ? { attributes } : {} ),\n\t\t...urlQueryArgs,\n\t} );\n}\n\nexport function removeBlockSupportAttributes( attributes ) {\n\tconst {\n\t\tbackgroundColor,\n\t\tborderColor,\n\t\tfontFamily,\n\t\tfontSize,\n\t\tgradient,\n\t\ttextColor,\n\t\tclassName,\n\t\t...restAttributes\n\t} = attributes;\n\n\tconst { border, color, elements, spacing, typography, ...restStyles } =\n\t\tattributes?.style || EMPTY_OBJECT;\n\n\treturn {\n\t\t...restAttributes,\n\t\tstyle: restStyles,\n\t};\n}\n\nfunction DefaultEmptyResponsePlaceholder( { className } ) {\n\treturn (\n\t\t<Placeholder className={ className }>\n\t\t\t{ __( 'Block rendered as empty.' ) }\n\t\t</Placeholder>\n\t);\n}\n\nfunction DefaultErrorResponsePlaceholder( { response, className } ) {\n\tconst errorMessage = sprintf(\n\t\t// translators: %s: error message describing the problem\n\t\t__( 'Error loading block: %s' ),\n\t\tresponse.errorMsg\n\t);\n\treturn <Placeholder className={ className }>{ errorMessage }</Placeholder>;\n}\n\nfunction DefaultLoadingResponsePlaceholder( { children, showLoader } ) {\n\treturn (\n\t\t<div style={ { position: 'relative' } }>\n\t\t\t{ showLoader && (\n\t\t\t\t<div\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: '50%',\n\t\t\t\t\t\tleft: '50%',\n\t\t\t\t\t\tmarginTop: '-9px',\n\t\t\t\t\t\tmarginLeft: '-9px',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div style={ { opacity: showLoader ? '0.3' : 1 } }>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default function ServerSideRender( props ) {\n\tconst {\n\t\tattributes,\n\t\tblock,\n\t\tclassName,\n\t\thttpMethod = 'GET',\n\t\turlQueryArgs,\n\t\tskipBlockSupportAttributes = false,\n\t\tEmptyResponsePlaceholder = DefaultEmptyResponsePlaceholder,\n\t\tErrorResponsePlaceholder = DefaultErrorResponsePlaceholder,\n\t\tLoadingResponsePlaceholder = DefaultLoadingResponsePlaceholder,\n    onFetchResponseRendered\n\t} = props;\n\n\tconst isMountedRef = useRef( true );\n\tconst [ showLoader, setShowLoader ] = useState( false );\n\tconst fetchRequestRef = useRef();\n\tconst [ response, setResponse ] = useState( null );\n\tconst prevProps = usePrevious( props );\n\tconst [ isLoading, setIsLoading ] = useState( false );\n\n\tfunction fetchData() {\n\t\tif ( ! isMountedRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading( true );\n\n\t\tlet sanitizedAttributes =\n\t\t\tattributes &&\n\t\t\t__experimentalSanitizeBlockAttributes( block, attributes );\n\n\t\tif ( skipBlockSupportAttributes ) {\n\t\t\tsanitizedAttributes =\n\t\t\t\tremoveBlockSupportAttributes( sanitizedAttributes );\n\t\t}\n\n\t\t// If httpMethod is 'POST', send the attributes in the request body instead of the URL.\n\t\t// This allows sending a larger attributes object than in a GET request, where the attributes are in the URL.\n\t\tconst isPostRequest = 'POST' === httpMethod;\n\t\tconst urlAttributes = isPostRequest\n\t\t\t? null\n\t\t\t: sanitizedAttributes ?? null;\n\t\tconst path = rendererPath( block, urlAttributes, urlQueryArgs );\n\t\tconst data = isPostRequest\n\t\t\t? { attributes: sanitizedAttributes ?? null }\n\t\t\t: null;\n\n\t\t// Store the latest fetch request so that when we process it, we can\n\t\t// check if it is the current request, to avoid race conditions on slow networks.\n\t\tconst fetchRequest = ( fetchRequestRef.current = apiFetch( {\n\t\t\tpath,\n\t\t\tdata,\n\t\t\tmethod: isPostRequest ? 'POST' : 'GET',\n\t\t} )\n\t\t\t.then( ( fetchResponse ) => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current &&\n\t\t\t\t\tfetchResponse\n\t\t\t\t) {\n\t\t\t\t\tsetResponse( fetchResponse.rendered );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current\n\t\t\t\t) {\n\t\t\t\t\tsetResponse( {\n\t\t\t\t\t\terror: true,\n\t\t\t\t\t\terrorMsg: error.message,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current\n\t\t\t\t) {\n\t\t\t\t\tsetIsLoading( false );\n\t\t\t\t}\n\t\t\t} ) );\n\n\t\treturn fetchRequest;\n\t}\n\n\tconst debouncedFetchData = useDebounce( fetchData, 500 );\n\n\t// When the component unmounts, set isMountedRef to false. This will\n\t// let the async fetch callbacks know when to stop.\n\tuseEffect(\n\t\t() => () => {\n\t\t\tisMountedRef.current = false;\n\t\t},\n\t\t[]\n\t);\n\n\tuseEffect( () => {\n\t\t// Don't debounce the first fetch. This ensures that the first render\n\t\t// shows data as soon as possible.\n\t\tif ( prevProps === undefined ) {\n\t\t\tfetchData();\n\t\t} else if ( ! fastDeepEqual( prevProps, props ) ) {\n\t\t\tdebouncedFetchData();\n\t\t}\n\t} );\n\n\t/**\n\t * Effect to handle showing the loading placeholder.\n\t * Show it only if there is no previous response or\n\t * the request takes more than one second.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! isLoading ) {\n\t\t\treturn;\n\t\t}\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetShowLoader( true );\n\t\t}, 1000 );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ isLoading ] );\n\n\tconst hasResponse = !! response;\n\tconst hasEmptyResponse = response === '';\n\tconst hasError = response?.error;\n\n\tif ( isLoading ) {\n\t\treturn (\n\t\t\t<LoadingResponsePlaceholder { ...props } showLoader={ showLoader }>\n\t\t\t\t{ hasResponse && (\n\t\t\t\t\t<RawHTML className={ className }>{ response }</RawHTML>\n\t\t\t\t) }\n\t\t\t</LoadingResponsePlaceholder>\n\t\t);\n\t}\n\n\tif ( hasEmptyResponse || ! hasResponse ) {\n\t\treturn <EmptyResponsePlaceholder { ...props } />;\n\t}\n\n\tif ( hasError ) {\n\t\treturn <ErrorResponsePlaceholder response={ response } { ...props } />;\n\t}\n\n  return <Content className={ className } onMount={onFetchResponseRendered}\n  >{ response }</Content>;\n;\n}\n","import ServerSideRender from './ServerSideRender'\n\nconst { wp, Tangible, lodash } = window\nconst {\n  element: { Component },\n  blockEditor: { BlockControls, InspectorControls },\n  blocks: { registerBlockType },\n  components: {\n    Button,\n    DropdownMenu,\n    KeyboardShortcuts,\n    SelectControl,\n    TextControl,\n    ToolbarItem,\n    ToolbarButton,\n    ToolbarGroup,\n    Panel,\n    PanelBody,\n    PanelRow,\n    withConstrainedTabbing,\n  },\n  i18n: { __ },\n  keycodes: { rawShortcut },\n  // serverSideRender: ServerSideRender,\n} = wp\nconst { createCodeEditor, gutenbergConfig, moduleLoader } = Tangible\n\n/**\n * Pass it to Tangible Blocks\n * @see tangible-blocks/assets/src/gutenberg-integration/blocks\n */\nTangible.ServerSideRender = ServerSideRender\n\n/**\n * Workaround for Gutenberg issue with keyboard shortcuts\n *\n * Problem:\n * @see https://github.com/WordPress/gutenberg/issues/15190\n *\n * Solution:\n * @see https://github.com/WordPress/gutenberg/issues/18755#issuecomment-568269535\n *\n * Reference:\n * @see https://github.com/WordPress/gutenberg/blob/trunk/packages/keycodes/src/index.js for keycodes, modifiers\n * @see https://github.com/ccampbell/mousetrap\n */\nconst stop = (e) => e.stopImmediatePropagation()\nconst stopGutenbergShortcuts = {\n  tab: stop,\n  [rawShortcut.shift('tab')]: stop,\n  [rawShortcut.ctrl('[')]: stop,\n  [rawShortcut.primary('[')]: stop,\n  [rawShortcut.ctrl(']')]: stop,\n  [rawShortcut.primary(']')]: stop,\n  [rawShortcut.ctrl('a')]: stop,\n  [rawShortcut.primary('a')]: stop,\n  [rawShortcut.ctrl('d')]: stop,\n  [rawShortcut.primary('d')]: stop,\n  [rawShortcut.ctrl('z')]: stop,\n  [rawShortcut.ctrlShift('z')]: stop,\n  [rawShortcut.primary('z')]: stop,\n  [rawShortcut.primaryShift('z')]: stop,\n}\n\nconst EmptyTemplate = () => <div>&nbsp;</div>\n\nclass TemplateEditor extends Component {\n  componentDidMount() {\n    ;(async () => {\n      const editor = await createCodeEditor(this.el, {\n        language: 'html',\n        resizable: true,\n      })\n\n      // Full height - Prevent width resize, scroll instead\n      editor.setSize(null, '100%')\n\n      // editor.focus() // Don't focus, since there can be multiple Template blocks\n\n      this.editor = editor\n      this.editor.on('change', this.onEditorUpdate)\n\n      /**\n       * Workaround for Gutenburg full-site editor\n       *\n       * Without this, any template editor block that already exists on the page\n       * is not visible. Newly added template block is not affected by the issue.\n       */\n      if (wp.editSite) {\n        setTimeout(function () {\n          editor.refresh()\n        }, 120)\n      }\n    })().catch(console.error)\n  }\n\n  componentWillUnmount() {\n    this.editor.off('change', this.onEditorUpdate)\n  }\n\n  shouldComponentUpdate() {\n    return false\n  }\n\n  onEditorUpdate = () => {\n    const { onChange } = this.props\n    if (onChange) onChange(this.editor.getValue())\n  }\n\n  render() {\n    const { value, onChange } = this.props\n    return (\n      <KeyboardShortcuts shortcuts={stopGutenbergShortcuts}>\n        <textarea\n          ref={(el) => (this.el = el)}\n          value={value}\n          onChange={(e) => {\n            onChange(e.target.value)\n          }}\n          style={{ display: 'none' }}\n          cols=\"30\"\n          rows=\"10\"\n        ></textarea>\n      </KeyboardShortcuts>\n    )\n  }\n}\n\nclass edit extends Component {\n  canEditTemplate = gutenbergConfig.canEditTemplate\n\n  state = {\n    /**\n     * Current tab showing: editor, selectTemplate, or preview\n     */\n    currentTab:\n      this.props.attributes.template_selected || !this.canEditTemplate\n        ? 'selectTemplate'\n        : 'editor',\n    \n    /**\n     * Remember previously selected template on switching tabs\n     * \n     * Must be kept in state and not props.attribute, because the server-side render\n     * uses the saved value in \"template_selected\" to determine what to render.\n     */\n    previouslySelectedTemplate: 0,\n  }\n\n  constructor(props) {\n    super(props)\n\n    /**\n     * Current post ID\n     * Used in integrations/gutenberg/enqueue to set loop context\n     */\n    this.props.attributes.current_post_id = gutenbergConfig.current_post_id || 0\n\n    /**\n     * Prepare template options\n     */\n\n    this.templateOptions = []\n\n    const options = gutenbergConfig.templateOptions // From server-side: [ { id: title }, .. ]\n    const optionKeys = Object.keys(options)\n\n    // Convert to select options\n\n    for (const id of optionKeys) {\n      this.templateOptions.push({\n        value: id ? parseInt(id, 10) : id, // ID can be null if no templates available\n        label: options[id],\n      })\n    }\n  }\n\n  showTab(tab) {\n\n    if (this.state.currentTab === tab) return // Already showing tab\n\n    this.setState({\n      currentTab: tab\n    })\n\n    if (tab === 'editor') {\n\n      console.log('Save', this.props.attributes.template_selected)\n      this.setState({\n        previouslySelectedTemplate: this.props.attributes.template_selected\n      })\n  \n      if (this.props.attributes.template_selected) {\n\n        // Clear selected template to be saved\n\n        this.props.setAttributes({\n          template_selected: 0,\n        })\n      }\n\n    } else if (tab === 'selectTemplate') {\n\n      if (!this.props.attributes.template_selected) {\n        console.log('Restore', this.props.attributes.template_selected)\n\n        // Select previously selected, or first option\n        this.props.setAttributes({\n          template_selected: this.state.previouslySelectedTemplate\n            ? this.state.previouslySelectedTemplate\n            : this.templateOptions[0] && this.templateOptions[0].value\n              ? this.templateOptions[0].value\n              : 0\n        })\n      }\n    }\n  }\n\n  render() {\n    const { className, attributes, setAttributes } = this.props\n    const { currentTab } = this.state\n\n    return (\n      <>\n        <BlockControls>\n          <ToolbarGroup>\n            {this.canEditTemplate && (\n              <Button\n                className=\"components-tab-button\"\n                isPressed={currentTab === 'editor'}\n                onClick={() => this.showTab('editor')}\n              >\n                <span>{__('Editor')}</span>\n              </Button>\n            )}\n\n            <Button\n              className=\"components-tab-button\"\n              isPressed={currentTab === 'selectTemplate'}\n              onClick={() => this.showTab('selectTemplate')}\n            >\n              <span>{__('Saved templates')}</span>\n            </Button>\n          </ToolbarGroup>\n          <ToolbarGroup>\n            <Button\n              className=\"components-tab-button\"\n              isPressed={currentTab === 'preview'}\n              onClick={() => this.showTab('preview')}\n            >\n              <span>{__('Preview')}</span>\n            </Button>\n          </ToolbarGroup>\n        </BlockControls>\n\n        {currentTab === 'preview' ? (\n          /**\n           * Note: Ensure props are \"equal\" on every render - for example,\n           * don't create new function here - because it fetches on prop change.\n           */\n          <ServerSideRender\n            block=\"tangible/template\"\n            className={className}\n            attributes={attributes}\n            EmptyResponsePlaceholder={EmptyTemplate}\n            LoadingResponsePlaceholder={EmptyTemplate}\n            onFetchResponseRendered={moduleLoader}\n          />\n        ) : this.canEditTemplate && currentTab === 'editor' ? (\n          <TemplateEditor\n            value={attributes.template}\n            onChange={(val) =>\n              setAttributes({\n                template: val,\n              })\n            }\n          />\n        ) : (\n          <SelectControl\n            label={'Select template'}\n            value={attributes.template_selected}\n            style={{ height: '60px' }}\n            onChange={(val) =>\n              setAttributes({\n                template_selected: val ? parseInt(val, 10) : val,\n              })\n            }\n            options={this.templateOptions}\n          />\n        )}\n      </>\n    )\n  }\n}\n\nregisterBlockType('tangible/template', {\n  title: __('Tangible Template'),\n  description: __('Dynamic template'),\n  icon: 'editor-code',\n  category: 'common',\n  keywords: [__('template', 'loop', 'content')],\n\n  edit,\n\n  save() {\n    // Dynamic block\n    return null\n  },\n})\n","import './blocks/template'\n\nconst { wp } = window\nconst {\n  blocks: { registerBlockCollection },\n} = wp\n\n/**\n * Register block collection \"Tangible\"\n *\n * Feature is available from WP 5.4\n * @see https://make.wordpress.org/core/2020/02/27/block-collections\n */\n\nif (registerBlockCollection) {\n  registerBlockCollection('tangible', {\n    title: 'Tangible',\n    icon: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 99 99\">\n        <path d=\"M0 0 H 33 V 33 H 0 L 0 0\" fill=\"#262262\" />\n        <path d=\"M33 0 H 66 V 33 H 33 L 33 0\" fill=\"#662d91\" />\n        <path d=\"M66 0 H 99 V 33 H 66 L 66 0\" fill=\"#9f1f63\" />\n\n        <path d=\"M0 33 H 33 V 66 H 0 L 0 33\" fill=\"#2e3192\" />\n        <path d=\"M66 33 H 99 V 66 H 66 L 66 33\" fill=\"#ec008c\" />\n\n        <path d=\"M33 66 H 66 V 99 H 33 L 33 66\" fill=\"#02aeef\" />\n      </svg>\n    ),\n  })\n}\n"],"names":["es6","__name","equal","a","b","length","i","keys","key","wp","apiFetch","__experimentalSanitizeBlockAttributes","sanitizeBlockAttributes","Placeholder","Spinner","useDebounce","usePrevious","RawHTML","useEffect","useRef","useState","__","sprintf","addQueryArgs","Content","className","children","onMount","ref","EMPTY_OBJECT","rendererPath","block","attributes","urlQueryArgs","removeBlockSupportAttributes","backgroundColor","borderColor","fontFamily","fontSize","gradient","textColor","restAttributes","border","color","elements","spacing","typography","restStyles","DefaultEmptyResponsePlaceholder","DefaultErrorResponsePlaceholder","response","errorMessage","DefaultLoadingResponsePlaceholder","showLoader","ServerSideRender","props","httpMethod","skipBlockSupportAttributes","EmptyResponsePlaceholder","ErrorResponsePlaceholder","LoadingResponsePlaceholder","onFetchResponseRendered","isMountedRef","setShowLoader","fetchRequestRef","setResponse","prevProps","isLoading","setIsLoading","fetchData","sanitizedAttributes","isPostRequest","path","data","fetchRequest","fetchResponse","error","debouncedFetchData","fastDeepEqual","timeout","hasResponse","hasEmptyResponse","hasError","Tangible","lodash","Component","BlockControls","InspectorControls","registerBlockType","Button","DropdownMenu","KeyboardShortcuts","SelectControl","TextControl","ToolbarItem","ToolbarButton","ToolbarGroup","Panel","PanelBody","PanelRow","withConstrainedTabbing","rawShortcut","createCodeEditor","gutenbergConfig","moduleLoader","stop","e","stopGutenbergShortcuts","EmptyTemplate","TemplateEditor","onChange","editor","value","el","edit","options","optionKeys","id","tab","setAttributes","currentTab","val","registerBlockCollection"],"mappings":"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","x_google_ignoreList":[0]}