var Le=Object.defineProperty;var s=(P,k)=>Le(P,"name",{value:k,configurable:!0});(function(){"use strict";var y,T;(function(){const r={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,r);return}}catch{}globalThis.process={env:r}})();function P(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}s(P,"getDefaultExportFromCjs");var k=s(function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var l,n,u;if(Array.isArray(e)){if(l=e.length,l!=t.length)return!1;for(n=l;n--!==0;)if(!r(e[n],t[n]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;for(n of e.entries())if(!r(n[1],t.get(n[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(n of e.entries())if(!t.has(n[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(l=e.length,l!=t.length)return!1;for(n=l;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(u=Object.keys(e),l=u.length,l!==Object.keys(t).length)return!1;for(n=l;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,u[n]))return!1;for(n=l;n--!==0;){var S=u[n];if(!r(e[S],t[S]))return!1}return!0}return e!==e&&t!==t},"equal"),ce=P(k),ue=Object.defineProperty,p=s((r,e)=>ue(r,"name",{value:e,configurable:!0}),"o$1");const{wp:a}=window,{apiFetch:pe,blocks:{__experimentalSanitizeBlockAttributes:me,sanitizeBlockAttributes:je},components:{Placeholder:$,Spinner:de},compose:{useDebounce:fe,usePrevious:he},element:{RawHTML:H,useEffect:w,useRef:_,useState:M},i18n:{__:x,sprintf:ge},url:{addQueryArgs:Ee}}=a;function D({className:r,children:e,onMount:t}){const l=_();return w(()=>{t&&t(l.current)},[]),a.element.createElement("div",{ref:l,className:"tangible-server-side-render"},a.element.createElement(H,{className:r},e))}s(D,"V$1"),p(D,"Content");const be={};function V(r,e=null,t={}){return Ee(`/wp/v2/block-renderer/${r}`,{context:"edit",...e!==null?{attributes:e}:{},...t})}s(V,"rendererPath"),p(V,"rendererPath");function U(r){const{backgroundColor:e,borderColor:t,fontFamily:l,fontSize:n,gradient:u,textColor:S,className:ee,...B}=r,{border:te,color:re,elements:d,spacing:ne,typography:le,...h}=r?.style||be;return{...B,style:h}}s(U,"removeBlockSupportAttributes"),p(U,"removeBlockSupportAttributes");function F({className:r}){return a.element.createElement($,{className:r},x("Block rendered as empty."))}s(F,"X"),p(F,"DefaultEmptyResponsePlaceholder");function I({response:r,className:e}){const t=ge(x("Error loading block: %s"),r.errorMsg);return a.element.createElement($,{className:e},t)}s(I,"Z"),p(I,"DefaultErrorResponsePlaceholder");function G({children:r,showLoader:e}){return a.element.createElement("div",{style:{position:"relative"}},e&&a.element.createElement("div",{style:{position:"absolute",top:"50%",left:"50%",marginTop:"-9px",marginLeft:"-9px"}},a.element.createElement(de,null)),a.element.createElement("div",{style:{opacity:e?"0.3":1}},r))}s(G,"w$1"),p(G,"DefaultLoadingResponsePlaceholder");function N(r){const{attributes:e,block:t,className:l,httpMethod:n="GET",urlQueryArgs:u,skipBlockSupportAttributes:S=!1,EmptyResponsePlaceholder:ee=F,ErrorResponsePlaceholder:B=I,LoadingResponsePlaceholder:te=G,onFetchResponseRendered:re}=r,d=_(!0),[ne,le]=M(!1),h=_(),[g,oe]=M(null),se=he(r),[L,ae]=M(!1);function j(){if(!d.current)return;ae(!0);let E=e&&me(t,e);S&&(E=U(E));const z=n==="POST",Ae=V(t,z?null:E??null,u),Be=z?{attributes:E??null}:null,C=h.current=pe({path:Ae,data:Be,method:z?"POST":"GET"}).then(O=>{d.current&&C===h.current&&O&&oe(O.rendered)}).catch(O=>{d.current&&C===h.current&&oe({error:!0,errorMsg:O.message})}).finally(()=>{d.current&&C===h.current&&ae(!1)});return C}s(j,"N"),p(j,"fetchData");const Me=fe(j,500);w(()=>(d.current=!0,()=>{d.current=!1}),[]),w(()=>{se===void 0?j():ce(se,r)||Me()}),w(()=>{if(!L)return;const E=setTimeout(()=>{le(!0)},1e3);return()=>clearTimeout(E)},[L]);const ie=!!g,Ne=g==="",Re=g?.error;return L?a.element.createElement(te,{...r,showLoader:ne},ie&&a.element.createElement(H,{className:l},g)):Ne||!ie?a.element.createElement(ee,{...r}):Re?a.element.createElement(B,{response:g,...r}):a.element.createElement(D,{className:l,onMount:re},g)}s(N,"ee"),p(N,"ServerSideRender");var W=Object.defineProperty,ve=s((r,e,t)=>e in r?W(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,"k"),b=s((r,e)=>W(r,"name",{value:e,configurable:!0}),"p"),v=s((r,e,t)=>(ve(r,typeof e!="symbol"?e+"":e,t),t),"c");const{wp:o,Tangible:K,lodash:ze}=window,{element:{Component:Q},blockEditor:{BlockControls:ye,InspectorControls:$e},blocks:{registerBlockType:Te},components:{Button:R,DropdownMenu:He,KeyboardShortcuts:Se,SelectControl:we,TextControl:xe,ToolbarItem:De,ToolbarButton:Ve,ToolbarGroup:q,Panel:Ue,PanelBody:Fe,PanelRow:Ie,withConstrainedTabbing:Ge},i18n:{__:f},keycodes:{rawShortcut:c}}=o,{createCodeEditor:Ce,gutenbergConfig:A,moduleLoader:Oe}=K;K.ServerSideRender=N;const i=b(r=>r.stopImmediatePropagation(),"stop"),Pe={tab:i,[c.shift("tab")]:i,[c.ctrl("[")]:i,[c.primary("[")]:i,[c.ctrl("]")]:i,[c.primary("]")]:i,[c.ctrl("a")]:i,[c.primary("a")]:i,[c.ctrl("d")]:i,[c.primary("d")]:i,[c.ctrl("z")]:i,[c.ctrlShift("z")]:i,[c.primary("z")]:i,[c.primaryShift("z")]:i},J=b(()=>o.element.createElement("div",null,"\xA0"),"EmptyTemplate"),X=(y=class extends Q{constructor(){super(...arguments),v(this,"debug",!1),v(this,"editorCreateStarted",!1),v(this,"onEditorUpdate",b(()=>{const{onChange:e}=this.props;e&&e(this.editor.getValue())},"onEditorUpdate"))}componentDidMount(){if(this.editorCreateStarted){this.debug&&console.log("Editor already created");return}(async()=>{this.debug&&console.log("..Create code editor",this.el),this.editorCreateStarted=!0;const e=await Ce(this.el,{language:"html",resizable:!0});e.setSize(null,"100%"),this.editor=e,this.editor.on("change",this.onEditorUpdate),o.editSite&&setTimeout(function(){e.refresh()},120)})().catch(console.error)}componentWillUnmount(){this.editor&&(this.editor.off("change",this.onEditorUpdate),this.editor?.codeMirror6?.view?.destroy(),this.editor=null,this.editorCreateStarted=!1,this.debug&&console.log("Destroy editor"))}shouldComponentUpdate(){return!1}render(){const{value:e,onChange:t}=this.props;return o.element.createElement(Se,{shortcuts:Pe},o.element.createElement("textarea",{ref:l=>this.el=l,value:e,onChange:l=>{t(l.target.value)},style:{display:"none"},cols:"30",rows:"10"}))}},s(y,"T"),y);b(X,"TemplateEditor");let ke=X;const Y=(T=class extends Q{constructor(e){super(e),v(this,"canEditTemplate",A.canEditTemplate),v(this,"state",{currentTab:this.props.attributes.template_selected||!this.canEditTemplate?"selectTemplate":"editor",previouslySelectedTemplate:0}),this.props.attributes.current_post_id=A.current_post_id||0,this.templateOptions=[];const t=A.templateOptions,l=Object.keys(t);for(const n of l)this.templateOptions.push({value:n&&parseInt(n,10),label:t[n]})}showTab(e){this.state.currentTab!==e&&(this.setState({currentTab:e}),e==="editor"?(console.log("Save",this.props.attributes.template_selected),this.setState({previouslySelectedTemplate:this.props.attributes.template_selected}),this.props.attributes.template_selected&&this.props.setAttributes({template_selected:0})):e==="selectTemplate"&&(this.props.attributes.template_selected||this.props.setAttributes({template_selected:this.state.previouslySelectedTemplate?this.state.previouslySelectedTemplate:this.templateOptions[0]&&this.templateOptions[0].value?this.templateOptions[0].value:0})))}componentDidMount(){console.log("---> Edit Mount")}componentWillUnmount(){console.log("<--- Edit Unmount")}render(){const{className:e,attributes:t,setAttributes:l}=this.props,{currentTab:n}=this.state;return o.element.createElement(o.element.Fragment,null,o.element.createElement(ye,null,o.element.createElement(q,null,this.canEditTemplate&&o.element.createElement(R,{className:"components-tab-button",isPressed:n==="editor",onClick:()=>this.showTab("editor")},o.element.createElement("span",null,f("Editor"))),o.element.createElement(R,{className:"components-tab-button",isPressed:n==="selectTemplate",onClick:()=>this.showTab("selectTemplate")},o.element.createElement("span",null,f("Saved templates")))),o.element.createElement(q,null,o.element.createElement(R,{className:"components-tab-button",isPressed:n==="preview",onClick:()=>this.showTab("preview")},o.element.createElement("span",null,f("Preview"))))),n==="preview"?o.element.createElement(N,{block:"tangible/template",className:e,attributes:t,EmptyResponsePlaceholder:J,LoadingResponsePlaceholder:J,onFetchResponseRendered:Oe}):this.canEditTemplate&&n==="editor"?o.element.createElement(ke,{value:t.template,onChange:u=>l({template:u})}):o.element.createElement(we,{label:"Select template",value:t.template_selected,style:{height:"60px"},onChange:u=>l({template_selected:u&&parseInt(u,10)}),options:this.templateOptions}))}},s(T,"y"),T);b(Y,"edit");let _e=Y;Te("tangible/template",{title:f("Tangible Template"),description:f("Dynamic template"),icon:"editor-code",category:"common",keywords:[f("template","loop","content")],edit:_e,save(){return null}});const{wp:m}=window,{blocks:{registerBlockCollection:Z}}=m;Z&&Z("tangible",{title:"Tangible",icon:m.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 99"},m.element.createElement("path",{d:"M0 0 H 33 V 33 H 0 L 0 0",fill:"#262262"}),m.element.createElement("path",{d:"M33 0 H 66 V 33 H 33 L 33 0",fill:"#662d91"}),m.element.createElement("path",{d:"M66 0 H 99 V 33 H 66 L 66 0",fill:"#9f1f63"}),m.element.createElement("path",{d:"M0 33 H 33 V 66 H 0 L 0 33",fill:"#2e3192"}),m.element.createElement("path",{d:"M66 33 H 99 V 66 H 66 L 66 33",fill:"#ec008c"}),m.element.createElement("path",{d:"M33 66 H 66 V 99 H 33 L 33 66",fill:"#02aeef"}))})})();
