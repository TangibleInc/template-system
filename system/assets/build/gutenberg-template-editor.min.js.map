{"version":3,"file":"gutenberg-template-editor.min.js.map","sources":["../src/gutenberg-template-editor/blocks/template/ServerSideRender.jsx","../src/gutenberg-template-editor/blocks/template/index.jsx","../src/gutenberg-template-editor/index.jsx"],"sourcesContent":["/**\n * Based on https://github.com/WordPress/gutenberg/blob/trunk/packages/server-side-render/src/server-side-render.js\n *\n * Forked to support callback onFetchResponseRendered, used by dynamic module loader\n */\n\nconst { wp, lodash } = window\nconst { isEqual } = lodash\nconst {\n  apiFetch,\n  blocks: {\n    __experimentalSanitizeBlockAttributes,\n    sanitizeBlockAttributes\n  },\n  components: { Placeholder, Spinner },\n  compose: { useDebounce, usePrevious },\n  element: { RawHTML, useEffect, useRef, useState },\n  i18n: { __, sprintf },\n  url: { addQueryArgs }\n} = wp\n\nexport function rendererPath( block, attributes = null, urlQueryArgs = {} ) {\n\treturn addQueryArgs( `/wp/v2/block-renderer/${ block }`, {\n\t\tcontext: 'edit',\n\t\t...( null !== attributes ? { attributes } : {} ),\n\t\t...urlQueryArgs,\n\t} );\n}\n\nfunction DefaultEmptyResponsePlaceholder( { className } ) {\n\treturn (\n\t\t<Placeholder className={ className }>\n\t\t\t{ __( 'Block rendered as empty.' ) }\n\t\t</Placeholder>\n\t);\n}\n\nfunction DefaultErrorResponsePlaceholder( { response, className } ) {\n\tconst errorMessage = sprintf(\n\t\t// translators: %s: error message describing the problem\n\t\t__( 'Error loading block: %s' ),\n\t\tresponse.errorMsg\n\t);\n\treturn <Placeholder className={ className }>{ errorMessage }</Placeholder>;\n}\n\nfunction DefaultLoadingResponsePlaceholder( { children, showLoader } ) {\n\treturn (\n\t\t<div style={ { position: 'relative' } }>\n\t\t\t{ showLoader && (\n\t\t\t\t<div\n\t\t\t\t\tstyle={ {\n\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\ttop: '50%',\n\t\t\t\t\t\tleft: '50%',\n\t\t\t\t\t\tmarginTop: '-9px',\n\t\t\t\t\t\tmarginLeft: '-9px',\n\t\t\t\t\t} }\n\t\t\t\t>\n\t\t\t\t\t<Spinner />\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div style={ { opacity: showLoader ? '0.3' : 1 } }>\n\t\t\t\t{ children }\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nfunction Content({\n  className,\n  children,\n  onMount\n}) {\n  const ref = useRef()\n  useEffect(() => {\n    if (onMount) onMount(ref.current)\n  }, [])\n  return <div ref={ref} className=\"tangible-server-side-render\">\n    <RawHTML className={ className }>{ children }</RawHTML>\n  </div>\n}\n\n\nexport default function ServerSideRender( props ) {\n\tconst {\n\t\tattributes,\n\t\tblock,\n\t\tclassName,\n\t\thttpMethod = 'GET',\n\t\turlQueryArgs,\n\t\tEmptyResponsePlaceholder = DefaultEmptyResponsePlaceholder,\n\t\tErrorResponsePlaceholder = DefaultErrorResponsePlaceholder,\n\t\tLoadingResponsePlaceholder = DefaultLoadingResponsePlaceholder,\n    onFetchResponseRendered\n\t} = props;\n\n\tconst isMountedRef = useRef( true );\n\tconst [ showLoader, setShowLoader ] = useState( false );\n\tconst fetchRequestRef = useRef();\n\tconst [ response, setResponse ] = useState( null );\n\tconst prevProps = usePrevious( props );\n\tconst [ isLoading, setIsLoading ] = useState( false );\n\n\tfunction fetchData() {\n\t\tif ( ! isMountedRef.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetIsLoading( true );\n\n\t\tconst sanitizedAttributes =\n\t\t\tattributes &&\n\t\t\t(sanitizeBlockAttributes || __experimentalSanitizeBlockAttributes)( block, attributes );\n\n\t\t// If httpMethod is 'POST', send the attributes in the request body instead of the URL.\n\t\t// This allows sending a larger attributes object than in a GET request, where the attributes are in the URL.\n\t\tconst isPostRequest = 'POST' === httpMethod;\n\t\tconst urlAttributes = isPostRequest\n\t\t\t? null\n\t\t\t: sanitizedAttributes ?? null;\n\t\tconst path = rendererPath( block, urlAttributes, urlQueryArgs );\n\t\tconst data = isPostRequest\n\t\t\t? { attributes: sanitizedAttributes ?? null }\n\t\t\t: null;\n\n\t\t// Store the latest fetch request so that when we process it, we can\n\t\t// check if it is the current request, to avoid race conditions on slow networks.\n\t\tconst fetchRequest = ( fetchRequestRef.current = apiFetch( {\n\t\t\tpath,\n\t\t\tdata,\n\t\t\tmethod: isPostRequest ? 'POST' : 'GET',\n\t\t} )\n\t\t\t.then( ( fetchResponse ) => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current &&\n\t\t\t\t\tfetchResponse\n\t\t\t\t) {\n\t\t\t\t\tsetResponse( fetchResponse.rendered );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.catch( ( error ) => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current\n\t\t\t\t) {\n\t\t\t\t\tsetResponse( {\n\t\t\t\t\t\terror: true,\n\t\t\t\t\t\terrorMsg: error.message,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} )\n\t\t\t.finally( () => {\n\t\t\t\tif (\n\t\t\t\t\tisMountedRef.current &&\n\t\t\t\t\tfetchRequest === fetchRequestRef.current\n\t\t\t\t) {\n\t\t\t\t\tsetIsLoading( false );\n\t\t\t\t}\n\t\t\t} ) );\n\n\t\treturn fetchRequest;\n\t}\n\n\tconst debouncedFetchData = useDebounce( fetchData, 500 );\n\n\t// When the component unmounts, set isMountedRef to false. This will\n\t// let the async fetch callbacks know when to stop.\n\tuseEffect(\n\t\t() => () => {\n\t\t\tisMountedRef.current = false;\n\t\t},\n\t\t[]\n\t);\n\n\tuseEffect( () => {\n\t\t// Don't debounce the first fetch. This ensures that the first render\n\t\t// shows data as soon as possible.\n\t\tif ( prevProps === undefined ) {\n\t\t\tfetchData();\n\t\t} else if ( ! isEqual( prevProps, props ) ) {\n\t\t\tdebouncedFetchData();\n\t\t}\n\t} );\n\n\t/**\n\t * Effect to handle showing the loading placeholder.\n\t * Show it only if there is no previous response or\n\t * the request takes more than one second.\n\t */\n\tuseEffect( () => {\n\t\tif ( ! isLoading ) {\n\t\t\treturn;\n\t\t}\n\t\tconst timeout = setTimeout( () => {\n\t\t\tsetShowLoader( true );\n\t\t}, 1000 );\n\t\treturn () => clearTimeout( timeout );\n\t}, [ isLoading ] );\n\n\tconst hasResponse = !! response;\n\tconst hasEmptyResponse = response === '';\n\tconst hasError = response?.error;\n\n\tif ( isLoading ) {\n\t\treturn (\n\t\t\t<LoadingResponsePlaceholder { ...props } showLoader={ showLoader }>\n\t\t\t\t{ hasResponse && (\n\t\t\t\t\t<RawHTML className={ className }>{ response }</RawHTML>\n\t\t\t\t) }\n\t\t\t</LoadingResponsePlaceholder>\n\t\t);\n\t}\n\n\tif ( hasEmptyResponse || ! hasResponse ) {\n\t\treturn <EmptyResponsePlaceholder { ...props } />;\n\t}\n\n\tif ( hasError ) {\n\t\treturn <ErrorResponsePlaceholder response={ response } { ...props } />;\n\t}\n\n\treturn <Content className={ className } onMount={onFetchResponseRendered}\n  >{ response }</Content>;\n}\n","import ServerSideRender from './ServerSideRender'\n\nconst { wp, Tangible, lodash } = window\nconst {\n  element: { Component },\n  blockEditor: { BlockControls, InspectorControls },\n  blocks: { registerBlockType },\n  components: {\n    Button,\n    DropdownMenu,\n    KeyboardShortcuts,\n    SelectControl,\n    TextControl,\n    ToolbarItem,\n    ToolbarButton,\n    ToolbarGroup,\n    Panel,\n    PanelBody,\n    PanelRow,\n    withConstrainedTabbing,\n  },\n  i18n: { __ },\n  keycodes: { rawShortcut },\n  // serverSideRender: ServerSideRender,\n} = wp\nconst {\n  CodeMirror,\n  createCodeEditor,\n  gutenbergConfig,\n  moduleLoader\n} = Tangible\n\n/**\n * Pass it to Tangible Blocks\n * @see tangible-blocks/assets/src/gutenberg-integration/blocks\n */\nTangible.ServerSideRender = ServerSideRender\n\n/**\n * Workaround for Gutenberg issue with keyboard shortcuts\n *\n * Problem:\n * @see https://github.com/WordPress/gutenberg/issues/15190\n *\n * Solution:\n * @see https://github.com/WordPress/gutenberg/issues/18755#issuecomment-568269535\n *\n * Reference:\n * @see https://github.com/WordPress/gutenberg/blob/trunk/packages/keycodes/src/index.js for keycodes, modifiers\n * @see https://github.com/ccampbell/mousetrap\n */\nconst stop = (e) => e.stopImmediatePropagation()\nconst stopGutenbergShortcuts = {\n  tab: stop,\n  [rawShortcut.shift('tab')]: stop,\n  [rawShortcut.ctrl('[')]: stop,\n  [rawShortcut.primary('[')]: stop,\n  [rawShortcut.ctrl(']')]: stop,\n  [rawShortcut.primary(']')]: stop,\n  [rawShortcut.ctrl('a')]: stop,\n  [rawShortcut.primary('a')]: stop,\n  [rawShortcut.ctrl('d')]: stop,\n  [rawShortcut.primary('d')]: stop,\n  [rawShortcut.ctrl('z')]: stop,\n  [rawShortcut.ctrlShift('z')]: stop,\n  [rawShortcut.primary('z')]: stop,\n  [rawShortcut.primaryShift('z')]: stop,\n}\n\nconst EmptyTemplate = () => <div>&nbsp;</div>\n\nclass TemplateEditor extends Component {\n  componentDidMount() {\n    const editor = createCodeEditor(this.el, {\n      language: 'html',\n      resizable: true,\n    })\n\n    // Full height - Prevent width resize, scroll instead\n    editor.setSize(null, '100%')\n\n    // editor.focus() // Don't focus, since there can be multiple Template blocks\n\n    this.editor = editor\n    this.editor.on('change', this.onEditorUpdate)\n\n    /**\n     * Workaround for Gutenburg full-site editor\n     *\n     * Without this, any template editor block that already exists on the page\n     * is not visible. Newly added template block is not affected by the issue.\n     */\n    if (wp.editSite) {\n      setTimeout(function() {\n        editor.refresh()\n      }, 120)\n    }\n  }\n\n  componentWillUnmount() {\n    this.editor.off('change', this.onEditorUpdate)\n  }\n\n  shouldComponentUpdate() {\n    return false\n  }\n\n  onEditorUpdate = () => {\n    const { onChange } = this.props\n    if (onChange) onChange(this.editor.getValue())\n  }\n\n  render() {\n    const { value, onChange } = this.props\n    return (\n      <KeyboardShortcuts shortcuts={stopGutenbergShortcuts}>\n        <textarea\n          ref={(el) => (this.el = el)}\n          value={value}\n          onChange={(e) => {\n            onChange(e.target.value)\n          }}\n          cols=\"30\"\n          rows=\"10\"\n        ></textarea>\n      </KeyboardShortcuts>\n    )\n  }\n}\n\nclass edit extends Component {\n  canEditTemplate = gutenbergConfig.canEditTemplate\n\n  state = {\n    /**\n     * Current tab showing: editor, selectTemplate, or preview\n     */\n    currentTab:\n      this.props.attributes.template_selected || !this.canEditTemplate\n        ? 'selectTemplate'\n        : 'editor',\n  }\n\n  constructor(props) {\n    super(props)\n\n    /**\n     * Current post ID\n     * Used in integrations/gutenberg/enqueue to set loop context\n     */\n    this.props.attributes.current_post_id = gutenbergConfig.current_post_id || 0\n\n    /**\n     * Prepare template options\n     */\n\n    this.templateOptions = []\n\n    const options = gutenbergConfig.templateOptions // From server-side: [ { id: title }, .. ]\n    const optionKeys = Object.keys(options)\n\n    // Convert to select options\n\n    for (const id of optionKeys) {\n      this.templateOptions.push({\n        value: id ? parseInt(id, 10) : id, // ID can be null if no templates available\n        label: options[id],\n      })\n    }\n  }\n\n  showTab(tab) {\n    if (this.state.currentTab === tab) return // Already showing tab\n\n    this.setState({ currentTab: tab })\n\n    if (tab === 'editor' && this.props.attributes.template_selected) {\n      // Clear selected template\n\n      this.props.setAttributes({\n        template_selected: 0,\n      })\n    } else if (\n      tab === 'selectTemplate' &&\n      !this.props.attributes.template_selected\n    ) {\n      // Select first option if nothing selected yet\n\n      this.props.setAttributes({\n        template_selected: this.templateOptions[0].value,\n      })\n    }\n  }\n\n  render() {\n    const { className, attributes, setAttributes } = this.props\n    const { currentTab } = this.state\n\n    return (\n      <>\n        <BlockControls>\n          <ToolbarGroup>\n            {this.canEditTemplate && (\n              <Button\n                className=\"components-tab-button\"\n                isPressed={currentTab === 'editor'}\n                onClick={() => this.showTab('editor')}\n              >\n                <span>{__('Editor')}</span>\n              </Button>\n            )}\n\n            <Button\n              className=\"components-tab-button\"\n              isPressed={currentTab === 'selectTemplate'}\n              onClick={() => this.showTab('selectTemplate')}\n            >\n              <span>{__('Saved templates')}</span>\n            </Button>\n          </ToolbarGroup>\n          <ToolbarGroup>\n            <Button\n              className=\"components-tab-button\"\n              isPressed={currentTab === 'preview'}\n              onClick={() => this.showTab('preview')}\n            >\n              <span>{__('Preview')}</span>\n            </Button>\n          </ToolbarGroup>\n        </BlockControls>\n\n        {currentTab === 'preview' ?\n          /**\n           * Note: Ensure props are \"equal\" on every render - for example,\n           * don't create new function here - because it fetches on prop change.\n           */\n          <ServerSideRender\n            block=\"tangible/template\"\n            className={className}\n            attributes={attributes}\n            EmptyResponsePlaceholder={EmptyTemplate}\n            LoadingResponsePlaceholder={EmptyTemplate}\n            onFetchResponseRendered={moduleLoader}\n          />\n        : this.canEditTemplate && currentTab === 'editor' ? (\n          <TemplateEditor\n            value={attributes.template}\n            onChange={(val) =>\n              setAttributes({\n                template: val,\n              })\n            }\n          />\n        ) : (\n          <SelectControl\n            label={'Select template'}\n            value={attributes.template_selected}\n            style={{ height: '60px' }}\n            onChange={(val) =>\n              setAttributes({\n                template_selected: val ? parseInt(val, 10) : val,\n              })\n            }\n            options={this.templateOptions}\n          />\n        )}\n      </>\n    )\n  }\n}\n\nregisterBlockType('tangible/template', {\n  title: __('Tangible Template'),\n  description: __('Dynamic template'),\n  icon: 'editor-code',\n  category: 'common',\n  keywords: [__('template', 'loop', 'content')],\n\n  edit,\n\n  save() {\n    // Dynamic block\n    return null\n  },\n})\n","import './blocks/template'\n\nconst { wp } = window\nconst {\n  blocks: { registerBlockCollection },\n} = wp\n\n/**\n * Register block collection \"Tangible\"\n *\n * Feature is available from WP 5.4\n * @see https://make.wordpress.org/core/2020/02/27/block-collections\n */\n\nif (registerBlockCollection) {\n  registerBlockCollection('tangible', {\n    title: 'Tangible',\n    icon: (\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 99 99\">\n        <path d=\"M0 0 H 33 V 33 H 0 L 0 0\" fill=\"#262262\" />\n        <path d=\"M33 0 H 66 V 33 H 33 L 33 0\" fill=\"#662d91\" />\n        <path d=\"M66 0 H 99 V 33 H 66 L 66 0\" fill=\"#9f1f63\" />\n\n        <path d=\"M0 33 H 33 V 66 H 0 L 0 33\" fill=\"#2e3192\" />\n        <path d=\"M66 33 H 99 V 66 H 66 L 66 33\" fill=\"#ec008c\" />\n\n        <path d=\"M33 66 H 66 V 99 H 33 L 33 66\" fill=\"#02aeef\" />\n      </svg>\n    ),\n  })\n}\n"],"names":["wp","lodash","isEqual","apiFetch","__experimentalSanitizeBlockAttributes","sanitizeBlockAttributes","Placeholder","Spinner","useDebounce","usePrevious","RawHTML","useEffect","useRef","useState","__","sprintf","addQueryArgs","rendererPath","block","attributes","urlQueryArgs","__spreadValues","__name","DefaultEmptyResponsePlaceholder","className","DefaultErrorResponsePlaceholder","response","errorMessage","DefaultLoadingResponsePlaceholder","children","showLoader","Content","onMount","ref","ServerSideRender","props","httpMethod","EmptyResponsePlaceholder","ErrorResponsePlaceholder","LoadingResponsePlaceholder","onFetchResponseRendered","isMountedRef","setShowLoader","fetchRequestRef","setResponse","prevProps","isLoading","setIsLoading","fetchData","sanitizedAttributes","isPostRequest","urlAttributes","path","data","fetchRequest","fetchResponse","error","debouncedFetchData","timeout","hasResponse","hasEmptyResponse","hasError","__spreadProps","Tangible","Component","BlockControls","InspectorControls","registerBlockType","Button","DropdownMenu","KeyboardShortcuts","SelectControl","TextControl","ToolbarItem","ToolbarButton","ToolbarGroup","Panel","PanelBody","PanelRow","withConstrainedTabbing","rawShortcut","CodeMirror","createCodeEditor","gutenbergConfig","moduleLoader","stop","e","stopGutenbergShortcuts","EmptyTemplate","TemplateEditor","__publicField","onChange","editor","value","el","edit","options","optionKeys","id","tab","setAttributes","currentTab","val","registerBlockCollection"],"mappings":"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"}