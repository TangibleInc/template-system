(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(t){}globalThis.process={env:e}})();const v=(e,t)=>Array(t-e+1).fill().map((o,a)=>a+e),x=(e,t)=>{let o;t<=7?o=7:o=e>4&&e<t-3?2:4;const a={start:Math.round(e-o/2),end:Math.round(e+o/2)};(a.start-1===1||a.end+1===t)&&(a.start+=1,a.end+=1);let c=e>o?v(Math.min(a.start,t-o),Math.min(a.end,t)):v(1,Math.min(t,o+1));const b="...",u=(i,r)=>c.length+1!==t?r:[i];return c[0]!==1&&(c=u(1,[1,b]).concat(c)),c[c.length-1]<t&&(c=c.concat(u(t,[b,t]))),c},{jQuery:s,Tangible:{ajax:T}}=window;function P(){s(".tangible-paginator-target").each(function(){E(s(this))})}s(P),window.Tangible.activatePaginators=P;function E(e){const t=e.data("tangiblePaginatorTargetId"),o=e.data("tangiblePaginatorTargetData")||{},{state:a,template:c,hash:b,context:u,context_hash:i}=o;if(!a||!c)return;const r={},g=s(`.tangible-paginator-subscribe--${t}`);function A(n){Object.assign(a,n),M(a)}const k={};let _,m;g.each(function(){const n=s(this),l=n.data("tangiblePaginatorSubscribeAction");switch(l){case"fields":n.find("[data-tangible-paginator-field]").each(function(){const p=s(this),y=p.data("tangiblePaginatorField");k[y]=p});break;case"loading":_=n;break;case"buttons":m=n,w(m,a,A);const h=n.data("tangiblePaginatorSubscribeSettings");typeof h=="object"&&!Array.isArray(h)&&Object.assign(r,h);break;default:console.warn("Unknown subscriber action",l);break}});function O(n){Object.keys(k).forEach(function(l){k[l].text(n[l])})}const f={};a.last_rendered_page=a.current_page,f[a.current_page]=e.html();function M(n){if(O(n),m&&w(m,n),n.last_rendered_page===n.current_page)return;n.last_rendered_page=n.current_page;const l=function(){if(r.scroll_top){const d=e.offset().top;if(!r.scroll_animate){s([document.documentElement,document.body]).scrollTop(d);return}const N=typeof r.scroll_animate=="number"?r.scroll_animate:300;s([document.documentElement,document.body]).animate({scrollTop:d},N)}};if(typeof f[n.current_page]!="undefined"){e.html(f[n.current_page]),l();return}const h="tangible-paginator-target-loading",p=n.current_page,y=function(){e.addClass(h),_&&_.show()},j=function(){e.removeClass(h),_&&_.hide(),l()};y(),f[p]="",T("tangible_template_render",{template:c,page:p,hash:b,context:u,context_hash:i}).then(d=>{f[p]=d,e.html(d),j()}).catch(d=>{console.error("Fetch page error",d),delete f[p],j()})}}function w(e,t,o){const{current_page:a,total_pages:c}=t,b=x(a,c),u=e.children();if(b.forEach(function(i,r){const g=s("<button />");if(g.text(i),g.addClass("tangible-paginator-button"),i==="..."?g.prop("disabled",!0):(g.attr("data-tangible-paginator-action","page"),g.attr("data-tangible-paginator-page",i),i==a&&g.addClass("active")),u.eq(r).length){u.eq(r).replaceWith(g);return}e.append(g)}),!!o)return e.on("click","[data-tangible-paginator-action]",function(){const i=s(this);switch(i.data("tangiblePaginatorAction")){case"page":{const r=parseInt(i.data("tangiblePaginatorPage"),10);if(isNaN(r)||r<=0||r>t.total_pages)return;t.current_page=r;break}case"first_page":t.current_page=1;break;case"last_page":t.current_page=t.total_pages;break;case"next_page":if(t.current_page===t.total_pages)return;t.current_page++;break;case"previous_page":if(t.current_page===1)return;t.current_page--;break;default:return}o(t)}),e}})();
//# sourceMappingURL=paginator.min.js.map
