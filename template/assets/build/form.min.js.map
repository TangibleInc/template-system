{"version":3,"sources":["../../node_modules/browser-pack/_prelude.js","index.js","../src/form/getFormData.js","../src/form/index.js","../../node_modules/@babel/runtime/helpers/interopRequireDefault.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","module","getFormValues","rootNode","nodeCallback","useIdIfEmptyName","getDisabled","result","extractNodeValues","getSubFormValues","currentNode","firstChild","concat","nextSibling","node","disabled","callbackResult","fieldValue","fieldName","name","id","getFieldName","nodeName","match","getFieldValue","value","replace","fieldNode","type","toLowerCase","checked","selectNode","options","l","multiple","getElementsByTagName","selected","push","getSelectedOptionValue","Object","defineProperty","default","document","getElementById","currNode","formValues","constructor","Array","NodeList","nameValues","skipEmpty","delimiter","j","k","nameParts","currResult","arrNameFull","arrName","arrIdx","namePart","_nameParts","arrays","split","indexOf","substr","test","processNameValues","_getFormData","_interopRequireDefault","jQuery","$","_ref","window","Tangible","_ref$forms","forms","ajax","forEach","form","location","hash","$form","$success","find","$error","on","preventDefault","data","request","then","hide","redirect","success","html","show","catch","console","error","message","obj","__esModule"],"mappings":"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","file":"form.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","import getFormData from './getFormData'\n\nconst debug = false\nconst log = (...args) => debug && console.log(...args)\n\njQuery(function($) {\n\n  const {\n    forms = [],\n    ajax\n  } = window.Tangible || {}\n\n  if (!ajax || !forms.length) return\n\n  forms.forEach(function handleForm(form) {\n\n    const { id, location, hash } = form\n\n    const $form = $('#'+id)\n    if (!$form.length) return\n\n    // Find success, error\n    const $success = $form.find('.tangible-form-success-message')\n    const $error = $form.find('.tangible-form-error-message')\n\n    $form.on('submit', function(e) {\n      e.preventDefault()\n\n      const form = $form[0]\n      const data = getFormData(form)\n\n      // TODO: Custom validation\n      // form.checkValidity() === false\n\n      const request = {\n        location,\n        hash,\n        data\n      }\n\n      log('Submit form', request)\n\n      ajax('tangible_form_handler', request)\n        .then(function(result) {\n\n          log('Form success', result)\n\n          $error.hide()\n\n          if (result.redirect) {\n            window.location = result.redirect\n            return\n          }\n\n          if (result.success) {\n            $success.html(result.success)\n          }\n\n          $success.show()\n        })\n        .catch(function(result) {\n\n          if (result.redirect) {\n            window.location = result.redirect\n            return\n          }\n\n          console.error('Form error', result)\n\n          const message = result.error || result.message || 'There was an error.'\n          if (message) {\n            $error.html(message)\n            $error.show()\n            $success.hide()\n          }\n        })\n    })\n\n  })\n})\n","// Based on: https://github.com/maxatwork/form2js\n\n/**\n * Returns form values represented as Javascript object\n * \"name\" attribute defines structure of resulting object\n *\n * @param rootNode {Element|String} root form element (or it's id) or array of root elements\n * @param delimiter {String} structure parts delimiter defaults to '.'\n * @param skipEmpty {Boolean} should skip empty text values, defaults to true\n * @param nodeCallback {Function} custom function to get node value\n * @param useIdIfEmptyName {Boolean} if true value of id attribute of field will be used if name of field is empty\n */\nexport default function getFormData(rootNode) {\n\n  const delimiter = '.'\n  const getDisabled = false\n  const skipEmpty = false\n  const nodeCallback = null\n  const useIdIfEmptyName = false\n\n  rootNode = typeof rootNode == 'string' ? document.getElementById(rootNode) : rootNode\n\n  var formValues = [],\n    currNode,\n    i = 0\n\n  /* If rootNode is array - combine values */\n  if (rootNode.constructor == Array || (typeof NodeList != \"undefined\" && rootNode.constructor == NodeList))\n  {\n    while(currNode = rootNode[i++])\n    {\n      formValues = formValues.concat(getFormValues(currNode, nodeCallback, useIdIfEmptyName, getDisabled))\n    }\n  }\n  else\n  {\n    formValues = getFormValues(rootNode, nodeCallback, useIdIfEmptyName, getDisabled)\n  }\n\n  return processNameValues(formValues, skipEmpty, delimiter)\n}\n\n/**\n * Processes collection of { name: 'name', value: 'value' } objects.\n * @param nameValues\n * @param skipEmpty if true skips elements with value == '' or value == null\n * @param delimiter\n */\nfunction processNameValues(nameValues, skipEmpty, delimiter)\n{\n  var result = {},\n    arrays = {},\n    i, j, k, l,\n    value,\n    nameParts,\n    currResult,\n    arrNameFull,\n    arrName,\n    arrIdx,\n    namePart,\n    name,\n    _nameParts\n\n  for (i = 0; i < nameValues.length; i++)\n  {\n    value = nameValues[i].value\n\n    if (skipEmpty && (value === '' || value === null)) continue\n\n    name = nameValues[i].name\n    _nameParts = name.split(delimiter)\n    nameParts = []\n    currResult = result\n    arrNameFull = ''\n\n    for(j = 0; j < _nameParts.length; j++)\n    {\n      namePart = _nameParts[j].split('][')\n      if (namePart.length > 1)\n      {\n        for(k = 0; k < namePart.length; k++)\n        {\n          if (k == 0)\n          {\n            namePart[k] = namePart[k] + ']'\n          }\n          else if (k == namePart.length - 1)\n          {\n            namePart[k] = '[' + namePart[k]\n          }\n          else\n          {\n            namePart[k] = '[' + namePart[k] + ']'\n          }\n\n          arrIdx = namePart[k].match(/([a-z_]+)?\\[([a-z_][a-z0-9_]+?)\\]/i)\n          if (arrIdx)\n          {\n            for(l = 1; l < arrIdx.length; l++)\n            {\n              if (arrIdx[l]) nameParts.push(arrIdx[l])\n            }\n          }\n          else{\n            nameParts.push(namePart[k])\n          }\n        }\n      }\n      else\n        nameParts = nameParts.concat(namePart)\n    }\n\n    for (j = 0; j < nameParts.length; j++)\n    {\n      namePart = nameParts[j]\n\n      if (namePart.indexOf('[]') > -1 && j == nameParts.length - 1)\n      {\n        arrName = namePart.substr(0, namePart.indexOf('['))\n        arrNameFull += arrName\n\n        if (!currResult[arrName]) currResult[arrName] = []\n        currResult[arrName].push(value)\n      }\n      else if (namePart.indexOf('[') > -1)\n      {\n        arrName = namePart.substr(0, namePart.indexOf('['))\n        arrIdx = namePart.replace(/(^([a-z_]+)?\\[)|(\\]$)/gi, '')\n\n        /* Unique array name */\n        arrNameFull += '_' + arrName + '_' + arrIdx\n\n        /*\n           * Because arrIdx in field name can be not zero-based and step can be\n           * other than 1, we can't use them in target array directly.\n           * Instead we're making a hash where key is arrIdx and value is a reference to\n           * added array element\n           */\n\n        if (!arrays[arrNameFull]) arrays[arrNameFull] = {}\n        if (arrName != '' && !currResult[arrName]) currResult[arrName] = []\n\n        if (j == nameParts.length - 1)\n        {\n          if (arrName == '')\n          {\n            currResult.push(value)\n            arrays[arrNameFull][arrIdx] = currResult[currResult.length - 1]\n          }\n          else\n          {\n            currResult[arrName].push(value)\n            arrays[arrNameFull][arrIdx] = currResult[arrName][currResult[arrName].length - 1]\n          }\n        }\n        else\n        {\n          if (!arrays[arrNameFull][arrIdx])\n          {\n            if ((/^[0-9a-z_]+\\[?/i).test(nameParts[j+1])) currResult[arrName].push({})\n            else currResult[arrName].push([])\n\n            arrays[arrNameFull][arrIdx] = currResult[arrName][currResult[arrName].length - 1]\n          }\n        }\n\n        currResult = arrays[arrNameFull][arrIdx]\n      }\n      else\n      {\n        arrNameFull += namePart\n\n        if (j < nameParts.length - 1) /* Not the last part of name - means object */\n        {\n          if (!currResult[namePart]) currResult[namePart] = {}\n          currResult = currResult[namePart]\n        }\n        else\n        {\n          currResult[namePart] = value\n        }\n      }\n    }\n  }\n\n  return result\n}\n\nfunction getFormValues(rootNode, nodeCallback, useIdIfEmptyName, getDisabled)\n{\n  var result = extractNodeValues(rootNode, nodeCallback, useIdIfEmptyName, getDisabled)\n  return result.length > 0 ? result : getSubFormValues(rootNode, nodeCallback, useIdIfEmptyName, getDisabled)\n}\n\nfunction getSubFormValues(rootNode, nodeCallback, useIdIfEmptyName, getDisabled)\n{\n  var result = [],\n    currentNode = rootNode.firstChild\n\n  while (currentNode)\n  {\n    result = result.concat(extractNodeValues(currentNode, nodeCallback, useIdIfEmptyName, getDisabled))\n    currentNode = currentNode.nextSibling\n  }\n\n  return result\n}\n\nfunction extractNodeValues(node, nodeCallback, useIdIfEmptyName, getDisabled) {\n  if (node.disabled && !getDisabled) return []\n\n  var callbackResult, fieldValue, result, fieldName = getFieldName(node, useIdIfEmptyName)\n\n  callbackResult = nodeCallback && nodeCallback(node)\n\n  if (callbackResult && callbackResult.name) {\n    result = [callbackResult]\n  }\n  else if (fieldName != '' && node.nodeName.match(/INPUT|TEXTAREA/i)) {\n    fieldValue = getFieldValue(node, getDisabled)\n    if (null === fieldValue) {\n      result = []\n    } else {\n      result = [ { name: fieldName, value: fieldValue } ]\n    }\n  }\n  else if (fieldName != '' && node.nodeName.match(/SELECT/i)) {\n          fieldValue = getFieldValue(node, getDisabled)\n          result = [ { name: fieldName.replace(/\\[\\]$/, ''), value: fieldValue } ]\n  }\n  else {\n    result = getSubFormValues(node, nodeCallback, useIdIfEmptyName, getDisabled)\n  }\n\n  return result\n}\n\nfunction getFieldName(node, useIdIfEmptyName)\n{\n  if (node.name && node.name != '') return node.name\n  else if (useIdIfEmptyName && node.id && node.id != '') return node.id\n  else return ''\n}\n\n\nfunction getFieldValue(fieldNode, getDisabled)\n{\n  if (fieldNode.disabled && !getDisabled) return null\n\n  switch (fieldNode.nodeName) {\n  case 'INPUT':\n  case 'TEXTAREA':\n    switch (fieldNode.type.toLowerCase()) {\n    case 'radio':\n      if (fieldNode.checked && fieldNode.value === \"false\") return false\n      // fallthrough\n    case 'checkbox':\n      if (fieldNode.checked && fieldNode.value === \"true\") return true\n      if (!fieldNode.checked && fieldNode.value === \"true\") return false\n      if (fieldNode.checked) return fieldNode.value\n      break\n\n    case 'button':\n    case 'reset':\n    case 'submit':\n    case 'image':\n      return ''\n\n    default:\n      return fieldNode.value\n    }\n    break\n\n  case 'SELECT':\n    return getSelectedOptionValue(fieldNode)\n\n  default:\n    break\n  }\n\n  return null\n}\n\nfunction getSelectedOptionValue(selectNode)\n{\n  var multiple = selectNode.multiple,\n    result = [],\n    options,\n    i, l\n\n  if (!multiple) return selectNode.value\n\n  for (options = selectNode.getElementsByTagName(\"option\"), i = 0, l = options.length; i < l; i++)\n  {\n    if (options[i].selected) result.push(options[i].value)\n  }\n\n  return result\n}\n","import getFormData from './getFormData'\n\nconst debug = false\nconst log = (...args) => debug && console.log(...args)\n\njQuery(function($) {\n\n  const {\n    forms = [],\n    ajax\n  } = window.Tangible || {}\n\n  if (!ajax || !forms.length) return\n\n  forms.forEach(function handleForm(form) {\n\n    const { id, location, hash } = form\n\n    const $form = $('#'+id)\n    if (!$form.length) return\n\n    // Find success, error\n    const $success = $form.find('.tangible-form-success-message')\n    const $error = $form.find('.tangible-form-error-message')\n\n    $form.on('submit', function(e) {\n      e.preventDefault()\n\n      const form = $form[0]\n      const data = getFormData(form)\n\n      // TODO: Custom validation\n      // form.checkValidity() === false\n\n      const request = {\n        location,\n        hash,\n        data\n      }\n\n      log('Submit form', request)\n\n      ajax('tangible_form_handler', request)\n        .then(function(result) {\n\n          log('Form success', result)\n\n          $error.hide()\n\n          if (result.redirect) {\n            window.location = result.redirect\n            return\n          }\n\n          if (result.success) {\n            $success.html(result.success)\n          }\n\n          $success.show()\n        })\n        .catch(function(result) {\n\n          if (result.redirect) {\n            window.location = result.redirect\n            return\n          }\n\n          console.error('Form error', result)\n\n          const message = result.error || result.message || 'There was an error.'\n          if (message) {\n            $error.html(message)\n            $error.show()\n            $success.hide()\n          }\n        })\n    })\n\n  })\n})\n","function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;"]}