!function e(t,n,r){function o(i,l){if(!n[i]){if(!t[i]){var u="function"==typeof require&&require;if(!l&&u)return u(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var s=n[i]={exports:{}};t[i][0].call(s.exports,(function(e){return o(t[i][1][e]||e)}),s,s.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";var r=e("@babel/runtime/helpers/interopRequireDefault")(e("@babel/runtime/helpers/defineProperty"));function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i,l=window.jQuery,u=window.Tangible||{},c=u.Table,s=u.ajax,f=(i="Tangible Table",["log","warn","error"].reduce((function(e,t){return e[t]=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return"log"===t?null:(e=window.console)[t].apply(e,["[".concat(i,"]")].concat(r))},e}),{})),p=function(e,t){var n;return function(){var r=arguments,o=this;clearTimeout(n),n=window.setTimeout((function(){return e.apply(o,r)}),t)}},g="__tangibleTableRendered";function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c){var n="string"==typeof e?document.querySelector(e):e;if(n){if(!n[g]){n[g]=!0;var r=l(n),o=r.data("tangibleTableConfig")||{};f.log("Config",o);o.name;var i=o.rows,u=void 0===i?[]:i,d=o.column_label,b=void 0===d?{}:d,v=o.column_sort_enabled,m=void 0===v?[]:v,h=o.column_sort_type,w=void 0===h?{}:h,_=o.pagination,y=void 0===_||_,P=o.pagination_template,O=o.empty_table_template,T=void 0===O?"":O,C=o.row_loop,j=o.column_template,x=o.column_order,D=1,q=o.per_page,S=void 0===q?-1:q,R=o.total_pages,E=o.sort_column,A=o.sort_order,F=o.sort_type,M="",N=[],K={},L=l("<div><div></div></div>"),U=L.find("div")[0],k=a(a({},t),{},{element:U,data:u,columns:b,sorting:m,rowsPerPage:-1===S?999:S,pagination:y,totalPages:R,paginationTemplate:P,onPaginationChange:ee,onColumnSort:ne}),$=new c(k);f.log("Created",k),r.empty().append(L.find("table").children());var G=L.find(".tangible-table-pagination");G.insertAfter(r),r.wrap('<div class="tangible-table-overflow"></div>');var I=l('<div class="tangible-table-on-empty">'+T+"</div>");I.hide(),I.insertAfter(G),L=r.closest(".tangible-table-container");var J=r,Q={},V=function(e){var t=Object.keys(e);return t.sort(),t.reduce((function(t,n){return"".concat(t).concat(n,"=").concat(JSON.stringify(e[n]),",")}),"")},z=X(),B=z.cacheKey;Q[B]={rows:u,total_pages:R};var H=L.find(".tangible-table-filter-form");if(H.length){var W=function(e){var t=e.$field,n=(e.tag,e.name),r=(e.type,e.action),o=e.filterColumns,a=t.val();if(f.log("Filter",r,n,a),"loop"===r||"column"===r)return"column"===r?a.length?K[n]={value:a}:delete K[n]:C.attributes[n]=a,void Z().then((function(e){if(e){R=e.total_pages||1,D>R&&(D=R),$.setTotalPages(R);var t=D-1,n=e.rows||[];$.setPage(t,n),Y(n.length)}}));"search"!==r?"perPage"!==r||te(parseInt(a,10)):re(a,o)};H.each((function(){var e=l(this);e.find("select,input").each((function(){var e=l(this),t=e.prop("tagName").toLowerCase(),n=e.attr("name"),r="select"===t?"select":e.attr("type"),o=e.data("tangibleTableFilterAction")||"loop",a=e.data("tangibleTableFilterColumns"),i=function(){W({$field:e,tag:t,name:n,type:r,action:o,filterColumns:a})};e.on("change",i),"text"===r&&e.on("input",p(i,500))})),e.on("submit",(function(e){e.preventDefault()}))}))}}}else f.warn("Element not found",e)}else f.warn("Library not found");function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a({page:D,per_page:S,row_loop:C,column_order:x,sort_column:E,sort_order:A,sort_type:F,search:M,search_columns:N,filter_by_column_values:K},e),n=V(t);return{tableRequest:a(a({},t),{},{column_template:j,column_sort_type:w}),cacheKey:n}}function Y(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?(I.hide(),J.show(),L.removeClass("is-empty-table")):(J.hide(),I.show(),L.addClass("is-empty-table"))}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=X(e),n=t.tableRequest,r=t.cacheKey;return new Promise((function(e,t){if(Q[r]){var o=Q[r];return e(o)}f.log("fetchTableData",n),L.addClass("loading"),s("tangible_table_data",n).then((function(t){Q[r]=t,f.log("fetchTableData success",t),e(t),L.removeClass("loading")})).catch((function(t){f.log("fetchTableData error",t),e(),L.removeClass("loading")}))}))}function ee(e){f.log("Get page",e+1),D=e+1,Z().then((function(t){t&&$.setPage(e,t.rows)}))}function te(e){f.log("onUpdateRowsPerPage",e)}function ne(e,t){D=1,E=e,A=t,F=w[e]||"string",f.log("onColumnSort",D,E,A,F),Z().then((function(e){if(e){var t=D-1;$.setPage(t,e.rows)}}))}function re(e,t){f.log("onSearch",e,t),D=1,M=e,N=t||$.getVisibleColumns(),Z().then((function(e){if(e){f.log("Search result",e),$.setTotalPages(e.total_pages||1);var t=D-1,n=e.rows||[];$.setPage(t,n),Y(n.length)}}))}}l(".tangible-table").each((function(){d(this)})),window.Tangible=window.Tangible||{},window.Tangible.activateTable=d},{"@babel/runtime/helpers/defineProperty":2,"@babel/runtime/helpers/interopRequireDefault":3}],2:[function(e,t,n){t.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.exports.default=t.exports,t.exports.__esModule=!0},{}],3:[function(e,t,n){t.exports=function(e){return e&&e.__esModule?e:{default:e}},t.exports.default=t.exports,t.exports.__esModule=!0},{}]},{},[1]);
//# sourceMappingURL=dynamic-table.min.js.map
