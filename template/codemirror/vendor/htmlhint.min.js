var tt=Object.defineProperty;var m=(C,x)=>tt(C,"name",{value:x,configurable:!0});(function(){"use strict";(function(){const i={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,i);return}}catch(r){}globalThis.process={env:i}})();var C=Object.defineProperty,x=m((i,r)=>C(i,"name",{value:r,configurable:!0}),"b");class k{constructor(){this._listeners={},this.mapCdataTags=this.makeMap("script,style"),this._arrBlocks=[],this.lastEvent=null}makeMap(r){const t={},a=r.split(",");for(let e=0;e<a.length;e++)t[a[e]]=!0;return t}parse(r){const t=this.mapCdataTags,a=/<(?:\/([^\s>]+)\s*|!--([\s\S]*?)--|!([^>]*?)|([\w\-:]+)((?:\s+[^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s"'>]*))?)*?)\s*(\/?))>/g,e=/\s*([^\s"'>\/=\x00-\x0F\x7F\x80-\x9F]+)(?:\s*=\s*(?:(")([^"]*)"|(')([^']*)'|([^\s"'>]*)))?/g,n=/\r?\n/g;let s,l,o=0,c,d,u=null,h,p=[],b=0,f,L=0,q=1;const Ge=this._arrBlocks;this.fire("start",{pos:0,line:1,col:1});const Ke=x(()=>{const y=d.find(g=>g.name==="type")||{value:""};return t[c]&&y.value.indexOf("text/ng-template")===-1},"isMapCdataTagsRequired"),w=x((y,g,$,v)=>{const R=$-L+1;for(v===void 0&&(v={}),v.raw=g,v.pos=$,v.line=q,v.col=R,Ge.push(v),this.fire(y,v);n.exec(g);)q++,L=$+n.lastIndex},"saveBlock");for(;s=a.exec(r);){if(l=s.index,l>o&&(f=r.substring(o,l),u?p.push(f):w("text",f,o)),o=a.lastIndex,(c=s[1])&&(u&&c===u&&(f=p.join(""),w("cdata",f,b,{tagName:u,attrs:h}),u=null,h=void 0,p=[]),!u)){w("tagend",s[0],l,{tagName:c});continue}if(u)p.push(s[0]);else if(c=s[4]){d=[];const y=s[5];let g,$=0;for(;g=e.exec(y);){const v=g[1],R=g[2]?g[2]:g[4]?g[4]:"",et=g[3]?g[3]:g[5]?g[5]:g[6]?g[6]:"";d.push({name:v,value:et,quote:R,index:g.index,raw:g[0]}),$+=g[0].length}$===y.length?(w("tagstart",s[0],l,{tagName:c,attrs:d,close:s[6]}),Ke()&&(u=c,h=d.concat(),p=[],b=o)):w("text",s[0],l)}else(s[2]||s[3])&&w("comment",s[0],l,{content:s[2]||s[3],long:!!s[2]})}r.length>o&&(f=r.substring(o,r.length),w("text",f,o)),this.fire("end",{pos:o,line:q,col:r.length-L+1})}addListener(r,t){const a=this._listeners,e=r.split(/[,\s]/);let n;for(let s=0,l=e.length;s<l;s++)n=e[s],a[n]===void 0&&(a[n]=[]),a[n].push(t)}fire(r,t){t===void 0&&(t={}),t.type=r;let a=[];const e=this._listeners[r],n=this._listeners.all;e!==void 0&&(a=a.concat(e)),n!==void 0&&(a=a.concat(n));const s=this.lastEvent;s!==null&&(delete s.lastEvent,t.lastEvent=s),this.lastEvent=t;for(let l=0,o=a.length;l<o;l++)a[l].call(this,t)}removeListener(r,t){const a=this._listeners[r];if(a!==void 0){for(let e=0,n=a.length;e<n;e++)if(a[e]===t){a.splice(e,1);break}}}fixPos(r,t){const a=r.raw.substr(0,t).split(/\r?\n/),e=a.length-1;let n=r.line,s;return e>0?(n+=e,s=a[e].length+1):s=r.col+t,{line:n,col:s}}getMapAttrs(r){const t={};let a;for(let e=0,n=r.length;e<n;e++)a=r[e],t[a.name]=a.value;return t}}m(k,"C"),x(k,"HTMLParser");var T=(i=>(i.error="error",i.warning="warning",i.info="info",i))(T||{}),B=Object.defineProperty,F=m((i,r)=>B(i,"name",{value:r,configurable:!0}),"g$4");class E{constructor(r,t){this.html=r,this.lines=r.split(/\r?\n/);const a=/\r?\n/.exec(r);this.brLen=a!==null?a[0].length:0,this.ruleset=t,this.messages=[]}info(r,t,a,e,n){this.report(T.info,r,t,a,e,n)}warn(r,t,a,e,n){this.report(T.warning,r,t,a,e,n)}error(r,t,a,e,n){this.report(T.error,r,t,a,e,n)}report(r,t,a,e,n,s){const l=this.lines,o=this.brLen;let c="",d=0;for(let u=a-1,h=l.length;u<h&&(c=l[u],d=c.length,e>d&&a<h);u++)a++,e-=d,e!==1&&(e-=o);this.messages.push({type:r,message:t,raw:s,evidence:c,line:a,col:e,rule:{id:n.id,description:n.description,link:`https://htmlhint.com/docs/user-guide/rules/${n.id}`}})}}m(E,"h$4"),F(E,"Reporter");var V={id:"alt-require",description:"The alt attribute of an <img> element must be present and alt attribute of area[href] and input[type=image] must have a value.",init(i,r){i.addListener("tagstart",t=>{const a=t.tagName.toLowerCase(),e=i.getMapAttrs(t.attrs),n=t.col+a.length+1;let s;a==="img"&&!("alt"in e)?r.warn("An alt attribute must be present on <img> elements.",t.line,n,this,t.raw):(a==="area"&&"href"in e||a==="input"&&e.type==="image")&&(!("alt"in e)||e.alt==="")&&(s=a==="area"?"area[href]":"input[type=image]",r.warn(`The alt attribute of ${s} must have a value.`,t.line,n,this,t.raw))})}},H=Object.defineProperty,Y=m((i,r)=>H(i,"name",{value:r,configurable:!0}),"g$3");const W=["allowReorder","attributeName","attributeType","autoReverse","baseFrequency","baseProfile","calcMode","clipPath","clipPathUnits","contentScriptType","contentStyleType","diffuseConstant","edgeMode","externalResourcesRequired","filterRes","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","onBlur","onChange","onClick","onFocus","onKeyUp","onLoad","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"];function S(i,r){if(r instanceof RegExp)return r.test(i)?{match:i,pattern:r}:!1;const t=r[0],a=r[r.length-1],e=r[r.length-2],n=t==="/"&&(a==="/"||e==="/"&&a==="i");return n?n&&a==="i"?new RegExp(r.slice(1,-2),"i").test(i):new RegExp(r.slice(1,-1)).test(i):i===r}m(S,"f$2"),Y(S,"testAgainstStringOrRegExp");var J={id:"attr-lowercase",description:"All attribute names must be in lowercase.",init(i,r,t){const a=(Array.isArray(t)?t:[]).concat(W);i.addListener("tagstart",e=>{const n=e.attrs;let s;const l=e.col+e.tagName.length+1;for(let o=0,c=n.length;o<c;o++){s=n[o];const d=s.name;!a.find(u=>S(d,u))&&d!==d.toLowerCase()&&r.error(`The attribute name of [ ${d} ] must be in lowercase.`,e.line,l+s.index,this,s.raw)}})}},Q={id:"attr-sorted",description:"Attribute tags must be in proper order.",init(i,r){const t={},a=["class","id","name","src","for","type","href","value","title","alt","role"];for(let e=0;e<a.length;e++)t[a[e]]=e;i.addListener("tagstart",e=>{const n=e.attrs,s=[];for(let o=0;o<n.length;o++)s.push(n[o].name);const l=JSON.stringify(s);s.sort((o,c)=>t[o]==null&&t[c]==null?0:t[o]==null?1:t[c]==null?-1:t[o]-t[c]||o.localeCompare(c)),l!==JSON.stringify(s)&&r.error(`Inaccurate order ${l} should be in hierarchy ${JSON.stringify(s)} `,e.line,e.col,this,e.raw)})}},X={id:"attr-no-duplication",description:"Elements cannot have duplicate attributes.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e,n;const s=t.col+t.tagName.length+1,l={};for(let o=0,c=a.length;o<c;o++)e=a[o],n=e.name,l[n]===!0&&r.error(`Duplicate of attribute name [ ${e.name} ] was found.`,t.line,s+e.index,this,e.raw),l[n]=!0})}},G={id:"attr-unsafe-chars",description:"Attribute values cannot contain unsafe chars.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1,s=/[\u0000-\u0008\u000b\u000c\u000e-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/;let l;for(let o=0,c=a.length;o<c;o++)if(e=a[o],l=s.exec(e.value),l!==null){const d=escape(l[0]).replace(/%u/,"\\u").replace(/%/,"\\x");r.warn(`The value of attribute [ ${e.name} ] cannot contain an unsafe char [ ${d} ].`,t.line,n+e.index,this,e.raw)}})}},K={id:"attr-value-double-quotes",description:"Attribute values must be in double quotes.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1;for(let s=0,l=a.length;s<l;s++)e=a[s],(e.value!==""&&e.quote!=='"'||e.value===""&&e.quote==="'")&&r.error(`The value of attribute [ ${e.name} ] must be in double quotes.`,t.line,n+e.index,this,e.raw)})}},ee={id:"attr-value-not-empty",description:"All attributes must have values.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1;for(let s=0,l=a.length;s<l;s++)e=a[s],e.quote===""&&e.value===""&&r.warn(`The attribute [ ${e.name} ] must have a value.`,t.line,n+e.index,this,e.raw)})}},te={id:"attr-value-single-quotes",description:"Attribute values must be in single quotes.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1;for(let s=0,l=a.length;s<l;s++)e=a[s],(e.value!==""&&e.quote!=="'"||e.value===""&&e.quote==='"')&&r.error(`The value of attribute [ ${e.name} ] must be in single quotes.`,t.line,n+e.index,this,e.raw)})}},ae={id:"attr-whitespace",description:"All attributes should be separated by only one space and not have leading/trailing whitespace.",init(i,r,t){const a=Array.isArray(t)?t:[];i.addListener("tagstart",e=>{const n=e.attrs;let s;const l=e.col+e.tagName.length+1;n.forEach(o=>{s=o;const c=o.name;a.indexOf(c)===-1&&(o.value.trim()!==o.value&&r.error(`The attributes of [ ${c} ] must not have leading or trailing whitespace.`,e.line,l+s.index,this,s.raw),o.value.replace(/ +(?= )/g,"")!==o.value&&r.error(`The attributes of [ ${c} ] must be separated by only one space.`,e.line,l+s.index,this,s.raw))})})}},re=Object.defineProperty,se=m((i,r)=>re(i,"name",{value:r,configurable:!0}),"s$1"),ne={id:"doctype-first",description:"Doctype must be declared first.",init(i,r){const t=se(a=>{a.type==="start"||a.type==="text"&&/^\s*$/.test(a.raw)||((a.type!=="comment"&&a.long===!1||/^DOCTYPE\s+/i.test(a.content)===!1)&&r.error("Doctype must be declared first.",a.line,a.col,this,a.raw),i.removeListener("all",t))},"allEvent");i.addListener("all",t)}},ie=Object.defineProperty,j=m((i,r)=>ie(i,"name",{value:r,configurable:!0}),"i$1"),le={id:"doctype-html5",description:'Invalid doctype. Use: "<!DOCTYPE html>"',init(i,r){const t=j(e=>{e.long===!1&&e.content.toLowerCase()!=="doctype html"&&r.warn('Invalid doctype. Use: "<!DOCTYPE html>"',e.line,e.col,this,e.raw)},"onComment"),a=j(()=>{i.removeListener("comment",t),i.removeListener("tagstart",a)},"onTagStart");i.addListener("all",t),i.addListener("tagstart",a)}},oe=Object.defineProperty,z=m((i,r)=>oe(i,"name",{value:r,configurable:!0}),"i"),ce={id:"head-script-disabled",description:"The <script> tag cannot be used in a <head> tag.",init(i,r){const t=/^(text\/javascript|application\/javascript)$/i;let a=!1;const e=z(s=>{const l=i.getMapAttrs(s.attrs).type,o=s.tagName.toLowerCase();o==="head"&&(a=!0),a===!0&&o==="script"&&(!l||t.test(l)===!0)&&r.warn("The <script> tag cannot be used in a <head> tag.",s.line,s.col,this,s.raw)},"onTagStart"),n=z(s=>{s.tagName.toLowerCase()==="head"&&(i.removeListener("tagstart",e),i.removeListener("tagend",n))},"onTagEnd");i.addListener("tagstart",e),i.addListener("tagend",n)}},de={id:"href-abs-or-rel",description:"An href attribute must be either absolute or relative.",init(i,r,t){const a=t==="abs"?"absolute":"relative";i.addListener("tagstart",e=>{const n=e.attrs;let s;const l=e.col+e.tagName.length+1;for(let o=0,c=n.length;o<c;o++)if(s=n[o],s.name==="href"){(a==="absolute"&&/^\w+?:/.test(s.value)===!1||a==="relative"&&/^https?:\/\//.test(s.value)===!0)&&r.warn(`The value of the href attribute [ ${s.value} ] must be ${a}.`,e.line,l+s.index,this,s.raw);break}})}};const ue="(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang)",he="(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)",ge=`(?<grandfathered>${he}|${ue})`,me="(?<privateUse>x(-[A-Za-z0-9]{1,8})+)",pe="(?<privateUse2>x(-[A-Za-z0-9]{1,8})+)",fe="[0-9A-WY-Za-wy-z]",be=`(?<extension>${fe}(-[A-Za-z0-9]{2,8})+)`,ve="(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3})",we="(?<region>[A-Za-z]{2}|[0-9]{3})",ye="(?<script>[A-Za-z]{4})",$e="(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2})",xe=`(?<language>([A-Za-z]{2,3}(-${$e})?)|[A-Za-z]{4}|[A-Za-z]{5,8})`,Le=`(${xe}(-${ye})?(-${we})?(-${ve})*(-${be})*(-${me})?)`,Te=`(${ge}|${Le}|${pe})`;var Ae={id:"html-lang-require",description:"The lang attribute of an <html> element must be present and should be valid.",init(i,r){i.addListener("tagstart",t=>{const a=t.tagName.toLowerCase(),e=i.getMapAttrs(t.attrs),n=t.col+a.length+1,s=new RegExp(Te,"g");a==="html"&&("lang"in e?e.lang?s.test(e.lang)||r.warn("The lang attribute value of <html> element must be a valid BCP47.",t.line,n,this,t.raw):r.warn("The lang attribute of <html> element must have a value.",t.line,n,this,t.raw):r.warn("An lang attribute must be present on <html> elements.",t.line,n,this,t.raw))})}},Ne={id:"id-class-ad-disabled",description:"The id and class attributes cannot use the ad keyword, it will be blocked by adblock software.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e,n;const s=t.col+t.tagName.length+1;for(let l=0,o=a.length;l<o;l++)e=a[l],n=e.name,/^(id|class)$/i.test(n)&&/(^|[-_])ad([-_]|$)/i.test(e.value)&&r.warn(`The value of attribute ${n} cannot use the ad keyword.`,t.line,s+e.index,this,e.raw)})}},Ce={id:"id-class-value",description:"The id and class attribute values must meet the specified rules.",init(i,r,t){const a={underline:{regId:/^[a-z\d]+(_[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by an underscore."},dash:{regId:/^[a-z\d]+(-[a-z\d]+)*$/,message:"The id and class attribute values must be in lowercase and split by a dash."},hump:{regId:/^[a-z][a-zA-Z\d]*([A-Z][a-zA-Z\d]*)*$/,message:"The id and class attribute values must meet the camelCase style."}};let e;if(typeof t=="string"?e=a[t]:e=t,typeof e=="object"&&e.regId){let n=e.regId;const s=e.message;n instanceof RegExp||(n=new RegExp(n)),i.addListener("tagstart",l=>{const o=l.attrs;let c;const d=l.col+l.tagName.length+1;for(let u=0,h=o.length;u<h;u++)if(c=o[u],c.name.toLowerCase()==="id"&&n.test(c.value)===!1&&r.warn(s,l.line,d+c.index,this,c.raw),c.name.toLowerCase()==="class"){const p=c.value.split(/\s+/g);let b;for(let f=0,L=p.length;f<L;f++)b=p[f],b&&n.test(b)===!1&&r.warn(s,l.line,d+c.index,this,b)}})}}},ke={id:"id-unique",description:"The value of id attributes must be unique.",init(i,r){const t={};i.addListener("tagstart",a=>{const e=a.attrs;let n,s;const l=a.col+a.tagName.length+1;for(let o=0,c=e.length;o<c;o++)if(n=e[o],n.name.toLowerCase()==="id"){s=n.value,s&&(t[s]===void 0?t[s]=1:t[s]++,t[s]>1&&r.error(`The id value [ ${s} ] must be unique.`,a.line,l+n.index,this,n.raw));break}})}},Ee={id:"inline-script-disabled",description:"Inline script cannot be used.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1;let s;const l=/^on(unload|message|submit|select|scroll|resize|mouseover|mouseout|mousemove|mouseleave|mouseenter|mousedown|load|keyup|keypress|keydown|focus|dblclick|click|change|blur|error)$/i;for(let o=0,c=a.length;o<c;o++)e=a[o],s=e.name.toLowerCase(),l.test(s)===!0?r.warn(`Inline script [ ${e.raw} ] cannot be used.`,t.line,n+e.index,this,e.raw):(s==="src"||s==="href")&&/^\s*javascript:/i.test(e.value)&&r.warn(`Inline script [ ${e.raw} ] cannot be used.`,t.line,n+e.index,this,e.raw)})}},Oe={id:"inline-style-disabled",description:"Inline style cannot be used.",init(i,r){i.addListener("tagstart",t=>{const a=t.attrs;let e;const n=t.col+t.tagName.length+1;for(let s=0,l=a.length;s<l;s++)e=a[s],e.name.toLowerCase()==="style"&&r.warn(`Inline style [ ${e.raw} ] cannot be used.`,t.line,n+e.index,this,e.raw)})}},qe=Object.defineProperty,Re=m((i,r)=>qe(i,"name",{value:r,configurable:!0}),"s"),Se={id:"input-requires-label",description:"All [ input ] tags must have a corresponding [ label ] tag. ",init(i,r){const t=[],a=[];i.addListener("tagstart",n=>{const s=n.tagName.toLowerCase(),l=i.getMapAttrs(n.attrs),o=n.col+s.length+1;s==="input"&&l.type!=="hidden"&&a.push({event:n,col:o,id:l.id}),s==="label"&&"for"in l&&l.for!==""&&t.push({event:n,col:o,forValue:l.for})}),i.addListener("end",()=>{a.forEach(n=>{e(n)||r.warn("No matching [ label ] tag found.",n.event.line,n.col,this,n.event.raw)})});function e(n){let s=!1;return t.forEach(l=>{n.id&&n.id===l.forValue&&(s=!0)}),s}m(e,"c"),Re(e,"hasMatchingLabelTag")}},je={id:"script-disabled",description:"The <script> tag cannot be used.",init(i,r){i.addListener("tagstart",t=>{t.tagName.toLowerCase()==="script"&&r.error("The <script> tag cannot be used.",t.line,t.col,this,t.raw)})}},ze={id:"space-tab-mixed-disabled",description:"Do not mix tabs and spaces for indentation.",init(i,r,t){let a="nomix",e=null;if(typeof t=="string"){const n=/^([a-z]+)(\d+)?/.exec(t);n&&(a=n[1],e=n[2]&&parseInt(n[2],10))}i.addListener("text",n=>{const s=n.raw,l=/(^|\r?\n)([ \t]+)/g;let o;for(;o=l.exec(s);){const c=i.fixPos(n,o.index+o[1].length);if(c.col!==1)continue;const d=o[2];a==="space"?e?(/^ +$/.test(d)===!1||d.length%e!==0)&&r.warn(`Please use space for indentation and keep ${e} length.`,c.line,1,this,n.raw):/^ +$/.test(d)===!1&&r.warn("Please use space for indentation.",c.line,1,this,n.raw):a==="tab"&&/^\t+$/.test(d)===!1?r.warn("Please use tab for indentation.",c.line,1,this,n.raw):/ +\t|\t+ /.test(d)===!0&&r.warn("Do not mix tabs and spaces for indentation.",c.line,1,this,n.raw)}})}},De={id:"spec-char-escape",description:"Special characters must be escaped.",init(i,r){i.addListener("text",t=>{const a=t.raw,e=/([<>])|( \& )/g;let n;for(;n=e.exec(a);){const s=i.fixPos(t,n.index);r.error(`Special characters must be escaped : [ ${n[0]} ].`,s.line,s.col,this,t.raw)}})}},Pe={id:"src-not-empty",description:"The src attribute of an img(script,link) must have a value.",init(i,r){i.addListener("tagstart",t=>{const a=t.tagName,e=t.attrs;let n;const s=t.col+a.length+1;for(let l=0,o=e.length;l<o;l++)n=e[l],(/^(img|script|embed|bgsound|iframe)$/.test(a)===!0&&n.name==="src"||a==="link"&&n.name==="href"||a==="object"&&n.name==="data")&&n.value===""&&r.error(`The attribute [ ${n.name} ] of the tag [ ${a} ] must have a value.`,t.line,s+n.index,this,n.raw)})}},Me={id:"style-disabled",description:"<style> tags cannot be used.",init(i,r){i.addListener("tagstart",t=>{t.tagName.toLowerCase()==="style"&&r.warn("The <style> tag cannot be used.",t.line,t.col,this,t.raw)})}},Ue={id:"tag-pair",description:"Tag must be paired.",init(i,r){const t=[],a=i.makeMap("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");i.addListener("tagstart",e=>{const n=e.tagName;a[n]===void 0&&!e.close&&t.push({tagName:n,line:e.line,raw:e.raw})}),i.addListener("tagend",e=>{const n=e.tagName;let s;for(s=t.length-1;s>=0&&t[s].tagName!==n;s--);if(s>=0){const l=[];for(let o=t.length-1;o>s;o--)l.push(`</${t[o].tagName}>`);if(l.length>0){const o=t[t.length-1];r.error(`Tag must be paired, missing: [ ${l.join("")} ], start tag match failed [ ${o.raw} ] on line ${o.line}.`,e.line,e.col,this,e.raw)}t.length=s}else r.error(`Tag must be paired, no start tag: [ ${e.raw} ]`,e.line,e.col,this,e.raw)}),i.addListener("end",e=>{const n=[];for(let s=t.length-1;s>=0;s--)n.push(`</${t[s].tagName}>`);if(n.length>0){const s=t[t.length-1];r.error(`Tag must be paired, missing: [ ${n.join("")} ], open tag match failed [ ${s.raw} ] on line ${s.line}.`,e.line,e.col,this,"")}})}},Ze={id:"tag-self-close",description:"Empty tags must be self closed.",init(i,r){const t=i.makeMap("area,base,basefont,bgsound,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");i.addListener("tagstart",a=>{const e=a.tagName.toLowerCase();t[e]!==void 0&&(a.close||r.warn(`The empty tag : [ ${e} ] must be self closed.`,a.line,a.col,this,a.raw))})}},Ie={id:"empty-tag-not-self-closed",description:"Empty tags must not use self closed syntax.",init(i,r){const t=i.makeMap("area,base,basefont,bgsound,br,col,frame,hr,img,input,isindex,link,meta,param,embed,track,command,source,keygen,wbr");i.addListener("tagstart",a=>{const e=a.tagName.toLowerCase();t[e]!==void 0&&a.close&&r.error(`The empty tag : [ ${e} ] must not use self closed syntax.`,a.line,a.col,this,a.raw)})}},_e={id:"tagname-lowercase",description:"All html element names must be in lowercase.",init(i,r,t){const a=Array.isArray(t)?t:[];i.addListener("tagstart,tagend",e=>{const n=e.tagName;a.indexOf(n)===-1&&n!==n.toLowerCase()&&r.error(`The html element name of [ ${n} ] must be in lowercase.`,e.line,e.col,this,e.raw)})}},Be={id:"tagname-specialchars",description:"All special characters must be escaped.",init(i,r){const t=/[^a-zA-Z0-9\-:_]/;i.addListener("tagstart,tagend",a=>{const e=a.tagName;t.test(e)&&r.error(`The html element name of [ ${e} ] contains special character.`,a.line,a.col,this,a.raw)})}},Fe=Object.defineProperty,D=m((i,r)=>Fe(i,"name",{value:r,configurable:!0}),"l"),Ve={id:"title-require",description:"<title> must be present in <head> tag.",init(i,r){let t=!1,a=!1;const e=D(s=>{const l=s.tagName.toLowerCase();l==="head"?t=!0:l==="title"&&t&&(a=!0)},"onTagStart"),n=D(s=>{const l=s.tagName.toLowerCase();if(a&&l==="title"){const o=s.lastEvent;(o.type!=="text"||o.type==="text"&&/^\s*$/.test(o.raw)===!0)&&r.error("<title></title> must not be empty.",s.line,s.col,this,s.raw)}else l==="head"&&(a===!1&&r.error("<title> must be present in <head> tag.",s.line,s.col,this,s.raw),i.removeListener("tagstart",e),i.removeListener("tagend",n))},"onTagEnd");i.addListener("tagstart",e),i.addListener("tagend",n)}},He=Object.defineProperty,P=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,M=m((i,r,t)=>r in i?He(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t,"y"),U=m((i,r)=>{for(var t in r||(r={}))Ye.call(r,t)&&M(i,t,r[t]);if(P)for(var t of P(r))We.call(r,t)&&M(i,t,r[t]);return i},"h$1");let A={a:{selfclosing:!1,attrsRequired:["href","title"],redundantAttrs:["alt"]},div:{selfclosing:!1},main:{selfclosing:!1,redundantAttrs:["role"]},nav:{selfclosing:!1,redundantAttrs:["role"]},script:{attrsOptional:[["async","async"],["defer","defer"]]},img:{selfclosing:!0,attrsRequired:["src","alt","title"]}};var Je={id:"tags-check",description:"Checks html tags.",init(i,r,t){A=U(U({},A),t),i.addListener("tagstart",a=>{const e=a.attrs,n=a.col+a.tagName.length+1,s=a.tagName.toLowerCase();if(A[s]){const l=A[s];l.selfclosing===!0&&!a.close?r.warn(`The <${s}> tag must be selfclosing.`,a.line,a.col,this,a.raw):l.selfclosing===!1&&a.close&&r.warn(`The <${s}> tag must not be selfclosing.`,a.line,a.col,this,a.raw),Array.isArray(l.attrsRequired)&&l.attrsRequired.forEach(o=>{if(Array.isArray(o)){const c=o.map(h=>h),d=c.shift(),u=c;e.some(h=>h.name===d)?e.forEach(h=>{h.name===d&&u.indexOf(h.value)===-1&&r.error(`The <${s}> tag must have attr '${d}' with one value of '${u.join("' or '")}'.`,a.line,n,this,a.raw)}):r.error(`The <${s}> tag must have attr '${d}'.`,a.line,n,this,a.raw)}else e.some(c=>o.split("|").indexOf(c.name)!==-1)||r.error(`The <${s}> tag must have attr '${o}'.`,a.line,n,this,a.raw)}),Array.isArray(l.attrsOptional)&&l.attrsOptional.forEach(o=>{if(Array.isArray(o)){const c=o.map(h=>h),d=c.shift(),u=c;e.some(h=>h.name===d)&&e.forEach(h=>{h.name===d&&u.indexOf(h.value)===-1&&r.error(`The <${s}> tag must have optional attr '${d}' with one value of '${u.join("' or '")}'.`,a.line,n,this,a.raw)})}}),Array.isArray(l.redundantAttrs)&&l.redundantAttrs.forEach(o=>{e.some(c=>c.name===o)&&r.error(`The attr '${o}' is redundant for <${s}> and should be omitted.`,a.line,n,this,a.raw)})}})}},Qe={id:"attr-no-unnecessary-whitespace",description:"No spaces between attribute names and values.",init(i,r,t){const a=Array.isArray(t)?t:[];i.addListener("tagstart",e=>{const n=e.attrs,s=e.col+e.tagName.length+1;for(let l=0;l<n.length;l++)if(a.indexOf(n[l].name)===-1){const o=/(\s*)=(\s*)/.exec(n[l].raw.trim());o&&(o[1].length!==0||o[2].length!==0)&&r.error(`The attribute '${n[l].name}' must not have spaces between the name and value.`,e.line,s+n[l].index,this,n[l].raw)}})}},Z=Object.freeze({__proto__:null,altRequire:V,attrLowercase:J,attrSort:Q,attrNoDuplication:X,attrUnsafeChars:G,attrValueDoubleQuotes:K,attrValueNotEmpty:ee,attrValueSingleQuotes:te,attrWhitespace:ae,doctypeFirst:ne,doctypeHTML5:le,headScriptDisabled:ce,hrefAbsOrRel:de,htmlLangRequire:Ae,idClsasAdDisabled:Ne,idClassValue:Ce,idUnique:ke,inlineScriptDisabled:Ee,inlineStyleDisabled:Oe,inputRequiresLabel:Se,scriptDisabled:je,spaceTabMixedDisabled:ze,specCharEscape:De,srcNotEmpty:Pe,styleDisabled:Me,tagPair:Ue,tagSelfClose:Ze,emptyTagNotSelfClosed:Ie,tagnameLowercase:_e,tagnameSpecialChars:Be,titleRequire:Ve,tagsCheck:Je,attrNoUnnecessaryWhitespace:Qe}),Xe=Object.defineProperty,I=m((i,r)=>Xe(i,"name",{value:r,configurable:!0}),"g");class O{constructor(){this.rules={},this.defaultRuleset={"tagname-lowercase":!0,"attr-lowercase":!0,"attr-value-double-quotes":!0,"doctype-first":!0,"tag-pair":!0,"spec-char-escape":!0,"id-unique":!0,"src-not-empty":!0,"attr-no-duplication":!0,"title-require":!0},this.parser=new k}addRule(r){this.rules[r.id]=r}verify(r,t=this.defaultRuleset){Object.keys(t).length===0&&(t=this.defaultRuleset),r=r.replace(/^\s*<!--\s*htmlhint\s+([^\r\n]+?)\s*-->/i,(l,o)=>(o.replace(/(?:^|,)\s*([^:,]+)\s*(?:\:\s*([^,\s]+))?/g,(c,d,u)=>(t[d]=u!==void 0&&u.length>0?JSON.parse(u):!0,"")),""));const a=this.parser,e=new E(r,t),n=this.rules;let s;for(const l in t)s=n[l],s!==void 0&&t[l]!==!1&&s.init(a,e,t[l]);return a.parse(r),e.messages}format(r,t={}){const a=[],e={white:"",grey:"",red:"",reset:""};t.colors&&(e.white="\x1B[37m",e.grey="\x1B[90m",e.red="\x1B[31m",e.reset="\x1B[39m");const n=t.indent||0;return r.forEach(s=>{let l=s.evidence;const o=s.line,c=s.col,d=l.length;let u=c>40+1?c-40:1,h=l.length>c+60?c+60:d;c<40+1&&(h+=40-c+1),l=l.replace(/\t/g," ").substring(u-1,h),u>1&&(l=`...${l}`,u-=3),h<d&&(l+="..."),a.push(`${e.white+N(n)}L${o} |${e.grey}${l}${e.reset}`);let p=c-u;const b=l.substring(0,p).match(/[^\u0000-\u00ff]/g);b!==null&&(p+=b.length),a.push(`${e.white+N(n)+N(String(o).length+3+p)}^ ${e.red}${s.message} (${s.rule.id})${e.reset}`)}),a}}m(O,"W"),I(O,"HTMLHintCore");function N(i,r){return new Array(i+1).join(r||" ")}m(N,"h"),I(N,"repeatStr");const _=new O;Object.keys(Z).forEach(i=>{_.addRule(Z[i])}),window.Tangible=window.Tangible||{},window.Tangible.HTMLHint=_})();
