var an=Object.defineProperty;var T=(Me,xe)=>an(Me,"name",{value:xe,configurable:!0});(function(){"use strict";(function(){const i={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,i);return}}catch(e){}globalThis.process={env:i}})();var Me=Object.defineProperty,xe=T((i,e)=>Me(i,"name",{value:e,configurable:!0}),"e$2");const Te=T(class{static flip(e){return e===Te.HORZ?Te.VERT:Te.HORZ}constructor(e){this._name=e}getName(){return this._name}toString(){return this._name}},"t");let y=Te;xe(y,"Orientation"),y.HORZ=new Te("horz"),y.VERT=new Te("vert");var wt=Object.defineProperty,yt=T((i,e)=>wt(i,"name",{value:e,configurable:!0}),"r$5");class L{static empty(){return new L(0,0,0,0)}constructor(e,t,n,o){this.x=e,this.y=t,this.width=n,this.height=o}static fromElement(e){let{x:t,y:n,width:o,height:s}=e.getBoundingClientRect();return new L(t,n,o,s)}clone(){return new L(this.x,this.y,this.width,this.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom()}removeInsets(e){return new L(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===y.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}T(L,"Rect"),yt(L,"Rect");var Ot=Object.defineProperty,Lt=T((i,e)=>Ot(i,"name",{value:e,configurable:!0}),"T$1");const U=T(class{static getByName(e){return U.values[e]}static getLocation(e,t,n){if(t=(t-e.x)/e.width,n=(n-e.y)/e.height,t>=.25&&t<.75&&n>=.25&&n<.75)return U.CENTER;const o=n>=t,s=n>=1-t;return o?s?U.BOTTOM:U.LEFT:s?U.RIGHT:U.TOP}constructor(e,t,n){this._name=e,this._orientation=t,this._indexPlus=n,U.values[this._name]=this}getName(){return this._name}getOrientation(){return this._orientation}getDockRect(e){return this===U.TOP?new L(e.x,e.y,e.width,e.height/2):this===U.BOTTOM?new L(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===U.LEFT?new L(e.x,e.y,e.width/2,e.height):this===U.RIGHT?new L(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,t){if(this===U.TOP){const n=new L(e.x,e.y,e.width,t),o=new L(e.x,e.y+t,e.width,e.height-t);return{start:n,end:o}}else if(this===U.LEFT){const n=new L(e.x,e.y,t,e.height),o=new L(e.x+t,e.y,e.width-t,e.height);return{start:n,end:o}}if(this===U.RIGHT){const n=new L(e.getRight()-t,e.y,t,e.height),o=new L(e.x,e.y,e.width-t,e.height);return{start:n,end:o}}else{const n=new L(e.x,e.getBottom()-t,e.width,t),o=new L(e.x,e.y,e.width,e.height-t);return{start:n,end:o}}}reflect(){return this===U.TOP?U.BOTTOM:this===U.LEFT?U.RIGHT:this===U.RIGHT?U.LEFT:U.TOP}toString(){return"(DockLocation: name="+this._name+", orientation="+this._orientation+")"}},"n");let v=U;Lt(v,"DockLocation"),v.values={},v.TOP=new U("top",y.VERT,0),v.BOTTOM=new U("bottom",y.VERT,1),v.LEFT=new U("left",y.HORZ,0),v.RIGHT=new U("right",y.HORZ,1),v.CENTER=new U("center",y.VERT,0);var At=Object.defineProperty,Rt=T((i,e)=>At(i,"name",{value:e,configurable:!0}),"l$5");const Nt=!!(typeof window!="undefined"&&window.document&&window.document.createElement),Xe=T(class{constructor(){this._manualGlassManagement=!1,this._startX=0,this._startY=0,this._dragDepth=0,this._glassShowing=!1,this._dragging=!1,this._active=!1,Nt&&(this._glass=document.createElement("div"),this._glass.style.zIndex="998",this._glass.style.backgroundColor="transparent",this._glass.style.outline="none"),this._defaultGlassCursor="default",this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onKeyPress=this._onKeyPress.bind(this),this._onDragCancel=this._onDragCancel.bind(this),this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this.resizeGlass=this.resizeGlass.bind(this),this._lastClick=0,this._clickX=0,this._clickY=0}addGlass(e){var t;this._glassShowing?this._manualGlassManagement=!0:(this._document||(this._document=window.document),this._rootElement||(this._rootElement=this._document.body),this.resizeGlass(),(t=this._document.defaultView)==null||t.addEventListener("resize",this.resizeGlass),this._document.body.appendChild(this._glass),this._glass.tabIndex=-1,this._glass.focus(),this._glass.addEventListener("keydown",this._onKeyPress),this._glass.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._glass.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._glass.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._glassShowing=!0,this._fDragCancel=e,this._manualGlassManagement=!1)}resizeGlass(){L.fromElement(this._rootElement).positionElement(this._glass,"fixed")}hideGlass(){var e;this._glassShowing&&(this._document.body.removeChild(this._glass),(e=this._document.defaultView)==null||e.removeEventListener("resize",this.resizeGlass),this._glassShowing=!1,this._document=void 0,this._rootElement=void 0,this.setGlassCursorOverride(void 0))}_updateGlassCursor(){var e;this._glass.style.cursor=(e=this._glassCursorOverride)!=null?e:this._defaultGlassCursor}_setDefaultGlassCursor(e){this._defaultGlassCursor=e,this._updateGlassCursor()}setGlassCursorOverride(e){this._glassCursorOverride=e,this._updateGlassCursor()}startDrag(e,t,n,o,s,a,r,l,c){if(e&&this._lastEvent&&this._lastEvent.type.startsWith("touch")&&e.type.startsWith("mouse")&&e.timeStamp-this._lastEvent.timeStamp<500)return;this._lastEvent=e,l?this._document=l:this._document=window.document,c?this._rootElement=c:this._rootElement=this._document.body;const h=this._getLocationEvent(e);this.addGlass(s),this._dragging&&console.warn("this._dragging true on startDrag should never happen"),e?(this._startX=h.clientX,this._startY=h.clientY,(!window.matchMedia||window.matchMedia("(pointer: fine)").matches)&&this._setDefaultGlassCursor(getComputedStyle(e.target).cursor),this._stopPropagation(e),this._preventDefault(e)):(this._startX=0,this._startY=0,this._setDefaultGlassCursor("default")),this._dragging=!1,this._fDragStart=t,this._fDragMove=n,this._fDragEnd=o,this._fDragCancel=s,this._fClick=a,this._fDblClick=r,this._active=!0,(e==null?void 0:e.type)==="dragenter"?(this._dragDepth=1,this._rootElement.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._rootElement.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._rootElement.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._document.addEventListener("dragend",this._onDragCancel,{passive:!1}),this._document.addEventListener("drop",this._onMouseUp,{passive:!1})):(this._document.addEventListener("mouseup",this._onMouseUp,{passive:!1}),this._document.addEventListener("mousemove",this._onMouseMove,{passive:!1}),this._document.addEventListener("touchend",this._onMouseUp,{passive:!1}),this._document.addEventListener("touchmove",this._onMouseMove,{passive:!1}))}isDragging(){return this._dragging}isActive(){return this._active}toString(){return"(DragDrop: startX="+this._startX+", startY="+this._startY+", dragging="+this._dragging+")"}_onKeyPress(e){e.keyCode===27&&this._onDragCancel()}_onDragCancel(){this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this.hideGlass(),this._fDragCancel!==void 0&&this._fDragCancel(this._dragging),this._dragging=!1,this._active=!1}_getLocationEvent(e){let t=e;return e&&e.touches&&(t=e.touches[0]),t}_getLocationEventEnd(e){let t=e;return e.changedTouches&&(t=e.changedTouches[0]),t}_stopPropagation(e){e.stopPropagation&&e.stopPropagation()}_preventDefault(e){return e.preventDefault&&e.cancelable&&e.preventDefault(),e}_onMouseMove(e){this._lastEvent=e;const t=this._getLocationEvent(e);return this._stopPropagation(e),this._preventDefault(e),!this._dragging&&(Math.abs(this._startX-t.clientX)>5||Math.abs(this._startY-t.clientY)>5)&&(this._dragging=!0,this._fDragStart&&(this._setDefaultGlassCursor("move"),this._dragging=this._fDragStart({clientX:this._startX,clientY:this._startY}))),this._dragging&&this._fDragMove&&this._fDragMove(t),!1}_onMouseUp(e){this._lastEvent=e;const t=this._getLocationEventEnd(e);if(this._stopPropagation(e),this._preventDefault(e),this._active=!1,this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this._manualGlassManagement||this.hideGlass(),this._dragging)this._dragging=!1,this._fDragEnd&&this._fDragEnd(e);else if(this._fDragCancel&&this._fDragCancel(this._dragging),Math.abs(this._startX-t.clientX)<=5&&Math.abs(this._startY-t.clientY)<=5){let n=!1;const o=new Date().getTime();Math.abs(this._clickX-t.clientX)<=5&&Math.abs(this._clickY-t.clientY)<=5&&o-this._lastClick<500&&this._fDblClick&&(this._fDblClick(e),n=!0),!n&&this._fClick&&this._fClick(e),this._lastClick=o,this._clickX=t.clientX,this._clickY=t.clientY}return!1}_onDragEnter(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth++,!1}_onDragLeave(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth--,this._dragDepth<=0&&this._onDragCancel(),!1}},"n");let q=Xe;Rt(q,"DragDrop"),q.instance=new Xe;var St=Object.defineProperty,Dt=T((i,e)=>St(i,"name",{value:e,configurable:!0}),"s$7");class Z{constructor(e,t){this.type=e,this.data=t}}T(Z,"Action"),Dt(Z,"Action");var Bt=Object.defineProperty,Ct=T((i,e)=>Bt(i,"name",{value:e,configurable:!0}),"r$4");const Q=T(class{static addNode(e,t,n,o,s){return new Z(Q.ADD_NODE,{json:e,toNode:t,location:n.getName(),index:o,select:s})}static moveNode(e,t,n,o,s){return new Z(Q.MOVE_NODE,{fromNode:e,toNode:t,location:n.getName(),index:o,select:s})}static deleteTab(e){return new Z(Q.DELETE_TAB,{node:e})}static deleteTabset(e){return new Z(Q.DELETE_TABSET,{node:e})}static renameTab(e,t){return new Z(Q.RENAME_TAB,{node:e,text:t})}static selectTab(e){return new Z(Q.SELECT_TAB,{tabNode:e})}static setActiveTabset(e){return new Z(Q.SET_ACTIVE_TABSET,{tabsetNode:e})}static adjustSplit(e){const t=e.node1Id,n=e.node2Id;return new Z(Q.ADJUST_SPLIT,{node1:t,weight1:e.weight1,pixelWidth1:e.pixelWidth1,node2:n,weight2:e.weight2,pixelWidth2:e.pixelWidth2})}static adjustBorderSplit(e,t){return new Z(Q.ADJUST_BORDER_SPLIT,{node:e,pos:t})}static maximizeToggle(e){return new Z(Q.MAXIMIZE_TOGGLE,{node:e})}static updateModelAttributes(e){return new Z(Q.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,t){return new Z(Q.UPDATE_NODE_ATTRIBUTES,{node:e,json:t})}static floatTab(e){return new Z(Q.FLOAT_TAB,{node:e})}static unFloatTab(e){return new Z(Q.UNFLOAT_TAB,{node:e})}},"e");let f=Q;Ct(f,"Actions"),f.ADD_NODE="FlexLayout_AddNode",f.MOVE_NODE="FlexLayout_MoveNode",f.DELETE_TAB="FlexLayout_DeleteTab",f.DELETE_TABSET="FlexLayout_DeleteTabset",f.RENAME_TAB="FlexLayout_RenameTab",f.SELECT_TAB="FlexLayout_SelectTab",f.SET_ACTIVE_TABSET="FlexLayout_SetActiveTabset",f.ADJUST_SPLIT="FlexLayout_AdjustSplit",f.ADJUST_BORDER_SPLIT="FlexLayout_AdjustBorderSplit",f.MAXIMIZE_TOGGLE="FlexLayout_MaximizeToggle",f.UPDATE_MODEL_ATTRIBUTES="FlexLayout_UpdateModelAttributes",f.UPDATE_NODE_ATTRIBUTES="FlexLayout_UpdateNodeAttributes",f.FLOAT_TAB="FlexLayout_FloatTab",f.UNFLOAT_TAB="FlexLayout_UnFloatTab";var Mt=Object.defineProperty,xt=T((i,e)=>Mt(i,"name",{value:e,configurable:!0}),"s$6");class m{constructor(e,t,n,o){this.name=e,this.modelName=t,this.defaultValue=n,this.alwaysWriteJson=o,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}}T(m,"Attribute"),xt(m,"Attribute"),m.NUMBER="number",m.STRING="string",m.BOOLEAN="boolean";var It=Object.defineProperty,Ut=T((i,e)=>It(i,"name",{value:e,configurable:!0}),"h$2");class he{constructor(){this.attributes=[],this.nameToAttribute={}}addWithAll(e,t,n,o){const s=new m(e,t,n,o);return this.attributes.push(s),this.nameToAttribute[e]=s,s}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,n){return this.addWithAll(e,void 0,t,n)}getAttributes(){return this.attributes}getModelName(e){const t=this.nameToAttribute[e];if(t!==void 0)return t.modelName}toJson(e,t){for(const n of this.attributes){const o=t[n.name];(n.alwaysWriteJson||o!==n.defaultValue)&&(e[n.name]=o)}}fromJson(e,t){for(const n of this.attributes){const o=e[n.name];o===void 0?t[n.name]=n.defaultValue:t[n.name]=o}}update(e,t){for(const n of this.attributes)if(e.hasOwnProperty(n.name)){const o=e[n.name];o===void 0?delete t[n.name]:t[n.name]=o}}setDefaults(e){for(const t of this.attributes)e[t.name]=t.defaultValue}toTypescriptInterface(e,t){const n=[],o=this.attributes.sort((s,a)=>s.name.localeCompare(a.name));n.push("export interface I"+e+"Attributes {");for(let s=0;s<o.length;s++){const a=o[s];let r=a.type,l,c=a,h;c.defaultValue!==void 0?l=c.defaultValue:c.modelName!==void 0&&t!==void 0&&t.nameToAttribute[c.modelName]!==void 0&&(h=c.modelName,c=t.nameToAttribute[c.modelName],l=c.defaultValue,r=c.type);let d=JSON.stringify(l);const p=c.required||c.fixed?"":"?";if(a.fixed)n.push("	"+a.name+": "+d+";");else{const u=(l!==void 0?"default: "+d:"")+(h!==void 0?" - inherited from global "+h:"");n.push("	"+a.name+p+": "+r+";"+(u.length>0?" // "+u:""))}}return n.push("}"),n.join(`
`)}}T(he,"AttributeDefinitions"),Ut(he,"AttributeDefinitions");var Ft=Object.defineProperty,zt=T((i,e)=>Ft(i,"name",{value:e,configurable:!0}),"r$2");class ${constructor(e,t,n,o,s){this.node=e,this.rect=t,this.location=n,this.index=o,this.className=s}}T($,"DropInfo"),zt($,"DropInfo");var _=(i=>(i.FLEXLAYOUT__BORDER="flexlayout__border",i.FLEXLAYOUT__BORDER_="flexlayout__border_",i.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",i.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",i.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",i.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",i.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",i.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",i.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",i.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",i.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",i.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",i.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",i.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",i.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",i.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",i.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",i.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",i.FLEXLAYOUT__FLOATING_WINDOW_TAB="flexlayout__floating_window_tab",i.FLEXLAYOUT__LAYOUT="flexlayout__layout",i.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",i.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",i.FLEXLAYOUT__SPLITTER="flexlayout__splitter",i.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",i.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",i.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",i.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",i.FLEXLAYOUT__TAB="flexlayout__tab",i.FLEXLAYOUT__TABSET="flexlayout__tabset",i.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",i.FLEXLAYOUT__TABSET_HEADER_SIZER="flexlayout__tabset_header_sizer",i.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",i.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",i.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",i.FLEXLAYOUT__TABSET_SIZER="flexlayout__tabset_sizer",i.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",i.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",i.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",i.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",i.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",i.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",i.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",i.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",i.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",i.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",i.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",i.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",i.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",i.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",i.FLEXLAYOUT__TAB_FLOATING="flexlayout__tab_floating",i.FLEXLAYOUT__TAB_FLOATING_INNER="flexlayout__tab_floating_inner",i.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",i.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",i.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",i.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",i.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",i))(_||{}),Pt=Object.defineProperty,Yt=T((i,e)=>Pt(i,"name",{value:e,configurable:!0}),"d$3");class pe{constructor(e){this._dirty=!1,this._tempSize=0,this._model=e,this._attributes={},this._children=[],this._fixed=!1,this._rect=L.empty(),this._visible=!1,this._listeners={}}getId(){let e=this._attributes.id;return e!==void 0||(e=this._model._nextUniqueId(),this._setId(e)),e}getModel(){return this._model}getType(){return this._attributes.type}getParent(){return this._parent}getChildren(){return this._children}getRect(){return this._rect}isVisible(){return this._visible}getOrientation(){return this._parent===void 0?this._model.isRootOrientationVertical()?y.VERT:y.HORZ:y.flip(this._parent.getOrientation())}setEventListener(e,t){this._listeners[e]=t}removeEventListener(e){delete this._listeners[e]}_setId(e){this._attributes.id=e}_fireEvent(e,t){this._listeners[e]!==void 0&&this._listeners[e](t)}_getAttr(e){let t=this._attributes[e];if(t===void 0){const n=this._getAttributeDefinitions().getModelName(e);n!==void 0&&(t=this._model._getAttribute(n))}return t}_forEachNode(e,t){e(this,t),t++;for(const n of this._children)n._forEachNode(e,t)}_setVisible(e){e!==this._visible&&(this._fireEvent("visibility",{visible:e}),this._visible=e)}_getDrawChildren(){return this._children}_setParent(e){this._parent=e}_setRect(e){this._rect=e}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}_isFixed(){return this._fixed}_layout(e,t){this._rect=e}_findDropTargetNode(e,t,n){let o;if(this._rect.contains(t,n)){if(this._model.getMaximizedTabset()!==void 0)o=this._model.getMaximizedTabset().canDrop(e,t,n);else if(o=this.canDrop(e,t,n),o===void 0&&this._children.length!==0){for(const s of this._children)if(o=s._findDropTargetNode(e,t,n),o!==void 0)break}}return o}canDrop(e,t,n){}_canDockInto(e,t){if(t!=null){if(t.location===v.CENTER&&t.node.isEnableDrop()===!1||t.location===v.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||t.location!==v.CENTER&&t.node.isEnableDivide()===!1)return!1;if(this._model._getOnAllowDrop())return this._model._getOnAllowDrop()(e,t)}return!0}_removeChild(e){const t=this._children.indexOf(e);return t!==-1&&this._children.splice(t,1),this._dirty=!0,t}_addChild(e,t){return t!=null?this._children.splice(t,0,e):(this._children.push(e),t=this._children.length-1),e._parent=this,this._dirty=!0,t}_removeAll(){this._children=[],this._dirty=!0}_styleWithPosition(e){return e==null&&(e={}),this._rect.styleWithPosition(e)}_getTempSize(){return this._tempSize}_setTempSize(e){this._tempSize=e}isEnableDivide(){return!0}_toAttributeString(){return JSON.stringify(this._attributes,void 0,"	")}}T(pe,"Node"),Yt(pe,"Node");var Ht=Object.defineProperty,Xt=T((i,e)=>Ht(i,"name",{value:e,configurable:!0}),"r$1");const We=T(class extends pe{constructor(e){super(e),this._fixed=!0,this._attributes.type=We.TYPE,e._addNode(this)}getWidth(){return this._model.getSplitterSize()}getMinWidth(){return this.getOrientation()===y.VERT?this._model.getSplitterSize():0}getHeight(){return this._model.getSplitterSize()}getMinHeight(){return this.getOrientation()===y.HORZ?this._model.getSplitterSize():0}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getWeight(){return 0}_setWeight(e){}_getPrefSize(e){return this._model.getSplitterSize()}_updateAttrs(e){}_getAttributeDefinitions(){return new he}toJson(){}},"i");let le=We;Xt(le,"SplitterNode"),le.TYPE="splitter";var Wt=Object.defineProperty,kt=T((i,e)=>Wt(i,"name",{value:e,configurable:!0}),"s$4");const de=T(class extends pe{constructor(e,t,n=!0){super(e),this._extra={},de._attributeDefinitions.fromJson(t,this._attributes),n===!0&&e._addNode(this)}static _fromJson(e,t,n=!0){return new de(t,e,n)}static _createAttributeDefinitions(){const e=new he;return e.add("type",de.TYPE,!0).setType(m.STRING),e.add("id",void 0).setType(m.STRING),e.add("name","[Unnamed Tab]").setType(m.STRING),e.add("altName",void 0).setType(m.STRING),e.add("helpText",void 0).setType(m.STRING),e.add("component",void 0).setType(m.STRING),e.add("config",void 0).setType("any"),e.add("floating",!1).setType(m.BOOLEAN),e.addInherited("enableClose","tabEnableClose").setType(m.BOOLEAN),e.addInherited("closeType","tabCloseType").setType("ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(m.BOOLEAN),e.addInherited("enableRename","tabEnableRename").setType(m.BOOLEAN),e.addInherited("className","tabClassName").setType(m.STRING),e.addInherited("icon","tabIcon").setType(m.STRING),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(m.BOOLEAN),e.addInherited("enableFloat","tabEnableFloat").setType(m.BOOLEAN),e.addInherited("borderWidth","tabBorderWidth").setType(m.NUMBER),e.addInherited("borderHeight","tabBorderHeight").setType(m.NUMBER),e}getWindow(){return this._window}getTabRect(){return this._tabRect}_setTabRect(e){this._tabRect=e}_setRenderedName(e){this._renderedName=e}_getNameForOverflowMenu(){const e=this._getAttr("altName");return e!==void 0?e:this._renderedName}getName(){return this._getAttr("name")}getHelpText(){return this._getAttr("helpText")}getComponent(){return this._getAttr("component")}getConfig(){return this._attributes.config}getExtraData(){return this._extra}isFloating(){return this._getAttr("floating")}getIcon(){return this._getAttr("icon")}isEnableClose(){return this._getAttr("enableClose")}getCloseType(){return this._getAttr("closeType")}isEnableFloat(){return this._getAttr("enableFloat")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableRename(){return this._getAttr("enableRename")}getClassName(){return this._getAttr("className")}isEnableRenderOnDemand(){return this._getAttr("enableRenderOnDemand")}_setName(e){this._attributes.name=e,this._window&&this._window.document&&(this._window.document.title=e)}_setFloating(e){this._attributes.floating=e}_layout(e,t){e.equals(this._rect)||this._fireEvent("resize",{rect:e}),this._rect=e}_delete(){this._parent._remove(this),this._fireEvent("close",{})}toJson(){const e={};return de._attributeDefinitions.toJson(e,this._attributes),e}_updateAttrs(e){de._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return de._attributeDefinitions}_setWindow(e){this._window=e}_setBorderWidth(e){this._attributes.borderWidth=e}_setBorderHeight(e){this._attributes.borderHeight=e}static getAttributeDefinitions(){return de._attributeDefinitions}},"n");let F=de;kt(F,"TabNode"),F.TYPE="tab",F._attributeDefinitions=de._createAttributeDefinitions();var ke=Object.defineProperty,Gt=Object.defineProperties,jt=Object.getOwnPropertyDescriptors,Ge=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,je=T((i,e,t)=>e in i?ke(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"O"),Jt=T((i,e)=>{for(var t in e||(e={}))$t.call(e,t)&&je(i,t,e[t]);if(Ge)for(var t of Ge(e))Vt.call(e,t)&&je(i,t,e[t]);return i},"y"),Zt=T((i,e)=>Gt(i,jt(e)),"M$2"),Kt=T((i,e)=>ke(i,"name",{value:e,configurable:!0}),"x$1");const V=T(class extends pe{constructor(i,e){super(i),this._dirty=!0,this._drawChildren=[],this._minHeight=0,this._minWidth=0,V._attributeDefinitions.fromJson(e,this._attributes),i._addNode(this)}static _fromJson(i,e){const t=new V(e,i);if(i.children!=null)for(const n of i.children)if(n.type===x.TYPE){const o=x._fromJson(n,e);t._addChild(o)}else{const o=V._fromJson(n,e);t._addChild(o)}return t}static _createAttributeDefinitions(){const i=new he;return i.add("type",V.TYPE,!0).setType(m.STRING).setFixed(),i.add("id",void 0).setType(m.STRING),i.add("weight",100).setType(m.NUMBER),i.add("width",void 0).setType(m.NUMBER),i.add("height",void 0).setType(m.NUMBER),i}getWeight(){return this._attributes.weight}getWidth(){return this._getAttr("width")}getHeight(){return this._getAttr("height")}_setWeight(i){this._attributes.weight=i}_layout(i,e){super._layout(i,e);const t=this._rect._getSize(this.getOrientation());let n=0,o=0,s=0,a=0;const r=this._getDrawChildren();for(const u of r){const g=u._getPrefSize(this.getOrientation());u._isFixed()?g!==void 0&&(o+=g):g===void 0?n+=u.getWeight():(s+=g,a+=u.getWeight())}let l=!1,c=t-o-s;c<0&&(c=t-o,l=!0,n+=a);let h=0,d=0;for(const u of r){const g=u._getPrefSize(this.getOrientation());if(u._isFixed())g!==void 0&&u._setTempSize(g);else if(g==null||l){if(n===0)u._setTempSize(0);else{const E=u.getMinSize(this.getOrientation()),R=Math.floor(c*(u.getWeight()/n));u._setTempSize(Math.max(E,R))}d+=u._getTempSize()}else u._setTempSize(g);h+=u._getTempSize()}if(d>0){for(;h<t;)for(const u of r)if(!(u instanceof le)){const g=u._getPrefSize(this.getOrientation());!u._isFixed()&&(g===void 0||l)&&h<t&&(u._setTempSize(u._getTempSize()+1),h++)}for(;h>t;){let u=!1;for(const g of r)if(!(g instanceof le)){const E=g.getMinSize(this.getOrientation());g._getTempSize()>E&&h>t&&(g._setTempSize(g._getTempSize()-1),h--,u=!0)}if(!u)break}for(;h>t;){let u=!1;for(const g of r)g instanceof le||g._getTempSize()>0&&h>t&&(g._setTempSize(g._getTempSize()-1),h--,u=!0);if(!u)break}}let p=0;for(const u of r)this.getOrientation()===y.HORZ?u._layout(new L(this._rect.x+p,this._rect.y,u._getTempSize(),this._rect.height),e):u._layout(new L(this._rect.x,this._rect.y+p,this._rect.width,u._getTempSize()),e),p+=u._getTempSize();return!0}_getSplitterBounds(i,e=!1){const t=[0,0],n=this._getDrawChildren(),o=n.indexOf(i),s=n[o-1],a=n[o+1];if(this.getOrientation()===y.HORZ){const r=e?s.getMinWidth():0,l=e?a.getMinWidth():0;t[0]=s.getRect().x+r,t[1]=a.getRect().getRight()-i.getWidth()-l}else{const r=e?s.getMinHeight():0,l=e?a.getMinHeight():0;t[0]=s.getRect().y+r,t[1]=a.getRect().getBottom()-i.getHeight()-l}return t}_calculateSplit(i,e){let t;const n=this._getDrawChildren(),o=n.indexOf(i),s=this._getSplitterBounds(i),a=n[o-1].getWeight()+n[o+1].getWeight(),r=Math.max(0,e-s[0]),l=Math.max(0,s[1]-e);if(r+l>0){const c=r*a/(r+l),h=l*a/(r+l);t={node1Id:n[o-1].getId(),weight1:c,pixelWidth1:r,node2Id:n[o+1].getId(),weight2:h,pixelWidth2:l}}return t}_getDrawChildren(){if(this._dirty){this._drawChildren=[];for(let i=0;i<this._children.length;i++){const e=this._children[i];if(i!==0){const t=new le(this._model);t._setParent(this),this._drawChildren.push(t)}this._drawChildren.push(e)}this._dirty=!1}return this._drawChildren}getMinSize(i){return i===y.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this._minWidth}getMinHeight(){return this._minHeight}calcMinSize(){this._minHeight=0,this._minWidth=0;let i=!0;for(const e of this._children){const t=e;t instanceof V&&t.calcMinSize(),this.getOrientation()===y.VERT?(this._minHeight+=t.getMinHeight(),i||(this._minHeight+=this._model.getSplitterSize()),this._minWidth=Math.max(this._minWidth,t.getMinWidth())):(this._minWidth+=t.getMinWidth(),i||(this._minWidth+=this._model.getSplitterSize()),this._minHeight=Math.max(this._minHeight,t.getMinHeight())),i=!1}}_tidy(){let i=0;for(;i<this._children.length;){const e=this._children[i];if(e instanceof V){e._tidy();const t=e.getChildren();if(t.length===0)this._removeChild(e);else if(t.length===1){const n=t[0];if(this._removeChild(e),n instanceof V){let o=0;const s=n.getChildren();for(const a of s)o+=a.getWeight();for(let a=0;a<s.length;a++){const r=s[a];r._setWeight(e.getWeight()*r.getWeight()/o),this._addChild(r,i+a)}}else n._setWeight(e.getWeight()),this._addChild(n,i)}else i++}else e instanceof x&&e.getChildren().length===0&&e.isEnableDeleteWhenEmpty()?(this._removeChild(e),e===this._model.getMaximizedTabset()&&this._model._setMaximizedTabset(void 0)):i++}if(this===this._model.getRoot()&&this._children.length===0){const e=this._model._getOnCreateTabSet();let t=e?e():{};t=Zt(Jt({},t),{selected:-1});const n=new x(this._model,t);this._model._setActiveTabset(n),this._addChild(n)}}canDrop(i,e,t){const n=t-this._rect.y,o=e-this._rect.x,s=this._rect.width,a=this._rect.height,r=10,l=50;let c;if(this._model.isEnableEdgeDock()&&this._parent===void 0){if(e<this._rect.x+r&&n>a/2-l&&n<a/2+l){const h=v.LEFT,d=h.getDockRect(this._rect);d.width=d.width/2,c=new $(this,d,h,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(e>this._rect.getRight()-r&&n>a/2-l&&n<a/2+l){const h=v.RIGHT,d=h.getDockRect(this._rect);d.width=d.width/2,d.x+=d.width,c=new $(this,d,h,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t<this._rect.y+r&&o>s/2-l&&o<s/2+l){const h=v.TOP,d=h.getDockRect(this._rect);d.height=d.height/2,c=new $(this,d,h,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t>this._rect.getBottom()-r&&o>s/2-l&&o<s/2+l){const h=v.BOTTOM,d=h.getDockRect(this._rect);d.height=d.height/2,d.y+=d.height,c=new $(this,d,h,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(c!==void 0&&!i._canDockInto(i,c))return}return c}drop(i,e,t){const n=e,o=i.getParent();o&&o._removeChild(i),o!==void 0&&o.getType()===x.TYPE&&o._setSelected(0),o!==void 0&&o.getType()===k.TYPE&&o._setSelected(-1);let s;if(i instanceof x)s=i;else{const l=this._model._getOnCreateTabSet();s=new x(this._model,l?l(i):{}),s._addChild(i)}let a=this._children.reduce((l,c)=>l+c.getWeight(),0);a===0&&(a=100),s._setWeight(a/3);const r=!this._model.isRootOrientationVertical();if(r&&n===v.LEFT||!r&&n===v.TOP)this._addChild(s,0);else if(r&&n===v.RIGHT||!r&&n===v.BOTTOM)this._addChild(s);else if(r&&n===v.TOP||!r&&n===v.LEFT){const l=new V(this._model,{}),c=new V(this._model,{});c._setWeight(75),s._setWeight(25);for(const h of this._children)c._addChild(h);this._removeAll(),l._addChild(s),l._addChild(c),this._addChild(l)}else if(r&&n===v.BOTTOM||!r&&n===v.RIGHT){const l=new V(this._model,{}),c=new V(this._model,{});c._setWeight(75),s._setWeight(25);for(const h of this._children)c._addChild(h);this._removeAll(),l._addChild(c),l._addChild(s),this._addChild(l)}this._model._setActiveTabset(s),this._model._tidy()}toJson(){const i={};V._attributeDefinitions.toJson(i,this._attributes),i.children=[];for(const e of this._children)i.children.push(e.toJson());return i}isEnableDrop(){return!0}_getPrefSize(i){let e=this.getWidth();return i===y.VERT&&(e=this.getHeight()),e}_getAttributeDefinitions(){return V._attributeDefinitions}_updateAttrs(i){V._attributeDefinitions.update(i,this._attributes)}static getAttributeDefinitions(){return V._attributeDefinitions}},"g");let oe=V;Kt(oe,"RowNode"),oe.TYPE="row",oe._attributeDefinitions=V._createAttributeDefinitions();var qt=Object.defineProperty,Qt=T((i,e)=>qt(i,"name",{value:e,configurable:!0}),"p$2");const se=T(class extends pe{constructor(e,t){super(e),se._attributeDefinitions.fromJson(t,this._attributes),e._addNode(this),this._calculatedTabBarHeight=0,this._calculatedHeaderBarHeight=0}static _fromJson(e,t){const n=new se(t,e);if(e.children!=null)for(const o of e.children){const s=F._fromJson(o,t);n._addChild(s)}return n._children.length===0&&n._setSelected(-1),e.maximized&&e.maximized===!0&&t._setMaximizedTabset(n),e.active&&e.active===!0&&t._setActiveTabset(n),n}static _createAttributeDefinitions(){const e=new he;return e.add("type",se.TYPE,!0).setType(m.STRING).setFixed(),e.add("id",void 0).setType(m.STRING),e.add("weight",100).setType(m.NUMBER),e.add("width",void 0).setType(m.NUMBER),e.add("height",void 0).setType(m.NUMBER),e.add("selected",0).setType(m.NUMBER),e.add("name",void 0).setType(m.STRING),e.add("config",void 0).setType("any"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty"),e.addInherited("enableDrop","tabSetEnableDrop"),e.addInherited("enableDrag","tabSetEnableDrag"),e.addInherited("enableDivide","tabSetEnableDivide"),e.addInherited("enableMaximize","tabSetEnableMaximize"),e.addInherited("enableClose","tabSetEnableClose"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip"),e.addInherited("classNameHeader","tabSetClassNameHeader"),e.addInherited("enableTabStrip","tabSetEnableTabStrip"),e.addInherited("borderInsets","tabSetBorderInsets"),e.addInherited("marginInsets","tabSetMarginInsets"),e.addInherited("minWidth","tabSetMinWidth"),e.addInherited("minHeight","tabSetMinHeight"),e.addInherited("headerHeight","tabSetHeaderHeight"),e.addInherited("tabStripHeight","tabSetTabStripHeight"),e.addInherited("tabLocation","tabSetTabLocation"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(m.BOOLEAN),e}getName(){return this._getAttr("name")}getSelected(){const e=this._attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this._children[e]}getWeight(){return this._getAttr("weight")}getWidth(){return this._getAttr("width")}getMinWidth(){return this._getAttr("minWidth")}getHeight(){return this._getAttr("height")}getMinHeight(){return this._getAttr("minHeight")}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getConfig(){return this._attributes.config}isMaximized(){return this._model.getMaximizedTabset()===this}isActive(){return this._model.getActiveTabset()===this}isEnableDeleteWhenEmpty(){return this._getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this._getAttr("enableDrop")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableDivide(){return this._getAttr("enableDivide")}isEnableMaximize(){return this._getAttr("enableMaximize")}isEnableClose(){return this._getAttr("enableClose")}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset()===this?!0:!(this.getParent()===this.getModel().getRoot()&&this.getModel().getRoot().getChildren().length===1):!1}isEnableTabStrip(){return this._getAttr("enableTabStrip")}isAutoSelectTab(){return this._getAttr("autoSelectTab")}getClassNameTabStrip(){return this._getAttr("classNameTabStrip")}getClassNameHeader(){return this._getAttr("classNameHeader")}calculateHeaderBarHeight(e){const t=this._getAttr("headerHeight");t!==0?this._calculatedHeaderBarHeight=t:this._calculatedHeaderBarHeight=e.headerBarSize}calculateTabBarHeight(e){const t=this._getAttr("tabStripHeight");t!==0?this._calculatedTabBarHeight=t:this._calculatedTabBarHeight=e.tabBarSize}getHeaderHeight(){return this._calculatedHeaderBarHeight}getTabStripHeight(){return this._calculatedTabBarHeight}getTabLocation(){return this._getAttr("tabLocation")}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}canDrop(e,t,n){let o;if(e===this){const s=v.CENTER,a=this._tabHeaderRect;o=new $(this,a,s,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._contentRect.contains(t,n)){let s=v.CENTER;this._model.getMaximizedTabset()===void 0&&(s=v.getLocation(this._contentRect,t,n));const a=s.getDockRect(this._rect);o=new $(this,a,s,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._tabHeaderRect!=null&&this._tabHeaderRect.contains(t,n)){let s,a,r;if(this._children.length===0)s=this._tabHeaderRect.clone(),a=s.y+3,r=s.height-4,s.width=2;else{let l=this._children[0];s=l.getTabRect(),a=s.y,r=s.height;let c=this._tabHeaderRect.x,h=0;for(let d=0;d<this._children.length;d++){if(l=this._children[d],s=l.getTabRect(),h=s.x+s.width/2,t>=c&&t<h){const p=v.CENTER,u=new L(s.x-2,a,3,r);o=new $(this,u,p,d,_.FLEXLAYOUT__OUTLINE_RECT);break}c=h}}if(o==null){const l=v.CENTER,c=new L(s.getRight()-2,a,3,r);o=new $(this,c,l,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}if(e._canDockInto(e,o))return o}_layout(e,t){this.calculateHeaderBarHeight(t),this.calculateTabBarHeight(t),this.isMaximized()&&(e=this._model.getRoot().getRect()),e=e.removeInsets(this._getAttr("marginInsets")),this._rect=e,e=e.removeInsets(this._getAttr("borderInsets"));const n=this.getName()!==void 0;let o=0,s=0;n&&(o+=this._calculatedHeaderBarHeight,s+=this._calculatedHeaderBarHeight),this.isEnableTabStrip()&&(this.getTabLocation()==="top"?this._tabHeaderRect=new L(e.x,e.y+o,e.width,this._calculatedTabBarHeight):this._tabHeaderRect=new L(e.x,e.y+e.height-this._calculatedTabBarHeight,e.width,this._calculatedTabBarHeight),s+=this._calculatedTabBarHeight,this.getTabLocation()==="top"&&(o+=this._calculatedTabBarHeight)),this._contentRect=new L(e.x,e.y+o,e.width,e.height-s);for(let a=0;a<this._children.length;a++){const r=this._children[a];r._layout(this._contentRect,t),r._setVisible(a===this.getSelected())}}_delete(){this._parent._removeChild(this)}_remove(e){const t=this._removeChild(e);this._model._tidy(),ye(this,t)}drop(e,t,n,o){const s=t;if(this===e)return;let a=e.getParent(),r=0;if(a!==void 0&&(r=a._removeChild(e),a instanceof k&&a.getSelected()===r?a._setSelected(-1):ye(a,r)),e.getType()===F.TYPE&&a===this&&r<n&&n>0&&n--,s===v.CENTER){let l=n;if(l===-1&&(l=this._children.length),e.getType()===F.TYPE)this._addChild(e,l),(o||o!==!1&&this.isAutoSelectTab())&&this._setSelected(l);else{for(let c=0;c<e.getChildren().length;c++){const h=e.getChildren()[c];this._addChild(h,l),l++}this.getSelected()===-1&&this._children.length>0&&this._setSelected(0)}this._model._setActiveTabset(this)}else{let l;if(e instanceof F){const d=this._model._getOnCreateTabSet();l=new se(this._model,d?d(e):{}),l._addChild(e),a=l}else l=e;const c=this._parent,h=c.getChildren().indexOf(this);if(c.getOrientation()===s._orientation)l._setWeight(this.getWeight()/2),this._setWeight(this.getWeight()/2),c._addChild(l,h+s._indexPlus);else{const d=new oe(this._model,{});d._setWeight(this.getWeight()),d._addChild(this),this._setWeight(50),l._setWeight(50),d._addChild(l,s._indexPlus),c._removeChild(this),c._addChild(d,h)}this._model._setActiveTabset(l)}this._model._tidy()}toJson(){const e={};return se._attributeDefinitions.toJson(e,this._attributes),e.children=this._children.map(t=>t.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}_updateAttrs(e){se._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return se._attributeDefinitions}_getPrefSize(e){let t=this.getWidth();return e===y.VERT&&(t=this.getHeight()),t}static getAttributeDefinitions(){return se._attributeDefinitions}},"l");let x=se;Qt(x,"TabSetNode"),x.TYPE="tabset",x._attributeDefinitions=se._createAttributeDefinitions();var ei=Object.defineProperty,Se=T((i,e)=>ei(i,"name",{value:e,configurable:!0}),"i$2");function $e(i){const e=i.getParent();if(e!==null)if(e instanceof x){let t=!1,n=0;const o=e.getChildren();for(let s=0;s<o.length;s++){const a=o[s];if(a===i)t=!0;else if(!a.isFloating()&&(n=s,t))break}e._setSelected(n)}else e instanceof k&&e._setSelected(-1)}T($e,"adjustSelectedIndexAfterFloat"),Se($e,"adjustSelectedIndexAfterFloat");function Ve(i){const e=i.getParent();if(e!==null&&(e instanceof x||e instanceof k)){const t=e.getChildren();for(let n=0;n<t.length;n++)if(t[n]===i){e._setSelected(n);return}}}T(Ve,"adjustSelectedIndexAfterDock"),Se(Ve,"adjustSelectedIndexAfterDock");function ye(i,e){if(i!==void 0&&(i.getType()===x.TYPE||i.getType()===k.TYPE)){const t=i.getSelected();t!==-1&&(e===t&&i.getChildren().length>0?e>=i.getChildren().length&&i._setSelected(i.getChildren().length-1):e<t?i._setSelected(t-1):e>t||i._setSelected(-1))}}T(ye,"adjustSelectedIndex"),Se(ye,"adjustSelectedIndex");function Je(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,i=>(i^crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16))}T(Je,"randomUUID"),Se(Je,"randomUUID");var ti=Object.defineProperty,ii=T((i,e)=>ti(i,"name",{value:e,configurable:!0}),"A$1");const ae=T(class extends pe{constructor(e,t,n){super(n),this._adjustedSize=0,this._calculatedBorderBarSize=0,this._location=e,this._drawChildren=[],this._attributes.id=`border_${e.getName()}`,ae._attributeDefinitions.fromJson(t,this._attributes),n._addNode(this)}static _fromJson(e,t){const n=v.getByName(e.location),o=new ae(n,e,t);return e.children&&(o._children=e.children.map(s=>{const a=F._fromJson(s,t);return a._setParent(o),a})),o}static _createAttributeDefinitions(){const e=new he;return e.add("type",ae.TYPE,!0).setType(m.STRING).setFixed(),e.add("selected",-1).setType(m.NUMBER),e.add("show",!0).setType(m.BOOLEAN),e.add("config",void 0).setType("any"),e.addInherited("barSize","borderBarSize").setType(m.NUMBER),e.addInherited("enableDrop","borderEnableDrop").setType(m.BOOLEAN),e.addInherited("className","borderClassName").setType(m.STRING),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(m.BOOLEAN),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(m.BOOLEAN),e.addInherited("size","borderSize").setType(m.NUMBER),e.addInherited("minSize","borderMinSize").setType(m.NUMBER),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(m.BOOLEAN),e}getLocation(){return this._location}getTabHeaderRect(){return this._tabHeaderRect}getRect(){return this._tabHeaderRect}getContentRect(){return this._contentRect}isEnableDrop(){return this._getAttr("enableDrop")}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")}getClassName(){return this._getAttr("className")}calcBorderBarSize(e){const t=this._getAttr("barSize");t!==0?this._calculatedBorderBarSize=t:this._calculatedBorderBarSize=e.borderBarSize}getBorderBarSize(){return this._calculatedBorderBarSize}getSize(){const e=this._getAttr("size"),t=this.getSelected();if(t===-1)return e;{const n=this._children[t],o=this._location._orientation===y.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight");return o===-1?e:o}}getMinSize(){return this._getAttr("minSize")}getSelected(){return this._attributes.selected}getSelectedNode(){if(this.getSelected()!==-1)return this._children[this.getSelected()]}getOrientation(){return this._location.getOrientation()}getConfig(){return this._attributes.config}isMaximized(){return!1}isShowing(){return this._attributes.show?!(this._model._getShowHiddenBorder()!==this._location&&this.isAutoHide()&&this._children.length===0):!1}isAutoHide(){return this._getAttr("enableAutoHide")}_setSelected(e){this._attributes.selected=e}_setSize(e){const t=this.getSelected();if(t===-1)this._attributes.size=e;else{const n=this._children[t];(this._location._orientation===y.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight"))===-1?this._attributes.size=e:this._location._orientation===y.HORZ?n._setBorderWidth(e):n._setBorderHeight(e)}}_updateAttrs(e){ae._attributeDefinitions.update(e,this._attributes)}_getDrawChildren(){return this._drawChildren}_setAdjustedSize(e){this._adjustedSize=e}_getAdjustedSize(){return this._adjustedSize}_layoutBorderOuter(e,t){this.calcBorderBarSize(t);const n=this._location.split(e,this.getBorderBarSize());return this._tabHeaderRect=n.start,n.end}_layoutBorderInner(e,t){this._drawChildren=[];const n=this._location,o=n.split(e,this._adjustedSize+this._model.getSplitterSize()),s=n.reflect().split(o.start,this._model.getSplitterSize());this._contentRect=s.end;for(let a=0;a<this._children.length;a++){const r=this._children[a];r._layout(this._contentRect,t),r._setVisible(a===this.getSelected()),this._drawChildren.push(r)}if(this.getSelected()===-1)return e;{const a=new le(this._model);return a._setParent(this),a._setRect(s.start),this._drawChildren.push(a),o.end}}_remove(e){const t=this._removeChild(e);this.getSelected()!==-1&&ye(this,t)}canDrop(e,t,n){if(e.getType()!==F.TYPE)return;let o;const s=v.CENTER;if(this._tabHeaderRect.contains(t,n)){if(this._location._orientation===y.VERT)if(this._children.length>0){let a=this._children[0],r=a.getTabRect();const l=r.y,c=r.height;let h=this._tabHeaderRect.x,d=0;for(let p=0;p<this._children.length;p++){if(a=this._children[p],r=a.getTabRect(),d=r.x+r.width/2,t>=h&&t<d){const u=new L(r.x-2,l,3,c);o=new $(this,u,s,p,_.FLEXLAYOUT__OUTLINE_RECT);break}h=d}if(o==null){const p=new L(r.getRight()-2,l,3,c);o=new $(this,p,s,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const a=new L(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18);o=new $(this,a,s,0,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._children.length>0){let a=this._children[0],r=a.getTabRect();const l=r.x,c=r.width;let h=this._tabHeaderRect.y,d=0;for(let p=0;p<this._children.length;p++){if(a=this._children[p],r=a.getTabRect(),d=r.y+r.height/2,n>=h&&n<d){const u=new L(l,r.y-2,c,3);o=new $(this,u,s,p,_.FLEXLAYOUT__OUTLINE_RECT);break}h=d}if(o==null){const p=new L(l,r.getBottom()-2,c,3);o=new $(this,p,s,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const a=new L(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3);o=new $(this,a,s,0,_.FLEXLAYOUT__OUTLINE_RECT)}if(!e._canDockInto(e,o))return}else if(this.getSelected()!==-1&&this._contentRect.contains(t,n)){const a=this._contentRect;if(o=new $(this,a,s,-1,_.FLEXLAYOUT__OUTLINE_RECT),!e._canDockInto(e,o))return}return o}drop(e,t,n,o){let s=0;const a=e.getParent();a!==void 0&&(s=a._removeChild(e),a!==this&&a instanceof ae&&a.getSelected()===s?a._setSelected(-1):ye(a,s)),e.getType()===F.TYPE&&a===this&&s<n&&n>0&&n--;let r=n;r===-1&&(r=this._children.length),e.getType()===F.TYPE&&this._addChild(e,r),(o||o!==!1&&this.isAutoSelectTab())&&this._setSelected(r),this._model._tidy()}toJson(){const e={};return ae._attributeDefinitions.toJson(e,this._attributes),e.location=this._location.getName(),e.children=this._children.map(t=>t.toJson()),e}_getSplitterBounds(e,t=!1){const n=[0,0],o=t?this.getMinSize():0,s=this._model._getOuterInnerRects().outer,a=this._model._getOuterInnerRects().inner,r=this._model.getRoot();return this._location===v.TOP?(n[0]=s.y+o,n[1]=Math.max(n[0],a.getBottom()-e.getHeight()-r.getMinHeight())):this._location===v.LEFT?(n[0]=s.x+o,n[1]=Math.max(n[0],a.getRight()-e.getWidth()-r.getMinWidth())):this._location===v.BOTTOM?(n[1]=s.getBottom()-e.getHeight()-o,n[0]=Math.min(n[1],a.y+r.getMinHeight())):this._location===v.RIGHT&&(n[1]=s.getRight()-e.getWidth()-o,n[0]=Math.min(n[1],a.x+r.getMinWidth())),n}_calculateSplit(e,t){const n=this._getSplitterBounds(e);return this._location===v.BOTTOM||this._location===v.RIGHT?Math.max(0,n[1]-t):Math.max(0,t-n[0])}_getAttributeDefinitions(){return ae._attributeDefinitions}static getAttributeDefinitions(){return ae._attributeDefinitions}},"c");let k=ae;ii(k,"BorderNode"),k.TYPE="border",k._attributeDefinitions=ae._createAttributeDefinitions();var K=(i=>(i.Close_Tab="Close",i.Close_Tabset="Close tabset",i.Move_Tab="Move: ",i.Move_Tabset="Move tabset",i.Maximize="Maximize tabset",i.Restore="Restore tabset",i.Float_Tab="Show selected tab in floating window",i.Overflow_Menu_Tooltip="Hidden tabs",i.Floating_Window_Message="This panel is shown in a floating window",i.Floating_Window_Show_Window="Show window",i.Floating_Window_Dock_Window="Dock window",i.Error_rendering_component="Error rendering component",i))(K||{}),Oe=(i=>(i[i.Visible=1]="Visible",i[i.Always=2]="Always",i[i.Selected=3]="Selected",i))(Oe||{}),ni=Object.defineProperty,De=T((i,e)=>ni(i,"name",{value:e,configurable:!0}),"i$1");function Be(i,e,t,n){let o=t?t(e):void 0,s=e.getName(),a=e.getName();function r(c){return c.titleContent!==void 0}if(T(r,"u"),De(r,"isTitleObject"),n!==void 0){const c=n(e);c!==void 0&&(typeof c=="string"?(s=c,a=c):r(c)?(s=c.titleContent,a=c.name):s=c)}o===void 0&&e.getIcon()!==void 0&&(o=wp.element.createElement("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const l={leading:o,content:s,name:a,buttons:[]};return i.customizeTab(e,l),e._setRenderedName(l.name),l}T(Be,"getRenderStateEx"),De(Be,"getRenderStateEx");function Ee(i,e){e?i.visibility="hidden":i.display="none"}T(Ee,"hideElement"),De(Ee,"hideElement");function ce(i){let e=!1;return i.nativeEvent instanceof MouseEvent&&(i.nativeEvent.button!==0||i.ctrlKey||i.altKey||i.metaKey||i.shiftKey)&&(e=!0),e}T(ce,"isAuxMouseEvent"),De(ce,"isAuxMouseEvent");var oi=Object.defineProperty,te=T((i,e)=>oi(i,"name",{value:e,configurable:!0}),"n$2");const si=te(i=>{const{layout:e,node:t,selected:n,border:o,iconFactory:s,titleFactory:a,icons:r,path:l}=i,c=wp.element.useRef(null),h=wp.element.useRef(null),d=te(A=>{!ce(A)&&!e.getEditingTab()&&e.dragStart(A,void 0,t,t.isEnableDrag(),g,E)},"onMouseDown"),p=te(A=>{ce(A)&&e.auxMouseClick(t,A)},"onAuxMouseClick"),u=te(A=>{e.showContextMenu(t,A)},"onContextMenu"),g=te(()=>{e.doAction(f.selectTab(t.getId()))},"onClick"),E=te(A=>{},"onDoubleClick"),R=te(A=>{A.target!==h.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",R),e.getCurrentDocument().body.removeEventListener("touchstart",R),e.setEditingTab(void 0))},"onEndEdit"),D=te(()=>{const A=t.getCloseType();return!!(n||A===Oe.Always||A===Oe.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),I=te(A=>{D()?e.doAction(f.deleteTab(t.getId())):g()},"onClose"),b=te(A=>{A.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&h.current.select()});const B=te(()=>{const A=e.getDomRect(),j=c.current.getBoundingClientRect();t._setTabRect(new L(j.left-A.left,j.top-A.top,j.width,j.height))},"updateRect"),N=te(A=>{A.stopPropagation()},"onTextBoxMouseDown"),P=te(A=>{A.keyCode===27?e.setEditingTab(void 0):A.keyCode===13&&(e.setEditingTab(void 0),e.doAction(f.renameTab(t.getId(),A.target.value)))},"onTextBoxKeyPress"),M=e.getClassName;let J=M(_.FLEXLAYOUT__BORDER_BUTTON)+" "+M(_.FLEXLAYOUT__BORDER_BUTTON_+o);n?J+=" "+M(_.FLEXLAYOUT__BORDER_BUTTON__SELECTED):J+=" "+M(_.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),t.getClassName()!==void 0&&(J+=" "+t.getClassName());const X=Be(e,t,s,a);let W=X.content?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__BORDER_BUTTON_CONTENT)},X.content):null;const S=X.leading?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__BORDER_BUTTON_LEADING)},X.leading):null;if(e.getEditingTab()===t&&(W=wp.element.createElement("input",{ref:h,className:M(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":l+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:N,onTouchStart:N})),t.isEnableClose()){const A=e.i18nName(K.Close_Tab);X.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":l+"/button/close",title:A,className:M(_.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onMouseDown:b,onClick:I,onTouchStart:b},typeof r.close=="function"?r.close(t):r.close))}return wp.element.createElement("div",{ref:c,"data-layout-path":l,className:J,onMouseDown:d,onClick:p,onAuxClick:p,onContextMenu:u,onTouchStart:d,title:t.getHelpText()},S,W,X.buttons)},"BorderButton");var ai=Object.defineProperty,ri=T((i,e)=>ai(i,"name",{value:e,configurable:!0}),"l$3");const Ze=ri(i=>{const{layout:e,node:t,iconFactory:n,titleFactory:o}=i,s=wp.element.useRef(null),a=e.getClassName;let r=a(_.FLEXLAYOUT__TAB_BUTTON_STAMP);const l=Be(e,t,n,o);let c=l.content?wp.element.createElement("div",{className:a(_.FLEXLAYOUT__TAB_BUTTON_CONTENT)},l.content):t._getNameForOverflowMenu();const h=l.leading?wp.element.createElement("div",{className:a(_.FLEXLAYOUT__TAB_BUTTON_LEADING)},l.leading):null;return wp.element.createElement("div",{ref:s,className:r,title:t.getHelpText()},h,c)},"TabButtonStamp");var li=Object.defineProperty,be=T((i,e)=>li(i,"name",{value:e,configurable:!0}),"a$3");function Ie(i,e,t,n,o,s){const a=n.getRootDiv(),r=n.getClassName,l=i.ownerDocument,c=i.getBoundingClientRect(),h=a.getBoundingClientRect(),d=l.createElement("div");d.className=r(_.FLEXLAYOUT__POPUP_MENU_CONTAINER),c.left<h.left+h.width/2?d.style.left=c.left-h.left+"px":d.style.right=h.right-c.right+"px",c.top<h.top+h.height/2?d.style.top=c.top-h.top+"px":d.style.bottom=h.bottom-c.bottom+"px",q.instance.addGlass(()=>p()),q.instance.setGlassCursorOverride("default"),a.appendChild(d);const p=be(()=>{n.hidePortal(),q.instance.hideGlass(),a.removeChild(d),d.removeEventListener("mousedown",u),l.removeEventListener("mousedown",g)},"onHide"),u=be(E=>{E.stopPropagation()},"onElementMouseDown"),g=be(E=>{p()},"onDocMouseDown");d.addEventListener("mousedown",u),l.addEventListener("mousedown",g),n.showPortal(wp.element.createElement(di,{currentDocument:l,onSelect:t,onHide:p,items:e,classNameMapper:r,layout:n,iconFactory:o,titleFactory:s}),d)}T(Ie,"showPopup"),be(Ie,"showPopup");const di=be(i=>{const{items:e,onHide:t,onSelect:n,classNameMapper:o,layout:s,iconFactory:a,titleFactory:r}=i,l=be((h,d)=>{n(h),t(),d.stopPropagation()},"onItemClick"),c=e.map((h,d)=>wp.element.createElement("div",{key:h.index,className:o(_.FLEXLAYOUT__POPUP_MENU_ITEM),"data-layout-path":"/popup-menu/tb"+d,onClick:p=>l(h,p),title:h.node.getHelpText()},h.node.getModel().isLegacyOverflowMenu()?h.node._getNameForOverflowMenu():wp.element.createElement(Ze,{node:h.node,layout:s,iconFactory:a,titleFactory:r})));return wp.element.createElement("div",{className:o(_.FLEXLAYOUT__POPUP_MENU),"data-layout-path":"/popup-menu"},c)},"PopupMenu");var hi=Object.defineProperty,me=T((i,e)=>hi(i,"name",{value:e,configurable:!0}),"o$2");const Ke=me((i,e,t,n)=>{const o=wp.element.useRef(!0),s=wp.element.useRef(!1),a=wp.element.useRef(new L(0,0,0,0)),r=wp.element.useRef(null),[l,c]=wp.element.useState(0),h=wp.element.useRef(!1),[d,p]=wp.element.useState([]),u=wp.element.useRef(0);wp.element.useLayoutEffect(()=>{h.current=!1},[i.getSelectedNode(),i.getRect().width,i.getRect().height]),wp.element.useLayoutEffect(()=>{I()}),wp.element.useEffect(()=>{const b=r.current;return b.addEventListener("wheel",g,{passive:!1}),()=>{b.removeEventListener("wheel",g)}},[]);const g=me(b=>{b.preventDefault()},"onWheel"),E=me(b=>e===y.HORZ?b.x:b.y,"getNear"),R=me(b=>e===y.HORZ?b.getRight():b.getBottom(),"getFar"),D=me(b=>e===y.HORZ?b.width:b.height,"getSize"),I=me(()=>{o.current===!0&&(s.current=!1);const b=i instanceof x?i.getRect():i.getTabHeaderRect();let B=i.getChildren()[i.getChildren().length-1];const N=n.current===null?0:D(n.current.getBoundingClientRect());if(o.current===!0||u.current===0&&d.length!==0||b.width!==a.current.width||b.height!==a.current.height){u.current=d.length,a.current=b;const P=i instanceof x?i.isEnableTabStrip()===!0:!0;let M=R(b)-N;if(t.current!==null&&(M-=D(t.current.getBoundingClientRect())),P&&i.getChildren().length>0){if(d.length===0&&l===0&&R(B.getTabRect())+2<M)return;let J=0;const X=i.getSelectedNode();if(X&&!h.current){const O=X.getTabRect(),z=E(O)-2,C=R(O)+2;D(O)+2*2>=M-E(b)?J=E(b)-z:(C>M||z<E(b))&&(z<E(b)&&(J=E(b)-z),C+J>M&&(J=M-C))}const W=Math.max(0,M-(R(B.getTabRect())+2+J)),S=Math.min(0,l+J+W),A=S-l,j=[];for(let O=0;O<i.getChildren().length;O++){const z=i.getChildren()[O];(E(z.getTabRect())+A<E(b)||R(z.getTabRect())+A>M)&&j.push({node:z,index:O})}j.length>0&&(s.current=!0),o.current=!1,p(j),c(S)}}else o.current=!0},"updateVisibleTabs");return{selfRef:r,position:l,userControlledLeft:h,hiddenTabs:d,onMouseWheel:me(b=>{let B=0;Math.abs(b.deltaX)>Math.abs(b.deltaY)?B=-b.deltaX:B=-b.deltaY,b.deltaMode===1&&(B*=40),c(l+B),h.current=!0,b.stopPropagation()},"onMouseWheel"),tabsTruncated:s.current}},"useTabOverflow");var ci=Object.defineProperty,_e=T((i,e)=>ci(i,"name",{value:e,configurable:!0}),"s$2");const _i=_e(i=>{const{border:e,layout:t,iconFactory:n,titleFactory:o,icons:s,path:a}=i,r=wp.element.useRef(null),l=wp.element.useRef(null),c=wp.element.useRef(null),{selfRef:h,position:d,userControlledLeft:p,hiddenTabs:u,onMouseWheel:g}=Ke(e,y.flip(e.getOrientation()),r,c),E=_e(C=>{ce(C)&&t.auxMouseClick(e,C)},"onAuxMouseClick"),R=_e(C=>{t.showContextMenu(e,C)},"onContextMenu"),D=_e(C=>{C.stopPropagation()},"onInterceptMouseDown"),I=_e(C=>{const Y=t.getShowOverflowMenu();if(Y!==void 0)Y(e,C,u,b);else{const re=l.current;Ie(re,u,b,t,n,o)}C.stopPropagation()},"onOverflowClick"),b=_e(C=>{t.doAction(f.selectTab(C.node.getId())),p.current=!1},"onOverflowItemSelect"),B=_e(C=>{const Y=e.getChildren()[e.getSelected()];Y!==void 0&&t.doAction(f.floatTab(Y.getId())),C.stopPropagation()},"onFloatTab"),N=t.getClassName;let P=e.getTabHeaderRect().styleWithPosition({});const M=[],J=_e(C=>{let Y=e.getSelected()===C,re=e.getChildren()[C];M.push(wp.element.createElement(si,{layout:t,border:e.getLocation().getName(),node:re,path:a+"/tb"+C,key:re.getId(),selected:Y,iconFactory:n,titleFactory:o,icons:s})),C<e.getChildren().length-1&&M.push(wp.element.createElement("div",{key:"divider"+C,className:N(_.FLEXLAYOUT__BORDER_TAB_DIVIDER)}))},"layoutTab");for(let C=0;C<e.getChildren().length;C++)J(C);let X=N(_.FLEXLAYOUT__BORDER)+" "+N(_.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(X+=" "+e.getClassName());let W=[];const S={headerContent:void 0,buttons:W,stickyButtons:[],headerButtons:[]};t.customizeTabSet(e,S),W=S.buttons;let A;if(u.length>0){const C=t.i18nName(K.Overflow_Menu_Tooltip);let Y;typeof s.more=="function"?Y=s.more(e,u):Y=wp.element.createElement(wp.element.Fragment,null,s.more,wp.element.createElement("div",{className:N(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},u.length)),W.push(wp.element.createElement("button",{key:"overflowbutton",ref:l,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:C,onClick:I,onMouseDown:D,onTouchStart:D},Y))}const j=e.getSelected();if(j!==-1){const C=e.getChildren()[j];if(C!==void 0&&t.isSupportsPopout()&&C.isEnableFloat()&&!C.isFloating()){const Y=t.i18nName(K.Float_Tab);W.push(wp.element.createElement("button",{key:"float",title:Y,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:B,onMouseDown:D,onTouchStart:D},typeof s.popout=="function"?s.popout(C):s.popout))}}A=wp.element.createElement("div",{key:"toolbar",ref:r,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName())},W),P=t.styleFont(P);let O={};const z=e.getBorderBarSize()-1;return e.getLocation()===v.LEFT?O={right:z,height:z,top:d}:e.getLocation()===v.RIGHT?O={left:z,height:z,top:d}:O={height:z,left:d},wp.element.createElement("div",{ref:h,dir:"ltr",style:P,className:X,"data-layout-path":a,onClick:E,onAuxClick:E,onContextMenu:R,onWheel:g},wp.element.createElement("div",{style:{height:z},className:N(_.FLEXLAYOUT__BORDER_INNER)+" "+N(_.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName())},wp.element.createElement("div",{style:O,className:N(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+N(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName())},M)),A)},"BorderTabSet");var ui=Object.defineProperty,ue=T((i,e)=>ui(i,"name",{value:e,configurable:!0}),"s$1");const qe=ue(i=>{const{layout:e,node:t,path:n}=i,o=wp.element.useRef([]),s=wp.element.useRef(void 0),a=t.getParent(),r=ue(b=>{q.instance.setGlassCursorOverride(t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"),q.instance.startDrag(b,c,h,p,l,void 0,void 0,e.getCurrentDocument(),e.getRootDiv()),o.current=a._getSplitterBounds(t,!0);const B=e.getRootDiv();s.current=e.getCurrentDocument().createElement("div"),s.current.style.position="absolute",s.current.className=e.getClassName(_.FLEXLAYOUT__SPLITTER_DRAG),s.current.style.cursor=t.getOrientation()===y.HORZ?"ns-resize":"ew-resize";const N=t.getRect();t.getOrientation()===y.VERT&&N.width<2?N.width=2:t.getOrientation()===y.HORZ&&N.height<2&&(N.height=2),N.positionElement(s.current),B.appendChild(s.current)},"onMouseDown"),l=ue(b=>{e.getRootDiv().removeChild(s.current)},"onDragCancel"),c=ue(()=>!0,"onDragStart"),h=ue(b=>{const B=e.getDomRect(),N={x:b.clientX-B.left,y:b.clientY-B.top};s&&(t.getOrientation()===y.HORZ?s.current.style.top=u(N.y-4)+"px":s.current.style.left=u(N.x-4)+"px"),e.isRealtimeResize()&&d()},"onDragMove"),d=ue(()=>{let b=0;if(s&&(t.getOrientation()===y.HORZ?b=s.current.offsetTop:b=s.current.offsetLeft),a instanceof k){const B=a._calculateSplit(t,b);e.doAction(f.adjustBorderSplit(t.getParent().getId(),B))}else{const B=a._calculateSplit(t,b);B!==void 0&&e.doAction(f.adjustSplit(B))}},"updateLayout"),p=ue(()=>{d(),e.getRootDiv().removeChild(s.current)},"onDragEnd"),u=ue(b=>{const B=o.current;let N=b;return b<B[0]&&(N=B[0]),b>B[1]&&(N=B[1]),N},"getBoundPosition"),g=e.getClassName;let E=t.getRect();const R=E.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"});let D=g(_.FLEXLAYOUT__SPLITTER)+" "+g(_.FLEXLAYOUT__SPLITTER_+t.getOrientation().getName());a instanceof k?D+=" "+g(_.FLEXLAYOUT__SPLITTER_BORDER):t.getModel().getMaximizedTabset()!==void 0&&(R.display="none");const I=t.getModel().getSplitterExtra();if(I===0)return wp.element.createElement("div",{style:R,"data-layout-path":n,className:D,onTouchStart:r,onMouseDown:r});{let b=E.clone();b.x=0,b.y=0,t.getOrientation()===y.VERT?b.width+=I:b.height+=I;const B=b.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"}),N=g(_.FLEXLAYOUT__SPLITTER_EXTRA);return wp.element.createElement("div",{style:R,"data-layout-path":n,className:D},wp.element.createElement("div",{style:B,className:N,onTouchStart:r,onMouseDown:r}))}},"Splitter");var gi=Object.defineProperty,pi=T((i,e)=>gi(i,"name",{value:e,configurable:!0}),"e");class Ce extends wp.element.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?wp.element.createElement("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER},wp.element.createElement("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT},this.props.message)):this.props.children}}T(Ce,"ErrorBoundary"),pi(Ce,"ErrorBoundary");var mi=Object.defineProperty,Qe=T((i,e)=>mi(i,"name",{value:e,configurable:!0}),"d$1");const et=Qe(i=>{const{layout:e,selected:t,node:n,factory:o,path:s}=i,[a,r]=wp.element.useState(!i.node.isEnableRenderOnDemand()||i.selected);wp.element.useLayoutEffect(()=>{!a&&t&&r(!0)});const l=Qe(()=>{const E=n.getParent();E.getType()===x.TYPE&&(E.isActive()||e.doAction(f.setActiveTabset(E.getId())))},"onMouseDown"),c=e.getClassName,h=n.getModel().isUseVisibility(),d=n.getParent(),p=n._styleWithPosition();t||Ee(p,h),d instanceof x&&n.getModel().getMaximizedTabset()!==void 0&&!d.isMaximized()&&Ee(p,h);let u;a&&(u=o(n));let g=c(_.FLEXLAYOUT__TAB);return d instanceof k&&(g+=" "+c(_.FLEXLAYOUT__TAB_BORDER),g+=" "+c(_.FLEXLAYOUT__TAB_BORDER_+d.getLocation().getName())),wp.element.createElement("div",{className:g,"data-layout-path":s,onMouseDown:l,onTouchStart:l,style:p},wp.element.createElement(Ce,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,u)))},"Tab");var Ti=Object.defineProperty,ee=T((i,e)=>Ti(i,"name",{value:e,configurable:!0}),"n$1");const Ei=ee(i=>{const{layout:e,node:t,selected:n,iconFactory:o,titleFactory:s,icons:a,path:r}=i,l=wp.element.useRef(null),c=wp.element.useRef(null),h=ee(O=>{!ce(O)&&!e.getEditingTab()&&e.dragStart(O,void 0,t,t.isEnableDrag(),u,g)},"onMouseDown"),d=ee(O=>{ce(O)&&e.auxMouseClick(t,O)},"onAuxMouseClick"),p=ee(O=>{e.showContextMenu(t,O)},"onContextMenu"),u=ee(()=>{e.doAction(f.selectTab(t.getId()))},"onClick"),g=ee(O=>{t.isEnableRename()&&E()},"onDoubleClick"),E=ee(()=>{e.setEditingTab(t),e.getCurrentDocument().body.addEventListener("mousedown",R),e.getCurrentDocument().body.addEventListener("touchstart",R)},"onRename"),R=ee(O=>{O.target!==c.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",R),e.getCurrentDocument().body.removeEventListener("touchstart",R),e.setEditingTab(void 0))},"onEndEdit"),D=ee(()=>{const O=t.getCloseType();return!!(n||O===Oe.Always||O===Oe.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),I=ee(O=>{D()?e.doAction(f.deleteTab(t.getId())):u()},"onClose"),b=ee(O=>{O.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&c.current.select()});const B=ee(()=>{const O=e.getDomRect(),z=l.current.getBoundingClientRect();t._setTabRect(new L(z.left-O.left,z.top-O.top,z.width,z.height))},"updateRect"),N=ee(O=>{O.stopPropagation()},"onTextBoxMouseDown"),P=ee(O=>{O.keyCode===27?e.setEditingTab(void 0):O.keyCode===13&&(e.setEditingTab(void 0),e.doAction(f.renameTab(t.getId(),O.target.value)))},"onTextBoxKeyPress"),M=e.getClassName,J=t.getParent();let X=_.FLEXLAYOUT__TAB_BUTTON,W=M(X);W+=" "+M(X+"_"+J.getTabLocation()),n?W+=" "+M(X+"--selected"):W+=" "+M(X+"--unselected"),t.getClassName()!==void 0&&(W+=" "+t.getClassName());const S=Be(e,t,o,s);let A=S.content?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__TAB_BUTTON_CONTENT)},S.content):null;const j=S.leading?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__TAB_BUTTON_LEADING)},S.leading):null;if(e.getEditingTab()===t&&(A=wp.element.createElement("input",{ref:c,className:M(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":r+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:N,onTouchStart:N})),t.isEnableClose()){const O=e.i18nName(K.Close_Tab);S.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":r+"/button/close",title:O,className:M(_.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:b,onClick:I,onTouchStart:b},typeof a.close=="function"?a.close(t):a.close))}return wp.element.createElement("div",{ref:l,"data-layout-path":r,className:W,onMouseDown:h,onClick:d,onAuxClick:d,onContextMenu:p,onTouchStart:h,title:t.getHelpText()},j,A,S.buttons)},"TabButton");var bi=Object.defineProperty,ie=T((i,e)=>bi(i,"name",{value:e,configurable:!0}),"T");const fi=ie(i=>{const{node:e,layout:t,iconFactory:n,titleFactory:o,icons:s,path:a}=i,r=wp.element.useRef(null),l=wp.element.useRef(null),c=wp.element.useRef(null),h=wp.element.useRef(null),{selfRef:d,position:p,userControlledLeft:u,hiddenTabs:g,onMouseWheel:E,tabsTruncated:R}=Ke(e,y.HORZ,r,h),D=ie(w=>{const H=t.getShowOverflowMenu();if(H!==void 0)H(e,w,g,I);else{const ge=l.current;Ie(ge,g,I,t,n,o)}w.stopPropagation()},"onOverflowClick"),I=ie(w=>{t.doAction(f.selectTab(w.node.getId())),u.current=!1},"onOverflowItemSelect"),b=ie(w=>{if(!ce(w)){let H=e.getName();if(H===void 0?H="":H=": "+H,t.doAction(f.setActiveTabset(e.getId())),!t.getEditingTab()){const ge=t.i18nName(K.Move_Tabset,H);e.getModel().getMaximizedTabset()!==void 0?t.dragStart(w,ge,e,!1,sn=>{},W):t.dragStart(w,ge,e,e.isEnableDrag(),sn=>{},W)}}},"onMouseDown"),B=ie(w=>{ce(w)&&t.auxMouseClick(e,w)},"onAuxMouseClick"),N=ie(w=>{t.showContextMenu(e,w)},"onContextMenu"),P=ie(w=>{w.stopPropagation()},"onInterceptMouseDown"),M=ie(w=>{e.canMaximize()&&t.maximize(e),w.stopPropagation()},"onMaximizeToggle"),J=ie(w=>{t.doAction(f.deleteTabset(e.getId())),w.stopPropagation()},"onClose"),X=ie(w=>{A!==void 0&&t.doAction(f.floatTab(A.getId())),w.stopPropagation()},"onFloatTab"),W=ie(w=>{e.canMaximize()&&t.maximize(e)},"onDoubleClick"),S=t.getClassName;c.current!==null&&c.current.scrollLeft!==0&&(c.current.scrollLeft=0);const A=e.getSelectedNode();let j=e._styleWithPosition();e.getModel().getMaximizedTabset()!==void 0&&!e.isMaximized()&&Ee(j,e.getModel().isUseVisibility());const O=[];if(e.isEnableTabStrip())for(let w=0;w<e.getChildren().length;w++){const H=e.getChildren()[w];let ge=e.getSelected()===w;O.push(wp.element.createElement(Ei,{layout:t,node:H,path:a+"/tb"+w,key:H.getId(),selected:ge,iconFactory:n,titleFactory:o,icons:s})),w<e.getChildren().length-1&&O.push(wp.element.createElement("div",{key:"divider"+w,className:S(_.FLEXLAYOUT__TABSET_TAB_DIVIDER)}))}const z=e.getName()!==void 0;let C=[],Y=[],re=[];const Re={headerContent:e.getName(),stickyButtons:C,buttons:Y,headerButtons:re};t.customizeTabSet(e,Re);const nn=Re.headerContent;C=Re.stickyButtons,Y=Re.buttons,re=Re.headerButtons,C.length>0&&(R?Y=[...C,...Y]:O.push(wp.element.createElement("div",{ref:h,key:"sticky_buttons_container",onMouseDown:P,onTouchStart:P,onDragStart:w=>{w.preventDefault()},className:S(_.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},C)));let bt;if(g.length>0){const w=t.i18nName(K.Overflow_Menu_Tooltip);let H;typeof s.more=="function"?H=s.more(e,g):H=wp.element.createElement(wp.element.Fragment,null,s.more,wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},g.length)),Y.push(wp.element.createElement("button",{key:"overflowbutton","data-layout-path":a+"/button/overflow",ref:l,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:w,onClick:D,onMouseDown:P,onTouchStart:P},H))}if(A!==void 0&&t.isSupportsPopout()&&A.isEnableFloat()&&!A.isFloating()){const w=t.i18nName(K.Float_Tab);Y.push(wp.element.createElement("button",{key:"float","data-layout-path":a+"/button/float",title:w,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:X,onMouseDown:P,onTouchStart:P},typeof s.popout=="function"?s.popout(A):s.popout))}if(e.canMaximize()){const w=t.i18nName(K.Restore),H=t.i18nName(K.Maximize);(z?re:Y).push(wp.element.createElement("button",{key:"max","data-layout-path":a+"/button/max",title:e.isMaximized()?w:H,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:M,onMouseDown:P,onTouchStart:P},e.isMaximized()?typeof s.restore=="function"?s.restore(e):s.restore:typeof s.maximize=="function"?s.maximize(e):s.maximize))}if(!e.isMaximized()&&e.isEnableClose()){const w=t.i18nName(K.Close_Tabset);(z?re:Y).push(wp.element.createElement("button",{key:"close","data-layout-path":a+"/button/close",title:w,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:J,onMouseDown:P,onTouchStart:P},typeof s.closeTabset=="function"?s.closeTabset(e):s.closeTabset))}bt=wp.element.createElement("div",{key:"toolbar",ref:r,className:S(_.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:w=>{w.preventDefault()}},Y);let Pe,Ye,Ne=S(_.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Ne+=" "+e.getClassNameTabStrip()),Ne+=" "+_.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&!z&&(Ne+=" "+S(_.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&!z&&(Ne+=" "+S(_.FLEXLAYOUT__TABSET_MAXIMIZED)),z){const w=wp.element.createElement("div",{key:"toolbar",ref:r,className:S(_.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:ge=>{ge.preventDefault()}},re);let H=S(_.FLEXLAYOUT__TABSET_HEADER);e.isActive()&&(H+=" "+S(_.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(H+=" "+S(_.FLEXLAYOUT__TABSET_MAXIMIZED)),e.getClassNameHeader()!==void 0&&(H+=" "+e.getClassNameHeader()),Pe=wp.element.createElement("div",{className:H,style:{height:e.getHeaderHeight()+"px"},"data-layout-path":a+"/header",onMouseDown:b,onContextMenu:N,onClick:B,onAuxClick:B,onTouchStart:b},wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TABSET_HEADER_CONTENT)},nn),w)}const on={height:e.getTabStripHeight()+"px"};Ye=wp.element.createElement("div",{className:Ne,style:on,"data-layout-path":a+"/tabstrip",onMouseDown:b,onContextMenu:N,onClick:B,onAuxClick:B,onTouchStart:b},wp.element.createElement("div",{ref:c,className:S(_.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation())},wp.element.createElement("div",{style:{left:p},className:S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation())},O)),bt),j=t.styleFont(j);var ft=void 0;if(e.getChildren().length===0){const w=t.getTabSetPlaceHolderCallback();w&&(ft=w(e))}const vt=wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TABSET_CONTENT)},ft);var He;return e.getTabLocation()==="top"?He=wp.element.createElement(wp.element.Fragment,null,Pe,Ye,vt):He=wp.element.createElement(wp.element.Fragment,null,Pe,vt,Ye),wp.element.createElement("div",{ref:d,dir:"ltr","data-layout-path":a,style:j,className:S(_.FLEXLAYOUT__TABSET),onWheel:E},He)},"TabSet");var vi=Object.defineProperty,tt=T((i,e)=>vi(i,"name",{value:e,configurable:!0}),"h$1");const it=tt(i=>{const{title:e,id:t,url:n,rect:o,onCloseWindow:s,onSetWindow:a,children:r}=i,l=wp.element.useRef(null),c=wp.element.useRef(null),[h,d]=wp.element.useState(void 0);return wp.element.useLayoutEffect(()=>{c.current&&clearTimeout(c.current);const p=o,u=Array.from(window.document.styleSheets).reduce((g,E)=>{let R;try{R=E.cssRules}catch(D){}try{return[...g,{href:E.href,type:E.type,rules:R?Array.from(R).map(D=>D.cssText):null}]}catch(D){return g}},[]);return l.current=window.open(n,t,`left=${p.x},top=${p.y},width=${p.width},height=${p.height}`),l.current!==null?(a(t,l.current),window.addEventListener("beforeunload",()=>{l.current&&(l.current.close(),l.current=null)}),l.current.addEventListener("load",()=>{const g=l.current.document;g.title=e;const E=g.createElement("div");E.className=_.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,g.body.appendChild(E),nt(g,u).then(()=>{d(E)}),l.current.addEventListener("beforeunload",()=>{s(t)})})):(console.warn(`Unable to open window ${n}`),s(t)),()=>{c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},0)}},[]),h!==void 0?wp.element.createPortal(r,h):null},"FloatingWindow");function nt(i,e){const t=i.head,n=[];for(const o of e)if(o.href){const s=i.createElement("link");s.type=o.type,s.rel="stylesheet",s.href=o.href,t.appendChild(s),n.push(new Promise((a,r)=>{s.onload=()=>a(!0)}))}else if(o.rules){const s=i.createElement("style");for(const a of o.rules)s.appendChild(i.createTextNode(a));t.appendChild(s)}return Promise.all(n)}T(nt,"L"),tt(nt,"copyStyles");var wi=Object.defineProperty,yi=T((i,e)=>wi(i,"name",{value:e,configurable:!0}),"a$1");const ot=yi(i=>{const{layout:e,node:t,factory:n}=i,o=e.getClassName,s=n(t);return wp.element.createElement("div",{className:o(_.FLEXLAYOUT__FLOATING_WINDOW_TAB)},wp.element.createElement(Ce,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,s)))},"FloatingWindowTab");var Oi=Object.defineProperty,fe=T((i,e)=>Oi(i,"name",{value:e,configurable:!0}),"n");const st=fe(i=>{const{layout:e,selected:t,node:n,path:o}=i,s=fe(()=>{n.getWindow()&&n.getWindow().focus()},"showPopout"),a=fe(()=>{e.doAction(f.unFloatTab(n.getId()))},"dockPopout"),r=fe(()=>{const D=n.getParent();D.getType()===x.TYPE&&(D.isActive()||e.doAction(f.setActiveTabset(D.getId())))},"onMouseDown"),l=fe(D=>{D.preventDefault(),s()},"onClickFocus"),c=fe(D=>{D.preventDefault(),a()},"onClickDock"),h=e.getClassName,d=n.getParent(),p=n._styleWithPosition();t||Ee(p,n.getModel().isUseVisibility()),d instanceof x&&n.getModel().getMaximizedTabset()!==void 0&&!d.isMaximized()&&Ee(p,n.getModel().isUseVisibility());const u=e.i18nName(K.Floating_Window_Message),g=e.i18nName(K.Floating_Window_Show_Window),E=e.i18nName(K.Floating_Window_Dock_Window),R=e.getOnRenderFloatingTabPlaceholder();return R?wp.element.createElement("div",{className:h(_.FLEXLAYOUT__TAB_FLOATING),onMouseDown:r,onTouchStart:r,style:p},R(a,s)):wp.element.createElement("div",{className:h(_.FLEXLAYOUT__TAB_FLOATING),"data-layout-path":o,onMouseDown:r,onTouchStart:r,style:p},wp.element.createElement("div",{className:h(_.FLEXLAYOUT__TAB_FLOATING_INNER)},wp.element.createElement("div",null,u),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:l},g)),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:c},E))))},"TabFloating");var Li=Object.defineProperty,Le=T((i,e)=>Li(i,"name",{value:e,configurable:!0}),"o$1");const Ae={width:"1em",height:"1em",display:"flex",alignItems:"center"},at=Le(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ae,viewBox:"0 0 24 24"},wp.element.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),wp.element.createElement("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),"CloseIcon"),Ai=Le(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ae,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),"MaximizeIcon"),Ri=Le(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ae,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})),"OverflowIcon"),Ni=Le(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ae,viewBox:"0 0 20 20",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),wp.element.createElement("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})),"PopoutIcon"),Si=Le(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Ae,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})),"RestoreIcon");var rt=Object.defineProperty,lt=Object.getOwnPropertySymbols,Di=Object.prototype.hasOwnProperty,Bi=Object.prototype.propertyIsEnumerable,dt=T((i,e,t)=>e in i?rt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"M"),ht=T((i,e)=>{for(var t in e||(e={}))Di.call(e,t)&&dt(i,t,e[t]);if(lt)for(var t of lt(e))Bi.call(e,t)&&dt(i,t,e[t]);return i},"E"),G=T((i,e)=>rt(i,"name",{value:e,configurable:!0}),"h");const Ci={close:wp.element.createElement(at,null),closeTabset:wp.element.createElement(at,null),popout:wp.element.createElement(Ni,null),maximize:wp.element.createElement(Ai,null),restore:wp.element.createElement(Si,null),more:wp.element.createElement(Ri,null)},Mi=typeof window!="undefined"&&(window.document.documentMode||/Edge\//.test(window.navigator.userAgent)),xi=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches,Ii=xi&&!Mi;class Ue extends wp.element.Component{constructor(e){super(e),this.firstMove=!1,this.dragRectRendered=!0,this.dragDivText=void 0,this.edgeRectLength=100,this.edgeRectWidth=10,this.onModelChange=G(t=>{this.forceUpdate(),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)},"onModelChange"),this.updateRect=G((t=this.getDomRect())=>{const n=new L(0,0,t.width,t.height);!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&this.setState({rect:n})},"updateRect"),this.updateLayoutMetrics=G(()=>{if(this.findHeaderBarSizeRef.current){const t=this.findHeaderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedHeaderBarSize&&this.setState({calculatedHeaderBarSize:t})}if(this.findTabBarSizeRef.current){const t=this.findTabBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedTabBarSize&&this.setState({calculatedTabBarSize:t})}if(this.findBorderBarSizeRef.current){const t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}},"updateLayoutMetrics"),this.getClassName=G(t=>this.props.classNameMapper===void 0?t:this.props.classNameMapper(t),"getClassName"),this.onCloseWindow=G(t=>{this.doAction(f.unFloatTab(t));try{this.props.model.getNodeById(t)._setWindow(void 0)}catch(n){}},"onCloseWindow"),this.onSetWindow=G((t,n)=>{this.props.model.getNodeById(t)._setWindow(n)},"onSetWindow"),this.onCancelAdd=G(()=>{var t,n;this.selfRef.current.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(n=(t=this.customDrop)==null?void 0:t.invalidated)==null||n.call(t)}catch(o){console.error(o)}q.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0},"onCancelAdd"),this.onCancelDrag=G(t=>{var n,o;if(t){const s=this.selfRef.current;try{s.removeChild(this.outlineDiv)}catch(a){}try{s.removeChild(this.dragDiv)}catch(a){}this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(o=(n=this.customDrop)==null?void 0:n.invalidated)==null||o.call(n)}catch(a){console.error(a)}q.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0}this.setState({showHiddenBorder:v.CENTER})},"onCancelDrag"),this.onDragDivMouseDown=G(t=>{t.preventDefault(),this.dragStart(t,this.dragDivText,F._fromJson(this.newTabJson,this.props.model,!1),!0,void 0,void 0)},"onDragDivMouseDown"),this.dragStart=G((t,n,o,s,a,r)=>{s?(this.dragNode=o,this.dragDivText=n,q.instance.startDrag(t,this.onDragStart,this.onDragMove,this.onDragEnd,this.onCancelDrag,a,r,this.currentDocument,this.selfRef.current)):q.instance.startDrag(t,void 0,void 0,void 0,void 0,a,r,this.currentDocument,this.selfRef.current)},"dragStart"),this.dragRectRender=G((t,n,o,s)=>{let a;if(t!==void 0?a=wp.element.createElement("div",{style:{whiteSpace:"pre"}},t.replace("<br>",`
`)):n&&n instanceof F&&(a=wp.element.createElement(Ze,{node:n,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory})),this.props.onRenderDragRect!==void 0){const r=this.props.onRenderDragRect(a,n,o);r!==void 0&&(a=r)}this.dragDiv.style.visibility="hidden",this.dragRectRendered=!1,this.showPortal(wp.element.createElement(Ui,{onRendered:()=>{this.dragRectRendered=!0,s==null||s()}},a),this.dragDiv)},"dragRectRender"),this.showPortal=G((t,n)=>{const o=wp.element.createPortal(t,n);this.setState({portal:o})},"showPortal"),this.hidePortal=G(()=>{this.setState({portal:void 0})},"hidePortal"),this.onDragStart=G(()=>{this.dropInfo=void 0,this.customDrop=void 0;const t=this.selfRef.current;return this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(_.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden",t.appendChild(this.outlineDiv),this.dragDiv==null&&(this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(_.FLEXLAYOUT__DRAG_RECT),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragRectRender(this.dragDivText,this.dragNode,this.newTabJson),t.appendChild(this.dragDiv)),this.props.model.getMaximizedTabset()===void 0&&this.setState({showEdges:!0}),this.dragNode!==void 0&&this.dragNode instanceof F&&this.dragNode.getTabRect()!==void 0&&this.dragNode.getTabRect().positionElement(this.outlineDiv),this.firstMove=!0,!0},"onDragStart"),this.onDragMove=G(t=>{if(this.firstMove===!1){const l=this.props.model._getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${l}s, left ${l}s, width ${l}s, height ${l}s`}this.firstMove=!1;const n=this.selfRef.current.getBoundingClientRect(),o={x:t.clientX-n.left,y:t.clientY-n.top};this.checkForBorderToShow(o.x,o.y);const s=this.dragDiv.getBoundingClientRect();let a=o.x-s.width/2;a+s.width>n.width&&(a=n.width-s.width),a=Math.max(0,a),this.dragDiv.style.left=a+"px",this.dragDiv.style.top=o.y+5+"px",this.dragRectRendered&&this.dragDiv.style.visibility==="hidden"&&(this.dragDiv.style.visibility="visible");let r=this.props.model._findDropTargetNode(this.dragNode,o.x,o.y);r&&(this.props.onTabDrag?this.handleCustomTabDrag(r,o,t):(this.dropInfo=r,this.outlineDiv.className=this.getClassName(r.className),r.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))},"onDragMove"),this.onDragEnd=G(t=>{const n=this.selfRef.current;if(n.removeChild(this.outlineDiv),n.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),q.instance.hideGlass(),this.dropInfo)if(this.customDrop){this.newTabJson=void 0;try{const{callback:o,dragging:s,over:a,x:r,y:l,location:c}=this.customDrop;o(s,a,r,l,c),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0)}catch(o){console.error(o)}}else if(this.newTabJson!==void 0){const o=this.doAction(f.addNode(this.newTabJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(o,t),this.fnNewNodeDropped=void 0),this.newTabJson=void 0}else this.dragNode!==void 0&&this.doAction(f.moveNode(this.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.setState({showHiddenBorder:v.CENTER})},"onDragEnd"),this.props.model._setChangeListener(this.onModelChange),this.tabIds=[],this.selfRef=wp.element.createRef(),this.findHeaderBarSizeRef=wp.element.createRef(),this.findTabBarSizeRef=wp.element.createRef(),this.findBorderBarSizeRef=wp.element.createRef(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Ii,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons=ht(ht({},Ci),e.icons),this.state={rect:new L(0,0,0,0),calculatedHeaderBarSize:25,calculatedTabBarSize:26,calculatedBorderBarSize:30,editingTab:void 0,showHiddenBorder:v.CENTER,showEdges:!1},this.onDragEnter=this.onDragEnter.bind(this)}styleFont(e){return this.props.font&&(this.selfRef.current&&(this.props.font.size&&this.selfRef.current.style.setProperty("--font-size",this.props.font.size),this.props.font.family&&this.selfRef.current.style.setProperty("--font-family",this.props.font.family)),this.props.font.style&&(e.fontStyle=this.props.font.style),this.props.font.weight&&(e.fontWeight=this.props.font.weight)),e}doAction(e){if(this.props.onAction!==void 0){const t=this.props.onAction(e);return t!==void 0?this.props.model.doAction(t):void 0}else return this.props.model.doAction(e)}componentDidMount(){this.updateRect(),this.updateLayoutMetrics(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.resizeObserver=new ResizeObserver(e=>{this.updateRect(e[0].contentRect)}),this.resizeObserver.observe(this.selfRef.current)}componentDidUpdate(){this.updateLayoutMetrics(),this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel._setChangeListener(void 0),this.props.model._setChangeListener(this.onModelChange),this.previousModel=this.props.model)}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current.getBoundingClientRect()}getRootDiv(){return this.selfRef.current}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){var e;return(e=this.props.realtimeResize)!=null?e:!1}onTabDrag(...e){var t,n;return(n=(t=this.props).onTabDrag)==null?void 0:n.call(t,...e)}getPopoutURL(){return this.popoutURL}componentWillUnmount(){var e;(e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}render(){if(!this.selfRef.current)return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT)},this.metricsElements());this.props.model._setPointerFine(window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches);const e=[],t=[],n=[],o={},s=[],a={headerBarSize:this.state.calculatedHeaderBarSize,tabBarSize:this.state.calculatedTabBarSize,borderBarSize:this.state.calculatedBorderBarSize};this.props.model._setShowHiddenBorder(this.state.showHiddenBorder),this.centerRect=this.props.model._layout(this.state.rect,a),this.renderBorder(this.props.model.getBorderSet(),e,o,n,s),this.renderChildren("",this.props.model.getRoot(),t,o,n,s);const r=[],l={};for(const h of this.tabIds)o[h]&&(r.push(h),l[h]=h);this.tabIds=r;for(const h of Object.keys(o))l[h]||this.tabIds.push(h);const c=[];if(this.state.showEdges){const h=this.centerRect,d=this.edgeRectLength,p=this.edgeRectWidth,u=this.edgeRectLength/2,g=this.getClassName(_.FLEXLAYOUT__EDGE_RECT),E=50;c.push(wp.element.createElement("div",{key:"North",style:{top:h.y,left:h.x+h.width/2-u,width:d,height:p,borderBottomLeftRadius:E,borderBottomRightRadius:E},className:g})),c.push(wp.element.createElement("div",{key:"West",style:{top:h.y+h.height/2-u,left:h.x,width:p,height:d,borderTopRightRadius:E,borderBottomRightRadius:E},className:g})),c.push(wp.element.createElement("div",{key:"South",style:{top:h.y+h.height-p,left:h.x+h.width/2-u,width:d,height:p,borderTopLeftRadius:E,borderTopRightRadius:E},className:g})),c.push(wp.element.createElement("div",{key:"East",style:{top:h.y+h.height/2-u,left:h.x+h.width-p,width:p,height:d,borderTopLeftRadius:E,borderBottomLeftRadius:E},className:g}))}return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT),onDragEnter:this.props.onExternalDrag?this.onDragEnter:void 0},t,this.tabIds.map(h=>o[h]),e,s,c,n,this.metricsElements(),this.state.portal)}metricsElements(){const e=this.styleFont({visibility:"hidden"});return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{key:"findHeaderBarSize",ref:this.findHeaderBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__TABSET_HEADER_SIZER)},"FindHeaderBarSize"),wp.element.createElement("div",{key:"findTabBarSize",ref:this.findTabBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__TABSET_SIZER)},"FindTabBarSize"),wp.element.createElement("div",{key:"findBorderBarSize",ref:this.findBorderBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__BORDER_SIZER)},"FindBorderBarSize"))}renderBorder(e,t,n,o,s){for(const a of e.getBorders()){const r=`/border/${a.getLocation().getName()}`;if(a.isShowing()){t.push(wp.element.createElement(_i,{key:`border_${a.getLocation().getName()}`,path:r,border:a,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons}));const l=a._getDrawChildren();let c=0,h=0;for(const d of l){if(d instanceof le){let p=r+"/s";s.push(wp.element.createElement(qe,{key:d.getId(),layout:this,node:d,path:p}))}else if(d instanceof F){let p=r+"/t"+h++;if(this.supportsPopout&&d.isFloating()){const u=this._getScreenRect(d);o.push(wp.element.createElement(it,{key:d.getId(),url:this.popoutURL,rect:u,title:d.getName(),id:d.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(ot,{layout:this,node:d,factory:this.props.factory}))),n[d.getId()]=wp.element.createElement(st,{key:d.getId(),layout:this,path:p,node:d,selected:c===a.getSelected()})}else n[d.getId()]=wp.element.createElement(et,{key:d.getId(),layout:this,path:p,node:d,selected:c===a.getSelected(),factory:this.props.factory})}c++}}}}renderChildren(e,t,n,o,s,a){const r=t._getDrawChildren();let l=0,c=0,h=0;for(const d of r)if(d instanceof le){const p=e+"/s"+l++;a.push(wp.element.createElement(qe,{key:d.getId(),layout:this,path:p,node:d}))}else if(d instanceof x){const p=e+"/ts"+h++;n.push(wp.element.createElement(fi,{key:d.getId(),layout:this,path:p,node:d,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons})),this.renderChildren(p,d,n,o,s,a)}else if(d instanceof F){const p=e+"/t"+c++,u=d.getParent().getChildren()[d.getParent().getSelected()];if(u===void 0&&console.warn("undefined selectedTab should not happen"),this.supportsPopout&&d.isFloating()){const g=this._getScreenRect(d);s.push(wp.element.createElement(it,{key:d.getId(),url:this.popoutURL,rect:g,title:d.getName(),id:d.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(ot,{layout:this,node:d,factory:this.props.factory}))),o[d.getId()]=wp.element.createElement(st,{key:d.getId(),layout:this,path:p,node:d,selected:d===u})}else o[d.getId()]=wp.element.createElement(et,{key:d.getId(),layout:this,path:p,node:d,selected:d===u,factory:this.props.factory})}else{const p=e+(d.getOrientation()===y.HORZ?"/r":"/c")+h++;this.renderChildren(p,d,n,o,s,a)}}_getScreenRect(e){const t=e.getRect().clone(),n=this.selfRef.current.getBoundingClientRect(),o=Math.min(80,this.currentWindow.outerHeight-this.currentWindow.innerHeight),s=Math.min(80,this.currentWindow.outerWidth-this.currentWindow.innerWidth);return t.x=t.x+n.x+this.currentWindow.screenX+s,t.y=t.y+n.y+this.currentWindow.screenY+o,t}addTabToTabSet(e,t){this.props.model.getNodeById(e)!==void 0&&this.doAction(f.addNode(t,e,v.CENTER,-1))}addTabToActiveTabSet(e){const t=this.props.model.getActiveTabset();t!==void 0&&this.doAction(f.addNode(e,t.getId(),v.CENTER,-1))}addTabWithDragAndDrop(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,this.dragStart(void 0,e,F._fromJson(t,this.props.model,!1),!0,void 0,void 0)}moveTabWithDragAndDrop(e,t){this.dragStart(void 0,t,e,!0,void 0,void 0)}addTabWithDragAndDropIndirect(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,q.instance.addGlass(this.onCancelAdd),this.dragDivText=e,this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(_.FLEXLAYOUT__DRAG_RECT),this.dragDiv.addEventListener("mousedown",this.onDragDivMouseDown),this.dragDiv.addEventListener("touchstart",this.onDragDivMouseDown,{passive:!1}),this.dragRectRender(this.dragDivText,void 0,this.newTabJson,()=>{if(this.dragDiv){this.dragDiv.style.visibility="visible";const o=this.dragDiv.getBoundingClientRect(),s=new L(0,0,o==null?void 0:o.width,o==null?void 0:o.height);s.centerInRect(this.state.rect),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragDiv.style.left=s.x+"px",this.dragDiv.style.top=s.y+"px"}}),this.selfRef.current.appendChild(this.dragDiv)}handleCustomTabDrag(e,t,n){var o,s,a;let r=(o=this.customDrop)==null?void 0:o.invalidated;const l=(s=this.customDrop)==null?void 0:s.callback;this.customDrop=void 0;const c=this.newTabJson||(this.dragNode instanceof F?this.dragNode:void 0);if(c&&(e.node instanceof x||e.node instanceof k)&&e.index===-1){const h=e.node.getSelectedNode(),d=h==null?void 0:h.getRect();if(h&&d!=null&&d.contains(t.x,t.y)){let p;try{const u=this.onTabDrag(c,h,t.x-d.x,t.y-d.y,e.location,()=>this.onDragMove(n));u&&(p={rect:new L(u.x+d.x,u.y+d.y,u.width,u.height),callback:u.callback,invalidated:u.invalidated,dragging:c,over:h,x:t.x-d.x,y:t.y-d.y,location:e.location,cursor:u.cursor})}catch(u){console.error(u)}(p==null?void 0:p.callback)===l&&(r=void 0),this.customDrop=p}}this.dropInfo=e,this.outlineDiv.className=this.getClassName(this.customDrop?_.FLEXLAYOUT__OUTLINE_RECT:e.className),this.customDrop?this.customDrop.rect.positionElement(this.outlineDiv):e.rect.positionElement(this.outlineDiv),q.instance.setGlassCursorOverride((a=this.customDrop)==null?void 0:a.cursor),this.outlineDiv.style.visibility="visible";try{r==null||r()}catch(h){console.error(h)}}onDragEnter(e){if(q.instance.isDragging())return;const t=this.props.onExternalDrag(e);t&&(this.fnNewNodeDropped=t.onDrop,this.newTabJson=t.json,this.dragStart(e,t.dragText,F._fromJson(t.json,this.props.model,!1),!0,void 0,void 0))}checkForBorderToShow(e,t){const n=this.props.model._getOuterInnerRects().outer,o=n.getCenter(),s=this.edgeRectWidth,a=this.edgeRectLength/2;let r=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===v.CENTER&&(t>o.y-a&&t<o.y+a||e>o.x-a&&e<o.x+a)&&(r=!0);let l=v.CENTER;r||(e<=n.x+s?l=v.LEFT:e>=n.getRight()-s?l=v.RIGHT:t<=n.y+s?l=v.TOP:t>=n.getBottom()-s&&(l=v.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}maximize(e){this.doAction(f.maximizeToggle(e.getId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let n;return this.props.i18nMapper&&(n=this.props.i18nMapper(e,t)),n===void 0&&(n=e+(t===void 0?"":t)),n}getOnRenderFloatingTabPlaceholder(){return this.props.onRenderFloatingTabPlaceholder}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}}T(Ue,"Layout"),G(Ue,"Layout");const Ui=G(i=>(wp.element.useEffect(()=>{var e;(e=i.onRendered)==null||e.call(i)},[i]),wp.element.createElement(wp.element.Fragment,null,i.children)),"DragRectRenderWrapper");var Fi=Object.defineProperty,zi=T((i,e)=>Fi(i,"name",{value:e,configurable:!0}),"b$1");class ve{static _fromJson(e,t){const n=new ve(t);return n._borders=e.map(o=>k._fromJson(o,t)),n}constructor(e){this._model=e,this._borders=[]}getBorders(){return this._borders}_forEachNode(e){for(const t of this._borders){e(t,0);for(const n of t.getChildren())n._forEachNode(e,1)}}_toJson(){return this._borders.map(e=>e.toJson())}_layoutBorder(e,t){const n=e.outer,o=this._model.getRoot();let s=Math.max(0,n.height-o.getMinHeight()),a=Math.max(0,n.width-o.getMinWidth()),r=0,l=0,c=0,h=0;const d=this._borders.filter(g=>g.isShowing());for(const g of d){g._setAdjustedSize(g.getSize());const E=g.getSelected()!==-1;g.getLocation().getOrientation()===y.HORZ?(l+=g.getBorderBarSize(),E&&(a-=this._model.getSplitterSize(),l+=g.getSize(),h+=g.getSize())):(r+=g.getBorderBarSize(),E&&(s-=this._model.getSplitterSize(),r+=g.getSize(),c+=g.getSize()))}let p=0,u=!1;for(;l>a&&h>0||r>s&&c>0;){const g=d[p];if(g.getSelected()!==-1){const E=g._getAdjustedSize();l>a&&h>0&&g.getLocation().getOrientation()===y.HORZ&&E>0&&E>g.getMinSize()?(g._setAdjustedSize(E-1),l--,h--,u=!0):r>s&&c>0&&g.getLocation().getOrientation()===y.VERT&&E>0&&E>g.getMinSize()&&(g._setAdjustedSize(E-1),r--,c--,u=!0)}if(p=(p+1)%d.length,p===0)if(u)u=!1;else break}for(const g of d)e.outer=g._layoutBorderOuter(e.outer,t);e.inner=e.outer;for(const g of d)e.inner=g._layoutBorderInner(e.inner,t);return e}_findDropTargetNode(e,t,n){for(const o of this._borders)if(o.isShowing()){const s=o.canDrop(e,t,n);if(s!==void 0)return s}}}T(ve,"BorderSet"),zi(ve,"BorderSet");var Pi=Object.defineProperty,Yi=T((i,e)=>Pi(i,"name",{value:e,configurable:!0}),"u");const ne=T(class{constructor(){this._borderRects={inner:L.empty(),outer:L.empty()},this._attributes={},this._idMap={},this._borders=new ve(this),this._pointerFine=!0,this._showHiddenBorder=v.CENTER}static fromJson(i){const e=new ne;return ne._attributeDefinitions.fromJson(i.global,e._attributes),i.borders&&(e._borders=ve._fromJson(i.borders,e)),e._root=oe._fromJson(i.layout,e),e._tidy(),e}static _createAttributeDefinitions(){const i=new he;return i.add("legacyOverflowMenu",!1).setType(m.BOOLEAN),i.add("splitterSize",-1).setType(m.NUMBER),i.add("splitterExtra",0).setType(m.NUMBER),i.add("enableEdgeDock",!0).setType(m.BOOLEAN),i.add("rootOrientationVertical",!1).setType(m.BOOLEAN),i.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),i.add("enableUseVisibility",!1).setType(m.BOOLEAN),i.add("tabEnableClose",!0).setType(m.BOOLEAN),i.add("tabCloseType",1).setType("ICloseType"),i.add("tabEnableFloat",!1).setType(m.BOOLEAN),i.add("tabEnableDrag",!0).setType(m.BOOLEAN),i.add("tabEnableRename",!0).setType(m.BOOLEAN),i.add("tabClassName",void 0).setType(m.STRING),i.add("tabIcon",void 0).setType(m.STRING),i.add("tabEnableRenderOnDemand",!0).setType(m.BOOLEAN),i.add("tabDragSpeed",.3).setType(m.NUMBER),i.add("tabBorderWidth",-1).setType(m.NUMBER),i.add("tabBorderHeight",-1).setType(m.NUMBER),i.add("tabSetEnableDeleteWhenEmpty",!0).setType(m.BOOLEAN),i.add("tabSetEnableDrop",!0).setType(m.BOOLEAN),i.add("tabSetEnableDrag",!0).setType(m.BOOLEAN),i.add("tabSetEnableDivide",!0).setType(m.BOOLEAN),i.add("tabSetEnableMaximize",!0).setType(m.BOOLEAN),i.add("tabSetEnableClose",!1).setType(m.BOOLEAN),i.add("tabSetAutoSelectTab",!0).setType(m.BOOLEAN),i.add("tabSetClassNameTabStrip",void 0).setType(m.STRING),i.add("tabSetClassNameHeader",void 0).setType(m.STRING),i.add("tabSetEnableTabStrip",!0).setType(m.BOOLEAN),i.add("tabSetHeaderHeight",0).setType(m.NUMBER),i.add("tabSetTabStripHeight",0).setType(m.NUMBER),i.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),i.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),i.add("tabSetTabLocation","top").setType("ITabLocation"),i.add("tabSetMinWidth",0).setType(m.NUMBER),i.add("tabSetMinHeight",0).setType(m.NUMBER),i.add("borderSize",200).setType(m.NUMBER),i.add("borderMinSize",0).setType(m.NUMBER),i.add("borderBarSize",0).setType(m.NUMBER),i.add("borderEnableDrop",!0).setType(m.BOOLEAN),i.add("borderAutoSelectTabWhenOpen",!0).setType(m.BOOLEAN),i.add("borderAutoSelectTabWhenClosed",!1).setType(m.BOOLEAN),i.add("borderClassName",void 0).setType(m.STRING),i.add("borderEnableAutoHide",!1).setType(m.BOOLEAN),i}_setChangeListener(i){this._changeListener=i}getActiveTabset(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet}_getShowHiddenBorder(){return this._showHiddenBorder}_setShowHiddenBorder(i){this._showHiddenBorder=i}_setActiveTabset(i){this._activeTabSet=i}getMaximizedTabset(){return this._maximizedTabSet}_setMaximizedTabset(i){this._maximizedTabSet=i}getRoot(){return this._root}isRootOrientationVertical(){return this._attributes.rootOrientationVertical}isUseVisibility(){return this._attributes.enableUseVisibility}getBorderSet(){return this._borders}_getOuterInnerRects(){return this._borderRects}_getPointerFine(){return this._pointerFine}_setPointerFine(i){this._pointerFine=i}visitNodes(i){this._borders._forEachNode(i),this._root._forEachNode(i,0)}getNodeById(i){return this._idMap[i]}doAction(i){let e;switch(i.type){case f.ADD_NODE:{const t=new F(this,i.data.json,!0),n=this._idMap[i.data.toNode];(n instanceof x||n instanceof k||n instanceof oe)&&(n.drop(t,v.getByName(i.data.location),i.data.index,i.data.select),e=t);break}case f.MOVE_NODE:{const t=this._idMap[i.data.fromNode];if(t instanceof F||t instanceof x){const n=this._idMap[i.data.toNode];(n instanceof x||n instanceof k||n instanceof oe)&&n.drop(t,v.getByName(i.data.location),i.data.index,i.data.select)}break}case f.DELETE_TAB:{const t=this._idMap[i.data.node];t instanceof F&&t._delete();break}case f.DELETE_TABSET:{const t=this._idMap[i.data.node];if(t instanceof x){const n=[...t.getChildren()];for(let o=0;o<n.length;o++){const s=n[o];s.isEnableClose()&&s._delete()}t.getChildren().length===0&&t._delete(),this._tidy()}break}case f.FLOAT_TAB:{const t=this._idMap[i.data.node];t instanceof F&&(t._setFloating(!0),$e(t));break}case f.UNFLOAT_TAB:{const t=this._idMap[i.data.node];t instanceof F&&(t._setFloating(!1),Ve(t));break}case f.RENAME_TAB:{const t=this._idMap[i.data.node];t instanceof F&&t._setName(i.data.text);break}case f.SELECT_TAB:{const t=this._idMap[i.data.tabNode];if(t instanceof F){const n=t.getParent(),o=n.getChildren().indexOf(t);n instanceof k?n.getSelected()===o?n._setSelected(-1):n._setSelected(o):n instanceof x&&(n.getSelected()!==o&&n._setSelected(o),this._activeTabSet=n)}break}case f.SET_ACTIVE_TABSET:{const t=this._idMap[i.data.tabsetNode];t instanceof x&&(this._activeTabSet=t);break}case f.ADJUST_SPLIT:{const t=this._idMap[i.data.node1],n=this._idMap[i.data.node2];(t instanceof x||t instanceof oe)&&(n instanceof x||n instanceof oe)&&(this._adjustSplitSide(t,i.data.weight1,i.data.pixelWidth1),this._adjustSplitSide(n,i.data.weight2,i.data.pixelWidth2));break}case f.ADJUST_BORDER_SPLIT:{const t=this._idMap[i.data.node];t instanceof k&&t._setSize(i.data.pos);break}case f.MAXIMIZE_TOGGLE:{const t=this._idMap[i.data.node];t instanceof x&&(t===this._maximizedTabSet?this._maximizedTabSet=void 0:(this._maximizedTabSet=t,this._activeTabSet=t));break}case f.UPDATE_MODEL_ATTRIBUTES:{this._updateAttrs(i.data.json);break}case f.UPDATE_NODE_ATTRIBUTES:{this._idMap[i.data.node]._updateAttrs(i.data.json);break}}return this._updateIdMap(),this._changeListener!==void 0&&this._changeListener(i),e}_updateIdMap(){this._idMap={},this.visitNodes(i=>this._idMap[i.getId()]=i)}_adjustSplitSide(i,e,t){i._setWeight(e),i.getWidth()!=null&&i.getOrientation()===y.VERT?i._updateAttrs({width:t}):i.getHeight()!=null&&i.getOrientation()===y.HORZ&&i._updateAttrs({height:t})}toJson(){const i={};return ne._attributeDefinitions.toJson(i,this._attributes),this.visitNodes(e=>{e._fireEvent("save",void 0)}),{global:i,borders:this._borders._toJson(),layout:this._root.toJson()}}getSplitterSize(){let i=this._attributes.splitterSize;return i===-1&&(i=this._pointerFine?8:12),i}isLegacyOverflowMenu(){return this._attributes.legacyOverflowMenu}getSplitterExtra(){return this._attributes.splitterExtra}isEnableEdgeDock(){return this._attributes.enableEdgeDock}_addNode(i){const e=i.getId();if(this._idMap[e]!==void 0)throw new Error(`Error: each node must have a unique id, duplicate id:${i.getId()}`);i.getType()!=="splitter"&&(this._idMap[e]=i)}_layout(i,e){var t;return this._borderRects=this._borders._layoutBorder({outer:i,inner:i},e),i=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets")),(t=this._root)==null||t.calcMinSize(),this._root._layout(i,e),i}_findDropTargetNode(i,e,t){let n=this._root._findDropTargetNode(i,e,t);return n===void 0&&(n=this._borders._findDropTargetNode(i,e,t)),n}_tidy(){this._root._tidy()}_updateAttrs(i){ne._attributeDefinitions.update(i,this._attributes)}_nextUniqueId(){return"#"+Je()}_getAttribute(i){return this._attributes[i]}setOnAllowDrop(i){this._onAllowDrop=i}_getOnAllowDrop(){return this._onAllowDrop}setOnCreateTabSet(i){this._onCreateTabSet=i}_getOnCreateTabSet(){return this._onCreateTabSet}static toTypescriptInterfaces(){console.log(ne._attributeDefinitions.toTypescriptInterface("Global",void 0)),console.log(oe.getAttributeDefinitions().toTypescriptInterface("Row",ne._attributeDefinitions)),console.log(x.getAttributeDefinitions().toTypescriptInterface("TabSet",ne._attributeDefinitions)),console.log(F.getAttributeDefinitions().toTypescriptInterface("Tab",ne._attributeDefinitions)),console.log(k.getAttributeDefinitions().toTypescriptInterface("Border",ne._attributeDefinitions))}toString(){return JSON.stringify(this.toJson())}},"s");let Fe=ne;Yi(Fe,"Model"),Fe._attributeDefinitions=ne._createAttributeDefinitions();var Hi={global:{enableEdgeDock:!1,splitterSize:5,tabEnableClose:!1,tabEnableRename:!1,tabEnableFloat:!1,tabEnableRenderOnDemand:!0,tabEnableDrag:!1,tabSetEnableClose:!1,tabSetEnableMaximize:!1,tabSetEnableDrop:!1},borders:[{type:"border",location:"right",size:320,barSize:-1,children:[{type:"tab",id:"library",name:"Library",component:""},{type:"tab",id:"support",name:"Support",component:""}]}],layout:{type:"row",weight:100,children:[{type:"tabset",weight:80,children:[{type:"tab",name:"Template",component:"editor"},{type:"tab",name:"Style",component:"editor"},{type:"tab",name:"Script",component:"editor"}]},{type:"row",weight:50,children:[{type:"tabset",weight:100,children:[{type:"tab",name:"Preview",component:"preview",enableClose:!1,enableRename:!1,enableFloat:!1},{type:"tab",name:"Assets",component:"assets"},{type:"tab",name:"Controls",component:"editor"},{type:"tab",name:"Location",component:"location"}]}]}]}};const Xi={template:"html",style:"sass",script:"javascript",control:"html"},ct={},_t=wp.element.memo(({type:i,node:e,content:t,focusOnMount:n=!1})=>{const o=wp.element.useRef();return wp.element.useEffect(()=>{(async()=>{var s;const{CodeEditor:a}=(s=window==null?void 0:window.Tangible)==null?void 0:s.TemplateSystem,r=o.current;r.style="display: flex; flex-direction: column; height: 100%;";const l=await a.create({el:r,lang:Xi[i]||"html",content:t});ct[i]=l,l.node=e,n&&l.view.focus()})().catch(console.error)},[o]),wp.element.createElement("div",{ref:o})});var Wi=Object.defineProperty,ki=T((i,e)=>Wi(i,"name",{value:e,configurable:!0}),"a");const Gi=wp.element.memo(({type:i,node:e,onPreviewerReady:t})=>{const n=wp.element.useRef();return wp.element.useEffect(()=>{const o=n.current;console.log("Previewer mount",o)},[]),wp.element.createElement("div",{className:"ide-component",ref:n})});async function ji(i){console.log("start",i);const e=await startPlaygroundWeb(i);return console.log("playground",e),await e.isReady(),e}T(ji,"m$1"),ki(ji,"start");const $i=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),Vi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),Ji=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Local"),wp.element.createElement("p",null,"List of templates"),wp.element.createElement("h2",null,"Cloud"),wp.element.createElement("p",null,"Catalog"))),Zi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Keyboard Shortcuts"),wp.element.createElement("p",null,"Ctrl or CMD + SPACE - Autocomplete"),wp.element.createElement("h2",null,"Language Reference")));var Ki=Object.defineProperty,ut=T((i,e)=>Ki(i,"name",{value:e,configurable:!0}),"l$1");const gt=ut(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},wp.element.createElement("path",{fill:"currentColor",d:"M7 2H2v5l1.8-1.8L6.5 8L8 6.5L5.2 3.8L7 2zm6 0l1.8 1.8L12 6.5L13.5 8l2.7-2.7L18 7V2h-5zm.5 10L12 13.5l2.7 2.7L13 18h5v-5l-1.8 1.8l-2.7-2.8zm-7 0l-2.7 2.7L2 13v5h5l-1.8-1.8L8 13.5L6.5 12z"})),"IconFullScreenOpen"),pt=ut(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},wp.element.createElement("path",{fill:"currentColor",d:"M3.4 2L2 3.4l2.8 2.8L3 8h5V3L6.2 4.8L3.4 2zm11.8 4.2L18 3.4L16.6 2l-2.8 2.8L12 3v5h5l-1.8-1.8zM4.8 13.8L2 16.6L3.4 18l2.8-2.8L8 17v-5H3l1.8 1.8zM17 12h-5v5l1.8-1.8l2.8 2.8l1.4-1.4l-2.8-2.8L17 12z"})),"IconFullScreenClose");var qi=Object.defineProperty,ze=T((i,e)=>qi(i,"name",{value:e,configurable:!0}),"l"),Qi=(i=>(i[i.Default=0]="Default",i[i.Full=1]="Full",i[i.FullScreen=2]="FullScreen",i))(Qi||{});const mt="tangible-template-system-ide-expanded";function Tt(i){const e=document.documentElement;i?e.classList.add(mt):e.classList.remove(mt)}T(Tt,"p"),ze(Tt,"updateFullScreenClass");function Et({layoutModel:i,ideElement:e}){const[t,n]=wp.element.useState(0),o=wp.element.useMemo(()=>function(s){function a(){Tt(s===1||s===2),n(s)}if(T(a,"o"),ze(a,"update"),s===2){if(!document.fullscreenElement){e.requestFullscreen().then(a).catch(r=>{});return}}else document.fullscreenElement&&document.exitFullscreen();a()},[n]);return wp.element.createElement("div",{className:"ide-header"},wp.element.createElement("div",{className:"ide-header--title"},wp.element.createElement("input",{type:"text",value:"Template name"})),wp.element.createElement("div",{className:"ide-header--actions"},wp.element.createElement("button",{className:"ide-header--action"},"Save"),wp.element.createElement("button",{className:"ide-header--action"},"Format"),wp.element.createElement("button",{className:"ide-header--action"},"Export"),wp.element.createElement("div",{className:"ide-header--action-separator"}),wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{i.doAction(f.selectTab("library"))}},"Library"),wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{i.doAction(f.selectTab("support"))}},"Support"),t===2?wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(0)},wp.element.createElement(pt,null)):wp.element.createElement(wp.element.Fragment,null,t===1&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(2),alt:"Full Screen"},wp.element.createElement(gt,null)),t===0&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(1),alt:"Expand"},wp.element.createElement(gt,null)),t===1&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(0),alt:"Shrink"},wp.element.createElement(pt,null)))))}T(Et,"Header"),ze(Et,"Header");var en=Object.defineProperty,we=T((i,e)=>en(i,"name",{value:e,configurable:!0}),"r");const{jQuery:tn}=window;tn(document).ready(function(i){var e;const{CodeEditor:t}=(e=window==null?void 0:window.Tangible)==null?void 0:e.TemplateSystem;let n=document.getElementById("tangible-template-system-ide");n||(n=document.createElement("div"),n.id="tangible-template-system-ide",document.body.prepend(n));const o=wp.element.createRoot(n),s={},a=Fe.fromJson(Hi);let r="";const l={Library:Ji,Support:Zi,Editor:_t,Preview:Gi,Assets:$i,Location:Vi},c=we(E=>E._getAttr("id"),"getNodeId"),h=we(E=>{const R=E.getComponent(),D=c(E),I=E.getName(),b=I.toLowerCase();if(R==="editor")return wp.element.createElement(_t,{type:b,node:E,content:s[b]||"",focusOnMount:D===r});if(l[I]){const B=l[I];return wp.element.createElement(B,{node:E})}},"componentFactory"),d=we(E=>{const{type:R,data:D}=E;if(R==="FlexLayout_SelectTab"&&D.tabNode){const I=D.tabNode;r=I;for(const[b,B]of Object.entries(ct))if(c(B.node)===I){setTimeout(()=>{B.view.focus()});break}}return E},"onAction"),p=we(E=>{},"onModelChange"),u=we((E,R)=>{E._attributes;for(const D of E.getChildren()){const{id:I,name:b}=D._attributes||{};b.toLowerCase();return}},"onRenderTabSet");async function g({lang:E,editor:R}){const D=R.view.state.doc.toString();try{const I=await t.format({lang:E,content:D}),b=I?Math.min(R.view.state.selection.ranges[0].from,I.length-1):0;R.view.dispatch({changes:{from:0,to:D.length,insert:I}}),R.view.focus(),R.view.dispatch({selection:{anchor:b,head:b}})}catch(I){console.error(I)}}T(g,"R"),we(g,"formatCode"),o.render(wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(Et,{layoutModel:a,ideElement:n}),wp.element.createElement("div",{className:"ide-main"},wp.element.createElement(Ue,{model:a,factory:h,onAction:d,onModelChange:p,onRenderTabSet:u,realtimeResize:!0,supportsPopout:!1}))))})})();
//# sourceMappingURL=ide.min.js.map
