var ji=Object.defineProperty;var b=(Me,xe)=>ji(Me,"name",{value:xe,configurable:!0});(function(){"use strict";(function(){const i={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,i);return}}catch(e){}globalThis.process={env:i}})();var Me=Object.defineProperty,xe=b((i,e)=>Me(i,"name",{value:e,configurable:!0}),"e$2");const Te=b(class{static flip(e){return e===Te.HORZ?Te.VERT:Te.HORZ}constructor(e){this._name=e}getName(){return this._name}toString(){return this._name}},"t");let y=Te;xe(y,"Orientation"),y.HORZ=new Te("horz"),y.VERT=new Te("vert");var pt=Object.defineProperty,mt=b((i,e)=>pt(i,"name",{value:e,configurable:!0}),"r$4");class A{static empty(){return new A(0,0,0,0)}constructor(e,t,n,s){this.x=e,this.y=t,this.width=n,this.height=s}static fromElement(e){let{x:t,y:n,width:s,height:o}=e.getBoundingClientRect();return new A(t,n,s,o)}clone(){return new A(this.x,this.y,this.width,this.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom()}removeInsets(e){return new A(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===y.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}}b(A,"Rect"),mt(A,"Rect");var Tt=Object.defineProperty,Et=b((i,e)=>Tt(i,"name",{value:e,configurable:!0}),"T$1");const I=b(class{static getByName(e){return I.values[e]}static getLocation(e,t,n){if(t=(t-e.x)/e.width,n=(n-e.y)/e.height,t>=.25&&t<.75&&n>=.25&&n<.75)return I.CENTER;const s=n>=t,o=n>=1-t;return s?o?I.BOTTOM:I.LEFT:o?I.RIGHT:I.TOP}constructor(e,t,n){this._name=e,this._orientation=t,this._indexPlus=n,I.values[this._name]=this}getName(){return this._name}getOrientation(){return this._orientation}getDockRect(e){return this===I.TOP?new A(e.x,e.y,e.width,e.height/2):this===I.BOTTOM?new A(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===I.LEFT?new A(e.x,e.y,e.width/2,e.height):this===I.RIGHT?new A(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,t){if(this===I.TOP){const n=new A(e.x,e.y,e.width,t),s=new A(e.x,e.y+t,e.width,e.height-t);return{start:n,end:s}}else if(this===I.LEFT){const n=new A(e.x,e.y,t,e.height),s=new A(e.x+t,e.y,e.width-t,e.height);return{start:n,end:s}}if(this===I.RIGHT){const n=new A(e.getRight()-t,e.y,t,e.height),s=new A(e.x,e.y,e.width-t,e.height);return{start:n,end:s}}else{const n=new A(e.x,e.getBottom()-t,e.width,t),s=new A(e.x,e.y,e.width,e.height-t);return{start:n,end:s}}}reflect(){return this===I.TOP?I.BOTTOM:this===I.LEFT?I.RIGHT:this===I.RIGHT?I.LEFT:I.TOP}toString(){return"(DockLocation: name="+this._name+", orientation="+this._orientation+")"}},"n");let v=I;Et(v,"DockLocation"),v.values={},v.TOP=new I("top",y.VERT,0),v.BOTTOM=new I("bottom",y.VERT,1),v.LEFT=new I("left",y.HORZ,0),v.RIGHT=new I("right",y.HORZ,1),v.CENTER=new I("center",y.VERT,0);var bt=Object.defineProperty,ft=b((i,e)=>bt(i,"name",{value:e,configurable:!0}),"l$3");const vt=!!(typeof window!="undefined"&&window.document&&window.document.createElement),He=b(class{constructor(){this._manualGlassManagement=!1,this._startX=0,this._startY=0,this._dragDepth=0,this._glassShowing=!1,this._dragging=!1,this._active=!1,vt&&(this._glass=document.createElement("div"),this._glass.style.zIndex="998",this._glass.style.backgroundColor="transparent",this._glass.style.outline="none"),this._defaultGlassCursor="default",this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onKeyPress=this._onKeyPress.bind(this),this._onDragCancel=this._onDragCancel.bind(this),this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this.resizeGlass=this.resizeGlass.bind(this),this._lastClick=0,this._clickX=0,this._clickY=0}addGlass(e){var t;this._glassShowing?this._manualGlassManagement=!0:(this._document||(this._document=window.document),this._rootElement||(this._rootElement=this._document.body),this.resizeGlass(),(t=this._document.defaultView)==null||t.addEventListener("resize",this.resizeGlass),this._document.body.appendChild(this._glass),this._glass.tabIndex=-1,this._glass.focus(),this._glass.addEventListener("keydown",this._onKeyPress),this._glass.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._glass.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._glass.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._glassShowing=!0,this._fDragCancel=e,this._manualGlassManagement=!1)}resizeGlass(){A.fromElement(this._rootElement).positionElement(this._glass,"fixed")}hideGlass(){var e;this._glassShowing&&(this._document.body.removeChild(this._glass),(e=this._document.defaultView)==null||e.removeEventListener("resize",this.resizeGlass),this._glassShowing=!1,this._document=void 0,this._rootElement=void 0,this.setGlassCursorOverride(void 0))}_updateGlassCursor(){var e;this._glass.style.cursor=(e=this._glassCursorOverride)!=null?e:this._defaultGlassCursor}_setDefaultGlassCursor(e){this._defaultGlassCursor=e,this._updateGlassCursor()}setGlassCursorOverride(e){this._glassCursorOverride=e,this._updateGlassCursor()}startDrag(e,t,n,s,o,a,h,r,c){if(e&&this._lastEvent&&this._lastEvent.type.startsWith("touch")&&e.type.startsWith("mouse")&&e.timeStamp-this._lastEvent.timeStamp<500)return;this._lastEvent=e,r?this._document=r:this._document=window.document,c?this._rootElement=c:this._rootElement=this._document.body;const d=this._getLocationEvent(e);this.addGlass(o),this._dragging&&console.warn("this._dragging true on startDrag should never happen"),e?(this._startX=d.clientX,this._startY=d.clientY,(!window.matchMedia||window.matchMedia("(pointer: fine)").matches)&&this._setDefaultGlassCursor(getComputedStyle(e.target).cursor),this._stopPropagation(e),this._preventDefault(e)):(this._startX=0,this._startY=0,this._setDefaultGlassCursor("default")),this._dragging=!1,this._fDragStart=t,this._fDragMove=n,this._fDragEnd=s,this._fDragCancel=o,this._fClick=a,this._fDblClick=h,this._active=!0,(e==null?void 0:e.type)==="dragenter"?(this._dragDepth=1,this._rootElement.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._rootElement.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._rootElement.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._document.addEventListener("dragend",this._onDragCancel,{passive:!1}),this._document.addEventListener("drop",this._onMouseUp,{passive:!1})):(this._document.addEventListener("mouseup",this._onMouseUp,{passive:!1}),this._document.addEventListener("mousemove",this._onMouseMove,{passive:!1}),this._document.addEventListener("touchend",this._onMouseUp,{passive:!1}),this._document.addEventListener("touchmove",this._onMouseMove,{passive:!1}))}isDragging(){return this._dragging}isActive(){return this._active}toString(){return"(DragDrop: startX="+this._startX+", startY="+this._startY+", dragging="+this._dragging+")"}_onKeyPress(e){e.keyCode===27&&this._onDragCancel()}_onDragCancel(){this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this.hideGlass(),this._fDragCancel!==void 0&&this._fDragCancel(this._dragging),this._dragging=!1,this._active=!1}_getLocationEvent(e){let t=e;return e&&e.touches&&(t=e.touches[0]),t}_getLocationEventEnd(e){let t=e;return e.changedTouches&&(t=e.changedTouches[0]),t}_stopPropagation(e){e.stopPropagation&&e.stopPropagation()}_preventDefault(e){return e.preventDefault&&e.cancelable&&e.preventDefault(),e}_onMouseMove(e){this._lastEvent=e;const t=this._getLocationEvent(e);return this._stopPropagation(e),this._preventDefault(e),!this._dragging&&(Math.abs(this._startX-t.clientX)>5||Math.abs(this._startY-t.clientY)>5)&&(this._dragging=!0,this._fDragStart&&(this._setDefaultGlassCursor("move"),this._dragging=this._fDragStart({clientX:this._startX,clientY:this._startY}))),this._dragging&&this._fDragMove&&this._fDragMove(t),!1}_onMouseUp(e){this._lastEvent=e;const t=this._getLocationEventEnd(e);if(this._stopPropagation(e),this._preventDefault(e),this._active=!1,this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this._manualGlassManagement||this.hideGlass(),this._dragging)this._dragging=!1,this._fDragEnd&&this._fDragEnd(e);else if(this._fDragCancel&&this._fDragCancel(this._dragging),Math.abs(this._startX-t.clientX)<=5&&Math.abs(this._startY-t.clientY)<=5){let n=!1;const s=new Date().getTime();Math.abs(this._clickX-t.clientX)<=5&&Math.abs(this._clickY-t.clientY)<=5&&s-this._lastClick<500&&this._fDblClick&&(this._fDblClick(e),n=!0),!n&&this._fClick&&this._fClick(e),this._lastClick=s,this._clickX=t.clientX,this._clickY=t.clientY}return!1}_onDragEnter(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth++,!1}_onDragLeave(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth--,this._dragDepth<=0&&this._onDragCancel(),!1}},"n");let q=He;ft(q,"DragDrop"),q.instance=new He;var wt=Object.defineProperty,yt=b((i,e)=>wt(i,"name",{value:e,configurable:!0}),"s$8");class Z{constructor(e,t){this.type=e,this.data=t}}b(Z,"Action"),yt(Z,"Action");var Ot=Object.defineProperty,At=b((i,e)=>Ot(i,"name",{value:e,configurable:!0}),"r$3");const Q=b(class{static addNode(e,t,n,s,o){return new Z(Q.ADD_NODE,{json:e,toNode:t,location:n.getName(),index:s,select:o})}static moveNode(e,t,n,s,o){return new Z(Q.MOVE_NODE,{fromNode:e,toNode:t,location:n.getName(),index:s,select:o})}static deleteTab(e){return new Z(Q.DELETE_TAB,{node:e})}static deleteTabset(e){return new Z(Q.DELETE_TABSET,{node:e})}static renameTab(e,t){return new Z(Q.RENAME_TAB,{node:e,text:t})}static selectTab(e){return new Z(Q.SELECT_TAB,{tabNode:e})}static setActiveTabset(e){return new Z(Q.SET_ACTIVE_TABSET,{tabsetNode:e})}static adjustSplit(e){const t=e.node1Id,n=e.node2Id;return new Z(Q.ADJUST_SPLIT,{node1:t,weight1:e.weight1,pixelWidth1:e.pixelWidth1,node2:n,weight2:e.weight2,pixelWidth2:e.pixelWidth2})}static adjustBorderSplit(e,t){return new Z(Q.ADJUST_BORDER_SPLIT,{node:e,pos:t})}static maximizeToggle(e){return new Z(Q.MAXIMIZE_TOGGLE,{node:e})}static updateModelAttributes(e){return new Z(Q.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,t){return new Z(Q.UPDATE_NODE_ATTRIBUTES,{node:e,json:t})}static floatTab(e){return new Z(Q.FLOAT_TAB,{node:e})}static unFloatTab(e){return new Z(Q.UNFLOAT_TAB,{node:e})}},"e");let f=Q;At(f,"Actions"),f.ADD_NODE="FlexLayout_AddNode",f.MOVE_NODE="FlexLayout_MoveNode",f.DELETE_TAB="FlexLayout_DeleteTab",f.DELETE_TABSET="FlexLayout_DeleteTabset",f.RENAME_TAB="FlexLayout_RenameTab",f.SELECT_TAB="FlexLayout_SelectTab",f.SET_ACTIVE_TABSET="FlexLayout_SetActiveTabset",f.ADJUST_SPLIT="FlexLayout_AdjustSplit",f.ADJUST_BORDER_SPLIT="FlexLayout_AdjustBorderSplit",f.MAXIMIZE_TOGGLE="FlexLayout_MaximizeToggle",f.UPDATE_MODEL_ATTRIBUTES="FlexLayout_UpdateModelAttributes",f.UPDATE_NODE_ATTRIBUTES="FlexLayout_UpdateNodeAttributes",f.FLOAT_TAB="FlexLayout_FloatTab",f.UNFLOAT_TAB="FlexLayout_UnFloatTab";var Rt=Object.defineProperty,Lt=b((i,e)=>Rt(i,"name",{value:e,configurable:!0}),"s$7");class p{constructor(e,t,n,s){this.name=e,this.modelName=t,this.defaultValue=n,this.alwaysWriteJson=s,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}}b(p,"Attribute"),Lt(p,"Attribute"),p.NUMBER="number",p.STRING="string",p.BOOLEAN="boolean";var Nt=Object.defineProperty,St=b((i,e)=>Nt(i,"name",{value:e,configurable:!0}),"h$2");class he{constructor(){this.attributes=[],this.nameToAttribute={}}addWithAll(e,t,n,s){const o=new p(e,t,n,s);return this.attributes.push(o),this.nameToAttribute[e]=o,o}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,n){return this.addWithAll(e,void 0,t,n)}getAttributes(){return this.attributes}getModelName(e){const t=this.nameToAttribute[e];if(t!==void 0)return t.modelName}toJson(e,t){for(const n of this.attributes){const s=t[n.name];(n.alwaysWriteJson||s!==n.defaultValue)&&(e[n.name]=s)}}fromJson(e,t){for(const n of this.attributes){const s=e[n.name];s===void 0?t[n.name]=n.defaultValue:t[n.name]=s}}update(e,t){for(const n of this.attributes)if(e.hasOwnProperty(n.name)){const s=e[n.name];s===void 0?delete t[n.name]:t[n.name]=s}}setDefaults(e){for(const t of this.attributes)e[t.name]=t.defaultValue}toTypescriptInterface(e,t){const n=[],s=this.attributes.sort((o,a)=>o.name.localeCompare(a.name));n.push("export interface I"+e+"Attributes {");for(let o=0;o<s.length;o++){const a=s[o];let h=a.type,r,c=a,d;c.defaultValue!==void 0?r=c.defaultValue:c.modelName!==void 0&&t!==void 0&&t.nameToAttribute[c.modelName]!==void 0&&(d=c.modelName,c=t.nameToAttribute[c.modelName],r=c.defaultValue,h=c.type);let l=JSON.stringify(r);const m=c.required||c.fixed?"":"?";if(a.fixed)n.push("	"+a.name+": "+l+";");else{const u=(r!==void 0?"default: "+l:"")+(d!==void 0?" - inherited from global "+d:"");n.push("	"+a.name+m+": "+h+";"+(u.length>0?" // "+u:""))}}return n.push("}"),n.join(`
`)}}b(he,"AttributeDefinitions"),St(he,"AttributeDefinitions");var Dt=Object.defineProperty,Bt=b((i,e)=>Dt(i,"name",{value:e,configurable:!0}),"r$1");class V{constructor(e,t,n,s,o){this.node=e,this.rect=t,this.location=n,this.index=s,this.className=o}}b(V,"DropInfo"),Bt(V,"DropInfo");var _=(i=>(i.FLEXLAYOUT__BORDER="flexlayout__border",i.FLEXLAYOUT__BORDER_="flexlayout__border_",i.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",i.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",i.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",i.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",i.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",i.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",i.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",i.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",i.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",i.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",i.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",i.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",i.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",i.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",i.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",i.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",i.FLEXLAYOUT__FLOATING_WINDOW_TAB="flexlayout__floating_window_tab",i.FLEXLAYOUT__LAYOUT="flexlayout__layout",i.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",i.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",i.FLEXLAYOUT__SPLITTER="flexlayout__splitter",i.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",i.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",i.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",i.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",i.FLEXLAYOUT__TAB="flexlayout__tab",i.FLEXLAYOUT__TABSET="flexlayout__tabset",i.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",i.FLEXLAYOUT__TABSET_HEADER_SIZER="flexlayout__tabset_header_sizer",i.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",i.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",i.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",i.FLEXLAYOUT__TABSET_SIZER="flexlayout__tabset_sizer",i.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",i.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",i.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",i.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",i.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",i.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",i.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",i.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",i.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",i.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",i.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",i.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",i.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",i.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",i.FLEXLAYOUT__TAB_FLOATING="flexlayout__tab_floating",i.FLEXLAYOUT__TAB_FLOATING_INNER="flexlayout__tab_floating_inner",i.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",i.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",i.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",i.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",i.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",i))(_||{}),Ct=Object.defineProperty,Mt=b((i,e)=>Ct(i,"name",{value:e,configurable:!0}),"d$2");class pe{constructor(e){this._dirty=!1,this._tempSize=0,this._model=e,this._attributes={},this._children=[],this._fixed=!1,this._rect=A.empty(),this._visible=!1,this._listeners={}}getId(){let e=this._attributes.id;return e!==void 0||(e=this._model._nextUniqueId(),this._setId(e)),e}getModel(){return this._model}getType(){return this._attributes.type}getParent(){return this._parent}getChildren(){return this._children}getRect(){return this._rect}isVisible(){return this._visible}getOrientation(){return this._parent===void 0?this._model.isRootOrientationVertical()?y.VERT:y.HORZ:y.flip(this._parent.getOrientation())}setEventListener(e,t){this._listeners[e]=t}removeEventListener(e){delete this._listeners[e]}_setId(e){this._attributes.id=e}_fireEvent(e,t){this._listeners[e]!==void 0&&this._listeners[e](t)}_getAttr(e){let t=this._attributes[e];if(t===void 0){const n=this._getAttributeDefinitions().getModelName(e);n!==void 0&&(t=this._model._getAttribute(n))}return t}_forEachNode(e,t){e(this,t),t++;for(const n of this._children)n._forEachNode(e,t)}_setVisible(e){e!==this._visible&&(this._fireEvent("visibility",{visible:e}),this._visible=e)}_getDrawChildren(){return this._children}_setParent(e){this._parent=e}_setRect(e){this._rect=e}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}_isFixed(){return this._fixed}_layout(e,t){this._rect=e}_findDropTargetNode(e,t,n){let s;if(this._rect.contains(t,n)){if(this._model.getMaximizedTabset()!==void 0)s=this._model.getMaximizedTabset().canDrop(e,t,n);else if(s=this.canDrop(e,t,n),s===void 0&&this._children.length!==0){for(const o of this._children)if(s=o._findDropTargetNode(e,t,n),s!==void 0)break}}return s}canDrop(e,t,n){}_canDockInto(e,t){if(t!=null){if(t.location===v.CENTER&&t.node.isEnableDrop()===!1||t.location===v.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||t.location!==v.CENTER&&t.node.isEnableDivide()===!1)return!1;if(this._model._getOnAllowDrop())return this._model._getOnAllowDrop()(e,t)}return!0}_removeChild(e){const t=this._children.indexOf(e);return t!==-1&&this._children.splice(t,1),this._dirty=!0,t}_addChild(e,t){return t!=null?this._children.splice(t,0,e):(this._children.push(e),t=this._children.length-1),e._parent=this,this._dirty=!0,t}_removeAll(){this._children=[],this._dirty=!0}_styleWithPosition(e){return e==null&&(e={}),this._rect.styleWithPosition(e)}_getTempSize(){return this._tempSize}_setTempSize(e){this._tempSize=e}isEnableDivide(){return!0}_toAttributeString(){return JSON.stringify(this._attributes,void 0,"	")}}b(pe,"Node"),Mt(pe,"Node");var xt=Object.defineProperty,Ut=b((i,e)=>xt(i,"name",{value:e,configurable:!0}),"r");const Xe=b(class extends pe{constructor(e){super(e),this._fixed=!0,this._attributes.type=Xe.TYPE,e._addNode(this)}getWidth(){return this._model.getSplitterSize()}getMinWidth(){return this.getOrientation()===y.VERT?this._model.getSplitterSize():0}getHeight(){return this._model.getSplitterSize()}getMinHeight(){return this.getOrientation()===y.HORZ?this._model.getSplitterSize():0}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getWeight(){return 0}_setWeight(e){}_getPrefSize(e){return this._model.getSplitterSize()}_updateAttrs(e){}_getAttributeDefinitions(){return new he}toJson(){}},"i");let le=Xe;Ut(le,"SplitterNode"),le.TYPE="splitter";var It=Object.defineProperty,Ft=b((i,e)=>It(i,"name",{value:e,configurable:!0}),"s$5");const de=b(class extends pe{constructor(e,t,n=!0){super(e),this._extra={},de._attributeDefinitions.fromJson(t,this._attributes),n===!0&&e._addNode(this)}static _fromJson(e,t,n=!0){return new de(t,e,n)}static _createAttributeDefinitions(){const e=new he;return e.add("type",de.TYPE,!0).setType(p.STRING),e.add("id",void 0).setType(p.STRING),e.add("name","[Unnamed Tab]").setType(p.STRING),e.add("altName",void 0).setType(p.STRING),e.add("helpText",void 0).setType(p.STRING),e.add("component",void 0).setType(p.STRING),e.add("config",void 0).setType("any"),e.add("floating",!1).setType(p.BOOLEAN),e.addInherited("enableClose","tabEnableClose").setType(p.BOOLEAN),e.addInherited("closeType","tabCloseType").setType("ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(p.BOOLEAN),e.addInherited("enableRename","tabEnableRename").setType(p.BOOLEAN),e.addInherited("className","tabClassName").setType(p.STRING),e.addInherited("icon","tabIcon").setType(p.STRING),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(p.BOOLEAN),e.addInherited("enableFloat","tabEnableFloat").setType(p.BOOLEAN),e.addInherited("borderWidth","tabBorderWidth").setType(p.NUMBER),e.addInherited("borderHeight","tabBorderHeight").setType(p.NUMBER),e}getWindow(){return this._window}getTabRect(){return this._tabRect}_setTabRect(e){this._tabRect=e}_setRenderedName(e){this._renderedName=e}_getNameForOverflowMenu(){const e=this._getAttr("altName");return e!==void 0?e:this._renderedName}getName(){return this._getAttr("name")}getHelpText(){return this._getAttr("helpText")}getComponent(){return this._getAttr("component")}getConfig(){return this._attributes.config}getExtraData(){return this._extra}isFloating(){return this._getAttr("floating")}getIcon(){return this._getAttr("icon")}isEnableClose(){return this._getAttr("enableClose")}getCloseType(){return this._getAttr("closeType")}isEnableFloat(){return this._getAttr("enableFloat")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableRename(){return this._getAttr("enableRename")}getClassName(){return this._getAttr("className")}isEnableRenderOnDemand(){return this._getAttr("enableRenderOnDemand")}_setName(e){this._attributes.name=e,this._window&&this._window.document&&(this._window.document.title=e)}_setFloating(e){this._attributes.floating=e}_layout(e,t){e.equals(this._rect)||this._fireEvent("resize",{rect:e}),this._rect=e}_delete(){this._parent._remove(this),this._fireEvent("close",{})}toJson(){const e={};return de._attributeDefinitions.toJson(e,this._attributes),e}_updateAttrs(e){de._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return de._attributeDefinitions}_setWindow(e){this._window=e}_setBorderWidth(e){this._attributes.borderWidth=e}_setBorderHeight(e){this._attributes.borderHeight=e}static getAttributeDefinitions(){return de._attributeDefinitions}},"n");let F=de;Ft(F,"TabNode"),F.TYPE="tab",F._attributeDefinitions=de._createAttributeDefinitions();var We=Object.defineProperty,zt=Object.defineProperties,Pt=Object.getOwnPropertyDescriptors,ke=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,Ge=b((i,e,t)=>e in i?We(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"O"),Xt=b((i,e)=>{for(var t in e||(e={}))Yt.call(e,t)&&Ge(i,t,e[t]);if(ke)for(var t of ke(e))Ht.call(e,t)&&Ge(i,t,e[t]);return i},"y"),Wt=b((i,e)=>zt(i,Pt(e)),"M$2"),kt=b((i,e)=>We(i,"name",{value:e,configurable:!0}),"x$1");const $=b(class extends pe{constructor(i,e){super(i),this._dirty=!0,this._drawChildren=[],this._minHeight=0,this._minWidth=0,$._attributeDefinitions.fromJson(e,this._attributes),i._addNode(this)}static _fromJson(i,e){const t=new $(e,i);if(i.children!=null)for(const n of i.children)if(n.type===x.TYPE){const s=x._fromJson(n,e);t._addChild(s)}else{const s=$._fromJson(n,e);t._addChild(s)}return t}static _createAttributeDefinitions(){const i=new he;return i.add("type",$.TYPE,!0).setType(p.STRING).setFixed(),i.add("id",void 0).setType(p.STRING),i.add("weight",100).setType(p.NUMBER),i.add("width",void 0).setType(p.NUMBER),i.add("height",void 0).setType(p.NUMBER),i}getWeight(){return this._attributes.weight}getWidth(){return this._getAttr("width")}getHeight(){return this._getAttr("height")}_setWeight(i){this._attributes.weight=i}_layout(i,e){super._layout(i,e);const t=this._rect._getSize(this.getOrientation());let n=0,s=0,o=0,a=0;const h=this._getDrawChildren();for(const u of h){const g=u._getPrefSize(this.getOrientation());u._isFixed()?g!==void 0&&(s+=g):g===void 0?n+=u.getWeight():(o+=g,a+=u.getWeight())}let r=!1,c=t-s-o;c<0&&(c=t-s,r=!0,n+=a);let d=0,l=0;for(const u of h){const g=u._getPrefSize(this.getOrientation());if(u._isFixed())g!==void 0&&u._setTempSize(g);else if(g==null||r){if(n===0)u._setTempSize(0);else{const T=u.getMinSize(this.getOrientation()),L=Math.floor(c*(u.getWeight()/n));u._setTempSize(Math.max(T,L))}l+=u._getTempSize()}else u._setTempSize(g);d+=u._getTempSize()}if(l>0){for(;d<t;)for(const u of h)if(!(u instanceof le)){const g=u._getPrefSize(this.getOrientation());!u._isFixed()&&(g===void 0||r)&&d<t&&(u._setTempSize(u._getTempSize()+1),d++)}for(;d>t;){let u=!1;for(const g of h)if(!(g instanceof le)){const T=g.getMinSize(this.getOrientation());g._getTempSize()>T&&d>t&&(g._setTempSize(g._getTempSize()-1),d--,u=!0)}if(!u)break}for(;d>t;){let u=!1;for(const g of h)g instanceof le||g._getTempSize()>0&&d>t&&(g._setTempSize(g._getTempSize()-1),d--,u=!0);if(!u)break}}let m=0;for(const u of h)this.getOrientation()===y.HORZ?u._layout(new A(this._rect.x+m,this._rect.y,u._getTempSize(),this._rect.height),e):u._layout(new A(this._rect.x,this._rect.y+m,this._rect.width,u._getTempSize()),e),m+=u._getTempSize();return!0}_getSplitterBounds(i,e=!1){const t=[0,0],n=this._getDrawChildren(),s=n.indexOf(i),o=n[s-1],a=n[s+1];if(this.getOrientation()===y.HORZ){const h=e?o.getMinWidth():0,r=e?a.getMinWidth():0;t[0]=o.getRect().x+h,t[1]=a.getRect().getRight()-i.getWidth()-r}else{const h=e?o.getMinHeight():0,r=e?a.getMinHeight():0;t[0]=o.getRect().y+h,t[1]=a.getRect().getBottom()-i.getHeight()-r}return t}_calculateSplit(i,e){let t;const n=this._getDrawChildren(),s=n.indexOf(i),o=this._getSplitterBounds(i),a=n[s-1].getWeight()+n[s+1].getWeight(),h=Math.max(0,e-o[0]),r=Math.max(0,o[1]-e);if(h+r>0){const c=h*a/(h+r),d=r*a/(h+r);t={node1Id:n[s-1].getId(),weight1:c,pixelWidth1:h,node2Id:n[s+1].getId(),weight2:d,pixelWidth2:r}}return t}_getDrawChildren(){if(this._dirty){this._drawChildren=[];for(let i=0;i<this._children.length;i++){const e=this._children[i];if(i!==0){const t=new le(this._model);t._setParent(this),this._drawChildren.push(t)}this._drawChildren.push(e)}this._dirty=!1}return this._drawChildren}getMinSize(i){return i===y.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this._minWidth}getMinHeight(){return this._minHeight}calcMinSize(){this._minHeight=0,this._minWidth=0;let i=!0;for(const e of this._children){const t=e;t instanceof $&&t.calcMinSize(),this.getOrientation()===y.VERT?(this._minHeight+=t.getMinHeight(),i||(this._minHeight+=this._model.getSplitterSize()),this._minWidth=Math.max(this._minWidth,t.getMinWidth())):(this._minWidth+=t.getMinWidth(),i||(this._minWidth+=this._model.getSplitterSize()),this._minHeight=Math.max(this._minHeight,t.getMinHeight())),i=!1}}_tidy(){let i=0;for(;i<this._children.length;){const e=this._children[i];if(e instanceof $){e._tidy();const t=e.getChildren();if(t.length===0)this._removeChild(e);else if(t.length===1){const n=t[0];if(this._removeChild(e),n instanceof $){let s=0;const o=n.getChildren();for(const a of o)s+=a.getWeight();for(let a=0;a<o.length;a++){const h=o[a];h._setWeight(e.getWeight()*h.getWeight()/s),this._addChild(h,i+a)}}else n._setWeight(e.getWeight()),this._addChild(n,i)}else i++}else e instanceof x&&e.getChildren().length===0&&e.isEnableDeleteWhenEmpty()?(this._removeChild(e),e===this._model.getMaximizedTabset()&&this._model._setMaximizedTabset(void 0)):i++}if(this===this._model.getRoot()&&this._children.length===0){const e=this._model._getOnCreateTabSet();let t=e?e():{};t=Wt(Xt({},t),{selected:-1});const n=new x(this._model,t);this._model._setActiveTabset(n),this._addChild(n)}}canDrop(i,e,t){const n=t-this._rect.y,s=e-this._rect.x,o=this._rect.width,a=this._rect.height,h=10,r=50;let c;if(this._model.isEnableEdgeDock()&&this._parent===void 0){if(e<this._rect.x+h&&n>a/2-r&&n<a/2+r){const d=v.LEFT,l=d.getDockRect(this._rect);l.width=l.width/2,c=new V(this,l,d,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(e>this._rect.getRight()-h&&n>a/2-r&&n<a/2+r){const d=v.RIGHT,l=d.getDockRect(this._rect);l.width=l.width/2,l.x+=l.width,c=new V(this,l,d,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t<this._rect.y+h&&s>o/2-r&&s<o/2+r){const d=v.TOP,l=d.getDockRect(this._rect);l.height=l.height/2,c=new V(this,l,d,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t>this._rect.getBottom()-h&&s>o/2-r&&s<o/2+r){const d=v.BOTTOM,l=d.getDockRect(this._rect);l.height=l.height/2,l.y+=l.height,c=new V(this,l,d,-1,_.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(c!==void 0&&!i._canDockInto(i,c))return}return c}drop(i,e,t){const n=e,s=i.getParent();s&&s._removeChild(i),s!==void 0&&s.getType()===x.TYPE&&s._setSelected(0),s!==void 0&&s.getType()===k.TYPE&&s._setSelected(-1);let o;if(i instanceof x)o=i;else{const r=this._model._getOnCreateTabSet();o=new x(this._model,r?r(i):{}),o._addChild(i)}let a=this._children.reduce((r,c)=>r+c.getWeight(),0);a===0&&(a=100),o._setWeight(a/3);const h=!this._model.isRootOrientationVertical();if(h&&n===v.LEFT||!h&&n===v.TOP)this._addChild(o,0);else if(h&&n===v.RIGHT||!h&&n===v.BOTTOM)this._addChild(o);else if(h&&n===v.TOP||!h&&n===v.LEFT){const r=new $(this._model,{}),c=new $(this._model,{});c._setWeight(75),o._setWeight(25);for(const d of this._children)c._addChild(d);this._removeAll(),r._addChild(o),r._addChild(c),this._addChild(r)}else if(h&&n===v.BOTTOM||!h&&n===v.RIGHT){const r=new $(this._model,{}),c=new $(this._model,{});c._setWeight(75),o._setWeight(25);for(const d of this._children)c._addChild(d);this._removeAll(),r._addChild(c),r._addChild(o),this._addChild(r)}this._model._setActiveTabset(o),this._model._tidy()}toJson(){const i={};$._attributeDefinitions.toJson(i,this._attributes),i.children=[];for(const e of this._children)i.children.push(e.toJson());return i}isEnableDrop(){return!0}_getPrefSize(i){let e=this.getWidth();return i===y.VERT&&(e=this.getHeight()),e}_getAttributeDefinitions(){return $._attributeDefinitions}_updateAttrs(i){$._attributeDefinitions.update(i,this._attributes)}static getAttributeDefinitions(){return $._attributeDefinitions}},"g");let oe=$;kt(oe,"RowNode"),oe.TYPE="row",oe._attributeDefinitions=$._createAttributeDefinitions();var Gt=Object.defineProperty,jt=b((i,e)=>Gt(i,"name",{value:e,configurable:!0}),"p$1");const se=b(class extends pe{constructor(e,t){super(e),se._attributeDefinitions.fromJson(t,this._attributes),e._addNode(this),this._calculatedTabBarHeight=0,this._calculatedHeaderBarHeight=0}static _fromJson(e,t){const n=new se(t,e);if(e.children!=null)for(const s of e.children){const o=F._fromJson(s,t);n._addChild(o)}return n._children.length===0&&n._setSelected(-1),e.maximized&&e.maximized===!0&&t._setMaximizedTabset(n),e.active&&e.active===!0&&t._setActiveTabset(n),n}static _createAttributeDefinitions(){const e=new he;return e.add("type",se.TYPE,!0).setType(p.STRING).setFixed(),e.add("id",void 0).setType(p.STRING),e.add("weight",100).setType(p.NUMBER),e.add("width",void 0).setType(p.NUMBER),e.add("height",void 0).setType(p.NUMBER),e.add("selected",0).setType(p.NUMBER),e.add("name",void 0).setType(p.STRING),e.add("config",void 0).setType("any"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty"),e.addInherited("enableDrop","tabSetEnableDrop"),e.addInherited("enableDrag","tabSetEnableDrag"),e.addInherited("enableDivide","tabSetEnableDivide"),e.addInherited("enableMaximize","tabSetEnableMaximize"),e.addInherited("enableClose","tabSetEnableClose"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip"),e.addInherited("classNameHeader","tabSetClassNameHeader"),e.addInherited("enableTabStrip","tabSetEnableTabStrip"),e.addInherited("borderInsets","tabSetBorderInsets"),e.addInherited("marginInsets","tabSetMarginInsets"),e.addInherited("minWidth","tabSetMinWidth"),e.addInherited("minHeight","tabSetMinHeight"),e.addInherited("headerHeight","tabSetHeaderHeight"),e.addInherited("tabStripHeight","tabSetTabStripHeight"),e.addInherited("tabLocation","tabSetTabLocation"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(p.BOOLEAN),e}getName(){return this._getAttr("name")}getSelected(){const e=this._attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this._children[e]}getWeight(){return this._getAttr("weight")}getWidth(){return this._getAttr("width")}getMinWidth(){return this._getAttr("minWidth")}getHeight(){return this._getAttr("height")}getMinHeight(){return this._getAttr("minHeight")}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getConfig(){return this._attributes.config}isMaximized(){return this._model.getMaximizedTabset()===this}isActive(){return this._model.getActiveTabset()===this}isEnableDeleteWhenEmpty(){return this._getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this._getAttr("enableDrop")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableDivide(){return this._getAttr("enableDivide")}isEnableMaximize(){return this._getAttr("enableMaximize")}isEnableClose(){return this._getAttr("enableClose")}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset()===this?!0:!(this.getParent()===this.getModel().getRoot()&&this.getModel().getRoot().getChildren().length===1):!1}isEnableTabStrip(){return this._getAttr("enableTabStrip")}isAutoSelectTab(){return this._getAttr("autoSelectTab")}getClassNameTabStrip(){return this._getAttr("classNameTabStrip")}getClassNameHeader(){return this._getAttr("classNameHeader")}calculateHeaderBarHeight(e){const t=this._getAttr("headerHeight");t!==0?this._calculatedHeaderBarHeight=t:this._calculatedHeaderBarHeight=e.headerBarSize}calculateTabBarHeight(e){const t=this._getAttr("tabStripHeight");t!==0?this._calculatedTabBarHeight=t:this._calculatedTabBarHeight=e.tabBarSize}getHeaderHeight(){return this._calculatedHeaderBarHeight}getTabStripHeight(){return this._calculatedTabBarHeight}getTabLocation(){return this._getAttr("tabLocation")}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}canDrop(e,t,n){let s;if(e===this){const o=v.CENTER,a=this._tabHeaderRect;s=new V(this,a,o,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._contentRect.contains(t,n)){let o=v.CENTER;this._model.getMaximizedTabset()===void 0&&(o=v.getLocation(this._contentRect,t,n));const a=o.getDockRect(this._rect);s=new V(this,a,o,-1,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._tabHeaderRect!=null&&this._tabHeaderRect.contains(t,n)){let o,a,h;if(this._children.length===0)o=this._tabHeaderRect.clone(),a=o.y+3,h=o.height-4,o.width=2;else{let r=this._children[0];o=r.getTabRect(),a=o.y,h=o.height;let c=this._tabHeaderRect.x,d=0;for(let l=0;l<this._children.length;l++){if(r=this._children[l],o=r.getTabRect(),d=o.x+o.width/2,t>=c&&t<d){const m=v.CENTER,u=new A(o.x-2,a,3,h);s=new V(this,u,m,l,_.FLEXLAYOUT__OUTLINE_RECT);break}c=d}}if(s==null){const r=v.CENTER,c=new A(o.getRight()-2,a,3,h);s=new V(this,c,r,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}if(e._canDockInto(e,s))return s}_layout(e,t){this.calculateHeaderBarHeight(t),this.calculateTabBarHeight(t),this.isMaximized()&&(e=this._model.getRoot().getRect()),e=e.removeInsets(this._getAttr("marginInsets")),this._rect=e,e=e.removeInsets(this._getAttr("borderInsets"));const n=this.getName()!==void 0;let s=0,o=0;n&&(s+=this._calculatedHeaderBarHeight,o+=this._calculatedHeaderBarHeight),this.isEnableTabStrip()&&(this.getTabLocation()==="top"?this._tabHeaderRect=new A(e.x,e.y+s,e.width,this._calculatedTabBarHeight):this._tabHeaderRect=new A(e.x,e.y+e.height-this._calculatedTabBarHeight,e.width,this._calculatedTabBarHeight),o+=this._calculatedTabBarHeight,this.getTabLocation()==="top"&&(s+=this._calculatedTabBarHeight)),this._contentRect=new A(e.x,e.y+s,e.width,e.height-o);for(let a=0;a<this._children.length;a++){const h=this._children[a];h._layout(this._contentRect,t),h._setVisible(a===this.getSelected())}}_delete(){this._parent._removeChild(this)}_remove(e){const t=this._removeChild(e);this._model._tidy(),ye(this,t)}drop(e,t,n,s){const o=t;if(this===e)return;let a=e.getParent(),h=0;if(a!==void 0&&(h=a._removeChild(e),a instanceof k&&a.getSelected()===h?a._setSelected(-1):ye(a,h)),e.getType()===F.TYPE&&a===this&&h<n&&n>0&&n--,o===v.CENTER){let r=n;if(r===-1&&(r=this._children.length),e.getType()===F.TYPE)this._addChild(e,r),(s||s!==!1&&this.isAutoSelectTab())&&this._setSelected(r);else{for(let c=0;c<e.getChildren().length;c++){const d=e.getChildren()[c];this._addChild(d,r),r++}this.getSelected()===-1&&this._children.length>0&&this._setSelected(0)}this._model._setActiveTabset(this)}else{let r;if(e instanceof F){const l=this._model._getOnCreateTabSet();r=new se(this._model,l?l(e):{}),r._addChild(e),a=r}else r=e;const c=this._parent,d=c.getChildren().indexOf(this);if(c.getOrientation()===o._orientation)r._setWeight(this.getWeight()/2),this._setWeight(this.getWeight()/2),c._addChild(r,d+o._indexPlus);else{const l=new oe(this._model,{});l._setWeight(this.getWeight()),l._addChild(this),this._setWeight(50),r._setWeight(50),l._addChild(r,o._indexPlus),c._removeChild(this),c._addChild(l,d)}this._model._setActiveTabset(r)}this._model._tidy()}toJson(){const e={};return se._attributeDefinitions.toJson(e,this._attributes),e.children=this._children.map(t=>t.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}_updateAttrs(e){se._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return se._attributeDefinitions}_getPrefSize(e){let t=this.getWidth();return e===y.VERT&&(t=this.getHeight()),t}static getAttributeDefinitions(){return se._attributeDefinitions}},"l");let x=se;jt(x,"TabSetNode"),x.TYPE="tabset",x._attributeDefinitions=se._createAttributeDefinitions();var Vt=Object.defineProperty,Se=b((i,e)=>Vt(i,"name",{value:e,configurable:!0}),"i$2");function je(i){const e=i.getParent();if(e!==null)if(e instanceof x){let t=!1,n=0;const s=e.getChildren();for(let o=0;o<s.length;o++){const a=s[o];if(a===i)t=!0;else if(!a.isFloating()&&(n=o,t))break}e._setSelected(n)}else e instanceof k&&e._setSelected(-1)}b(je,"adjustSelectedIndexAfterFloat"),Se(je,"adjustSelectedIndexAfterFloat");function Ve(i){const e=i.getParent();if(e!==null&&(e instanceof x||e instanceof k)){const t=e.getChildren();for(let n=0;n<t.length;n++)if(t[n]===i){e._setSelected(n);return}}}b(Ve,"adjustSelectedIndexAfterDock"),Se(Ve,"adjustSelectedIndexAfterDock");function ye(i,e){if(i!==void 0&&(i.getType()===x.TYPE||i.getType()===k.TYPE)){const t=i.getSelected();t!==-1&&(e===t&&i.getChildren().length>0?e>=i.getChildren().length&&i._setSelected(i.getChildren().length-1):e<t?i._setSelected(t-1):e>t||i._setSelected(-1))}}b(ye,"adjustSelectedIndex"),Se(ye,"adjustSelectedIndex");function $e(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,i=>(i^crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16))}b($e,"randomUUID"),Se($e,"randomUUID");var $t=Object.defineProperty,Jt=b((i,e)=>$t(i,"name",{value:e,configurable:!0}),"A$1");const ae=b(class extends pe{constructor(i,e,t){super(t),this._adjustedSize=0,this._calculatedBorderBarSize=0,this._location=i,this._drawChildren=[],this._attributes.id=`border_${i.getName()}`,ae._attributeDefinitions.fromJson(e,this._attributes),t._addNode(this)}static _fromJson(i,e){const t=v.getByName(i.location),n=new ae(t,i,e);return i.children&&(n._children=i.children.map(s=>{const o=F._fromJson(s,e);return o._setParent(n),o})),n}static _createAttributeDefinitions(){const i=new he;return i.add("type",ae.TYPE,!0).setType(p.STRING).setFixed(),i.add("selected",-1).setType(p.NUMBER),i.add("show",!0).setType(p.BOOLEAN),i.add("config",void 0).setType("any"),i.addInherited("barSize","borderBarSize").setType(p.NUMBER),i.addInherited("enableDrop","borderEnableDrop").setType(p.BOOLEAN),i.addInherited("className","borderClassName").setType(p.STRING),i.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(p.BOOLEAN),i.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(p.BOOLEAN),i.addInherited("size","borderSize").setType(p.NUMBER),i.addInherited("minSize","borderMinSize").setType(p.NUMBER),i.addInherited("enableAutoHide","borderEnableAutoHide").setType(p.BOOLEAN),i}getLocation(){return this._location}getTabHeaderRect(){return this._tabHeaderRect}getRect(){return this._tabHeaderRect}getContentRect(){return this._contentRect}isEnableDrop(){return this._getAttr("enableDrop")}isAutoSelectTab(i){return i==null&&(i=this.getSelected()!==-1),i?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")}getClassName(){return this._getAttr("className")}calcBorderBarSize(i){const e=this._getAttr("barSize");e!==0?this._calculatedBorderBarSize=e:this._calculatedBorderBarSize=i.borderBarSize}getBorderBarSize(){return this._calculatedBorderBarSize}getSize(){const i=this._getAttr("size"),e=this.getSelected();if(e===-1)return i;{const t=this._children[e],n=this._location._orientation===y.HORZ?t._getAttr("borderWidth"):t._getAttr("borderHeight");return n===-1?i:n}}getMinSize(){return this._getAttr("minSize")}getSelected(){return this._attributes.selected}getSelectedNode(){if(this.getSelected()!==-1)return this._children[this.getSelected()]}getOrientation(){return this._location.getOrientation()}getConfig(){return this._attributes.config}isMaximized(){return!1}isShowing(){return this._attributes.show?!(this._model._getShowHiddenBorder()!==this._location&&this.isAutoHide()&&this._children.length===0):!1}isAutoHide(){return this._getAttr("enableAutoHide")}_setSelected(i){this._attributes.selected=i}_setSize(i){const e=this.getSelected();if(e===-1)this._attributes.size=i;else{const t=this._children[e];(this._location._orientation===y.HORZ?t._getAttr("borderWidth"):t._getAttr("borderHeight"))===-1?this._attributes.size=i:this._location._orientation===y.HORZ?t._setBorderWidth(i):t._setBorderHeight(i)}}_updateAttrs(i){ae._attributeDefinitions.update(i,this._attributes)}_getDrawChildren(){return this._drawChildren}_setAdjustedSize(i){this._adjustedSize=i}_getAdjustedSize(){return this._adjustedSize}_layoutBorderOuter(i,e){this.calcBorderBarSize(e);const t=this._location.split(i,this.getBorderBarSize());return this._tabHeaderRect=t.start,t.end}_layoutBorderInner(i,e){this._drawChildren=[];const t=this._location,n=t.split(i,this._adjustedSize+this._model.getSplitterSize()),s=t.reflect().split(n.start,this._model.getSplitterSize());this._contentRect=s.end;for(let o=0;o<this._children.length;o++){const a=this._children[o];a._layout(this._contentRect,e),a._setVisible(o===this.getSelected()),this._drawChildren.push(a)}if(this.getSelected()===-1)return i;{const o=new le(this._model);return o._setParent(this),o._setRect(s.start),this._drawChildren.push(o),n.end}}_remove(i){const e=this._removeChild(i);this.getSelected()!==-1&&ye(this,e)}canDrop(i,e,t){if(i.getType()!==F.TYPE)return;let n;const s=v.CENTER;if(this._tabHeaderRect.contains(e,t)){if(this._location._orientation===y.VERT)if(this._children.length>0){let o=this._children[0],a=o.getTabRect();const h=a.y,r=a.height;let c=this._tabHeaderRect.x,d=0;for(let l=0;l<this._children.length;l++){if(o=this._children[l],a=o.getTabRect(),d=a.x+a.width/2,e>=c&&e<d){const m=new A(a.x-2,h,3,r);n=new V(this,m,s,l,_.FLEXLAYOUT__OUTLINE_RECT);break}c=d}if(n==null){const l=new A(a.getRight()-2,h,3,r);n=new V(this,l,s,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new A(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18);n=new V(this,o,s,0,_.FLEXLAYOUT__OUTLINE_RECT)}else if(this._children.length>0){let o=this._children[0],a=o.getTabRect();const h=a.x,r=a.width;let c=this._tabHeaderRect.y,d=0;for(let l=0;l<this._children.length;l++){if(o=this._children[l],a=o.getTabRect(),d=a.y+a.height/2,t>=c&&t<d){const m=new A(h,a.y-2,r,3);n=new V(this,m,s,l,_.FLEXLAYOUT__OUTLINE_RECT);break}c=d}if(n==null){const l=new A(h,a.getBottom()-2,r,3);n=new V(this,l,s,this._children.length,_.FLEXLAYOUT__OUTLINE_RECT)}}else{const o=new A(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3);n=new V(this,o,s,0,_.FLEXLAYOUT__OUTLINE_RECT)}if(!i._canDockInto(i,n))return}else if(this.getSelected()!==-1&&this._contentRect.contains(e,t)){const o=this._contentRect;if(n=new V(this,o,s,-1,_.FLEXLAYOUT__OUTLINE_RECT),!i._canDockInto(i,n))return}return n}drop(i,e,t,n){let s=0;const o=i.getParent();o!==void 0&&(s=o._removeChild(i),o!==this&&o instanceof ae&&o.getSelected()===s?o._setSelected(-1):ye(o,s)),i.getType()===F.TYPE&&o===this&&s<t&&t>0&&t--;let a=t;a===-1&&(a=this._children.length),i.getType()===F.TYPE&&this._addChild(i,a),(n||n!==!1&&this.isAutoSelectTab())&&this._setSelected(a),this._model._tidy()}toJson(){const i={};return ae._attributeDefinitions.toJson(i,this._attributes),i.location=this._location.getName(),i.children=this._children.map(e=>e.toJson()),i}_getSplitterBounds(i,e=!1){const t=[0,0],n=e?this.getMinSize():0,s=this._model._getOuterInnerRects().outer,o=this._model._getOuterInnerRects().inner,a=this._model.getRoot();return this._location===v.TOP?(t[0]=s.y+n,t[1]=Math.max(t[0],o.getBottom()-i.getHeight()-a.getMinHeight())):this._location===v.LEFT?(t[0]=s.x+n,t[1]=Math.max(t[0],o.getRight()-i.getWidth()-a.getMinWidth())):this._location===v.BOTTOM?(t[1]=s.getBottom()-i.getHeight()-n,t[0]=Math.min(t[1],o.y+a.getMinHeight())):this._location===v.RIGHT&&(t[1]=s.getRight()-i.getWidth()-n,t[0]=Math.min(t[1],o.x+a.getMinWidth())),t}_calculateSplit(i,e){const t=this._getSplitterBounds(i);return this._location===v.BOTTOM||this._location===v.RIGHT?Math.max(0,t[1]-e):Math.max(0,e-t[0])}_getAttributeDefinitions(){return ae._attributeDefinitions}static getAttributeDefinitions(){return ae._attributeDefinitions}},"c");let k=ae;Jt(k,"BorderNode"),k.TYPE="border",k._attributeDefinitions=ae._createAttributeDefinitions();var K=(i=>(i.Close_Tab="Close",i.Close_Tabset="Close tabset",i.Move_Tab="Move: ",i.Move_Tabset="Move tabset",i.Maximize="Maximize tabset",i.Restore="Restore tabset",i.Float_Tab="Show selected tab in floating window",i.Overflow_Menu_Tooltip="Hidden tabs",i.Floating_Window_Message="This panel is shown in a floating window",i.Floating_Window_Show_Window="Show window",i.Floating_Window_Dock_Window="Dock window",i.Error_rendering_component="Error rendering component",i))(K||{}),Oe=(i=>(i[i.Visible=1]="Visible",i[i.Always=2]="Always",i[i.Selected=3]="Selected",i))(Oe||{}),Zt=Object.defineProperty,De=b((i,e)=>Zt(i,"name",{value:e,configurable:!0}),"i$1");function Be(i,e,t,n){let s=t?t(e):void 0,o=e.getName(),a=e.getName();function h(c){return c.titleContent!==void 0}if(b(h,"u"),De(h,"isTitleObject"),n!==void 0){const c=n(e);c!==void 0&&(typeof c=="string"?(o=c,a=c):h(c)?(o=c.titleContent,a=c.name):o=c)}s===void 0&&e.getIcon()!==void 0&&(s=wp.element.createElement("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const r={leading:s,content:o,name:a,buttons:[]};return i.customizeTab(e,r),e._setRenderedName(r.name),r}b(Be,"getRenderStateEx"),De(Be,"getRenderStateEx");function Ee(i,e){e?i.visibility="hidden":i.display="none"}b(Ee,"hideElement"),De(Ee,"hideElement");function ce(i){let e=!1;return i.nativeEvent instanceof MouseEvent&&(i.nativeEvent.button!==0||i.ctrlKey||i.altKey||i.metaKey||i.shiftKey)&&(e=!0),e}b(ce,"isAuxMouseEvent"),De(ce,"isAuxMouseEvent");var Kt=Object.defineProperty,te=b((i,e)=>Kt(i,"name",{value:e,configurable:!0}),"n$2");const qt=te(i=>{const{layout:e,node:t,selected:n,border:s,iconFactory:o,titleFactory:a,icons:h,path:r}=i,c=wp.element.useRef(null),d=wp.element.useRef(null),l=te(R=>{!ce(R)&&!e.getEditingTab()&&e.dragStart(R,void 0,t,t.isEnableDrag(),g,T)},"onMouseDown"),m=te(R=>{ce(R)&&e.auxMouseClick(t,R)},"onAuxMouseClick"),u=te(R=>{e.showContextMenu(t,R)},"onContextMenu"),g=te(()=>{e.doAction(f.selectTab(t.getId()))},"onClick"),T=te(R=>{},"onDoubleClick"),L=te(R=>{R.target!==d.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",L),e.getCurrentDocument().body.removeEventListener("touchstart",L),e.setEditingTab(void 0))},"onEndEdit"),D=te(()=>{const R=t.getCloseType();return!!(n||R===Oe.Always||R===Oe.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),U=te(R=>{D()?e.doAction(f.deleteTab(t.getId())):g()},"onClose"),E=te(R=>{R.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&d.current.select()});const B=te(()=>{const R=e.getDomRect(),j=c.current.getBoundingClientRect();t._setTabRect(new A(j.left-R.left,j.top-R.top,j.width,j.height))},"updateRect"),N=te(R=>{R.stopPropagation()},"onTextBoxMouseDown"),P=te(R=>{R.keyCode===27?e.setEditingTab(void 0):R.keyCode===13&&(e.setEditingTab(void 0),e.doAction(f.renameTab(t.getId(),R.target.value)))},"onTextBoxKeyPress"),M=e.getClassName;let J=M(_.FLEXLAYOUT__BORDER_BUTTON)+" "+M(_.FLEXLAYOUT__BORDER_BUTTON_+s);n?J+=" "+M(_.FLEXLAYOUT__BORDER_BUTTON__SELECTED):J+=" "+M(_.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),t.getClassName()!==void 0&&(J+=" "+t.getClassName());const X=Be(e,t,o,a);let W=X.content?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__BORDER_BUTTON_CONTENT)},X.content):null;const S=X.leading?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__BORDER_BUTTON_LEADING)},X.leading):null;if(e.getEditingTab()===t&&(W=wp.element.createElement("input",{ref:d,className:M(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":r+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:N,onTouchStart:N})),t.isEnableClose()){const R=e.i18nName(K.Close_Tab);X.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":r+"/button/close",title:R,className:M(_.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onMouseDown:E,onClick:U,onTouchStart:E},typeof h.close=="function"?h.close(t):h.close))}return wp.element.createElement("div",{ref:c,"data-layout-path":r,className:J,onMouseDown:l,onClick:m,onAuxClick:m,onContextMenu:u,onTouchStart:l,title:t.getHelpText()},S,W,X.buttons)},"BorderButton");var Qt=Object.defineProperty,ei=b((i,e)=>Qt(i,"name",{value:e,configurable:!0}),"l$1");const Je=ei(i=>{const{layout:e,node:t,iconFactory:n,titleFactory:s}=i,o=wp.element.useRef(null),a=e.getClassName;let h=a(_.FLEXLAYOUT__TAB_BUTTON_STAMP);const r=Be(e,t,n,s);let c=r.content?wp.element.createElement("div",{className:a(_.FLEXLAYOUT__TAB_BUTTON_CONTENT)},r.content):t._getNameForOverflowMenu();const d=r.leading?wp.element.createElement("div",{className:a(_.FLEXLAYOUT__TAB_BUTTON_LEADING)},r.leading):null;return wp.element.createElement("div",{ref:o,className:h,title:t.getHelpText()},d,c)},"TabButtonStamp");var ti=Object.defineProperty,be=b((i,e)=>ti(i,"name",{value:e,configurable:!0}),"a$2");function Ue(i,e,t,n,s,o){const a=n.getRootDiv(),h=n.getClassName,r=i.ownerDocument,c=i.getBoundingClientRect(),d=a.getBoundingClientRect(),l=r.createElement("div");l.className=h(_.FLEXLAYOUT__POPUP_MENU_CONTAINER),c.left<d.left+d.width/2?l.style.left=c.left-d.left+"px":l.style.right=d.right-c.right+"px",c.top<d.top+d.height/2?l.style.top=c.top-d.top+"px":l.style.bottom=d.bottom-c.bottom+"px",q.instance.addGlass(()=>m()),q.instance.setGlassCursorOverride("default"),a.appendChild(l);const m=be(()=>{n.hidePortal(),q.instance.hideGlass(),a.removeChild(l),l.removeEventListener("mousedown",u),r.removeEventListener("mousedown",g)},"onHide"),u=be(T=>{T.stopPropagation()},"onElementMouseDown"),g=be(T=>{m()},"onDocMouseDown");l.addEventListener("mousedown",u),r.addEventListener("mousedown",g),n.showPortal(wp.element.createElement(ii,{currentDocument:r,onSelect:t,onHide:m,items:e,classNameMapper:h,layout:n,iconFactory:s,titleFactory:o}),l)}b(Ue,"showPopup"),be(Ue,"showPopup");const ii=be(i=>{const{items:e,onHide:t,onSelect:n,classNameMapper:s,layout:o,iconFactory:a,titleFactory:h}=i,r=be((d,l)=>{n(d),t(),l.stopPropagation()},"onItemClick"),c=e.map((d,l)=>wp.element.createElement("div",{key:d.index,className:s(_.FLEXLAYOUT__POPUP_MENU_ITEM),"data-layout-path":"/popup-menu/tb"+l,onClick:m=>r(d,m),title:d.node.getHelpText()},d.node.getModel().isLegacyOverflowMenu()?d.node._getNameForOverflowMenu():wp.element.createElement(Je,{node:d.node,layout:o,iconFactory:a,titleFactory:h})));return wp.element.createElement("div",{className:s(_.FLEXLAYOUT__POPUP_MENU),"data-layout-path":"/popup-menu"},c)},"PopupMenu");var ni=Object.defineProperty,me=b((i,e)=>ni(i,"name",{value:e,configurable:!0}),"o$1");const Ze=me((i,e,t,n)=>{const s=wp.element.useRef(!0),o=wp.element.useRef(!1),a=wp.element.useRef(new A(0,0,0,0)),h=wp.element.useRef(null),[r,c]=wp.element.useState(0),d=wp.element.useRef(!1),[l,m]=wp.element.useState([]),u=wp.element.useRef(0);wp.element.useLayoutEffect(()=>{d.current=!1},[i.getSelectedNode(),i.getRect().width,i.getRect().height]),wp.element.useLayoutEffect(()=>{U()}),wp.element.useEffect(()=>{const E=h.current;return E.addEventListener("wheel",g,{passive:!1}),()=>{E.removeEventListener("wheel",g)}},[]);const g=me(E=>{E.preventDefault()},"onWheel"),T=me(E=>e===y.HORZ?E.x:E.y,"getNear"),L=me(E=>e===y.HORZ?E.getRight():E.getBottom(),"getFar"),D=me(E=>e===y.HORZ?E.width:E.height,"getSize"),U=me(()=>{s.current===!0&&(o.current=!1);const E=i instanceof x?i.getRect():i.getTabHeaderRect();let B=i.getChildren()[i.getChildren().length-1];const N=n.current===null?0:D(n.current.getBoundingClientRect());if(s.current===!0||u.current===0&&l.length!==0||E.width!==a.current.width||E.height!==a.current.height){u.current=l.length,a.current=E;const P=i instanceof x?i.isEnableTabStrip()===!0:!0;let M=L(E)-N;if(t.current!==null&&(M-=D(t.current.getBoundingClientRect())),P&&i.getChildren().length>0){if(l.length===0&&r===0&&L(B.getTabRect())+2<M)return;let J=0;const X=i.getSelectedNode();if(X&&!d.current){const O=X.getTabRect(),z=T(O)-2,C=L(O)+2;D(O)+2*2>=M-T(E)?J=T(E)-z:(C>M||z<T(E))&&(z<T(E)&&(J=T(E)-z),C+J>M&&(J=M-C))}const W=Math.max(0,M-(L(B.getTabRect())+2+J)),S=Math.min(0,r+J+W),R=S-r,j=[];for(let O=0;O<i.getChildren().length;O++){const z=i.getChildren()[O];(T(z.getTabRect())+R<T(E)||L(z.getTabRect())+R>M)&&j.push({node:z,index:O})}j.length>0&&(o.current=!0),s.current=!1,m(j),c(S)}}else s.current=!0},"updateVisibleTabs");return{selfRef:h,position:r,userControlledLeft:d,hiddenTabs:l,onMouseWheel:me(E=>{let B=0;Math.abs(E.deltaX)>Math.abs(E.deltaY)?B=-E.deltaX:B=-E.deltaY,E.deltaMode===1&&(B*=40),c(r+B),d.current=!0,E.stopPropagation()},"onMouseWheel"),tabsTruncated:o.current}},"useTabOverflow");var oi=Object.defineProperty,_e=b((i,e)=>oi(i,"name",{value:e,configurable:!0}),"s$3");const si=_e(i=>{const{border:e,layout:t,iconFactory:n,titleFactory:s,icons:o,path:a}=i,h=wp.element.useRef(null),r=wp.element.useRef(null),c=wp.element.useRef(null),{selfRef:d,position:l,userControlledLeft:m,hiddenTabs:u,onMouseWheel:g}=Ze(e,y.flip(e.getOrientation()),h,c),T=_e(C=>{ce(C)&&t.auxMouseClick(e,C)},"onAuxMouseClick"),L=_e(C=>{t.showContextMenu(e,C)},"onContextMenu"),D=_e(C=>{C.stopPropagation()},"onInterceptMouseDown"),U=_e(C=>{const Y=t.getShowOverflowMenu();if(Y!==void 0)Y(e,C,u,E);else{const re=r.current;Ue(re,u,E,t,n,s)}C.stopPropagation()},"onOverflowClick"),E=_e(C=>{t.doAction(f.selectTab(C.node.getId())),m.current=!1},"onOverflowItemSelect"),B=_e(C=>{const Y=e.getChildren()[e.getSelected()];Y!==void 0&&t.doAction(f.floatTab(Y.getId())),C.stopPropagation()},"onFloatTab"),N=t.getClassName;let P=e.getTabHeaderRect().styleWithPosition({});const M=[],J=_e(C=>{let Y=e.getSelected()===C,re=e.getChildren()[C];M.push(wp.element.createElement(qt,{layout:t,border:e.getLocation().getName(),node:re,path:a+"/tb"+C,key:re.getId(),selected:Y,iconFactory:n,titleFactory:s,icons:o})),C<e.getChildren().length-1&&M.push(wp.element.createElement("div",{key:"divider"+C,className:N(_.FLEXLAYOUT__BORDER_TAB_DIVIDER)}))},"layoutTab");for(let C=0;C<e.getChildren().length;C++)J(C);let X=N(_.FLEXLAYOUT__BORDER)+" "+N(_.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&(X+=" "+e.getClassName());let W=[];const S={headerContent:void 0,buttons:W,stickyButtons:[],headerButtons:[]};t.customizeTabSet(e,S),W=S.buttons;let R;if(u.length>0){const C=t.i18nName(K.Overflow_Menu_Tooltip);let Y;typeof o.more=="function"?Y=o.more(e,u):Y=wp.element.createElement(wp.element.Fragment,null,o.more,wp.element.createElement("div",{className:N(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},u.length)),W.push(wp.element.createElement("button",{key:"overflowbutton",ref:r,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:C,onClick:U,onMouseDown:D,onTouchStart:D},Y))}const j=e.getSelected();if(j!==-1){const C=e.getChildren()[j];if(C!==void 0&&t.isSupportsPopout()&&C.isEnableFloat()&&!C.isFloating()){const Y=t.i18nName(K.Float_Tab);W.push(wp.element.createElement("button",{key:"float",title:Y,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:B,onMouseDown:D,onTouchStart:D},typeof o.popout=="function"?o.popout(C):o.popout))}}R=wp.element.createElement("div",{key:"toolbar",ref:h,className:N(_.FLEXLAYOUT__BORDER_TOOLBAR)+" "+N(_.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName())},W),P=t.styleFont(P);let O={};const z=e.getBorderBarSize()-1;return e.getLocation()===v.LEFT?O={right:z,height:z,top:l}:e.getLocation()===v.RIGHT?O={left:z,height:z,top:l}:O={height:z,left:l},wp.element.createElement("div",{ref:d,dir:"ltr",style:P,className:X,"data-layout-path":a,onClick:T,onAuxClick:T,onContextMenu:L,onWheel:g},wp.element.createElement("div",{style:{height:z},className:N(_.FLEXLAYOUT__BORDER_INNER)+" "+N(_.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName())},wp.element.createElement("div",{style:O,className:N(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+N(_.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName())},M)),R)},"BorderTabSet");var ai=Object.defineProperty,ue=b((i,e)=>ai(i,"name",{value:e,configurable:!0}),"s$2");const Ke=ue(i=>{const{layout:e,node:t,path:n}=i,s=wp.element.useRef([]),o=wp.element.useRef(void 0),a=t.getParent(),h=ue(E=>{q.instance.setGlassCursorOverride(t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"),q.instance.startDrag(E,c,d,m,r,void 0,void 0,e.getCurrentDocument(),e.getRootDiv()),s.current=a._getSplitterBounds(t,!0);const B=e.getRootDiv();o.current=e.getCurrentDocument().createElement("div"),o.current.style.position="absolute",o.current.className=e.getClassName(_.FLEXLAYOUT__SPLITTER_DRAG),o.current.style.cursor=t.getOrientation()===y.HORZ?"ns-resize":"ew-resize";const N=t.getRect();t.getOrientation()===y.VERT&&N.width<2?N.width=2:t.getOrientation()===y.HORZ&&N.height<2&&(N.height=2),N.positionElement(o.current),B.appendChild(o.current)},"onMouseDown"),r=ue(E=>{e.getRootDiv().removeChild(o.current)},"onDragCancel"),c=ue(()=>!0,"onDragStart"),d=ue(E=>{const B=e.getDomRect(),N={x:E.clientX-B.left,y:E.clientY-B.top};o&&(t.getOrientation()===y.HORZ?o.current.style.top=u(N.y-4)+"px":o.current.style.left=u(N.x-4)+"px"),e.isRealtimeResize()&&l()},"onDragMove"),l=ue(()=>{let E=0;if(o&&(t.getOrientation()===y.HORZ?E=o.current.offsetTop:E=o.current.offsetLeft),a instanceof k){const B=a._calculateSplit(t,E);e.doAction(f.adjustBorderSplit(t.getParent().getId(),B))}else{const B=a._calculateSplit(t,E);B!==void 0&&e.doAction(f.adjustSplit(B))}},"updateLayout"),m=ue(()=>{l(),e.getRootDiv().removeChild(o.current)},"onDragEnd"),u=ue(E=>{const B=s.current;let N=E;return E<B[0]&&(N=B[0]),E>B[1]&&(N=B[1]),N},"getBoundPosition"),g=e.getClassName;let T=t.getRect();const L=T.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"});let D=g(_.FLEXLAYOUT__SPLITTER)+" "+g(_.FLEXLAYOUT__SPLITTER_+t.getOrientation().getName());a instanceof k?D+=" "+g(_.FLEXLAYOUT__SPLITTER_BORDER):t.getModel().getMaximizedTabset()!==void 0&&(L.display="none");const U=t.getModel().getSplitterExtra();if(U===0)return wp.element.createElement("div",{style:L,"data-layout-path":n,className:D,onTouchStart:h,onMouseDown:h});{let E=T.clone();E.x=0,E.y=0,t.getOrientation()===y.VERT?E.width+=U:E.height+=U;const B=E.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"}),N=g(_.FLEXLAYOUT__SPLITTER_EXTRA);return wp.element.createElement("div",{style:L,"data-layout-path":n,className:D},wp.element.createElement("div",{style:B,className:N,onTouchStart:h,onMouseDown:h}))}},"Splitter");var ri=Object.defineProperty,li=b((i,e)=>ri(i,"name",{value:e,configurable:!0}),"e");class Ce extends wp.element.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?wp.element.createElement("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER},wp.element.createElement("div",{className:_.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT},this.props.message)):this.props.children}}b(Ce,"ErrorBoundary"),li(Ce,"ErrorBoundary");var di=Object.defineProperty,qe=b((i,e)=>di(i,"name",{value:e,configurable:!0}),"d");const Qe=qe(i=>{const{layout:e,selected:t,node:n,factory:s,path:o}=i,[a,h]=wp.element.useState(!i.node.isEnableRenderOnDemand()||i.selected);wp.element.useLayoutEffect(()=>{!a&&t&&h(!0)});const r=qe(()=>{const T=n.getParent();T.getType()===x.TYPE&&(T.isActive()||e.doAction(f.setActiveTabset(T.getId())))},"onMouseDown"),c=e.getClassName,d=n.getModel().isUseVisibility(),l=n.getParent(),m=n._styleWithPosition();t||Ee(m,d),l instanceof x&&n.getModel().getMaximizedTabset()!==void 0&&!l.isMaximized()&&Ee(m,d);let u;a&&(u=s(n));let g=c(_.FLEXLAYOUT__TAB);return l instanceof k&&(g+=" "+c(_.FLEXLAYOUT__TAB_BORDER),g+=" "+c(_.FLEXLAYOUT__TAB_BORDER_+l.getLocation().getName())),wp.element.createElement("div",{className:g,"data-layout-path":o,onMouseDown:r,onTouchStart:r,style:m},wp.element.createElement(Ce,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,u)))},"Tab");var hi=Object.defineProperty,ee=b((i,e)=>hi(i,"name",{value:e,configurable:!0}),"n$1");const ci=ee(i=>{const{layout:e,node:t,selected:n,iconFactory:s,titleFactory:o,icons:a,path:h}=i,r=wp.element.useRef(null),c=wp.element.useRef(null),d=ee(O=>{!ce(O)&&!e.getEditingTab()&&e.dragStart(O,void 0,t,t.isEnableDrag(),u,g)},"onMouseDown"),l=ee(O=>{ce(O)&&e.auxMouseClick(t,O)},"onAuxMouseClick"),m=ee(O=>{e.showContextMenu(t,O)},"onContextMenu"),u=ee(()=>{e.doAction(f.selectTab(t.getId()))},"onClick"),g=ee(O=>{t.isEnableRename()&&T()},"onDoubleClick"),T=ee(()=>{e.setEditingTab(t),e.getCurrentDocument().body.addEventListener("mousedown",L),e.getCurrentDocument().body.addEventListener("touchstart",L)},"onRename"),L=ee(O=>{O.target!==c.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",L),e.getCurrentDocument().body.removeEventListener("touchstart",L),e.setEditingTab(void 0))},"onEndEdit"),D=ee(()=>{const O=t.getCloseType();return!!(n||O===Oe.Always||O===Oe.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),U=ee(O=>{D()?e.doAction(f.deleteTab(t.getId())):u()},"onClose"),E=ee(O=>{O.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&c.current.select()});const B=ee(()=>{const O=e.getDomRect(),z=r.current.getBoundingClientRect();t._setTabRect(new A(z.left-O.left,z.top-O.top,z.width,z.height))},"updateRect"),N=ee(O=>{O.stopPropagation()},"onTextBoxMouseDown"),P=ee(O=>{O.keyCode===27?e.setEditingTab(void 0):O.keyCode===13&&(e.setEditingTab(void 0),e.doAction(f.renameTab(t.getId(),O.target.value)))},"onTextBoxKeyPress"),M=e.getClassName,J=t.getParent();let X=_.FLEXLAYOUT__TAB_BUTTON,W=M(X);W+=" "+M(X+"_"+J.getTabLocation()),n?W+=" "+M(X+"--selected"):W+=" "+M(X+"--unselected"),t.getClassName()!==void 0&&(W+=" "+t.getClassName());const S=Be(e,t,s,o);let R=S.content?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__TAB_BUTTON_CONTENT)},S.content):null;const j=S.leading?wp.element.createElement("div",{className:M(_.FLEXLAYOUT__TAB_BUTTON_LEADING)},S.leading):null;if(e.getEditingTab()===t&&(R=wp.element.createElement("input",{ref:c,className:M(_.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":h+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:N,onTouchStart:N})),t.isEnableClose()){const O=e.i18nName(K.Close_Tab);S.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":h+"/button/close",title:O,className:M(_.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:E,onClick:U,onTouchStart:E},typeof a.close=="function"?a.close(t):a.close))}return wp.element.createElement("div",{ref:r,"data-layout-path":h,className:W,onMouseDown:d,onClick:l,onAuxClick:l,onContextMenu:m,onTouchStart:d,title:t.getHelpText()},j,R,S.buttons)},"TabButton");var _i=Object.defineProperty,ie=b((i,e)=>_i(i,"name",{value:e,configurable:!0}),"T");const ui=ie(i=>{const{node:e,layout:t,iconFactory:n,titleFactory:s,icons:o,path:a}=i,h=wp.element.useRef(null),r=wp.element.useRef(null),c=wp.element.useRef(null),d=wp.element.useRef(null),{selfRef:l,position:m,userControlledLeft:u,hiddenTabs:g,onMouseWheel:T,tabsTruncated:L}=Ze(e,y.HORZ,h,d),D=ie(w=>{const H=t.getShowOverflowMenu();if(H!==void 0)H(e,w,g,U);else{const ge=r.current;Ue(ge,g,U,t,n,s)}w.stopPropagation()},"onOverflowClick"),U=ie(w=>{t.doAction(f.selectTab(w.node.getId())),u.current=!1},"onOverflowItemSelect"),E=ie(w=>{if(!ce(w)){let H=e.getName();if(H===void 0?H="":H=": "+H,t.doAction(f.setActiveTabset(e.getId())),!t.getEditingTab()){const ge=t.i18nName(K.Move_Tabset,H);e.getModel().getMaximizedTabset()!==void 0?t.dragStart(w,ge,e,!1,Gi=>{},W):t.dragStart(w,ge,e,e.isEnableDrag(),Gi=>{},W)}}},"onMouseDown"),B=ie(w=>{ce(w)&&t.auxMouseClick(e,w)},"onAuxMouseClick"),N=ie(w=>{t.showContextMenu(e,w)},"onContextMenu"),P=ie(w=>{w.stopPropagation()},"onInterceptMouseDown"),M=ie(w=>{e.canMaximize()&&t.maximize(e),w.stopPropagation()},"onMaximizeToggle"),J=ie(w=>{t.doAction(f.deleteTabset(e.getId())),w.stopPropagation()},"onClose"),X=ie(w=>{R!==void 0&&t.doAction(f.floatTab(R.getId())),w.stopPropagation()},"onFloatTab"),W=ie(w=>{e.canMaximize()&&t.maximize(e)},"onDoubleClick"),S=t.getClassName;c.current!==null&&c.current.scrollLeft!==0&&(c.current.scrollLeft=0);const R=e.getSelectedNode();let j=e._styleWithPosition();e.getModel().getMaximizedTabset()!==void 0&&!e.isMaximized()&&Ee(j,e.getModel().isUseVisibility());const O=[];if(e.isEnableTabStrip())for(let w=0;w<e.getChildren().length;w++){const H=e.getChildren()[w];let ge=e.getSelected()===w;O.push(wp.element.createElement(ci,{layout:t,node:H,path:a+"/tb"+w,key:H.getId(),selected:ge,iconFactory:n,titleFactory:s,icons:o})),w<e.getChildren().length-1&&O.push(wp.element.createElement("div",{key:"divider"+w,className:S(_.FLEXLAYOUT__TABSET_TAB_DIVIDER)}))}const z=e.getName()!==void 0;let C=[],Y=[],re=[];const Le={headerContent:e.getName(),stickyButtons:C,buttons:Y,headerButtons:re};t.customizeTabSet(e,Le);const Wi=Le.headerContent;C=Le.stickyButtons,Y=Le.buttons,re=Le.headerButtons,C.length>0&&(L?Y=[...C,...Y]:O.push(wp.element.createElement("div",{ref:d,key:"sticky_buttons_container",onMouseDown:P,onTouchStart:P,onDragStart:w=>{w.preventDefault()},className:S(_.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},C)));let _t;if(g.length>0){const w=t.i18nName(K.Overflow_Menu_Tooltip);let H;typeof o.more=="function"?H=o.more(e,g):H=wp.element.createElement(wp.element.Fragment,null,o.more,wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},g.length)),Y.push(wp.element.createElement("button",{key:"overflowbutton","data-layout-path":a+"/button/overflow",ref:r,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:w,onClick:D,onMouseDown:P,onTouchStart:P},H))}if(R!==void 0&&t.isSupportsPopout()&&R.isEnableFloat()&&!R.isFloating()){const w=t.i18nName(K.Float_Tab);Y.push(wp.element.createElement("button",{key:"float","data-layout-path":a+"/button/float",title:w,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:X,onMouseDown:P,onTouchStart:P},typeof o.popout=="function"?o.popout(R):o.popout))}if(e.canMaximize()){const w=t.i18nName(K.Restore),H=t.i18nName(K.Maximize);(z?re:Y).push(wp.element.createElement("button",{key:"max","data-layout-path":a+"/button/max",title:e.isMaximized()?w:H,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:M,onMouseDown:P,onTouchStart:P},e.isMaximized()?typeof o.restore=="function"?o.restore(e):o.restore:typeof o.maximize=="function"?o.maximize(e):o.maximize))}if(!e.isMaximized()&&e.isEnableClose()){const w=t.i18nName(K.Close_Tabset);(z?re:Y).push(wp.element.createElement("button",{key:"close","data-layout-path":a+"/button/close",title:w,className:S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+S(_.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:J,onMouseDown:P,onTouchStart:P},typeof o.closeTabset=="function"?o.closeTabset(e):o.closeTabset))}_t=wp.element.createElement("div",{key:"toolbar",ref:h,className:S(_.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:w=>{w.preventDefault()}},Y);let ze,Pe,Ne=S(_.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(Ne+=" "+e.getClassNameTabStrip()),Ne+=" "+_.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&!z&&(Ne+=" "+S(_.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&!z&&(Ne+=" "+S(_.FLEXLAYOUT__TABSET_MAXIMIZED)),z){const w=wp.element.createElement("div",{key:"toolbar",ref:h,className:S(_.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:ge=>{ge.preventDefault()}},re);let H=S(_.FLEXLAYOUT__TABSET_HEADER);e.isActive()&&(H+=" "+S(_.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(H+=" "+S(_.FLEXLAYOUT__TABSET_MAXIMIZED)),e.getClassNameHeader()!==void 0&&(H+=" "+e.getClassNameHeader()),ze=wp.element.createElement("div",{className:H,style:{height:e.getHeaderHeight()+"px"},"data-layout-path":a+"/header",onMouseDown:E,onContextMenu:N,onClick:B,onAuxClick:B,onTouchStart:E},wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TABSET_HEADER_CONTENT)},Wi),w)}const ki={height:e.getTabStripHeight()+"px"};Pe=wp.element.createElement("div",{className:Ne,style:ki,"data-layout-path":a+"/tabstrip",onMouseDown:E,onContextMenu:N,onClick:B,onAuxClick:B,onTouchStart:E},wp.element.createElement("div",{ref:c,className:S(_.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation())},wp.element.createElement("div",{style:{left:m},className:S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+S(_.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation())},O)),_t),j=t.styleFont(j);var ut=void 0;if(e.getChildren().length===0){const w=t.getTabSetPlaceHolderCallback();w&&(ut=w(e))}const gt=wp.element.createElement("div",{className:S(_.FLEXLAYOUT__TABSET_CONTENT)},ut);var Ye;return e.getTabLocation()==="top"?Ye=wp.element.createElement(wp.element.Fragment,null,ze,Pe,gt):Ye=wp.element.createElement(wp.element.Fragment,null,ze,gt,Pe),wp.element.createElement("div",{ref:l,dir:"ltr","data-layout-path":a,style:j,className:S(_.FLEXLAYOUT__TABSET),onWheel:T},Ye)},"TabSet");var gi=Object.defineProperty,et=b((i,e)=>gi(i,"name",{value:e,configurable:!0}),"h$1");const tt=et(i=>{const{title:e,id:t,url:n,rect:s,onCloseWindow:o,onSetWindow:a,children:h}=i,r=wp.element.useRef(null),c=wp.element.useRef(null),[d,l]=wp.element.useState(void 0);return wp.element.useLayoutEffect(()=>{c.current&&clearTimeout(c.current);const m=s,u=Array.from(window.document.styleSheets).reduce((g,T)=>{let L;try{L=T.cssRules}catch(D){}try{return[...g,{href:T.href,type:T.type,rules:L?Array.from(L).map(D=>D.cssText):null}]}catch(D){return g}},[]);return r.current=window.open(n,t,`left=${m.x},top=${m.y},width=${m.width},height=${m.height}`),r.current!==null?(a(t,r.current),window.addEventListener("beforeunload",()=>{r.current&&(r.current.close(),r.current=null)}),r.current.addEventListener("load",()=>{const g=r.current.document;g.title=e;const T=g.createElement("div");T.className=_.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,g.body.appendChild(T),it(g,u).then(()=>{l(T)}),r.current.addEventListener("beforeunload",()=>{o(t)})})):(console.warn(`Unable to open window ${n}`),o(t)),()=>{c.current=setTimeout(()=>{r.current&&(r.current.close(),r.current=null)},0)}},[]),d!==void 0?wp.element.createPortal(h,d):null},"FloatingWindow");function it(i,e){const t=i.head,n=[];for(const s of e)if(s.href){const o=i.createElement("link");o.type=s.type,o.rel="stylesheet",o.href=s.href,t.appendChild(o),n.push(new Promise((a,h)=>{o.onload=()=>a(!0)}))}else if(s.rules){const o=i.createElement("style");for(const a of s.rules)o.appendChild(i.createTextNode(a));t.appendChild(o)}return Promise.all(n)}b(it,"L"),et(it,"copyStyles");var pi=Object.defineProperty,mi=b((i,e)=>pi(i,"name",{value:e,configurable:!0}),"a");const nt=mi(i=>{const{layout:e,node:t,factory:n}=i,s=e.getClassName,o=n(t);return wp.element.createElement("div",{className:s(_.FLEXLAYOUT__FLOATING_WINDOW_TAB)},wp.element.createElement(Ce,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,o)))},"FloatingWindowTab");var Ti=Object.defineProperty,fe=b((i,e)=>Ti(i,"name",{value:e,configurable:!0}),"n");const ot=fe(i=>{const{layout:e,selected:t,node:n,path:s}=i,o=fe(()=>{n.getWindow()&&n.getWindow().focus()},"showPopout"),a=fe(()=>{e.doAction(f.unFloatTab(n.getId()))},"dockPopout"),h=fe(()=>{const D=n.getParent();D.getType()===x.TYPE&&(D.isActive()||e.doAction(f.setActiveTabset(D.getId())))},"onMouseDown"),r=fe(D=>{D.preventDefault(),o()},"onClickFocus"),c=fe(D=>{D.preventDefault(),a()},"onClickDock"),d=e.getClassName,l=n.getParent(),m=n._styleWithPosition();t||Ee(m,n.getModel().isUseVisibility()),l instanceof x&&n.getModel().getMaximizedTabset()!==void 0&&!l.isMaximized()&&Ee(m,n.getModel().isUseVisibility());const u=e.i18nName(K.Floating_Window_Message),g=e.i18nName(K.Floating_Window_Show_Window),T=e.i18nName(K.Floating_Window_Dock_Window),L=e.getOnRenderFloatingTabPlaceholder();return L?wp.element.createElement("div",{className:d(_.FLEXLAYOUT__TAB_FLOATING),onMouseDown:h,onTouchStart:h,style:m},L(a,o)):wp.element.createElement("div",{className:d(_.FLEXLAYOUT__TAB_FLOATING),"data-layout-path":s,onMouseDown:h,onTouchStart:h,style:m},wp.element.createElement("div",{className:d(_.FLEXLAYOUT__TAB_FLOATING_INNER)},wp.element.createElement("div",null,u),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:r},g)),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:c},T))))},"TabFloating");var Ei=Object.defineProperty,Ae=b((i,e)=>Ei(i,"name",{value:e,configurable:!0}),"o");const Re={width:"1em",height:"1em",display:"flex",alignItems:"center"},st=Ae(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Re,viewBox:"0 0 24 24"},wp.element.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),wp.element.createElement("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),"CloseIcon"),bi=Ae(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Re,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),"MaximizeIcon"),fi=Ae(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Re,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})),"OverflowIcon"),vi=Ae(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Re,viewBox:"0 0 20 20",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),wp.element.createElement("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})),"PopoutIcon"),wi=Ae(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Re,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})),"RestoreIcon");var at=Object.defineProperty,rt=Object.getOwnPropertySymbols,yi=Object.prototype.hasOwnProperty,Oi=Object.prototype.propertyIsEnumerable,lt=b((i,e,t)=>e in i?at(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"M"),dt=b((i,e)=>{for(var t in e||(e={}))yi.call(e,t)&&lt(i,t,e[t]);if(rt)for(var t of rt(e))Oi.call(e,t)&&lt(i,t,e[t]);return i},"E"),G=b((i,e)=>at(i,"name",{value:e,configurable:!0}),"h");const Ai={close:wp.element.createElement(st,null),closeTabset:wp.element.createElement(st,null),popout:wp.element.createElement(vi,null),maximize:wp.element.createElement(bi,null),restore:wp.element.createElement(wi,null),more:wp.element.createElement(fi,null)},Ri=typeof window!="undefined"&&(window.document.documentMode||/Edge\//.test(window.navigator.userAgent)),Li=typeof window!="undefined"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches,Ni=Li&&!Ri;class Ie extends wp.element.Component{constructor(e){super(e),this.firstMove=!1,this.dragRectRendered=!0,this.dragDivText=void 0,this.edgeRectLength=100,this.edgeRectWidth=10,this.onModelChange=G(t=>{this.forceUpdate(),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)},"onModelChange"),this.updateRect=G((t=this.getDomRect())=>{const n=new A(0,0,t.width,t.height);!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&this.setState({rect:n})},"updateRect"),this.updateLayoutMetrics=G(()=>{if(this.findHeaderBarSizeRef.current){const t=this.findHeaderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedHeaderBarSize&&this.setState({calculatedHeaderBarSize:t})}if(this.findTabBarSizeRef.current){const t=this.findTabBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedTabBarSize&&this.setState({calculatedTabBarSize:t})}if(this.findBorderBarSizeRef.current){const t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}},"updateLayoutMetrics"),this.getClassName=G(t=>this.props.classNameMapper===void 0?t:this.props.classNameMapper(t),"getClassName"),this.onCloseWindow=G(t=>{this.doAction(f.unFloatTab(t));try{this.props.model.getNodeById(t)._setWindow(void 0)}catch(n){}},"onCloseWindow"),this.onSetWindow=G((t,n)=>{this.props.model.getNodeById(t)._setWindow(n)},"onSetWindow"),this.onCancelAdd=G(()=>{var t,n;this.selfRef.current.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(n=(t=this.customDrop)==null?void 0:t.invalidated)==null||n.call(t)}catch(s){console.error(s)}q.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0},"onCancelAdd"),this.onCancelDrag=G(t=>{var n,s;if(t){const o=this.selfRef.current;try{o.removeChild(this.outlineDiv)}catch(a){}try{o.removeChild(this.dragDiv)}catch(a){}this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{(s=(n=this.customDrop)==null?void 0:n.invalidated)==null||s.call(n)}catch(a){console.error(a)}q.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0}this.setState({showHiddenBorder:v.CENTER})},"onCancelDrag"),this.onDragDivMouseDown=G(t=>{t.preventDefault(),this.dragStart(t,this.dragDivText,F._fromJson(this.newTabJson,this.props.model,!1),!0,void 0,void 0)},"onDragDivMouseDown"),this.dragStart=G((t,n,s,o,a,h)=>{o?(this.dragNode=s,this.dragDivText=n,q.instance.startDrag(t,this.onDragStart,this.onDragMove,this.onDragEnd,this.onCancelDrag,a,h,this.currentDocument,this.selfRef.current)):q.instance.startDrag(t,void 0,void 0,void 0,void 0,a,h,this.currentDocument,this.selfRef.current)},"dragStart"),this.dragRectRender=G((t,n,s,o)=>{let a;if(t!==void 0?a=wp.element.createElement("div",{style:{whiteSpace:"pre"}},t.replace("<br>",`
`)):n&&n instanceof F&&(a=wp.element.createElement(Je,{node:n,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory})),this.props.onRenderDragRect!==void 0){const h=this.props.onRenderDragRect(a,n,s);h!==void 0&&(a=h)}this.dragDiv.style.visibility="hidden",this.dragRectRendered=!1,this.showPortal(wp.element.createElement(Si,{onRendered:()=>{this.dragRectRendered=!0,o==null||o()}},a),this.dragDiv)},"dragRectRender"),this.showPortal=G((t,n)=>{const s=wp.element.createPortal(t,n);this.setState({portal:s})},"showPortal"),this.hidePortal=G(()=>{this.setState({portal:void 0})},"hidePortal"),this.onDragStart=G(()=>{this.dropInfo=void 0,this.customDrop=void 0;const t=this.selfRef.current;return this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(_.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden",t.appendChild(this.outlineDiv),this.dragDiv==null&&(this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(_.FLEXLAYOUT__DRAG_RECT),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragRectRender(this.dragDivText,this.dragNode,this.newTabJson),t.appendChild(this.dragDiv)),this.props.model.getMaximizedTabset()===void 0&&this.setState({showEdges:!0}),this.dragNode!==void 0&&this.dragNode instanceof F&&this.dragNode.getTabRect()!==void 0&&this.dragNode.getTabRect().positionElement(this.outlineDiv),this.firstMove=!0,!0},"onDragStart"),this.onDragMove=G(t=>{if(this.firstMove===!1){const r=this.props.model._getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${r}s, left ${r}s, width ${r}s, height ${r}s`}this.firstMove=!1;const n=this.selfRef.current.getBoundingClientRect(),s={x:t.clientX-n.left,y:t.clientY-n.top};this.checkForBorderToShow(s.x,s.y);const o=this.dragDiv.getBoundingClientRect();let a=s.x-o.width/2;a+o.width>n.width&&(a=n.width-o.width),a=Math.max(0,a),this.dragDiv.style.left=a+"px",this.dragDiv.style.top=s.y+5+"px",this.dragRectRendered&&this.dragDiv.style.visibility==="hidden"&&(this.dragDiv.style.visibility="visible");let h=this.props.model._findDropTargetNode(this.dragNode,s.x,s.y);h&&(this.props.onTabDrag?this.handleCustomTabDrag(h,s,t):(this.dropInfo=h,this.outlineDiv.className=this.getClassName(h.className),h.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))},"onDragMove"),this.onDragEnd=G(t=>{const n=this.selfRef.current;if(n.removeChild(this.outlineDiv),n.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),q.instance.hideGlass(),this.dropInfo)if(this.customDrop){this.newTabJson=void 0;try{const{callback:s,dragging:o,over:a,x:h,y:r,location:c}=this.customDrop;s(o,a,h,r,c),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0)}catch(s){console.error(s)}}else if(this.newTabJson!==void 0){const s=this.doAction(f.addNode(this.newTabJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(s,t),this.fnNewNodeDropped=void 0),this.newTabJson=void 0}else this.dragNode!==void 0&&this.doAction(f.moveNode(this.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.setState({showHiddenBorder:v.CENTER})},"onDragEnd"),this.props.model._setChangeListener(this.onModelChange),this.tabIds=[],this.selfRef=wp.element.createRef(),this.findHeaderBarSizeRef=wp.element.createRef(),this.findTabBarSizeRef=wp.element.createRef(),this.findBorderBarSizeRef=wp.element.createRef(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Ni,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons=dt(dt({},Ai),e.icons),this.state={rect:new A(0,0,0,0),calculatedHeaderBarSize:25,calculatedTabBarSize:26,calculatedBorderBarSize:30,editingTab:void 0,showHiddenBorder:v.CENTER,showEdges:!1},this.onDragEnter=this.onDragEnter.bind(this)}styleFont(e){return this.props.font&&(this.selfRef.current&&(this.props.font.size&&this.selfRef.current.style.setProperty("--font-size",this.props.font.size),this.props.font.family&&this.selfRef.current.style.setProperty("--font-family",this.props.font.family)),this.props.font.style&&(e.fontStyle=this.props.font.style),this.props.font.weight&&(e.fontWeight=this.props.font.weight)),e}doAction(e){if(this.props.onAction!==void 0){const t=this.props.onAction(e);return t!==void 0?this.props.model.doAction(t):void 0}else return this.props.model.doAction(e)}componentDidMount(){this.updateRect(),this.updateLayoutMetrics(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.resizeObserver=new ResizeObserver(e=>{this.updateRect(e[0].contentRect)}),this.resizeObserver.observe(this.selfRef.current)}componentDidUpdate(){this.updateLayoutMetrics(),this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel._setChangeListener(void 0),this.props.model._setChangeListener(this.onModelChange),this.previousModel=this.props.model)}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current.getBoundingClientRect()}getRootDiv(){return this.selfRef.current}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){var e;return(e=this.props.realtimeResize)!=null?e:!1}onTabDrag(...e){var t,n;return(n=(t=this.props).onTabDrag)==null?void 0:n.call(t,...e)}getPopoutURL(){return this.popoutURL}componentWillUnmount(){var e;(e=this.resizeObserver)==null||e.unobserve(this.selfRef.current)}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}render(){if(!this.selfRef.current)return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT)},this.metricsElements());this.props.model._setPointerFine(window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches);const e=[],t=[],n=[],s={},o=[],a={headerBarSize:this.state.calculatedHeaderBarSize,tabBarSize:this.state.calculatedTabBarSize,borderBarSize:this.state.calculatedBorderBarSize};this.props.model._setShowHiddenBorder(this.state.showHiddenBorder),this.centerRect=this.props.model._layout(this.state.rect,a),this.renderBorder(this.props.model.getBorderSet(),e,s,n,o),this.renderChildren("",this.props.model.getRoot(),t,s,n,o);const h=[],r={};for(const d of this.tabIds)s[d]&&(h.push(d),r[d]=d);this.tabIds=h;for(const d of Object.keys(s))r[d]||this.tabIds.push(d);const c=[];if(this.state.showEdges){const d=this.centerRect,l=this.edgeRectLength,m=this.edgeRectWidth,u=this.edgeRectLength/2,g=this.getClassName(_.FLEXLAYOUT__EDGE_RECT),T=50;c.push(wp.element.createElement("div",{key:"North",style:{top:d.y,left:d.x+d.width/2-u,width:l,height:m,borderBottomLeftRadius:T,borderBottomRightRadius:T},className:g})),c.push(wp.element.createElement("div",{key:"West",style:{top:d.y+d.height/2-u,left:d.x,width:m,height:l,borderTopRightRadius:T,borderBottomRightRadius:T},className:g})),c.push(wp.element.createElement("div",{key:"South",style:{top:d.y+d.height-m,left:d.x+d.width/2-u,width:l,height:m,borderTopLeftRadius:T,borderTopRightRadius:T},className:g})),c.push(wp.element.createElement("div",{key:"East",style:{top:d.y+d.height/2-u,left:d.x+d.width-m,width:m,height:l,borderTopLeftRadius:T,borderBottomLeftRadius:T},className:g}))}return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(_.FLEXLAYOUT__LAYOUT),onDragEnter:this.props.onExternalDrag?this.onDragEnter:void 0},t,this.tabIds.map(d=>s[d]),e,o,c,n,this.metricsElements(),this.state.portal)}metricsElements(){const e=this.styleFont({visibility:"hidden"});return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{key:"findHeaderBarSize",ref:this.findHeaderBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__TABSET_HEADER_SIZER)},"FindHeaderBarSize"),wp.element.createElement("div",{key:"findTabBarSize",ref:this.findTabBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__TABSET_SIZER)},"FindTabBarSize"),wp.element.createElement("div",{key:"findBorderBarSize",ref:this.findBorderBarSizeRef,style:e,className:this.getClassName(_.FLEXLAYOUT__BORDER_SIZER)},"FindBorderBarSize"))}renderBorder(e,t,n,s,o){for(const a of e.getBorders()){const h=`/border/${a.getLocation().getName()}`;if(a.isShowing()){t.push(wp.element.createElement(si,{key:`border_${a.getLocation().getName()}`,path:h,border:a,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons}));const r=a._getDrawChildren();let c=0,d=0;for(const l of r){if(l instanceof le){let m=h+"/s";o.push(wp.element.createElement(Ke,{key:l.getId(),layout:this,node:l,path:m}))}else if(l instanceof F){let m=h+"/t"+d++;if(this.supportsPopout&&l.isFloating()){const u=this._getScreenRect(l);s.push(wp.element.createElement(tt,{key:l.getId(),url:this.popoutURL,rect:u,title:l.getName(),id:l.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(nt,{layout:this,node:l,factory:this.props.factory}))),n[l.getId()]=wp.element.createElement(ot,{key:l.getId(),layout:this,path:m,node:l,selected:c===a.getSelected()})}else n[l.getId()]=wp.element.createElement(Qe,{key:l.getId(),layout:this,path:m,node:l,selected:c===a.getSelected(),factory:this.props.factory})}c++}}}}renderChildren(e,t,n,s,o,a){const h=t._getDrawChildren();let r=0,c=0,d=0;for(const l of h)if(l instanceof le){const m=e+"/s"+r++;a.push(wp.element.createElement(Ke,{key:l.getId(),layout:this,path:m,node:l}))}else if(l instanceof x){const m=e+"/ts"+d++;n.push(wp.element.createElement(ui,{key:l.getId(),layout:this,path:m,node:l,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons})),this.renderChildren(m,l,n,s,o,a)}else if(l instanceof F){const m=e+"/t"+c++,u=l.getParent().getChildren()[l.getParent().getSelected()];if(u===void 0&&console.warn("undefined selectedTab should not happen"),this.supportsPopout&&l.isFloating()){const g=this._getScreenRect(l);o.push(wp.element.createElement(tt,{key:l.getId(),url:this.popoutURL,rect:g,title:l.getName(),id:l.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(nt,{layout:this,node:l,factory:this.props.factory}))),s[l.getId()]=wp.element.createElement(ot,{key:l.getId(),layout:this,path:m,node:l,selected:l===u})}else s[l.getId()]=wp.element.createElement(Qe,{key:l.getId(),layout:this,path:m,node:l,selected:l===u,factory:this.props.factory})}else{const m=e+(l.getOrientation()===y.HORZ?"/r":"/c")+d++;this.renderChildren(m,l,n,s,o,a)}}_getScreenRect(e){const t=e.getRect().clone(),n=this.selfRef.current.getBoundingClientRect(),s=Math.min(80,this.currentWindow.outerHeight-this.currentWindow.innerHeight),o=Math.min(80,this.currentWindow.outerWidth-this.currentWindow.innerWidth);return t.x=t.x+n.x+this.currentWindow.screenX+o,t.y=t.y+n.y+this.currentWindow.screenY+s,t}addTabToTabSet(e,t){this.props.model.getNodeById(e)!==void 0&&this.doAction(f.addNode(t,e,v.CENTER,-1))}addTabToActiveTabSet(e){const t=this.props.model.getActiveTabset();t!==void 0&&this.doAction(f.addNode(e,t.getId(),v.CENTER,-1))}addTabWithDragAndDrop(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,this.dragStart(void 0,e,F._fromJson(t,this.props.model,!1),!0,void 0,void 0)}moveTabWithDragAndDrop(e,t){this.dragStart(void 0,t,e,!0,void 0,void 0)}addTabWithDragAndDropIndirect(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,q.instance.addGlass(this.onCancelAdd),this.dragDivText=e,this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(_.FLEXLAYOUT__DRAG_RECT),this.dragDiv.addEventListener("mousedown",this.onDragDivMouseDown),this.dragDiv.addEventListener("touchstart",this.onDragDivMouseDown,{passive:!1}),this.dragRectRender(this.dragDivText,void 0,this.newTabJson,()=>{if(this.dragDiv){this.dragDiv.style.visibility="visible";const s=this.dragDiv.getBoundingClientRect(),o=new A(0,0,s==null?void 0:s.width,s==null?void 0:s.height);o.centerInRect(this.state.rect),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragDiv.style.left=o.x+"px",this.dragDiv.style.top=o.y+"px"}}),this.selfRef.current.appendChild(this.dragDiv)}handleCustomTabDrag(e,t,n){var s,o,a;let h=(s=this.customDrop)==null?void 0:s.invalidated;const r=(o=this.customDrop)==null?void 0:o.callback;this.customDrop=void 0;const c=this.newTabJson||(this.dragNode instanceof F?this.dragNode:void 0);if(c&&(e.node instanceof x||e.node instanceof k)&&e.index===-1){const d=e.node.getSelectedNode(),l=d==null?void 0:d.getRect();if(d&&l!=null&&l.contains(t.x,t.y)){let m;try{const u=this.onTabDrag(c,d,t.x-l.x,t.y-l.y,e.location,()=>this.onDragMove(n));u&&(m={rect:new A(u.x+l.x,u.y+l.y,u.width,u.height),callback:u.callback,invalidated:u.invalidated,dragging:c,over:d,x:t.x-l.x,y:t.y-l.y,location:e.location,cursor:u.cursor})}catch(u){console.error(u)}(m==null?void 0:m.callback)===r&&(h=void 0),this.customDrop=m}}this.dropInfo=e,this.outlineDiv.className=this.getClassName(this.customDrop?_.FLEXLAYOUT__OUTLINE_RECT:e.className),this.customDrop?this.customDrop.rect.positionElement(this.outlineDiv):e.rect.positionElement(this.outlineDiv),q.instance.setGlassCursorOverride((a=this.customDrop)==null?void 0:a.cursor),this.outlineDiv.style.visibility="visible";try{h==null||h()}catch(d){console.error(d)}}onDragEnter(e){if(q.instance.isDragging())return;const t=this.props.onExternalDrag(e);t&&(this.fnNewNodeDropped=t.onDrop,this.newTabJson=t.json,this.dragStart(e,t.dragText,F._fromJson(t.json,this.props.model,!1),!0,void 0,void 0))}checkForBorderToShow(e,t){const n=this.props.model._getOuterInnerRects().outer,s=n.getCenter(),o=this.edgeRectWidth,a=this.edgeRectLength/2;let h=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===v.CENTER&&(t>s.y-a&&t<s.y+a||e>s.x-a&&e<s.x+a)&&(h=!0);let r=v.CENTER;h||(e<=n.x+o?r=v.LEFT:e>=n.getRight()-o?r=v.RIGHT:t<=n.y+o?r=v.TOP:t>=n.getBottom()-o&&(r=v.BOTTOM)),r!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:r})}maximize(e){this.doAction(f.maximizeToggle(e.getId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let n;return this.props.i18nMapper&&(n=this.props.i18nMapper(e,t)),n===void 0&&(n=e+(t===void 0?"":t)),n}getOnRenderFloatingTabPlaceholder(){return this.props.onRenderFloatingTabPlaceholder}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}}b(Ie,"Layout"),G(Ie,"Layout");const Si=G(i=>(wp.element.useEffect(()=>{var e;(e=i.onRendered)==null||e.call(i)},[i]),wp.element.createElement(wp.element.Fragment,null,i.children)),"DragRectRenderWrapper");var Di=Object.defineProperty,Bi=b((i,e)=>Di(i,"name",{value:e,configurable:!0}),"b");class ve{static _fromJson(e,t){const n=new ve(t);return n._borders=e.map(s=>k._fromJson(s,t)),n}constructor(e){this._model=e,this._borders=[]}getBorders(){return this._borders}_forEachNode(e){for(const t of this._borders){e(t,0);for(const n of t.getChildren())n._forEachNode(e,1)}}_toJson(){return this._borders.map(e=>e.toJson())}_layoutBorder(e,t){const n=e.outer,s=this._model.getRoot();let o=Math.max(0,n.height-s.getMinHeight()),a=Math.max(0,n.width-s.getMinWidth()),h=0,r=0,c=0,d=0;const l=this._borders.filter(g=>g.isShowing());for(const g of l){g._setAdjustedSize(g.getSize());const T=g.getSelected()!==-1;g.getLocation().getOrientation()===y.HORZ?(r+=g.getBorderBarSize(),T&&(a-=this._model.getSplitterSize(),r+=g.getSize(),d+=g.getSize())):(h+=g.getBorderBarSize(),T&&(o-=this._model.getSplitterSize(),h+=g.getSize(),c+=g.getSize()))}let m=0,u=!1;for(;r>a&&d>0||h>o&&c>0;){const g=l[m];if(g.getSelected()!==-1){const T=g._getAdjustedSize();r>a&&d>0&&g.getLocation().getOrientation()===y.HORZ&&T>0&&T>g.getMinSize()?(g._setAdjustedSize(T-1),r--,d--,u=!0):h>o&&c>0&&g.getLocation().getOrientation()===y.VERT&&T>0&&T>g.getMinSize()&&(g._setAdjustedSize(T-1),h--,c--,u=!0)}if(m=(m+1)%l.length,m===0)if(u)u=!1;else break}for(const g of l)e.outer=g._layoutBorderOuter(e.outer,t);e.inner=e.outer;for(const g of l)e.inner=g._layoutBorderInner(e.inner,t);return e}_findDropTargetNode(e,t,n){for(const s of this._borders)if(s.isShowing()){const o=s.canDrop(e,t,n);if(o!==void 0)return o}}}b(ve,"BorderSet"),Bi(ve,"BorderSet");var Ci=Object.defineProperty,Mi=b((i,e)=>Ci(i,"name",{value:e,configurable:!0}),"u");const ne=b(class{constructor(){this._borderRects={inner:A.empty(),outer:A.empty()},this._attributes={},this._idMap={},this._borders=new ve(this),this._pointerFine=!0,this._showHiddenBorder=v.CENTER}static fromJson(e){const t=new ne;return ne._attributeDefinitions.fromJson(e.global,t._attributes),e.borders&&(t._borders=ve._fromJson(e.borders,t)),t._root=oe._fromJson(e.layout,t),t._tidy(),t}static _createAttributeDefinitions(){const e=new he;return e.add("legacyOverflowMenu",!1).setType(p.BOOLEAN),e.add("splitterSize",-1).setType(p.NUMBER),e.add("splitterExtra",0).setType(p.NUMBER),e.add("enableEdgeDock",!0).setType(p.BOOLEAN),e.add("rootOrientationVertical",!1).setType(p.BOOLEAN),e.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("enableUseVisibility",!1).setType(p.BOOLEAN),e.add("tabEnableClose",!0).setType(p.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnableFloat",!1).setType(p.BOOLEAN),e.add("tabEnableDrag",!0).setType(p.BOOLEAN),e.add("tabEnableRename",!0).setType(p.BOOLEAN),e.add("tabClassName",void 0).setType(p.STRING),e.add("tabIcon",void 0).setType(p.STRING),e.add("tabEnableRenderOnDemand",!0).setType(p.BOOLEAN),e.add("tabDragSpeed",.3).setType(p.NUMBER),e.add("tabBorderWidth",-1).setType(p.NUMBER),e.add("tabBorderHeight",-1).setType(p.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(p.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(p.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(p.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(p.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(p.BOOLEAN),e.add("tabSetEnableClose",!1).setType(p.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(p.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(p.STRING),e.add("tabSetClassNameHeader",void 0).setType(p.STRING),e.add("tabSetEnableTabStrip",!0).setType(p.BOOLEAN),e.add("tabSetHeaderHeight",0).setType(p.NUMBER),e.add("tabSetTabStripHeight",0).setType(p.NUMBER),e.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabSetMinWidth",0).setType(p.NUMBER),e.add("tabSetMinHeight",0).setType(p.NUMBER),e.add("borderSize",200).setType(p.NUMBER),e.add("borderMinSize",0).setType(p.NUMBER),e.add("borderBarSize",0).setType(p.NUMBER),e.add("borderEnableDrop",!0).setType(p.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(p.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(p.BOOLEAN),e.add("borderClassName",void 0).setType(p.STRING),e.add("borderEnableAutoHide",!1).setType(p.BOOLEAN),e}_setChangeListener(e){this._changeListener=e}getActiveTabset(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet}_getShowHiddenBorder(){return this._showHiddenBorder}_setShowHiddenBorder(e){this._showHiddenBorder=e}_setActiveTabset(e){this._activeTabSet=e}getMaximizedTabset(){return this._maximizedTabSet}_setMaximizedTabset(e){this._maximizedTabSet=e}getRoot(){return this._root}isRootOrientationVertical(){return this._attributes.rootOrientationVertical}isUseVisibility(){return this._attributes.enableUseVisibility}getBorderSet(){return this._borders}_getOuterInnerRects(){return this._borderRects}_getPointerFine(){return this._pointerFine}_setPointerFine(e){this._pointerFine=e}visitNodes(e){this._borders._forEachNode(e),this._root._forEachNode(e,0)}getNodeById(e){return this._idMap[e]}doAction(e){let t;switch(e.type){case f.ADD_NODE:{const n=new F(this,e.data.json,!0),s=this._idMap[e.data.toNode];(s instanceof x||s instanceof k||s instanceof oe)&&(s.drop(n,v.getByName(e.data.location),e.data.index,e.data.select),t=n);break}case f.MOVE_NODE:{const n=this._idMap[e.data.fromNode];if(n instanceof F||n instanceof x){const s=this._idMap[e.data.toNode];(s instanceof x||s instanceof k||s instanceof oe)&&s.drop(n,v.getByName(e.data.location),e.data.index,e.data.select)}break}case f.DELETE_TAB:{const n=this._idMap[e.data.node];n instanceof F&&n._delete();break}case f.DELETE_TABSET:{const n=this._idMap[e.data.node];if(n instanceof x){const s=[...n.getChildren()];for(let o=0;o<s.length;o++){const a=s[o];a.isEnableClose()&&a._delete()}n.getChildren().length===0&&n._delete(),this._tidy()}break}case f.FLOAT_TAB:{const n=this._idMap[e.data.node];n instanceof F&&(n._setFloating(!0),je(n));break}case f.UNFLOAT_TAB:{const n=this._idMap[e.data.node];n instanceof F&&(n._setFloating(!1),Ve(n));break}case f.RENAME_TAB:{const n=this._idMap[e.data.node];n instanceof F&&n._setName(e.data.text);break}case f.SELECT_TAB:{const n=this._idMap[e.data.tabNode];if(n instanceof F){const s=n.getParent(),o=s.getChildren().indexOf(n);s instanceof k?s.getSelected()===o?s._setSelected(-1):s._setSelected(o):s instanceof x&&(s.getSelected()!==o&&s._setSelected(o),this._activeTabSet=s)}break}case f.SET_ACTIVE_TABSET:{const n=this._idMap[e.data.tabsetNode];n instanceof x&&(this._activeTabSet=n);break}case f.ADJUST_SPLIT:{const n=this._idMap[e.data.node1],s=this._idMap[e.data.node2];(n instanceof x||n instanceof oe)&&(s instanceof x||s instanceof oe)&&(this._adjustSplitSide(n,e.data.weight1,e.data.pixelWidth1),this._adjustSplitSide(s,e.data.weight2,e.data.pixelWidth2));break}case f.ADJUST_BORDER_SPLIT:{const n=this._idMap[e.data.node];n instanceof k&&n._setSize(e.data.pos);break}case f.MAXIMIZE_TOGGLE:{const n=this._idMap[e.data.node];n instanceof x&&(n===this._maximizedTabSet?this._maximizedTabSet=void 0:(this._maximizedTabSet=n,this._activeTabSet=n));break}case f.UPDATE_MODEL_ATTRIBUTES:{this._updateAttrs(e.data.json);break}case f.UPDATE_NODE_ATTRIBUTES:{this._idMap[e.data.node]._updateAttrs(e.data.json);break}}return this._updateIdMap(),this._changeListener!==void 0&&this._changeListener(e),t}_updateIdMap(){this._idMap={},this.visitNodes(e=>this._idMap[e.getId()]=e)}_adjustSplitSide(e,t,n){e._setWeight(t),e.getWidth()!=null&&e.getOrientation()===y.VERT?e._updateAttrs({width:n}):e.getHeight()!=null&&e.getOrientation()===y.HORZ&&e._updateAttrs({height:n})}toJson(){const e={};return ne._attributeDefinitions.toJson(e,this._attributes),this.visitNodes(t=>{t._fireEvent("save",void 0)}),{global:e,borders:this._borders._toJson(),layout:this._root.toJson()}}getSplitterSize(){let e=this._attributes.splitterSize;return e===-1&&(e=this._pointerFine?8:12),e}isLegacyOverflowMenu(){return this._attributes.legacyOverflowMenu}getSplitterExtra(){return this._attributes.splitterExtra}isEnableEdgeDock(){return this._attributes.enableEdgeDock}_addNode(e){const t=e.getId();if(this._idMap[t]!==void 0)throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);e.getType()!=="splitter"&&(this._idMap[t]=e)}_layout(e,t){var n;return this._borderRects=this._borders._layoutBorder({outer:e,inner:e},t),e=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets")),(n=this._root)==null||n.calcMinSize(),this._root._layout(e,t),e}_findDropTargetNode(e,t,n){let s=this._root._findDropTargetNode(e,t,n);return s===void 0&&(s=this._borders._findDropTargetNode(e,t,n)),s}_tidy(){this._root._tidy()}_updateAttrs(e){ne._attributeDefinitions.update(e,this._attributes)}_nextUniqueId(){return"#"+$e()}_getAttribute(e){return this._attributes[e]}setOnAllowDrop(e){this._onAllowDrop=e}_getOnAllowDrop(){return this._onAllowDrop}setOnCreateTabSet(e){this._onCreateTabSet=e}_getOnCreateTabSet(){return this._onCreateTabSet}static toTypescriptInterfaces(){console.log(ne._attributeDefinitions.toTypescriptInterface("Global",void 0)),console.log(oe.getAttributeDefinitions().toTypescriptInterface("Row",ne._attributeDefinitions)),console.log(x.getAttributeDefinitions().toTypescriptInterface("TabSet",ne._attributeDefinitions)),console.log(F.getAttributeDefinitions().toTypescriptInterface("Tab",ne._attributeDefinitions)),console.log(k.getAttributeDefinitions().toTypescriptInterface("Border",ne._attributeDefinitions))}toString(){return JSON.stringify(this.toJson())}},"s");let Fe=ne;Mi(Fe,"Model"),Fe._attributeDefinitions=ne._createAttributeDefinitions();var xi={global:{enableEdgeDock:!1,splitterSize:5,tabEnableClose:!1,tabEnableRename:!1,tabEnableFloat:!1,tabEnableRenderOnDemand:!0,tabSetEnableClose:!1,tabSetEnableMaximize:!1},borders:[{type:"border",location:"right",size:320,barSize:-1,children:[{type:"tab",id:"library",name:"Library",component:""},{type:"tab",id:"support",name:"Support",component:""}]}],layout:{type:"row",weight:100,children:[{type:"tabset",weight:80,children:[{type:"tab",name:"Template",component:"editor"},{type:"tab",name:"Style",component:"editor"},{type:"tab",name:"Script",component:"editor"}]},{type:"row",weight:50,children:[{type:"tabset",weight:100,children:[{type:"tab",name:"Preview",component:"preview",enableClose:!1,enableRename:!1,enableFloat:!1}]},{type:"tabset",weight:100,children:[{type:"tab",name:"Assets",component:"assets"},{type:"tab",name:"Controls",component:"editor"},{type:"tab",name:"Location",component:"location"}]}]}]}};const Ui={template:"html",style:"sass",script:"javascript",control:"html"},ht={},ct=wp.element.memo(({type:i,node:e,content:t,focusOnMount:n=!1})=>{const s=wp.element.useRef();return wp.element.useEffect(async()=>{var o;const{CodeEditor:a}=(o=window==null?void 0:window.Tangible)==null?void 0:o.TemplateSystem,h=s.current;h.style="display: flex; flex-direction: column; height: 100%;";const r=await a.create({el:h,lang:Ui[i]||"html",content:t});ht[i]=r,r.node=e,n&&r.view.focus()},[s]),wp.element.createElement("div",{ref:s})}),Ii=wp.element.memo(({type:i,node:e,onPreviewerReady:t})=>{const n=wp.element.useRef();return wp.element.useEffect(()=>{console.log("Previewer mount",n.current)},[]),wp.element.createElement("div",{className:"ide-component",ref:n})}),Fi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),zi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),Pi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Local"),wp.element.createElement("p",null,"List of templates"),wp.element.createElement("h2",null,"Cloud"),wp.element.createElement("p",null,"Catalog"))),Yi=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Keyboard Shortcuts"),wp.element.createElement("p",null,"Ctrl or CMD + SPACE - Autocomplete"),wp.element.createElement("h2",null,"Language Reference")));var Hi=Object.defineProperty,we=b((i,e)=>Hi(i,"name",{value:e,configurable:!0}),"s");const{jQuery:Xi}=window;Xi(document).ready(function(i){var e;const{CodeEditor:t}=(e=window==null?void 0:window.Tangible)==null?void 0:e.TemplateSystem,n=document.createElement("div");n.id="tangible-template-system-ide",document.body.prepend(n);const s=wp.element.createRoot(n),o={},a=Fe.fromJson(xi);let h="";const r={Library:Pi,Support:Yi,Editor:ct,Preview:Ii,Assets:Fi,Location:zi},c=we(T=>T._getAttr("id"),"getNodeId"),d=we(T=>{const L=T.getComponent(),D=c(T),U=T.getName(),E=U.toLowerCase();if(L==="editor")return wp.element.createElement(ct,{type:E,node:T,content:o[E]||"",focusOnMount:D===h});if(r[U]){const B=r[U];return wp.element.createElement(B,{node:T})}},"componentFactory"),l=we(T=>{const{type:L,data:D}=T;if(L==="FlexLayout_SelectTab"&&D.tabNode){const U=D.tabNode;h=U;for(const[E,B]of Object.entries(ht))if(c(B.node)===U){setTimeout(()=>{B.view.focus()});break}}return T},"onAction"),m=we(T=>{},"onModelChange"),u=we((T,L)=>{T._attributes;for(const D of T.getChildren()){const{id:U,name:E}=D._attributes||{};E.toLowerCase();return}},"onRenderTabSet");async function g({lang:T,editor:L}){const D=L.view.state.doc.toString();try{const U=await t.format({lang:T,content:D}),E=U?Math.min(L.view.state.selection.ranges[0].from,U.length-1):0;L.view.dispatch({changes:{from:0,to:D.length,insert:U}}),L.view.focus(),L.view.dispatch({selection:{anchor:E,head:E}})}catch(U){console.error(U)}}b(g,"F"),we(g,"formatCode"),s.render(wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{className:"ide-header"},wp.element.createElement("div",{className:"ide-header--title"},"Template name"),wp.element.createElement("div",{className:"ide-header--actions"},wp.element.createElement("button",{className:"ide-header--action"},"Save"),wp.element.createElement("button",{className:"ide-header--action"},"Format"),wp.element.createElement("button",{className:"ide-header--action"},"Export"),"\xA0 \xA0",wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{a.doAction(f.selectTab("library"))}},"Library"),wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{a.doAction(f.selectTab("support"))}},"Support"))),wp.element.createElement("div",{className:"ide-main"},wp.element.createElement(Ie,{model:a,factory:d,onAction:l,onModelChange:m,onRenderTabSet:u,realtimeResize:!0,supportsPopout:!1}))))})})();
//# sourceMappingURL=ide.min.js.map
