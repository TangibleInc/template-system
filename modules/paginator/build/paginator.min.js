var R=Object.defineProperty;var u=(k,P)=>R(k,"name",{value:P,configurable:!0});(function(){"use strict";(function(){const e={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch{}globalThis.process={env:e}})();var k=Object.defineProperty,P=u((e,t)=>k(e,"name",{value:t,configurable:!0}),"r");const T=P((e,t)=>Array(t-e+1).fill().map((c,a)=>a+e),"getRange"),S=P((e,t)=>{let c;t<=7?c=7:c=e>4&&e<t-3?2:4;const a={start:Math.round(e-c/2),end:Math.round(e+c/2)};(a.start-1===1||a.end+1===t)&&(a.start+=1,a.end+=1);let o=e>c?T(Math.min(a.start,t-c),Math.min(a.end,t)):T(1,Math.min(t,c+1));const h="...",p=P((i,r)=>o.length+1!==t?r:[i],"withDots");return o[0]!==1&&(o=p(1,[1,h]).concat(o)),o[o.length-1]<t&&(o=o.concat(p(t,[h,t]))),o},"generatePageRange");var F=Object.defineProperty,l=u((e,t)=>F(e,"name",{value:t,configurable:!0}),"i");const{jQuery:s,Tangible:{ajax:D}}=window;function w(){s(".tangible-paginator-target").each(function(){A(s(this))})}u(w,"T"),l(w,"activatePaginators"),s(w),window.Tangible.activatePaginators=w;function A(e){const t=e.data("tangiblePaginatorTargetId"),c=e.data("tangiblePaginatorTargetData")||{},{state:a,template:o,hash:h,context:p,context_hash:i}=c;if(!a||!o)return;const r={},g=s(`.tangible-paginator-subscribe--${t}`);function E(n){Object.assign(a,n),M(a)}u(E,"x"),l(E,"setState");const x={};let v,y;g.each(function(){const n=s(this),d=n.data("tangiblePaginatorSubscribeAction");switch(d){case"fields":n.find("[data-tangible-paginator-field]").each(function(){const b=s(this),O=b.data("tangiblePaginatorField");x[O]=b});break;case"loading":v=n;break;case"buttons":y=n,j(y,a,E);const m=n.data("tangiblePaginatorSubscribeSettings");typeof m=="object"&&!Array.isArray(m)&&Object.assign(r,m);break;default:console.warn("Unknown subscriber action",d);break}});function C(n){Object.keys(x).forEach(function(d){x[d].text(n[d])})}u(C,"N"),l(C,"updateFields");const _={};a.last_rendered_page=a.current_page,_[a.current_page]=e.html();function M(n){if(C(n),y&&j(y,n),n.last_rendered_page===n.current_page)return;n.last_rendered_page=n.current_page;const d=l(function(){if(r.scroll_top){const f=e.offset().top;if(!r.scroll_animate){s([document.documentElement,document.body]).scrollTop(f);return}const L=typeof r.scroll_animate=="number"?r.scroll_animate:300;s([document.documentElement,document.body]).animate({scrollTop:f},L)}},"afterLoaded");if(typeof _[n.current_page]<"u"){e.html(_[n.current_page]),d();return}const m="tangible-paginator-target-loading",b=n.current_page,O=l(function(){e.addClass(m),v&&v.show()},"startLoading"),N=l(function(){e.removeClass(m),v&&v.hide(),d()},"finishLoading");O(),_[b]="",D("tangible_template_render",{template:o,page:b,hash:h,context:p,context_hash:i}).then(f=>{_[b]=f,e.html(f),N()}).catch(f=>{console.error("Fetch page error",f),delete _[b],N()})}u(M,"v"),l(M,"render")}u(A,"F"),l(A,"createPaginator");function j(e,t,c){const{current_page:a,total_pages:o}=t,h=S(a,o),p=e.children();if(h.forEach(function(i,r){const g=s("<button />");if(g.text(i),g.addClass("tangible-paginator-button"),i==="..."?g.prop("disabled",!0):(g.attr("data-tangible-paginator-action","page"),g.attr("data-tangible-paginator-page",i),i==a&&g.addClass("active")),p.eq(r).length){p.eq(r).replaceWith(g);return}e.append(g)}),!!c)return e.on("click","[data-tangible-paginator-action]",function(){const i=s(this);switch(i.data("tangiblePaginatorAction")){case"page":{const r=parseInt(i.data("tangiblePaginatorPage"),10);if(isNaN(r)||r<=0||r>t.total_pages)return;t.current_page=r;break}case"first_page":t.current_page=1;break;case"last_page":t.current_page=t.total_pages;break;case"next_page":if(t.current_page===t.total_pages)return;t.current_page++;break;case"previous_page":if(t.current_page===1)return;t.current_page--;break;default:return}c(t)}),e}u(j,"j"),l(j,"renderPaginationButtons")})();
//# sourceMappingURL=paginator.min.js.map
