var I=Object.defineProperty;var f=(T,w)=>I(T,"name",{value:w,configurable:!0});(function(){"use strict";(function(){const t={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch{}globalThis.process={env:t}})();var T=Object.defineProperty,w=f((t,e)=>T(t,"name",{value:e,configurable:!0}),"r");const E=w((t,e)=>Array(e-t+1).fill(0).map((l,a)=>a+t),"getRange"),N=w((t,e)=>{let l;e<=7?l=7:l=t>4&&t<e-3?2:4;const a={start:Math.round(t-l/2),end:Math.round(t+l/2)};(a.start-1===1||a.end+1===e)&&(a.start+=1,a.end+=1);let r=t>l?E(Math.min(a.start,e-l),Math.min(a.end,e)):E(1,Math.min(e,l+1));const u="...",y=w((b,o)=>r.length+1!==e?o:[b],"withDots");return r[0]!==1&&(r=y(1,[1,u]).concat(r)),r[r.length-1]<e&&(r=r.concat(y(e,[u,e]))),r},"generatePageRange");var S=Object.defineProperty,d=f((t,e)=>S(t,"name",{value:e,configurable:!0}),"s");const{jQuery:c,Tangible:{ajax:D}}=window;function C(){c(".tangible-paginator-target").each(function(){O(c(this))})}f(C,"A"),d(C,"activatePaginators"),c(C),window.Tangible.activatePaginators=C;function O(t){const e=t.data("tangiblePaginatorTargetId"),l=t.data("tangiblePaginatorTargetData")||{},{state:a,template:r,hash:u,context:y,context_hash:b}=l;if(!a||!r)return;const o={},v=c(`.tangible-paginator-subscribe--${e}`);function j(n){Object.assign(a,n),M(a)}f(j,"P"),d(j,"setState");const s={};let g;const i=[];v.each(function(){const n=c(this),_=n.data("tangiblePaginatorSubscribeAction");switch(_){case"fields":n.find("[data-tangible-paginator-field]").each(function(){const A=c(this),k=A.data("tangiblePaginatorField");s[k]||(s[k]=[]),s[k].push(A)});break;case"loading":g=n;break;case"buttons":i.push(n);const m=n.data("tangiblePaginatorSubscribeSettings"),x={};typeof m=="object"&&!Array.isArray(m)&&Object.assign(x,o,m),n.renderButtons=()=>{B(n,a,j,x)},n.renderButtons();break;default:console.warn("Unknown subscriber action",_);break}});function p(n){Object.keys(s).forEach(function(_){for(const m of s[_])m.text(n[_])})}f(p,"g"),d(p,"updateFields"),p(a);const P={};a.last_rendered_page=a.current_page,P[a.current_page]=t.html();function M(n){if(p(n),i.forEach(h=>h.renderButtons()),n.last_rendered_page===n.current_page)return;n.last_rendered_page=n.current_page;const _=d(function(){if(o.scroll_top){const h=t.offset().top;if(!o.scroll_animate){c([document.documentElement,document.body]).scrollTop(h);return}const F=typeof o.scroll_animate=="number"?o.scroll_animate:300;c([document.documentElement,document.body]).animate({scrollTop:h},F)}},"afterLoaded");if(typeof P[n.current_page]<"u"){t.html(P[n.current_page]),_();return}const m="tangible-paginator-target-loading",x=n.current_page,A=d(function(){t.addClass(m),g&&g.show()},"startLoading"),k=d(function(){t.removeClass(m),g&&g.hide(),_()},"finishLoading");A(),P[x]="",D("tangible_template_render",{template:r,page:x,hash:u,context:y,context_hash:b}).then(h=>{P[x]=h,t.html(h),k()}).catch(h=>{console.error("Fetch page error",h),delete P[x],k()})}f(M,"T"),d(M,"render")}f(O,"N"),d(O,"createPaginator");function B(t,e,l,a={}){const{current_page:r,total_pages:u}=e,y=N(r,u),b=[...t.children()];let o=0;function v(s,g=!0,i=!1){const p=b[o]?c(b[o]):c("<button />");return p.addClass("tangible-paginator-button"),p.attr("data-tangible-paginator-action",s),p.removeAttr("data-tangible-paginator-page"),p.removeClass("active"),p.prop("disabled",!g),b[o]||t.append(p),o++,p}f(v,"h"),d(v,"addButtonType"),u>2&&(a.first&&v("first_page",r>1).text(a.first===!0?"<<":a.first),a.prev&&v("prev_page",r>1).text(a.prev===!0?"<":a.prev)),y.forEach(function(s,g){const i=b[o]?c(b[o]):c("<button />");i.addClass("tangible-paginator-button"),s==="..."?(i.text("\u2026"),i.prop("disabled",!0),i.removeAttr("data-tangible-paginator-action"),i.removeAttr("data-tangible-paginator-page"),i.removeClass("active")):(i.text(s),i.prop("disabled",!1),i.attr("data-tangible-paginator-action","page"),i.attr("data-tangible-paginator-page",s),i[s==r?"addClass":"removeClass"]("active")),b[o]||t.append(i),o++}),u>2&&(a.next&&v("next_page",r<u).text(a.next===!0?">":a.next),a.last&&v("last_page",r<u).text(a.last===!0?">>":a.last));const j="paginatorActionsActivated";return t[0][j]||(t[0][j]=!0,t.on("click","[data-tangible-paginator-action]",function(){const s=c(this);switch(s.attr("data-tangible-paginator-action")){case"page":{const g=parseInt(s.attr("data-tangible-paginator-page"),10);if(isNaN(g)||g<=0||g>e.total_pages)return;e.current_page=g;break}case"first_page":e.current_page=1;break;case"last_page":e.current_page=e.total_pages;break;case"next_page":if(e.current_page===e.total_pages)return;e.current_page++;break;case"prev_page":if(e.current_page===1)return;e.current_page--;break;default:return}l(e)})),t}f(B,"I"),d(B,"renderPaginationButtons")})();
