var mo=Object.defineProperty;var _=(at,ut)=>mo(at,"name",{value:ut,configurable:!0});(function(){"use strict";var we,Te,U,Ze,Ke,k,qe,Qe,et,tt,Ue,ce,W,de,he,it,nt,Fe,ne;(function(){const i={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,i);return}}catch{}globalThis.process={env:i}})();var at=Object.defineProperty,ut=_((i,e,t)=>e in i?at(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"c$4"),Ri=_((i,e)=>at(i,"name",{value:e,configurable:!0}),"n$b"),gt=_((i,e,t)=>(ut(i,typeof e!="symbol"?e+"":e,t),t),"a$9");const Ne=(we=class{constructor(e){gt(this,"_name"),this._name=e}static flip(e){return e===we.HORZ?we.VERT:we.HORZ}getName(){return this._name}toString(){return this._name}},_(we,"r"),we);Ri(Ne,"Orientation"),gt(Ne,"HORZ",new Ne("horz")),gt(Ne,"VERT",new Ne("vert"));let y=Ne;var vt=Object.defineProperty,Ai=_((i,e,t)=>e in i?vt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"m$2"),Ni=_((i,e)=>vt(i,"name",{value:e,configurable:!0}),"u$5"),rt=_((i,e,t)=>(Ai(i,typeof e!="symbol"?e+"":e,t),t),"r$3");const wt=(Te=class{constructor(e,t,n,o){rt(this,"x"),rt(this,"y"),rt(this,"width"),rt(this,"height"),this.x=e,this.y=t,this.width=n,this.height=o}static empty(){return new Te(0,0,0,0)}static fromElement(e){let{x:t,y:n,width:o,height:s}=e.getBoundingClientRect();return new Te(t,n,o,s)}clone(){return new Te(this.x,this.y,this.width,this.height)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}getBottom(){return this.y+this.height}getRight(){return this.x+this.width}getCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}positionElement(e,t){this.styleWithPosition(e.style,t)}styleWithPosition(e,t="absolute"){return e.left=this.x+"px",e.top=this.y+"px",e.width=Math.max(0,this.width)+"px",e.height=Math.max(0,this.height)+"px",e.position=t,e}contains(e,t){return this.x<=e&&e<=this.getRight()&&this.y<=t&&t<=this.getBottom()}removeInsets(e){return new Te(this.x+e.left,this.y+e.top,Math.max(0,this.width-e.left-e.right),Math.max(0,this.height-e.top-e.bottom))}centerInRect(e){this.x=(e.width-this.width)/2,this.y=(e.height-this.height)/2}_getSize(e){let t=this.width;return e===y.VERT&&(t=this.height),t}toString(){return"(Rect: x="+this.x+", y="+this.y+", width="+this.width+", height="+this.height+")"}},_(Te,"e"),Te);Ni(wt,"Rect");let D=wt;var yt=Object.defineProperty,Si=_((i,e,t)=>e in i?yt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"w$2"),Di=_((i,e)=>yt(i,"name",{value:e,configurable:!0}),"g$4"),pe=_((i,e,t)=>(Si(i,typeof e!="symbol"?e+"":e,t),t),"s$8");const se=(U=class{constructor(e,t,n){pe(this,"_name"),pe(this,"_orientation"),pe(this,"_indexPlus"),this._name=e,this._orientation=t,this._indexPlus=n,U.values[this._name]=this}static getByName(e){return U.values[e]}static getLocation(e,t,n){if(t=(t-e.x)/e.width,n=(n-e.y)/e.height,t>=.25&&t<.75&&n>=.25&&n<.75)return U.CENTER;const o=n>=t,s=n>=1-t;return o?s?U.BOTTOM:U.LEFT:s?U.RIGHT:U.TOP}getName(){return this._name}getOrientation(){return this._orientation}getDockRect(e){return this===U.TOP?new D(e.x,e.y,e.width,e.height/2):this===U.BOTTOM?new D(e.x,e.getBottom()-e.height/2,e.width,e.height/2):this===U.LEFT?new D(e.x,e.y,e.width/2,e.height):this===U.RIGHT?new D(e.getRight()-e.width/2,e.y,e.width/2,e.height):e.clone()}split(e,t){if(this===U.TOP){const n=new D(e.x,e.y,e.width,t),o=new D(e.x,e.y+t,e.width,e.height-t);return{start:n,end:o}}else if(this===U.LEFT){const n=new D(e.x,e.y,t,e.height),o=new D(e.x+t,e.y,e.width-t,e.height);return{start:n,end:o}}if(this===U.RIGHT){const n=new D(e.getRight()-t,e.y,t,e.height),o=new D(e.x,e.y,e.width-t,e.height);return{start:n,end:o}}else{const n=new D(e.x,e.getBottom()-t,e.width,t),o=new D(e.x,e.y,e.width,e.height-t);return{start:n,end:o}}}reflect(){return this===U.TOP?U.BOTTOM:this===U.LEFT?U.RIGHT:this===U.RIGHT?U.LEFT:U.TOP}toString(){return"(DockLocation: name="+this._name+", orientation="+this._orientation+")"}},_(U,"n"),U);Di(se,"DockLocation"),pe(se,"values",{}),pe(se,"TOP",new se("top",y.VERT,0)),pe(se,"BOTTOM",new se("bottom",y.VERT,1)),pe(se,"LEFT",new se("left",y.HORZ,0)),pe(se,"RIGHT",new se("right",y.HORZ,1)),pe(se,"CENTER",new se("center",y.VERT,0));let w=se;var Ot=Object.defineProperty,Bi=_((i,e,t)=>e in i?Ot(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"c$3"),Ci=_((i,e)=>Ot(i,"name",{value:e,configurable:!0}),"v$1"),H=_((i,e,t)=>(Bi(i,typeof e!="symbol"?e+"":e,t),t),"s$7");const Mi=!!(typeof window<"u"&&window.document&&window.document.createElement),lt=(Ze=class{constructor(){H(this,"_fDblClick"),H(this,"_fClick"),H(this,"_fDragEnd"),H(this,"_fDragMove"),H(this,"_fDragStart"),H(this,"_fDragCancel"),H(this,"_glass"),H(this,"_defaultGlassCursor"),H(this,"_glassCursorOverride"),H(this,"_manualGlassManagement",!1),H(this,"_lastClick"),H(this,"_clickX"),H(this,"_clickY"),H(this,"_startX",0),H(this,"_startY",0),H(this,"_dragDepth",0),H(this,"_glassShowing",!1),H(this,"_dragging",!1),H(this,"_active",!1),H(this,"_document"),H(this,"_rootElement"),H(this,"_lastEvent"),Mi&&(this._glass=document.createElement("div"),this._glass.style.zIndex="998",this._glass.style.backgroundColor="transparent",this._glass.style.outline="none"),this._defaultGlassCursor="default",this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onKeyPress=this._onKeyPress.bind(this),this._onDragCancel=this._onDragCancel.bind(this),this._onDragEnter=this._onDragEnter.bind(this),this._onDragLeave=this._onDragLeave.bind(this),this.resizeGlass=this.resizeGlass.bind(this),this._lastClick=0,this._clickX=0,this._clickY=0}addGlass(e){this._glassShowing?this._manualGlassManagement=!0:(this._document||(this._document=window.document),this._rootElement||(this._rootElement=this._document.body),this.resizeGlass(),this._document.defaultView?.addEventListener("resize",this.resizeGlass),this._document.body.appendChild(this._glass),this._glass.tabIndex=-1,this._glass.focus(),this._glass.addEventListener("keydown",this._onKeyPress),this._glass.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._glass.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._glass.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._glassShowing=!0,this._fDragCancel=e,this._manualGlassManagement=!1)}resizeGlass(){D.fromElement(this._rootElement).positionElement(this._glass,"fixed")}hideGlass(){this._glassShowing&&(this._document.body.removeChild(this._glass),this._document.defaultView?.removeEventListener("resize",this.resizeGlass),this._glassShowing=!1,this._document=void 0,this._rootElement=void 0,this.setGlassCursorOverride(void 0))}_updateGlassCursor(){this._glass.style.cursor=this._glassCursorOverride??this._defaultGlassCursor}_setDefaultGlassCursor(e){this._defaultGlassCursor=e,this._updateGlassCursor()}setGlassCursorOverride(e){this._glassCursorOverride=e,this._updateGlassCursor()}startDrag(e,t,n,o,s,a,r,l,h){if(e&&this._lastEvent&&this._lastEvent.type.startsWith("touch")&&e.type.startsWith("mouse")&&e.timeStamp-this._lastEvent.timeStamp<500)return;this._lastEvent=e,l?this._document=l:this._document=window.document,h?this._rootElement=h:this._rootElement=this._document.body;const c=this._getLocationEvent(e);this.addGlass(s),this._dragging&&console.warn("this._dragging true on startDrag should never happen"),e?(this._startX=c.clientX,this._startY=c.clientY,(!window.matchMedia||window.matchMedia("(pointer: fine)").matches)&&this._setDefaultGlassCursor(getComputedStyle(e.target).cursor),this._stopPropagation(e),this._preventDefault(e)):(this._startX=0,this._startY=0,this._setDefaultGlassCursor("default")),this._dragging=!1,this._fDragStart=t,this._fDragMove=n,this._fDragEnd=o,this._fDragCancel=s,this._fClick=a,this._fDblClick=r,this._active=!0,e?.type==="dragenter"?(this._dragDepth=1,this._rootElement.addEventListener("dragenter",this._onDragEnter,{passive:!1}),this._rootElement.addEventListener("dragover",this._onMouseMove,{passive:!1}),this._rootElement.addEventListener("dragleave",this._onDragLeave,{passive:!1}),this._document.addEventListener("dragend",this._onDragCancel,{passive:!1}),this._document.addEventListener("drop",this._onMouseUp,{passive:!1})):(this._document.addEventListener("mouseup",this._onMouseUp,{passive:!1}),this._document.addEventListener("mousemove",this._onMouseMove,{passive:!1}),this._document.addEventListener("touchend",this._onMouseUp,{passive:!1}),this._document.addEventListener("touchmove",this._onMouseMove,{passive:!1}))}isDragging(){return this._dragging}isActive(){return this._active}toString(){return"(DragDrop: startX="+this._startX+", startY="+this._startY+", dragging="+this._dragging+")"}_onKeyPress(e){e.keyCode===27&&this._onDragCancel()}_onDragCancel(){this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this.hideGlass(),this._fDragCancel!==void 0&&this._fDragCancel(this._dragging),this._dragging=!1,this._active=!1}_getLocationEvent(e){let t=e;return e&&e.touches&&(t=e.touches[0]),t}_getLocationEventEnd(e){let t=e;return e.changedTouches&&(t=e.changedTouches[0]),t}_stopPropagation(e){e.stopPropagation&&e.stopPropagation()}_preventDefault(e){return e.preventDefault&&e.cancelable&&e.preventDefault(),e}_onMouseMove(e){this._lastEvent=e;const t=this._getLocationEvent(e);return this._stopPropagation(e),this._preventDefault(e),!this._dragging&&(Math.abs(this._startX-t.clientX)>5||Math.abs(this._startY-t.clientY)>5)&&(this._dragging=!0,this._fDragStart&&(this._setDefaultGlassCursor("move"),this._dragging=this._fDragStart({clientX:this._startX,clientY:this._startY}))),this._dragging&&this._fDragMove&&this._fDragMove(t),!1}_onMouseUp(e){this._lastEvent=e;const t=this._getLocationEventEnd(e);if(this._stopPropagation(e),this._preventDefault(e),this._active=!1,this._rootElement.removeEventListener("dragenter",this._onDragEnter),this._rootElement.removeEventListener("dragover",this._onMouseMove),this._rootElement.removeEventListener("dragleave",this._onDragLeave),this._document.removeEventListener("dragend",this._onDragCancel),this._document.removeEventListener("drop",this._onMouseUp),this._document.removeEventListener("mousemove",this._onMouseMove),this._document.removeEventListener("mouseup",this._onMouseUp),this._document.removeEventListener("touchend",this._onMouseUp),this._document.removeEventListener("touchmove",this._onMouseMove),this._manualGlassManagement||this.hideGlass(),this._dragging)this._dragging=!1,this._fDragEnd&&this._fDragEnd(e);else if(this._fDragCancel&&this._fDragCancel(this._dragging),Math.abs(this._startX-t.clientX)<=5&&Math.abs(this._startY-t.clientY)<=5){let n=!1;const o=new Date().getTime();Math.abs(this._clickX-t.clientX)<=5&&Math.abs(this._clickY-t.clientY)<=5&&o-this._lastClick<500&&this._fDblClick&&(this._fDblClick(e),n=!0),!n&&this._fClick&&this._fClick(e),this._lastClick=o,this._clickX=t.clientX,this._clickY=t.clientY}return!1}_onDragEnter(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth++,!1}_onDragLeave(e){return this._preventDefault(e),this._stopPropagation(e),this._dragDepth--,this._dragDepth<=0&&this._onDragCancel(),!1}},_(Ze,"n"),Ze);Ci(lt,"DragDrop"),H(lt,"instance",new lt);let ae=lt;var Lt=Object.defineProperty,xi=_((i,e,t)=>e in i?Lt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"d$6"),Ii=_((i,e)=>Lt(i,"name",{value:e,configurable:!0}),"n$8"),Rt=_((i,e,t)=>(xi(i,typeof e!="symbol"?e+"":e,t),t),"a$7");const At=(Ke=class{constructor(e,t){Rt(this,"type"),Rt(this,"data"),this.type=e,this.data=t}},_(Ke,"e"),Ke);Ii(At,"Action");let ee=At;var Nt=Object.defineProperty,Ui=_((i,e,t)=>e in i?Nt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"A"),Fi=_((i,e)=>Nt(i,"name",{value:e,configurable:!0}),"u$4"),te=_((i,e,t)=>(Ui(i,typeof e!="symbol"?e+"":e,t),t),"n$7");const Z=(k=class{static addNode(e,t,n,o,s){return new ee(k.ADD_NODE,{json:e,toNode:t,location:n.getName(),index:o,select:s})}static moveNode(e,t,n,o,s){return new ee(k.MOVE_NODE,{fromNode:e,toNode:t,location:n.getName(),index:o,select:s})}static deleteTab(e){return new ee(k.DELETE_TAB,{node:e})}static deleteTabset(e){return new ee(k.DELETE_TABSET,{node:e})}static renameTab(e,t){return new ee(k.RENAME_TAB,{node:e,text:t})}static selectTab(e){return new ee(k.SELECT_TAB,{tabNode:e})}static setActiveTabset(e){return new ee(k.SET_ACTIVE_TABSET,{tabsetNode:e})}static adjustSplit(e){const t=e.node1Id,n=e.node2Id;return new ee(k.ADJUST_SPLIT,{node1:t,weight1:e.weight1,pixelWidth1:e.pixelWidth1,node2:n,weight2:e.weight2,pixelWidth2:e.pixelWidth2})}static adjustBorderSplit(e,t){return new ee(k.ADJUST_BORDER_SPLIT,{node:e,pos:t})}static maximizeToggle(e){return new ee(k.MAXIMIZE_TOGGLE,{node:e})}static updateModelAttributes(e){return new ee(k.UPDATE_MODEL_ATTRIBUTES,{json:e})}static updateNodeAttributes(e,t){return new ee(k.UPDATE_NODE_ATTRIBUTES,{node:e,json:t})}static floatTab(e){return new ee(k.FLOAT_TAB,{node:e})}static unFloatTab(e){return new ee(k.UNFLOAT_TAB,{node:e})}},_(k,"e"),k);Fi(Z,"Actions"),te(Z,"ADD_NODE","FlexLayout_AddNode"),te(Z,"MOVE_NODE","FlexLayout_MoveNode"),te(Z,"DELETE_TAB","FlexLayout_DeleteTab"),te(Z,"DELETE_TABSET","FlexLayout_DeleteTabset"),te(Z,"RENAME_TAB","FlexLayout_RenameTab"),te(Z,"SELECT_TAB","FlexLayout_SelectTab"),te(Z,"SET_ACTIVE_TABSET","FlexLayout_SetActiveTabset"),te(Z,"ADJUST_SPLIT","FlexLayout_AdjustSplit"),te(Z,"ADJUST_BORDER_SPLIT","FlexLayout_AdjustBorderSplit"),te(Z,"MAXIMIZE_TOGGLE","FlexLayout_MaximizeToggle"),te(Z,"UPDATE_MODEL_ATTRIBUTES","FlexLayout_UpdateModelAttributes"),te(Z,"UPDATE_NODE_ATTRIBUTES","FlexLayout_UpdateNodeAttributes"),te(Z,"FLOAT_TAB","FlexLayout_FloatTab"),te(Z,"UNFLOAT_TAB","FlexLayout_UnFloatTab");let S=Z;var St=Object.defineProperty,zi=_((i,e,t)=>e in i?St(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"d$5"),Pi=_((i,e)=>St(i,"name",{value:e,configurable:!0}),"r$2"),ue=_((i,e,t)=>(zi(i,typeof e!="symbol"?e+"":e,t),t),"s$6");const ze=(qe=class{constructor(e,t,n,o){ue(this,"name"),ue(this,"modelName"),ue(this,"defaultValue"),ue(this,"alwaysWriteJson"),ue(this,"type"),ue(this,"required"),ue(this,"fixed"),this.name=e,this.modelName=t,this.defaultValue=n,this.alwaysWriteJson=o,this.required=!1,this.fixed=!1,this.type="any"}setType(e){return this.type=e,this}setRequired(){return this.required=!0,this}setFixed(){return this.fixed=!0,this}},_(qe,"a"),qe);Pi(ze,"Attribute"),ue(ze,"NUMBER","number"),ue(ze,"STRING","string"),ue(ze,"BOOLEAN","boolean");let p=ze;var Dt=Object.defineProperty,Hi=_((i,e,t)=>e in i?Dt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"g$3"),Yi=_((i,e)=>Dt(i,"name",{value:e,configurable:!0}),"y$1"),Bt=_((i,e,t)=>(Hi(i,typeof e!="symbol"?e+"":e,t),t),"l$6");const Ct=(Qe=class{constructor(){Bt(this,"attributes"),Bt(this,"nameToAttribute"),this.attributes=[],this.nameToAttribute={}}addWithAll(e,t,n,o){const s=new p(e,t,n,o);return this.attributes.push(s),this.nameToAttribute[e]=s,s}addInherited(e,t){return this.addWithAll(e,t,void 0,!1)}add(e,t,n){return this.addWithAll(e,void 0,t,n)}getAttributes(){return this.attributes}getModelName(e){const t=this.nameToAttribute[e];if(t!==void 0)return t.modelName}toJson(e,t){for(const n of this.attributes){const o=t[n.name];(n.alwaysWriteJson||o!==n.defaultValue)&&(e[n.name]=o)}}fromJson(e,t){for(const n of this.attributes){const o=e[n.name];o===void 0?t[n.name]=n.defaultValue:t[n.name]=o}}update(e,t){for(const n of this.attributes)if(e.hasOwnProperty(n.name)){const o=e[n.name];o===void 0?delete t[n.name]:t[n.name]=o}}setDefaults(e){for(const t of this.attributes)e[t.name]=t.defaultValue}toTypescriptInterface(e,t){const n=[],o=this.attributes.sort((s,a)=>s.name.localeCompare(a.name));n.push("export interface I"+e+"Attributes {");for(let s=0;s<o.length;s++){const a=o[s];let r=a.type,l,h=a,c;h.defaultValue!==void 0?l=h.defaultValue:h.modelName!==void 0&&t!==void 0&&t.nameToAttribute[h.modelName]!==void 0&&(c=h.modelName,h=t.nameToAttribute[h.modelName],l=h.defaultValue,r=h.type);let d=JSON.stringify(l);const m=h.required||h.fixed?"":"?";if(a.fixed)n.push("	"+a.name+": "+d+";");else{const E=(l!==void 0?"default: "+d:"")+(c!==void 0?" - inherited from global "+c:"");n.push("	"+a.name+m+": "+r+";"+(E.length>0?" // "+E:""))}}return n.push("}"),n.join(`
`)}},_(Qe,"f"),Qe);Yi(Ct,"AttributeDefinitions");let Se=Ct;var Mt=Object.defineProperty,Xi=_((i,e,t)=>e in i?Mt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"d$4"),Wi=_((i,e)=>Mt(i,"name",{value:e,configurable:!0}),"s$5"),Pe=_((i,e,t)=>(Xi(i,typeof e!="symbol"?e+"":e,t),t),"e$1");const xt=(et=class{constructor(e,t,n,o,s){Pe(this,"node"),Pe(this,"rect"),Pe(this,"location"),Pe(this,"index"),Pe(this,"className"),this.node=e,this.rect=t,this.location=n,this.index=o,this.className=s}},_(et,"i"),et);Wi(xt,"DropInfo");let q=xt;var g=(i=>(i.FLEXLAYOUT__BORDER="flexlayout__border",i.FLEXLAYOUT__BORDER_="flexlayout__border_",i.FLEXLAYOUT__BORDER_BUTTON="flexlayout__border_button",i.FLEXLAYOUT__BORDER_BUTTON_="flexlayout__border_button_",i.FLEXLAYOUT__BORDER_BUTTON_CONTENT="flexlayout__border_button_content",i.FLEXLAYOUT__BORDER_BUTTON_LEADING="flexlayout__border_button_leading",i.FLEXLAYOUT__BORDER_BUTTON_TRAILING="flexlayout__border_button_trailing",i.FLEXLAYOUT__BORDER_BUTTON__SELECTED="flexlayout__border_button--selected",i.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED="flexlayout__border_button--unselected",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW="flexlayout__border_toolbar_button_overflow",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_="flexlayout__border_toolbar_button_overflow_",i.FLEXLAYOUT__BORDER_INNER="flexlayout__border_inner",i.FLEXLAYOUT__BORDER_INNER_="flexlayout__border_inner_",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER="flexlayout__border_inner_tab_container",i.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_="flexlayout__border_inner_tab_container_",i.FLEXLAYOUT__BORDER_TAB_DIVIDER="flexlayout__border_tab_divider",i.FLEXLAYOUT__BORDER_SIZER="flexlayout__border_sizer",i.FLEXLAYOUT__BORDER_TOOLBAR="flexlayout__border_toolbar",i.FLEXLAYOUT__BORDER_TOOLBAR_="flexlayout__border_toolbar_",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON="flexlayout__border_toolbar_button",i.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT="flexlayout__border_toolbar_button-float",i.FLEXLAYOUT__DRAG_RECT="flexlayout__drag_rect",i.FLEXLAYOUT__EDGE_RECT="flexlayout__edge_rect",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER="flexlayout__error_boundary_container",i.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT="flexlayout__error_boundary_content",i.FLEXLAYOUT__FLOATING_WINDOW_CONTENT="flexlayout__floating_window_content",i.FLEXLAYOUT__FLOATING_WINDOW_TAB="flexlayout__floating_window_tab",i.FLEXLAYOUT__LAYOUT="flexlayout__layout",i.FLEXLAYOUT__OUTLINE_RECT="flexlayout__outline_rect",i.FLEXLAYOUT__OUTLINE_RECT_EDGE="flexlayout__outline_rect_edge",i.FLEXLAYOUT__SPLITTER="flexlayout__splitter",i.FLEXLAYOUT__SPLITTER_EXTRA="flexlayout__splitter_extra",i.FLEXLAYOUT__SPLITTER_="flexlayout__splitter_",i.FLEXLAYOUT__SPLITTER_BORDER="flexlayout__splitter_border",i.FLEXLAYOUT__SPLITTER_DRAG="flexlayout__splitter_drag",i.FLEXLAYOUT__TAB="flexlayout__tab",i.FLEXLAYOUT__TABSET="flexlayout__tabset",i.FLEXLAYOUT__TABSET_HEADER="flexlayout__tabset_header",i.FLEXLAYOUT__TABSET_HEADER_SIZER="flexlayout__tabset_header_sizer",i.FLEXLAYOUT__TABSET_HEADER_CONTENT="flexlayout__tabset_header_content",i.FLEXLAYOUT__TABSET_MAXIMIZED="flexlayout__tabset-maximized",i.FLEXLAYOUT__TABSET_SELECTED="flexlayout__tabset-selected",i.FLEXLAYOUT__TABSET_SIZER="flexlayout__tabset_sizer",i.FLEXLAYOUT__TABSET_TAB_DIVIDER="flexlayout__tabset_tab_divider",i.FLEXLAYOUT__TABSET_CONTENT="flexlayout__tabset_content",i.FLEXLAYOUT__TABSET_TABBAR_INNER="flexlayout__tabset_tabbar_inner",i.FLEXLAYOUT__TABSET_TABBAR_INNER_="flexlayout__tabset_tabbar_inner_",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER="flexlayout__tabset_tabbar_inner_tab_container",i.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_="flexlayout__tabset_tabbar_inner_tab_container_",i.FLEXLAYOUT__TABSET_TABBAR_OUTER="flexlayout__tabset_tabbar_outer",i.FLEXLAYOUT__TABSET_TABBAR_OUTER_="flexlayout__tabset_tabbar_outer_",i.FLEXLAYOUT__TAB_BORDER="flexlayout__tab_border",i.FLEXLAYOUT__TAB_BORDER_="flexlayout__tab_border_",i.FLEXLAYOUT__TAB_BUTTON="flexlayout__tab_button",i.FLEXLAYOUT__TAB_BUTTON_CONTENT="flexlayout__tab_button_content",i.FLEXLAYOUT__TAB_BUTTON_LEADING="flexlayout__tab_button_leading",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW="flexlayout__tab_button_overflow",i.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT="flexlayout__tab_button_overflow_count",i.FLEXLAYOUT__TAB_BUTTON_TEXTBOX="flexlayout__tab_button_textbox",i.FLEXLAYOUT__TAB_BUTTON_TRAILING="flexlayout__tab_button_trailing",i.FLEXLAYOUT__TAB_BUTTON_STAMP="flexlayout__tab_button_stamp",i.FLEXLAYOUT__TAB_FLOATING="flexlayout__tab_floating",i.FLEXLAYOUT__TAB_FLOATING_INNER="flexlayout__tab_floating_inner",i.FLEXLAYOUT__TAB_TOOLBAR="flexlayout__tab_toolbar",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON="flexlayout__tab_toolbar_button",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_="flexlayout__tab_toolbar_button-",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT="flexlayout__tab_toolbar_button-float",i.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER="flexlayout__tab_toolbar_sticky_buttons_container",i.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE="flexlayout__tab_toolbar_button-close",i.FLEXLAYOUT__POPUP_MENU_CONTAINER="flexlayout__popup_menu_container",i.FLEXLAYOUT__POPUP_MENU_ITEM="flexlayout__popup_menu_item",i.FLEXLAYOUT__POPUP_MENU="flexlayout__popup_menu",i))(g||{}),It=Object.defineProperty,ki=_((i,e,t)=>e in i?It(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"u$3"),$i=_((i,e)=>It(i,"name",{value:e,configurable:!0}),"l$5"),ge=_((i,e,t)=>(ki(i,typeof e!="symbol"?e+"":e,t),t),"i$4");const Ut=(tt=class{constructor(e){ge(this,"_model"),ge(this,"_attributes"),ge(this,"_parent"),ge(this,"_children"),ge(this,"_fixed"),ge(this,"_rect"),ge(this,"_visible"),ge(this,"_listeners"),ge(this,"_dirty",!1),ge(this,"_tempSize",0),this._model=e,this._attributes={},this._children=[],this._fixed=!1,this._rect=D.empty(),this._visible=!1,this._listeners={}}getId(){let e=this._attributes.id;return e!==void 0||(e=this._model._nextUniqueId(),this._setId(e)),e}getModel(){return this._model}getType(){return this._attributes.type}getParent(){return this._parent}getChildren(){return this._children}getRect(){return this._rect}isVisible(){return this._visible}getOrientation(){return this._parent===void 0?this._model.isRootOrientationVertical()?y.VERT:y.HORZ:y.flip(this._parent.getOrientation())}setEventListener(e,t){this._listeners[e]=t}removeEventListener(e){delete this._listeners[e]}_setId(e){this._attributes.id=e}_fireEvent(e,t){this._listeners[e]!==void 0&&this._listeners[e](t)}_getAttr(e){let t=this._attributes[e];if(t===void 0){const n=this._getAttributeDefinitions().getModelName(e);n!==void 0&&(t=this._model._getAttribute(n))}return t}_forEachNode(e,t){e(this,t),t++;for(const n of this._children)n._forEachNode(e,t)}_setVisible(e){e!==this._visible&&(this._fireEvent("visibility",{visible:e}),this._visible=e)}_getDrawChildren(){return this._children}_setParent(e){this._parent=e}_setRect(e){this._rect=e}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}_isFixed(){return this._fixed}_layout(e,t){this._rect=e}_findDropTargetNode(e,t,n){let o;if(this._rect.contains(t,n)){if(this._model.getMaximizedTabset()!==void 0)o=this._model.getMaximizedTabset().canDrop(e,t,n);else if(o=this.canDrop(e,t,n),o===void 0&&this._children.length!==0){for(const s of this._children)if(o=s._findDropTargetNode(e,t,n),o!==void 0)break}}return o}canDrop(e,t,n){}_canDockInto(e,t){if(t!=null){if(t.location===w.CENTER&&t.node.isEnableDrop()===!1||t.location===w.CENTER&&e.getType()==="tabset"&&e.getName()!==void 0||t.location!==w.CENTER&&t.node.isEnableDivide()===!1)return!1;if(this._model._getOnAllowDrop())return this._model._getOnAllowDrop()(e,t)}return!0}_removeChild(e){const t=this._children.indexOf(e);return t!==-1&&this._children.splice(t,1),this._dirty=!0,t}_addChild(e,t){return t!=null?this._children.splice(t,0,e):(this._children.push(e),t=this._children.length-1),e._parent=this,this._dirty=!0,t}_removeAll(){this._children=[],this._dirty=!0}_styleWithPosition(e){return e==null&&(e={}),this._rect.styleWithPosition(e)}_getTempSize(){return this._tempSize}_setTempSize(e){this._tempSize=e}isEnableDivide(){return!0}_toAttributeString(){return JSON.stringify(this._attributes,void 0,"	")}},_(tt,"a"),tt);$i(Ut,"Node");let He=Ut;var Ft=Object.defineProperty,Gi=_((i,e,t)=>e in i?Ft(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"g$2"),Vi=_((i,e)=>Ft(i,"name",{value:e,configurable:!0}),"s$4"),ji=_((i,e,t)=>(Gi(i,typeof e!="symbol"?e+"":e,t),t),"u$2");const mt=(Ue=class extends He{constructor(e){super(e),this._fixed=!0,this._attributes.type=Ue.TYPE,e._addNode(this)}getWidth(){return this._model.getSplitterSize()}getMinWidth(){return this.getOrientation()===y.VERT?this._model.getSplitterSize():0}getHeight(){return this._model.getSplitterSize()}getMinHeight(){return this.getOrientation()===y.HORZ?this._model.getSplitterSize():0}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getWeight(){return 0}_setWeight(e){}_getPrefSize(e){return this._model.getSplitterSize()}_updateAttrs(e){}_getAttributeDefinitions(){return new Se}toJson(){}},_(Ue,"r"),Ue);Vi(mt,"SplitterNode"),ji(mt,"TYPE","splitter");let Oe=mt;var zt=Object.defineProperty,Ji=_((i,e,t)=>e in i?zt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"u$1"),Zi=_((i,e)=>zt(i,"name",{value:e,configurable:!0}),"b$3"),De=_((i,e,t)=>(Ji(i,typeof e!="symbol"?e+"":e,t),t),"a$4");const Ye=(ce=class extends He{constructor(e,t,n=!0){super(e),De(this,"_tabRect"),De(this,"_renderedName"),De(this,"_extra"),De(this,"_window"),this._extra={},ce._attributeDefinitions.fromJson(t,this._attributes),n===!0&&e._addNode(this)}static _fromJson(e,t,n=!0){return new ce(t,e,n)}static _createAttributeDefinitions(){const e=new Se;return e.add("type",ce.TYPE,!0).setType(p.STRING),e.add("id",void 0).setType(p.STRING),e.add("name","[Unnamed Tab]").setType(p.STRING),e.add("altName",void 0).setType(p.STRING),e.add("helpText",void 0).setType(p.STRING),e.add("component",void 0).setType(p.STRING),e.add("config",void 0).setType("any"),e.add("floating",!1).setType(p.BOOLEAN),e.addInherited("enableClose","tabEnableClose").setType(p.BOOLEAN),e.addInherited("closeType","tabCloseType").setType("ICloseType"),e.addInherited("enableDrag","tabEnableDrag").setType(p.BOOLEAN),e.addInherited("enableRename","tabEnableRename").setType(p.BOOLEAN),e.addInherited("className","tabClassName").setType(p.STRING),e.addInherited("icon","tabIcon").setType(p.STRING),e.addInherited("enableRenderOnDemand","tabEnableRenderOnDemand").setType(p.BOOLEAN),e.addInherited("enableFloat","tabEnableFloat").setType(p.BOOLEAN),e.addInherited("borderWidth","tabBorderWidth").setType(p.NUMBER),e.addInherited("borderHeight","tabBorderHeight").setType(p.NUMBER),e}getWindow(){return this._window}getTabRect(){return this._tabRect}_setTabRect(e){this._tabRect=e}_setRenderedName(e){this._renderedName=e}_getNameForOverflowMenu(){const e=this._getAttr("altName");return e!==void 0?e:this._renderedName}getName(){return this._getAttr("name")}getHelpText(){return this._getAttr("helpText")}getComponent(){return this._getAttr("component")}getConfig(){return this._attributes.config}getExtraData(){return this._extra}isFloating(){return this._getAttr("floating")}getIcon(){return this._getAttr("icon")}isEnableClose(){return this._getAttr("enableClose")}getCloseType(){return this._getAttr("closeType")}isEnableFloat(){return this._getAttr("enableFloat")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableRename(){return this._getAttr("enableRename")}getClassName(){return this._getAttr("className")}isEnableRenderOnDemand(){return this._getAttr("enableRenderOnDemand")}_setName(e){this._attributes.name=e,this._window&&this._window.document&&(this._window.document.title=e)}_setFloating(e){this._attributes.floating=e}_layout(e,t){e.equals(this._rect)||this._fireEvent("resize",{rect:e}),this._rect=e}_delete(){this._parent._remove(this),this._fireEvent("close",{})}toJson(){const e={};return ce._attributeDefinitions.toJson(e,this._attributes),e}_updateAttrs(e){ce._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return ce._attributeDefinitions}_setWindow(e){this._window=e}_setBorderWidth(e){this._attributes.borderWidth=e}_setBorderHeight(e){this._attributes.borderHeight=e}static getAttributeDefinitions(){return ce._attributeDefinitions}},_(ce,"n"),ce);Zi(Ye,"TabNode"),De(Ye,"TYPE","tab"),De(Ye,"_attributeDefinitions",Ye._createAttributeDefinitions());let z=Ye;var Pt=Object.defineProperty,Ki=_((i,e,t)=>e in i?Pt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"M$3"),qi=_((i,e)=>Pt(i,"name",{value:e,configurable:!0}),"N"),Xe=_((i,e,t)=>(Ki(i,typeof e!="symbol"?e+"":e,t),t),"S$4");const We=(W=class extends He{constructor(e,t){super(e),Xe(this,"_drawChildren"),Xe(this,"_minHeight"),Xe(this,"_minWidth"),this._dirty=!0,this._drawChildren=[],this._minHeight=0,this._minWidth=0,W._attributeDefinitions.fromJson(t,this._attributes),e._addNode(this)}static _fromJson(e,t){const n=new W(t,e);if(e.children!=null)for(const o of e.children)if(o.type===I.TYPE){const s=I._fromJson(o,t);n._addChild(s)}else{const s=W._fromJson(o,t);n._addChild(s)}return n}static _createAttributeDefinitions(){const e=new Se;return e.add("type",W.TYPE,!0).setType(p.STRING).setFixed(),e.add("id",void 0).setType(p.STRING),e.add("weight",100).setType(p.NUMBER),e.add("width",void 0).setType(p.NUMBER),e.add("height",void 0).setType(p.NUMBER),e}getWeight(){return this._attributes.weight}getWidth(){return this._getAttr("width")}getHeight(){return this._getAttr("height")}_setWeight(e){this._attributes.weight=e}_layout(e,t){super._layout(e,t);const n=this._rect._getSize(this.getOrientation());let o=0,s=0,a=0,r=0;const l=this._getDrawChildren();for(const u of l){const T=u._getPrefSize(this.getOrientation());u._isFixed()?T!==void 0&&(s+=T):T===void 0?o+=u.getWeight():(a+=T,r+=u.getWeight())}let h=!1,c=n-s-a;c<0&&(c=n-s,h=!0,o+=r);let d=0,m=0;for(const u of l){const T=u._getPrefSize(this.getOrientation());if(u._isFixed())T!==void 0&&u._setTempSize(T);else if(T==null||h){if(o===0)u._setTempSize(0);else{const C=u.getMinSize(this.getOrientation()),x=Math.floor(c*(u.getWeight()/o));u._setTempSize(Math.max(C,x))}m+=u._getTempSize()}else u._setTempSize(T);d+=u._getTempSize()}if(m>0){for(;d<n;)for(const u of l)if(!(u instanceof Oe)){const T=u._getPrefSize(this.getOrientation());!u._isFixed()&&(T===void 0||h)&&d<n&&(u._setTempSize(u._getTempSize()+1),d++)}for(;d>n;){let u=!1;for(const T of l)if(!(T instanceof Oe)){const C=T.getMinSize(this.getOrientation());T._getTempSize()>C&&d>n&&(T._setTempSize(T._getTempSize()-1),d--,u=!0)}if(!u)break}for(;d>n;){let u=!1;for(const T of l)T instanceof Oe||T._getTempSize()>0&&d>n&&(T._setTempSize(T._getTempSize()-1),d--,u=!0);if(!u)break}}let E=0;for(const u of l)this.getOrientation()===y.HORZ?u._layout(new D(this._rect.x+E,this._rect.y,u._getTempSize(),this._rect.height),t):u._layout(new D(this._rect.x,this._rect.y+E,this._rect.width,u._getTempSize()),t),E+=u._getTempSize();return!0}_getSplitterBounds(e,t=!1){const n=[0,0],o=this._getDrawChildren(),s=o.indexOf(e),a=o[s-1],r=o[s+1];if(this.getOrientation()===y.HORZ){const l=t?a.getMinWidth():0,h=t?r.getMinWidth():0;n[0]=a.getRect().x+l,n[1]=r.getRect().getRight()-e.getWidth()-h}else{const l=t?a.getMinHeight():0,h=t?r.getMinHeight():0;n[0]=a.getRect().y+l,n[1]=r.getRect().getBottom()-e.getHeight()-h}return n}_calculateSplit(e,t){let n;const o=this._getDrawChildren(),s=o.indexOf(e),a=this._getSplitterBounds(e),r=o[s-1].getWeight()+o[s+1].getWeight(),l=Math.max(0,t-a[0]),h=Math.max(0,a[1]-t);if(l+h>0){const c=l*r/(l+h),d=h*r/(l+h);n={node1Id:o[s-1].getId(),weight1:c,pixelWidth1:l,node2Id:o[s+1].getId(),weight2:d,pixelWidth2:h}}return n}_getDrawChildren(){if(this._dirty){this._drawChildren=[];for(let e=0;e<this._children.length;e++){const t=this._children[e];if(e!==0){const n=new Oe(this._model);n._setParent(this),this._drawChildren.push(n)}this._drawChildren.push(t)}this._dirty=!1}return this._drawChildren}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getMinWidth(){return this._minWidth}getMinHeight(){return this._minHeight}calcMinSize(){this._minHeight=0,this._minWidth=0;let e=!0;for(const t of this._children){const n=t;n instanceof W&&n.calcMinSize(),this.getOrientation()===y.VERT?(this._minHeight+=n.getMinHeight(),e||(this._minHeight+=this._model.getSplitterSize()),this._minWidth=Math.max(this._minWidth,n.getMinWidth())):(this._minWidth+=n.getMinWidth(),e||(this._minWidth+=this._model.getSplitterSize()),this._minHeight=Math.max(this._minHeight,n.getMinHeight())),e=!1}}_tidy(){let e=0;for(;e<this._children.length;){const t=this._children[e];if(t instanceof W){t._tidy();const n=t.getChildren();if(n.length===0)this._removeChild(t);else if(n.length===1){const o=n[0];if(this._removeChild(t),o instanceof W){let s=0;const a=o.getChildren();for(const r of a)s+=r.getWeight();for(let r=0;r<a.length;r++){const l=a[r];l._setWeight(t.getWeight()*l.getWeight()/s),this._addChild(l,e+r)}}else o._setWeight(t.getWeight()),this._addChild(o,e)}else e++}else t instanceof I&&t.getChildren().length===0&&t.isEnableDeleteWhenEmpty()?(this._removeChild(t),t===this._model.getMaximizedTabset()&&this._model._setMaximizedTabset(void 0)):e++}if(this===this._model.getRoot()&&this._children.length===0){const t=this._model._getOnCreateTabSet();let n=t?t():{};n={...n,selected:-1};const o=new I(this._model,n);this._model._setActiveTabset(o),this._addChild(o)}}canDrop(e,t,n){const o=n-this._rect.y,s=t-this._rect.x,a=this._rect.width,r=this._rect.height,l=10,h=50;let c;if(this._model.isEnableEdgeDock()&&this._parent===void 0){if(t<this._rect.x+l&&o>r/2-h&&o<r/2+h){const d=w.LEFT,m=d.getDockRect(this._rect);m.width=m.width/2,c=new q(this,m,d,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(t>this._rect.getRight()-l&&o>r/2-h&&o<r/2+h){const d=w.RIGHT,m=d.getDockRect(this._rect);m.width=m.width/2,m.x+=m.width,c=new q(this,m,d,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n<this._rect.y+l&&s>a/2-h&&s<a/2+h){const d=w.TOP,m=d.getDockRect(this._rect);m.height=m.height/2,c=new q(this,m,d,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}else if(n>this._rect.getBottom()-l&&s>a/2-h&&s<a/2+h){const d=w.BOTTOM,m=d.getDockRect(this._rect);m.height=m.height/2,m.y+=m.height,c=new q(this,m,d,-1,g.FLEXLAYOUT__OUTLINE_RECT_EDGE)}if(c!==void 0&&!e._canDockInto(e,c))return}return c}drop(e,t,n){const o=t,s=e.getParent();s&&s._removeChild(e),s!==void 0&&s.getType()===I.TYPE&&s._setSelected(0),s!==void 0&&s.getType()===Q.TYPE&&s._setSelected(-1);let a;if(e instanceof I)a=e;else{const h=this._model._getOnCreateTabSet();a=new I(this._model,h?h(e):{}),a._addChild(e)}let r=this._children.reduce((h,c)=>h+c.getWeight(),0);r===0&&(r=100),a._setWeight(r/3);const l=!this._model.isRootOrientationVertical();if(l&&o===w.LEFT||!l&&o===w.TOP)this._addChild(a,0);else if(l&&o===w.RIGHT||!l&&o===w.BOTTOM)this._addChild(a);else if(l&&o===w.TOP||!l&&o===w.LEFT){const h=new W(this._model,{}),c=new W(this._model,{});c._setWeight(75),a._setWeight(25);for(const d of this._children)c._addChild(d);this._removeAll(),h._addChild(a),h._addChild(c),this._addChild(h)}else if(l&&o===w.BOTTOM||!l&&o===w.RIGHT){const h=new W(this._model,{}),c=new W(this._model,{});c._setWeight(75),a._setWeight(25);for(const d of this._children)c._addChild(d);this._removeAll(),h._addChild(c),h._addChild(a),this._addChild(h)}this._model._setActiveTabset(a),this._model._tidy()}toJson(){const e={};W._attributeDefinitions.toJson(e,this._attributes),e.children=[];for(const t of this._children)e.children.push(t.toJson());return e}isEnableDrop(){return!0}_getPrefSize(e){let t=this.getWidth();return e===y.VERT&&(t=this.getHeight()),t}_getAttributeDefinitions(){return W._attributeDefinitions}_updateAttrs(e){W._attributeDefinitions.update(e,this._attributes)}static getAttributeDefinitions(){return W._attributeDefinitions}},_(W,"g"),W);qi(We,"RowNode"),Xe(We,"TYPE","row"),Xe(We,"_attributeDefinitions",We._createAttributeDefinitions());let Le=We;var Ht=Object.defineProperty,Qi=_((i,e,t)=>e in i?Ht(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"C"),en=_((i,e)=>Ht(i,"name",{value:e,configurable:!0}),"E$2"),Be=_((i,e,t)=>(Qi(i,typeof e!="symbol"?e+"":e,t),t),"_$2");const ke=(de=class extends He{constructor(e,t){super(e),Be(this,"_contentRect"),Be(this,"_tabHeaderRect"),Be(this,"_calculatedTabBarHeight"),Be(this,"_calculatedHeaderBarHeight"),de._attributeDefinitions.fromJson(t,this._attributes),e._addNode(this),this._calculatedTabBarHeight=0,this._calculatedHeaderBarHeight=0}static _fromJson(e,t){const n=new de(t,e);if(e.children!=null)for(const o of e.children){const s=z._fromJson(o,t);n._addChild(s)}return n._children.length===0&&n._setSelected(-1),e.maximized&&e.maximized===!0&&t._setMaximizedTabset(n),e.active&&e.active===!0&&t._setActiveTabset(n),n}static _createAttributeDefinitions(){const e=new Se;return e.add("type",de.TYPE,!0).setType(p.STRING).setFixed(),e.add("id",void 0).setType(p.STRING),e.add("weight",100).setType(p.NUMBER),e.add("width",void 0).setType(p.NUMBER),e.add("height",void 0).setType(p.NUMBER),e.add("selected",0).setType(p.NUMBER),e.add("name",void 0).setType(p.STRING),e.add("config",void 0).setType("any"),e.addInherited("enableDeleteWhenEmpty","tabSetEnableDeleteWhenEmpty"),e.addInherited("enableDrop","tabSetEnableDrop"),e.addInherited("enableDrag","tabSetEnableDrag"),e.addInherited("enableDivide","tabSetEnableDivide"),e.addInherited("enableMaximize","tabSetEnableMaximize"),e.addInherited("enableClose","tabSetEnableClose"),e.addInherited("classNameTabStrip","tabSetClassNameTabStrip"),e.addInherited("classNameHeader","tabSetClassNameHeader"),e.addInherited("enableTabStrip","tabSetEnableTabStrip"),e.addInherited("borderInsets","tabSetBorderInsets"),e.addInherited("marginInsets","tabSetMarginInsets"),e.addInherited("minWidth","tabSetMinWidth"),e.addInherited("minHeight","tabSetMinHeight"),e.addInherited("headerHeight","tabSetHeaderHeight"),e.addInherited("tabStripHeight","tabSetTabStripHeight"),e.addInherited("tabLocation","tabSetTabLocation"),e.addInherited("autoSelectTab","tabSetAutoSelectTab").setType(p.BOOLEAN),e}getName(){return this._getAttr("name")}getSelected(){const e=this._attributes.selected;return e!==void 0?e:-1}getSelectedNode(){const e=this.getSelected();if(e!==-1)return this._children[e]}getWeight(){return this._getAttr("weight")}getWidth(){return this._getAttr("width")}getMinWidth(){return this._getAttr("minWidth")}getHeight(){return this._getAttr("height")}getMinHeight(){return this._getAttr("minHeight")}getMinSize(e){return e===y.HORZ?this.getMinWidth():this.getMinHeight()}getConfig(){return this._attributes.config}isMaximized(){return this._model.getMaximizedTabset()===this}isActive(){return this._model.getActiveTabset()===this}isEnableDeleteWhenEmpty(){return this._getAttr("enableDeleteWhenEmpty")}isEnableDrop(){return this._getAttr("enableDrop")}isEnableDrag(){return this._getAttr("enableDrag")}isEnableDivide(){return this._getAttr("enableDivide")}isEnableMaximize(){return this._getAttr("enableMaximize")}isEnableClose(){return this._getAttr("enableClose")}canMaximize(){return this.isEnableMaximize()?this.getModel().getMaximizedTabset()===this?!0:!(this.getParent()===this.getModel().getRoot()&&this.getModel().getRoot().getChildren().length===1):!1}isEnableTabStrip(){return this._getAttr("enableTabStrip")}isAutoSelectTab(){return this._getAttr("autoSelectTab")}getClassNameTabStrip(){return this._getAttr("classNameTabStrip")}getClassNameHeader(){return this._getAttr("classNameHeader")}calculateHeaderBarHeight(e){const t=this._getAttr("headerHeight");t!==0?this._calculatedHeaderBarHeight=t:this._calculatedHeaderBarHeight=e.headerBarSize}calculateTabBarHeight(e){const t=this._getAttr("tabStripHeight");t!==0?this._calculatedTabBarHeight=t:this._calculatedTabBarHeight=e.tabBarSize}getHeaderHeight(){return this._calculatedHeaderBarHeight}getTabStripHeight(){return this._calculatedTabBarHeight}getTabLocation(){return this._getAttr("tabLocation")}_setWeight(e){this._attributes.weight=e}_setSelected(e){this._attributes.selected=e}canDrop(e,t,n){let o;if(e===this){const s=w.CENTER,a=this._tabHeaderRect;o=new q(this,a,s,-1,g.FLEXLAYOUT__OUTLINE_RECT)}else if(this._contentRect.contains(t,n)){let s=w.CENTER;this._model.getMaximizedTabset()===void 0&&(s=w.getLocation(this._contentRect,t,n));const a=s.getDockRect(this._rect);o=new q(this,a,s,-1,g.FLEXLAYOUT__OUTLINE_RECT)}else if(this._tabHeaderRect!=null&&this._tabHeaderRect.contains(t,n)){let s,a,r;if(this._children.length===0)s=this._tabHeaderRect.clone(),a=s.y+3,r=s.height-4,s.width=2;else{let l=this._children[0];s=l.getTabRect(),a=s.y,r=s.height;let h=this._tabHeaderRect.x,c=0;for(let d=0;d<this._children.length;d++){if(l=this._children[d],s=l.getTabRect(),c=s.x+s.width/2,t>=h&&t<c){const m=w.CENTER,E=new D(s.x-2,a,3,r);o=new q(this,E,m,d,g.FLEXLAYOUT__OUTLINE_RECT);break}h=c}}if(o==null){const l=w.CENTER,h=new D(s.getRight()-2,a,3,r);o=new q(this,h,l,this._children.length,g.FLEXLAYOUT__OUTLINE_RECT)}}if(e._canDockInto(e,o))return o}_layout(e,t){this.calculateHeaderBarHeight(t),this.calculateTabBarHeight(t),this.isMaximized()&&(e=this._model.getRoot().getRect()),e=e.removeInsets(this._getAttr("marginInsets")),this._rect=e,e=e.removeInsets(this._getAttr("borderInsets"));const n=this.getName()!==void 0;let o=0,s=0;n&&(o+=this._calculatedHeaderBarHeight,s+=this._calculatedHeaderBarHeight),this.isEnableTabStrip()&&(this.getTabLocation()==="top"?this._tabHeaderRect=new D(e.x,e.y+o,e.width,this._calculatedTabBarHeight):this._tabHeaderRect=new D(e.x,e.y+e.height-this._calculatedTabBarHeight,e.width,this._calculatedTabBarHeight),s+=this._calculatedTabBarHeight,this.getTabLocation()==="top"&&(o+=this._calculatedTabBarHeight)),this._contentRect=new D(e.x,e.y+o,e.width,e.height-s);for(let a=0;a<this._children.length;a++){const r=this._children[a];r._layout(this._contentRect,t),r._setVisible(a===this.getSelected())}}_delete(){this._parent._removeChild(this)}_remove(e){const t=this._removeChild(e);this._model._tidy(),$e(this,t)}drop(e,t,n,o){const s=t;if(this===e)return;let a=e.getParent(),r=0;if(a!==void 0&&(r=a._removeChild(e),a instanceof Q&&a.getSelected()===r?a._setSelected(-1):$e(a,r)),e.getType()===z.TYPE&&a===this&&r<n&&n>0&&n--,s===w.CENTER){let l=n;if(l===-1&&(l=this._children.length),e.getType()===z.TYPE)this._addChild(e,l),(o||o!==!1&&this.isAutoSelectTab())&&this._setSelected(l);else{for(let h=0;h<e.getChildren().length;h++){const c=e.getChildren()[h];this._addChild(c,l),l++}this.getSelected()===-1&&this._children.length>0&&this._setSelected(0)}this._model._setActiveTabset(this)}else{let l;if(e instanceof z){const d=this._model._getOnCreateTabSet();l=new de(this._model,d?d(e):{}),l._addChild(e),a=l}else l=e;const h=this._parent,c=h.getChildren().indexOf(this);if(h.getOrientation()===s._orientation)l._setWeight(this.getWeight()/2),this._setWeight(this.getWeight()/2),h._addChild(l,c+s._indexPlus);else{const d=new Le(this._model,{});d._setWeight(this.getWeight()),d._addChild(this),this._setWeight(50),l._setWeight(50),d._addChild(l,s._indexPlus),h._removeChild(this),h._addChild(d,c)}this._model._setActiveTabset(l)}this._model._tidy()}toJson(){const e={};return de._attributeDefinitions.toJson(e,this._attributes),e.children=this._children.map(t=>t.toJson()),this.isActive()&&(e.active=!0),this.isMaximized()&&(e.maximized=!0),e}_updateAttrs(e){de._attributeDefinitions.update(e,this._attributes)}_getAttributeDefinitions(){return de._attributeDefinitions}_getPrefSize(e){let t=this.getWidth();return e===y.VERT&&(t=this.getHeight()),t}static getAttributeDefinitions(){return de._attributeDefinitions}},_(de,"h"),de);en(ke,"TabSetNode"),Be(ke,"TYPE","tabset"),Be(ke,"_attributeDefinitions",ke._createAttributeDefinitions());let I=ke;var tn=Object.defineProperty,dt=_((i,e)=>tn(i,"name",{value:e,configurable:!0}),"i$3");function Yt(i){const e=i.getParent();if(e!==null)if(e instanceof I){let t=!1,n=0;const o=e.getChildren();for(let s=0;s<o.length;s++){const a=o[s];if(a===i)t=!0;else if(!a.isFloating()&&(n=s,t))break}e._setSelected(n)}else e instanceof Q&&e._setSelected(-1)}_(Yt,"adjustSelectedIndexAfterFloat"),dt(Yt,"adjustSelectedIndexAfterFloat");function Xt(i){const e=i.getParent();if(e!==null&&(e instanceof I||e instanceof Q)){const t=e.getChildren();for(let n=0;n<t.length;n++)if(t[n]===i){e._setSelected(n);return}}}_(Xt,"adjustSelectedIndexAfterDock"),dt(Xt,"adjustSelectedIndexAfterDock");function $e(i,e){if(i!==void 0&&(i.getType()===I.TYPE||i.getType()===Q.TYPE)){const t=i.getSelected();t!==-1&&(e===t&&i.getChildren().length>0?e>=i.getChildren().length&&i._setSelected(i.getChildren().length-1):e<t?i._setSelected(t-1):e>t||i._setSelected(-1))}}_($e,"adjustSelectedIndex"),dt($e,"adjustSelectedIndex");function Wt(){return("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,i=>(i^crypto.getRandomValues(new Uint8Array(1))[0]&15>>i/4).toString(16))}_(Wt,"randomUUID"),dt(Wt,"randomUUID");var kt=Object.defineProperty,nn=_((i,e,t)=>e in i?kt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"z$2"),on=_((i,e)=>kt(i,"name",{value:e,configurable:!0}),"I"),be=_((i,e,t)=>(nn(i,typeof e!="symbol"?e+"":e,t),t),"l$4");const Ge=(he=class extends He{constructor(e,t,n){super(n),be(this,"_contentRect"),be(this,"_tabHeaderRect"),be(this,"_location"),be(this,"_drawChildren"),be(this,"_adjustedSize",0),be(this,"_calculatedBorderBarSize",0),this._location=e,this._drawChildren=[],this._attributes.id=`border_${e.getName()}`,he._attributeDefinitions.fromJson(t,this._attributes),n._addNode(this)}static _fromJson(e,t){const n=w.getByName(e.location),o=new he(n,e,t);return e.children&&(o._children=e.children.map(s=>{const a=z._fromJson(s,t);return a._setParent(o),a})),o}static _createAttributeDefinitions(){const e=new Se;return e.add("type",he.TYPE,!0).setType(p.STRING).setFixed(),e.add("selected",-1).setType(p.NUMBER),e.add("show",!0).setType(p.BOOLEAN),e.add("config",void 0).setType("any"),e.addInherited("barSize","borderBarSize").setType(p.NUMBER),e.addInherited("enableDrop","borderEnableDrop").setType(p.BOOLEAN),e.addInherited("className","borderClassName").setType(p.STRING),e.addInherited("autoSelectTabWhenOpen","borderAutoSelectTabWhenOpen").setType(p.BOOLEAN),e.addInherited("autoSelectTabWhenClosed","borderAutoSelectTabWhenClosed").setType(p.BOOLEAN),e.addInherited("size","borderSize").setType(p.NUMBER),e.addInherited("minSize","borderMinSize").setType(p.NUMBER),e.addInherited("enableAutoHide","borderEnableAutoHide").setType(p.BOOLEAN),e}getLocation(){return this._location}getTabHeaderRect(){return this._tabHeaderRect}getRect(){return this._tabHeaderRect}getContentRect(){return this._contentRect}isEnableDrop(){return this._getAttr("enableDrop")}isAutoSelectTab(e){return e==null&&(e=this.getSelected()!==-1),e?this._getAttr("autoSelectTabWhenOpen"):this._getAttr("autoSelectTabWhenClosed")}getClassName(){return this._getAttr("className")}calcBorderBarSize(e){const t=this._getAttr("barSize");t!==0?this._calculatedBorderBarSize=t:this._calculatedBorderBarSize=e.borderBarSize}getBorderBarSize(){return this._calculatedBorderBarSize}getSize(){const e=this._getAttr("size"),t=this.getSelected();if(t===-1)return e;{const n=this._children[t],o=this._location._orientation===y.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight");return o===-1?e:o}}getMinSize(){return this._getAttr("minSize")}getSelected(){return this._attributes.selected}getSelectedNode(){if(this.getSelected()!==-1)return this._children[this.getSelected()]}getOrientation(){return this._location.getOrientation()}getConfig(){return this._attributes.config}isMaximized(){return!1}isShowing(){return this._attributes.show?!(this._model._getShowHiddenBorder()!==this._location&&this.isAutoHide()&&this._children.length===0):!1}isAutoHide(){return this._getAttr("enableAutoHide")}_setSelected(e){this._attributes.selected=e}_setSize(e){const t=this.getSelected();if(t===-1)this._attributes.size=e;else{const n=this._children[t];(this._location._orientation===y.HORZ?n._getAttr("borderWidth"):n._getAttr("borderHeight"))===-1?this._attributes.size=e:this._location._orientation===y.HORZ?n._setBorderWidth(e):n._setBorderHeight(e)}}_updateAttrs(e){he._attributeDefinitions.update(e,this._attributes)}_getDrawChildren(){return this._drawChildren}_setAdjustedSize(e){this._adjustedSize=e}_getAdjustedSize(){return this._adjustedSize}_layoutBorderOuter(e,t){this.calcBorderBarSize(t);const n=this._location.split(e,this.getBorderBarSize());return this._tabHeaderRect=n.start,n.end}_layoutBorderInner(e,t){this._drawChildren=[];const n=this._location,o=n.split(e,this._adjustedSize+this._model.getSplitterSize()),s=n.reflect().split(o.start,this._model.getSplitterSize());this._contentRect=s.end;for(let a=0;a<this._children.length;a++){const r=this._children[a];r._layout(this._contentRect,t),r._setVisible(a===this.getSelected()),this._drawChildren.push(r)}if(this.getSelected()===-1)return e;{const a=new Oe(this._model);return a._setParent(this),a._setRect(s.start),this._drawChildren.push(a),o.end}}_remove(e){const t=this._removeChild(e);this.getSelected()!==-1&&$e(this,t)}canDrop(e,t,n){if(e.getType()!==z.TYPE)return;let o;const s=w.CENTER;if(this._tabHeaderRect.contains(t,n)){if(this._location._orientation===y.VERT)if(this._children.length>0){let a=this._children[0],r=a.getTabRect();const l=r.y,h=r.height;let c=this._tabHeaderRect.x,d=0;for(let m=0;m<this._children.length;m++){if(a=this._children[m],r=a.getTabRect(),d=r.x+r.width/2,t>=c&&t<d){const E=new D(r.x-2,l,3,h);o=new q(this,E,s,m,g.FLEXLAYOUT__OUTLINE_RECT);break}c=d}if(o==null){const m=new D(r.getRight()-2,l,3,h);o=new q(this,m,s,this._children.length,g.FLEXLAYOUT__OUTLINE_RECT)}}else{const a=new D(this._tabHeaderRect.x+1,this._tabHeaderRect.y+2,3,18);o=new q(this,a,s,0,g.FLEXLAYOUT__OUTLINE_RECT)}else if(this._children.length>0){let a=this._children[0],r=a.getTabRect();const l=r.x,h=r.width;let c=this._tabHeaderRect.y,d=0;for(let m=0;m<this._children.length;m++){if(a=this._children[m],r=a.getTabRect(),d=r.y+r.height/2,n>=c&&n<d){const E=new D(l,r.y-2,h,3);o=new q(this,E,s,m,g.FLEXLAYOUT__OUTLINE_RECT);break}c=d}if(o==null){const m=new D(l,r.getBottom()-2,h,3);o=new q(this,m,s,this._children.length,g.FLEXLAYOUT__OUTLINE_RECT)}}else{const a=new D(this._tabHeaderRect.x+2,this._tabHeaderRect.y+1,18,3);o=new q(this,a,s,0,g.FLEXLAYOUT__OUTLINE_RECT)}if(!e._canDockInto(e,o))return}else if(this.getSelected()!==-1&&this._contentRect.contains(t,n)){const a=this._contentRect;if(o=new q(this,a,s,-1,g.FLEXLAYOUT__OUTLINE_RECT),!e._canDockInto(e,o))return}return o}drop(e,t,n,o){let s=0;const a=e.getParent();a!==void 0&&(s=a._removeChild(e),a!==this&&a instanceof he&&a.getSelected()===s?a._setSelected(-1):$e(a,s)),e.getType()===z.TYPE&&a===this&&s<n&&n>0&&n--;let r=n;r===-1&&(r=this._children.length),e.getType()===z.TYPE&&this._addChild(e,r),(o||o!==!1&&this.isAutoSelectTab())&&this._setSelected(r),this._model._tidy()}toJson(){const e={};return he._attributeDefinitions.toJson(e,this._attributes),e.location=this._location.getName(),e.children=this._children.map(t=>t.toJson()),e}_getSplitterBounds(e,t=!1){const n=[0,0],o=t?this.getMinSize():0,s=this._model._getOuterInnerRects().outer,a=this._model._getOuterInnerRects().inner,r=this._model.getRoot();return this._location===w.TOP?(n[0]=s.y+o,n[1]=Math.max(n[0],a.getBottom()-e.getHeight()-r.getMinHeight())):this._location===w.LEFT?(n[0]=s.x+o,n[1]=Math.max(n[0],a.getRight()-e.getWidth()-r.getMinWidth())):this._location===w.BOTTOM?(n[1]=s.getBottom()-e.getHeight()-o,n[0]=Math.min(n[1],a.y+r.getMinHeight())):this._location===w.RIGHT&&(n[1]=s.getRight()-e.getWidth()-o,n[0]=Math.min(n[1],a.x+r.getMinWidth())),n}_calculateSplit(e,t){const n=this._getSplitterBounds(e);return this._location===w.BOTTOM||this._location===w.RIGHT?Math.max(0,n[1]-t):Math.max(0,t-n[0])}_getAttributeDefinitions(){return he._attributeDefinitions}static getAttributeDefinitions(){return he._attributeDefinitions}},_(he,"a"),he);on(Ge,"BorderNode"),be(Ge,"TYPE","border"),be(Ge,"_attributeDefinitions",Ge._createAttributeDefinitions());let Q=Ge;var K=(i=>(i.Close_Tab="Close",i.Close_Tabset="Close tabset",i.Move_Tab="Move: ",i.Move_Tabset="Move tabset",i.Maximize="Maximize tabset",i.Restore="Restore tabset",i.Float_Tab="Show selected tab in floating window",i.Overflow_Menu_Tooltip="Hidden tabs",i.Floating_Window_Message="This panel is shown in a floating window",i.Floating_Window_Show_Window="Show window",i.Floating_Window_Dock_Window="Dock window",i.Error_rendering_component="Error rendering component",i))(K||{}),Ve=(i=>(i[i.Visible=1]="Visible",i[i.Always=2]="Always",i[i.Selected=3]="Selected",i))(Ve||{}),sn=Object.defineProperty,ht=_((i,e)=>sn(i,"name",{value:e,configurable:!0}),"i$2");function ct(i,e,t,n){let o=t?t(e):void 0,s=e.getName(),a=e.getName();function r(h){return h.titleContent!==void 0}if(_(r,"u"),ht(r,"isTitleObject"),n!==void 0){const h=n(e);h!==void 0&&(typeof h=="string"?(s=h,a=h):r(h)?(s=h.titleContent,a=h.name):s=h)}o===void 0&&e.getIcon()!==void 0&&(o=wp.element.createElement("img",{style:{width:"1em",height:"1em"},src:e.getIcon(),alt:"leadingContent"}));const l={leading:o,content:s,name:a,buttons:[]};return i.customizeTab(e,l),e._setRenderedName(l.name),l}_(ct,"getRenderStateEx"),ht(ct,"getRenderStateEx");function Ce(i,e){e?i.visibility="hidden":i.display="none"}_(Ce,"hideElement"),ht(Ce,"hideElement");function Ee(i){let e=!1;return i.nativeEvent instanceof MouseEvent&&(i.nativeEvent.button!==0||i.ctrlKey||i.altKey||i.metaKey||i.shiftKey)&&(e=!0),e}_(Ee,"isAuxMouseEvent"),ht(Ee,"isAuxMouseEvent");var an=Object.defineProperty,re=_((i,e)=>an(i,"name",{value:e,configurable:!0}),"n$4");const rn=re(i=>{const{layout:e,node:t,selected:n,border:o,iconFactory:s,titleFactory:a,icons:r,path:l}=i,h=wp.element.useRef(null),c=wp.element.useRef(null),d=re(O=>{!Ee(O)&&!e.getEditingTab()&&e.dragStart(O,void 0,t,t.isEnableDrag(),u,T)},"onMouseDown"),m=re(O=>{Ee(O)&&e.auxMouseClick(t,O)},"onAuxMouseClick"),E=re(O=>{e.showContextMenu(t,O)},"onContextMenu"),u=re(()=>{e.doAction(S.selectTab(t.getId()))},"onClick"),T=re(O=>{},"onDoubleClick"),C=re(O=>{O.target!==c.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",C),e.getCurrentDocument().body.removeEventListener("touchstart",C),e.setEditingTab(void 0))},"onEndEdit"),x=re(()=>{const O=t.getCloseType();return!!(n||O===Ve.Always||O===Ve.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),oe=re(O=>{x()?e.doAction(S.deleteTab(t.getId())):u()},"onClose"),b=re(O=>{O.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&c.current.select()});const B=re(()=>{const O=e.getDomRect(),j=h.current.getBoundingClientRect();t._setTabRect(new D(j.left-O.left,j.top-O.top,j.width,j.height))},"updateRect"),R=re(O=>{O.stopPropagation()},"onTextBoxMouseDown"),P=re(O=>{O.keyCode===27?e.setEditingTab(void 0):O.keyCode===13&&(e.setEditingTab(void 0),e.doAction(S.renameTab(t.getId(),O.target.value)))},"onTextBoxKeyPress"),M=e.getClassName;let J=M(g.FLEXLAYOUT__BORDER_BUTTON)+" "+M(g.FLEXLAYOUT__BORDER_BUTTON_+o);n?J+=" "+M(g.FLEXLAYOUT__BORDER_BUTTON__SELECTED):J+=" "+M(g.FLEXLAYOUT__BORDER_BUTTON__UNSELECTED),t.getClassName()!==void 0&&(J+=" "+t.getClassName());const $=ct(e,t,s,a);let G=$.content?wp.element.createElement("div",{className:M(g.FLEXLAYOUT__BORDER_BUTTON_CONTENT)},$.content):null;const A=$.leading?wp.element.createElement("div",{className:M(g.FLEXLAYOUT__BORDER_BUTTON_LEADING)},$.leading):null;if(e.getEditingTab()===t&&(G=wp.element.createElement("input",{ref:c,className:M(g.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":l+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:R,onTouchStart:R})),t.isEnableClose()){const O=e.i18nName(K.Close_Tab);$.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":l+"/button/close",title:O,className:M(g.FLEXLAYOUT__BORDER_BUTTON_TRAILING),onMouseDown:b,onClick:oe,onTouchStart:b},typeof r.close=="function"?r.close(t):r.close))}return wp.element.createElement("div",{ref:h,"data-layout-path":l,className:J,onMouseDown:d,onClick:m,onAuxClick:m,onContextMenu:E,onTouchStart:d,title:t.getHelpText()},A,G,$.buttons)},"BorderButton");var ln=Object.defineProperty,dn=_((i,e)=>ln(i,"name",{value:e,configurable:!0}),"l$3");const $t=dn(i=>{const{layout:e,node:t,iconFactory:n,titleFactory:o}=i,s=wp.element.useRef(null),a=e.getClassName;let r=a(g.FLEXLAYOUT__TAB_BUTTON_STAMP);const l=ct(e,t,n,o);let h=l.content?wp.element.createElement("div",{className:a(g.FLEXLAYOUT__TAB_BUTTON_CONTENT)},l.content):t._getNameForOverflowMenu();const c=l.leading?wp.element.createElement("div",{className:a(g.FLEXLAYOUT__TAB_BUTTON_LEADING)},l.leading):null;return wp.element.createElement("div",{ref:s,className:r,title:t.getHelpText()},c,h)},"TabButtonStamp");var hn=Object.defineProperty,Me=_((i,e)=>hn(i,"name",{value:e,configurable:!0}),"a$2");function pt(i,e,t,n,o,s){const a=n.getRootDiv(),r=n.getClassName,l=i.ownerDocument,h=i.getBoundingClientRect(),c=a.getBoundingClientRect(),d=l.createElement("div");d.className=r(g.FLEXLAYOUT__POPUP_MENU_CONTAINER),h.left<c.left+c.width/2?d.style.left=h.left-c.left+"px":d.style.right=c.right-h.right+"px",h.top<c.top+c.height/2?d.style.top=h.top-c.top+"px":d.style.bottom=c.bottom-h.bottom+"px",ae.instance.addGlass(()=>m()),ae.instance.setGlassCursorOverride("default"),a.appendChild(d);const m=Me(()=>{n.hidePortal(),ae.instance.hideGlass(),a.removeChild(d),d.removeEventListener("mousedown",E),l.removeEventListener("mousedown",u)},"onHide"),E=Me(T=>{T.stopPropagation()},"onElementMouseDown"),u=Me(T=>{m()},"onDocMouseDown");d.addEventListener("mousedown",E),l.addEventListener("mousedown",u),n.showPortal(wp.element.createElement(cn,{currentDocument:l,onSelect:t,onHide:m,items:e,classNameMapper:r,layout:n,iconFactory:o,titleFactory:s}),d)}_(pt,"showPopup"),Me(pt,"showPopup");const cn=Me(i=>{const{items:e,onHide:t,onSelect:n,classNameMapper:o,layout:s,iconFactory:a,titleFactory:r}=i,l=Me((c,d)=>{n(c),t(),d.stopPropagation()},"onItemClick"),h=e.map((c,d)=>wp.element.createElement("div",{key:c.index,className:o(g.FLEXLAYOUT__POPUP_MENU_ITEM),"data-layout-path":"/popup-menu/tb"+d,onClick:m=>l(c,m),title:c.node.getHelpText()},c.node.getModel().isLegacyOverflowMenu()?c.node._getNameForOverflowMenu():wp.element.createElement($t,{node:c.node,layout:s,iconFactory:a,titleFactory:r})));return wp.element.createElement("div",{className:o(g.FLEXLAYOUT__POPUP_MENU),"data-layout-path":"/popup-menu"},h)},"PopupMenu");var _n=Object.defineProperty,Re=_((i,e)=>_n(i,"name",{value:e,configurable:!0}),"o$3");const Gt=Re((i,e,t,n)=>{const o=wp.element.useRef(!0),s=wp.element.useRef(!1),a=wp.element.useRef(new D(0,0,0,0)),r=wp.element.useRef(null),[l,h]=wp.element.useState(0),c=wp.element.useRef(!1),[d,m]=wp.element.useState([]),E=wp.element.useRef(0);wp.element.useLayoutEffect(()=>{c.current=!1},[i.getSelectedNode(),i.getRect().width,i.getRect().height]),wp.element.useLayoutEffect(()=>{oe()}),wp.element.useEffect(()=>{const b=r.current;return b.addEventListener("wheel",u,{passive:!1}),()=>{b.removeEventListener("wheel",u)}},[]);const u=Re(b=>{b.preventDefault()},"onWheel"),T=Re(b=>e===y.HORZ?b.x:b.y,"getNear"),C=Re(b=>e===y.HORZ?b.getRight():b.getBottom(),"getFar"),x=Re(b=>e===y.HORZ?b.width:b.height,"getSize"),oe=Re(()=>{o.current===!0&&(s.current=!1);const b=i instanceof I?i.getRect():i.getTabHeaderRect();let B=i.getChildren()[i.getChildren().length-1];const R=n.current===null?0:x(n.current.getBoundingClientRect());if(o.current===!0||E.current===0&&d.length!==0||b.width!==a.current.width||b.height!==a.current.height){E.current=d.length,a.current=b;const P=i instanceof I?i.isEnableTabStrip()===!0:!0;let M=C(b)-R;if(t.current!==null&&(M-=x(t.current.getBoundingClientRect())),P&&i.getChildren().length>0){if(d.length===0&&l===0&&C(B.getTabRect())+2<M)return;let J=0;const $=i.getSelectedNode();if($&&!c.current){const v=$.getTabRect(),F=T(v)-2,N=C(v)+2;x(v)+2*2>=M-T(b)?J=T(b)-F:(N>M||F<T(b))&&(F<T(b)&&(J=T(b)-F),N+J>M&&(J=M-N))}const G=Math.max(0,M-(C(B.getTabRect())+2+J)),A=Math.min(0,l+J+G),O=A-l,j=[];for(let v=0;v<i.getChildren().length;v++){const F=i.getChildren()[v];(T(F.getTabRect())+O<T(b)||C(F.getTabRect())+O>M)&&j.push({node:F,index:v})}j.length>0&&(s.current=!0),o.current=!1,m(j),h(A)}}else o.current=!0},"updateVisibleTabs");return{selfRef:r,position:l,userControlledLeft:c,hiddenTabs:d,onMouseWheel:Re(b=>{let B=0;Math.abs(b.deltaX)>Math.abs(b.deltaY)?B=-b.deltaX:B=-b.deltaY,b.deltaMode===1&&(B*=40),h(l+B),c.current=!0,b.stopPropagation()},"onMouseWheel"),tabsTruncated:s.current}},"useTabOverflow");var un=Object.defineProperty,fe=_((i,e)=>un(i,"name",{value:e,configurable:!0}),"s$2");const gn=fe(i=>{const{border:e,layout:t,iconFactory:n,titleFactory:o,icons:s,path:a}=i,r=wp.element.useRef(null),l=wp.element.useRef(null),h=wp.element.useRef(null),{selfRef:c,position:d,userControlledLeft:m,hiddenTabs:E,onMouseWheel:u}=Gt(e,y.flip(e.getOrientation()),r,h),T=fe(N=>{Ee(N)&&t.auxMouseClick(e,N)},"onAuxMouseClick"),C=fe(N=>{t.showContextMenu(e,N)},"onContextMenu"),x=fe(N=>{N.stopPropagation()},"onInterceptMouseDown"),oe=fe(N=>{const Y=t.getShowOverflowMenu();if(Y!==void 0)Y(e,N,E,b);else{const me=l.current;pt(me,E,b,t,n,o)}N.stopPropagation()},"onOverflowClick"),b=fe(N=>{t.doAction(S.selectTab(N.node.getId())),m.current=!1},"onOverflowItemSelect"),B=fe(N=>{const Y=e.getChildren()[e.getSelected()];Y!==void 0&&t.doAction(S.floatTab(Y.getId())),N.stopPropagation()},"onFloatTab"),R=t.getClassName;let P=e.getTabHeaderRect().styleWithPosition({});const M=[],J=fe(N=>{let Y=e.getSelected()===N,me=e.getChildren()[N];M.push(wp.element.createElement(rn,{layout:t,border:e.getLocation().getName(),node:me,path:a+"/tb"+N,key:me.getId(),selected:Y,iconFactory:n,titleFactory:o,icons:s})),N<e.getChildren().length-1&&M.push(wp.element.createElement("div",{key:"divider"+N,className:R(g.FLEXLAYOUT__BORDER_TAB_DIVIDER)}))},"layoutTab");for(let N=0;N<e.getChildren().length;N++)J(N);let $=R(g.FLEXLAYOUT__BORDER)+" "+R(g.FLEXLAYOUT__BORDER_+e.getLocation().getName());e.getClassName()!==void 0&&($+=" "+e.getClassName());let G=[];const A={headerContent:void 0,buttons:G,stickyButtons:[],headerButtons:[]};t.customizeTabSet(e,A),G=A.buttons;let O;if(E.length>0){const N=t.i18nName(K.Overflow_Menu_Tooltip);let Y;typeof s.more=="function"?Y=s.more(e,E):Y=wp.element.createElement(wp.element.Fragment,null,s.more,wp.element.createElement("div",{className:R(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},E.length)),G.push(wp.element.createElement("button",{key:"overflowbutton",ref:l,className:R(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+R(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW)+" "+R(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_OVERFLOW_+e.getLocation().getName()),title:N,onClick:oe,onMouseDown:x,onTouchStart:x},Y))}const j=e.getSelected();if(j!==-1){const N=e.getChildren()[j];if(N!==void 0&&t.isSupportsPopout()&&N.isEnableFloat()&&!N.isFloating()){const Y=t.i18nName(K.Float_Tab);G.push(wp.element.createElement("button",{key:"float",title:Y,className:R(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON)+" "+R(g.FLEXLAYOUT__BORDER_TOOLBAR_BUTTON_FLOAT),onClick:B,onMouseDown:x,onTouchStart:x},typeof s.popout=="function"?s.popout(N):s.popout))}}O=wp.element.createElement("div",{key:"toolbar",ref:r,className:R(g.FLEXLAYOUT__BORDER_TOOLBAR)+" "+R(g.FLEXLAYOUT__BORDER_TOOLBAR_+e.getLocation().getName())},G),P=t.styleFont(P);let v={};const F=e.getBorderBarSize()-1;return e.getLocation()===w.LEFT?v={right:F,height:F,top:d}:e.getLocation()===w.RIGHT?v={left:F,height:F,top:d}:v={height:F,left:d},wp.element.createElement("div",{ref:c,dir:"ltr",style:P,className:$,"data-layout-path":a,onClick:T,onAuxClick:T,onContextMenu:C,onWheel:u},wp.element.createElement("div",{style:{height:F},className:R(g.FLEXLAYOUT__BORDER_INNER)+" "+R(g.FLEXLAYOUT__BORDER_INNER_+e.getLocation().getName())},wp.element.createElement("div",{style:v,className:R(g.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER)+" "+R(g.FLEXLAYOUT__BORDER_INNER_TAB_CONTAINER_+e.getLocation().getName())},M)),O)},"BorderTabSet");var mn=Object.defineProperty,ve=_((i,e)=>mn(i,"name",{value:e,configurable:!0}),"s$1");const Vt=ve(i=>{const{layout:e,node:t,path:n}=i,o=wp.element.useRef([]),s=wp.element.useRef(void 0),a=t.getParent(),r=ve(b=>{ae.instance.setGlassCursorOverride(t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"),ae.instance.startDrag(b,h,c,m,l,void 0,void 0,e.getCurrentDocument(),e.getRootDiv()),o.current=a._getSplitterBounds(t,!0);const B=e.getRootDiv();s.current=e.getCurrentDocument().createElement("div"),s.current.style.position="absolute",s.current.className=e.getClassName(g.FLEXLAYOUT__SPLITTER_DRAG),s.current.style.cursor=t.getOrientation()===y.HORZ?"ns-resize":"ew-resize";const R=t.getRect();t.getOrientation()===y.VERT&&R.width<2?R.width=2:t.getOrientation()===y.HORZ&&R.height<2&&(R.height=2),R.positionElement(s.current),B.appendChild(s.current)},"onMouseDown"),l=ve(b=>{e.getRootDiv().removeChild(s.current)},"onDragCancel"),h=ve(()=>!0,"onDragStart"),c=ve(b=>{const B=e.getDomRect(),R={x:b.clientX-B.left,y:b.clientY-B.top};s&&(t.getOrientation()===y.HORZ?s.current.style.top=E(R.y-4)+"px":s.current.style.left=E(R.x-4)+"px"),e.isRealtimeResize()&&d()},"onDragMove"),d=ve(()=>{let b=0;if(s&&(t.getOrientation()===y.HORZ?b=s.current.offsetTop:b=s.current.offsetLeft),a instanceof Q){const B=a._calculateSplit(t,b);e.doAction(S.adjustBorderSplit(t.getParent().getId(),B))}else{const B=a._calculateSplit(t,b);B!==void 0&&e.doAction(S.adjustSplit(B))}},"updateLayout"),m=ve(()=>{d(),e.getRootDiv().removeChild(s.current)},"onDragEnd"),E=ve(b=>{const B=o.current;let R=b;return b<B[0]&&(R=B[0]),b>B[1]&&(R=B[1]),R},"getBoundPosition"),u=e.getClassName;let T=t.getRect();const C=T.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"});let x=u(g.FLEXLAYOUT__SPLITTER)+" "+u(g.FLEXLAYOUT__SPLITTER_+t.getOrientation().getName());a instanceof Q?x+=" "+u(g.FLEXLAYOUT__SPLITTER_BORDER):t.getModel().getMaximizedTabset()!==void 0&&(C.display="none");const oe=t.getModel().getSplitterExtra();if(oe===0)return wp.element.createElement("div",{style:C,"data-layout-path":n,className:x,onTouchStart:r,onMouseDown:r});{let b=T.clone();b.x=0,b.y=0,t.getOrientation()===y.VERT?b.width+=oe:b.height+=oe;const B=b.styleWithPosition({cursor:t.getOrientation()===y.HORZ?"ns-resize":"ew-resize"}),R=u(g.FLEXLAYOUT__SPLITTER_EXTRA);return wp.element.createElement("div",{style:C,"data-layout-path":n,className:x},wp.element.createElement("div",{style:B,className:R,onTouchStart:r,onMouseDown:r}))}},"Splitter");var pn=Object.defineProperty,Tn=_((i,e)=>pn(i,"name",{value:e,configurable:!0}),"e");const jt=(it=class extends wp.element.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){console.debug(e),console.debug(t)}render(){return this.state.hasError?wp.element.createElement("div",{className:g.FLEXLAYOUT__ERROR_BOUNDARY_CONTAINER},wp.element.createElement("div",{className:g.FLEXLAYOUT__ERROR_BOUNDARY_CONTENT},this.props.message)):this.props.children}},_(it,"o"),it);Tn(jt,"ErrorBoundary");let Jt=jt;var bn=Object.defineProperty,Zt=_((i,e)=>bn(i,"name",{value:e,configurable:!0}),"d$2");const Kt=Zt(i=>{const{layout:e,selected:t,node:n,factory:o,path:s}=i,[a,r]=wp.element.useState(!i.node.isEnableRenderOnDemand()||i.selected);wp.element.useLayoutEffect(()=>{!a&&t&&r(!0)});const l=Zt(()=>{const T=n.getParent();T.getType()===I.TYPE&&(T.isActive()||e.doAction(S.setActiveTabset(T.getId())))},"onMouseDown"),h=e.getClassName,c=n.getModel().isUseVisibility(),d=n.getParent(),m=n._styleWithPosition();t||Ce(m,c),d instanceof I&&n.getModel().getMaximizedTabset()!==void 0&&!d.isMaximized()&&Ce(m,c);let E;a&&(E=o(n));let u=h(g.FLEXLAYOUT__TAB);return d instanceof Q&&(u+=" "+h(g.FLEXLAYOUT__TAB_BORDER),u+=" "+h(g.FLEXLAYOUT__TAB_BORDER_+d.getLocation().getName())),wp.element.createElement("div",{className:u,"data-layout-path":s,onMouseDown:l,onTouchStart:l,style:m},wp.element.createElement(Jt,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,E)))},"Tab");var En=Object.defineProperty,ie=_((i,e)=>En(i,"name",{value:e,configurable:!0}),"n$2");const fn=ie(i=>{const{layout:e,node:t,selected:n,iconFactory:o,titleFactory:s,icons:a,path:r}=i,l=wp.element.useRef(null),h=wp.element.useRef(null),c=ie(v=>{!Ee(v)&&!e.getEditingTab()&&e.dragStart(v,void 0,t,t.isEnableDrag(),E,u)},"onMouseDown"),d=ie(v=>{Ee(v)&&e.auxMouseClick(t,v)},"onAuxMouseClick"),m=ie(v=>{e.showContextMenu(t,v)},"onContextMenu"),E=ie(()=>{e.doAction(S.selectTab(t.getId()))},"onClick"),u=ie(v=>{t.isEnableRename()&&T()},"onDoubleClick"),T=ie(()=>{e.setEditingTab(t),e.getCurrentDocument().body.addEventListener("mousedown",C),e.getCurrentDocument().body.addEventListener("touchstart",C)},"onRename"),C=ie(v=>{v.target!==h.current&&(e.getCurrentDocument().body.removeEventListener("mousedown",C),e.getCurrentDocument().body.removeEventListener("touchstart",C),e.setEditingTab(void 0))},"onEndEdit"),x=ie(()=>{const v=t.getCloseType();return!!(n||v===Ve.Always||v===Ve.Visible&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches)},"isClosable"),oe=ie(v=>{x()?e.doAction(S.deleteTab(t.getId())):E()},"onClose"),b=ie(v=>{v.stopPropagation()},"onCloseMouseDown");wp.element.useLayoutEffect(()=>{B(),e.getEditingTab()===t&&h.current.select()});const B=ie(()=>{const v=e.getDomRect(),F=l.current.getBoundingClientRect();t._setTabRect(new D(F.left-v.left,F.top-v.top,F.width,F.height))},"updateRect"),R=ie(v=>{v.stopPropagation()},"onTextBoxMouseDown"),P=ie(v=>{v.keyCode===27?e.setEditingTab(void 0):v.keyCode===13&&(e.setEditingTab(void 0),e.doAction(S.renameTab(t.getId(),v.target.value)))},"onTextBoxKeyPress"),M=e.getClassName,J=t.getParent();let $=g.FLEXLAYOUT__TAB_BUTTON,G=M($);G+=" "+M($+"_"+J.getTabLocation()),n?G+=" "+M($+"--selected"):G+=" "+M($+"--unselected"),t.getClassName()!==void 0&&(G+=" "+t.getClassName());const A=ct(e,t,o,s);let O=A.content?wp.element.createElement("div",{className:M(g.FLEXLAYOUT__TAB_BUTTON_CONTENT)},A.content):null;const j=A.leading?wp.element.createElement("div",{className:M(g.FLEXLAYOUT__TAB_BUTTON_LEADING)},A.leading):null;if(e.getEditingTab()===t&&(O=wp.element.createElement("input",{ref:h,className:M(g.FLEXLAYOUT__TAB_BUTTON_TEXTBOX),"data-layout-path":r+"/textbox",type:"text",autoFocus:!0,defaultValue:t.getName(),onKeyDown:P,onMouseDown:R,onTouchStart:R})),t.isEnableClose()){const v=e.i18nName(K.Close_Tab);A.buttons.push(wp.element.createElement("div",{key:"close","data-layout-path":r+"/button/close",title:v,className:M(g.FLEXLAYOUT__TAB_BUTTON_TRAILING),onMouseDown:b,onClick:oe,onTouchStart:b},typeof a.close=="function"?a.close(t):a.close))}return wp.element.createElement("div",{ref:l,"data-layout-path":r,className:G,onMouseDown:c,onClick:d,onAuxClick:d,onContextMenu:m,onTouchStart:c,title:t.getHelpText()},j,O,A.buttons)},"TabButton");var vn=Object.defineProperty,_e=_((i,e)=>vn(i,"name",{value:e,configurable:!0}),"T");const wn=_e(i=>{const{node:e,layout:t,iconFactory:n,titleFactory:o,icons:s,path:a}=i,r=wp.element.useRef(null),l=wp.element.useRef(null),h=wp.element.useRef(null),c=wp.element.useRef(null),{selfRef:d,position:m,userControlledLeft:E,hiddenTabs:u,onMouseWheel:T,tabsTruncated:C}=Gt(e,y.HORZ,r,c),x=_e(f=>{const X=t.getShowOverflowMenu();if(X!==void 0)X(e,f,u,oe);else{const ye=l.current;pt(ye,u,oe,t,n,o)}f.stopPropagation()},"onOverflowClick"),oe=_e(f=>{t.doAction(S.selectTab(f.node.getId())),E.current=!1},"onOverflowItemSelect"),b=_e(f=>{if(!Ee(f)){let X=e.getName();if(X===void 0?X="":X=": "+X,t.doAction(S.setActiveTabset(e.getId())),!t.getEditingTab()){const ye=t.i18nName(K.Move_Tabset,X);e.getModel().getMaximizedTabset()!==void 0?t.dragStart(f,ye,e,!1,go=>{},G):t.dragStart(f,ye,e,e.isEnableDrag(),go=>{},G)}}},"onMouseDown"),B=_e(f=>{Ee(f)&&t.auxMouseClick(e,f)},"onAuxMouseClick"),R=_e(f=>{t.showContextMenu(e,f)},"onContextMenu"),P=_e(f=>{f.stopPropagation()},"onInterceptMouseDown"),M=_e(f=>{e.canMaximize()&&t.maximize(e),f.stopPropagation()},"onMaximizeToggle"),J=_e(f=>{t.doAction(S.deleteTabset(e.getId())),f.stopPropagation()},"onClose"),$=_e(f=>{O!==void 0&&t.doAction(S.floatTab(O.getId())),f.stopPropagation()},"onFloatTab"),G=_e(f=>{e.canMaximize()&&t.maximize(e)},"onDoubleClick"),A=t.getClassName;h.current!==null&&h.current.scrollLeft!==0&&(h.current.scrollLeft=0);const O=e.getSelectedNode();let j=e._styleWithPosition();e.getModel().getMaximizedTabset()!==void 0&&!e.isMaximized()&&Ce(j,e.getModel().isUseVisibility());const v=[];if(e.isEnableTabStrip())for(let f=0;f<e.getChildren().length;f++){const X=e.getChildren()[f];let ye=e.getSelected()===f;v.push(wp.element.createElement(fn,{layout:t,node:X,path:a+"/tb"+f,key:X.getId(),selected:ye,iconFactory:n,titleFactory:o,icons:s})),f<e.getChildren().length-1&&v.push(wp.element.createElement("div",{key:"divider"+f,className:A(g.FLEXLAYOUT__TABSET_TAB_DIVIDER)}))}const F=e.getName()!==void 0;let N=[],Y=[],me=[];const ot={headerContent:e.getName(),stickyButtons:N,buttons:Y,headerButtons:me};t.customizeTabSet(e,ot);const _o=ot.headerContent;N=ot.stickyButtons,Y=ot.buttons,me=ot.headerButtons,N.length>0&&(C?Y=[...N,...Y]:v.push(wp.element.createElement("div",{ref:c,key:"sticky_buttons_container",onMouseDown:P,onTouchStart:P,onDragStart:f=>{f.preventDefault()},className:A(g.FLEXLAYOUT__TAB_TOOLBAR_STICKY_BUTTONS_CONTAINER)},N)));let yi;if(u.length>0){const f=t.i18nName(K.Overflow_Menu_Tooltip);let X;typeof s.more=="function"?X=s.more(e,u):X=wp.element.createElement(wp.element.Fragment,null,s.more,wp.element.createElement("div",{className:A(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW_COUNT)},u.length)),Y.push(wp.element.createElement("button",{key:"overflowbutton","data-layout-path":a+"/button/overflow",ref:l,className:A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+A(g.FLEXLAYOUT__TAB_BUTTON_OVERFLOW),title:f,onClick:x,onMouseDown:P,onTouchStart:P},X))}if(O!==void 0&&t.isSupportsPopout()&&O.isEnableFloat()&&!O.isFloating()){const f=t.i18nName(K.Float_Tab);Y.push(wp.element.createElement("button",{key:"float","data-layout-path":a+"/button/float",title:f,className:A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_FLOAT),onClick:$,onMouseDown:P,onTouchStart:P},typeof s.popout=="function"?s.popout(O):s.popout))}if(e.canMaximize()){const f=t.i18nName(K.Restore),X=t.i18nName(K.Maximize);(F?me:Y).push(wp.element.createElement("button",{key:"max","data-layout-path":a+"/button/max",title:e.isMaximized()?f:X,className:A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_+(e.isMaximized()?"max":"min")),onClick:M,onMouseDown:P,onTouchStart:P},e.isMaximized()?typeof s.restore=="function"?s.restore(e):s.restore:typeof s.maximize=="function"?s.maximize(e):s.maximize))}if(!e.isMaximized()&&e.isEnableClose()){const f=t.i18nName(K.Close_Tabset);(F?me:Y).push(wp.element.createElement("button",{key:"close","data-layout-path":a+"/button/close",title:f,className:A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON)+" "+A(g.FLEXLAYOUT__TAB_TOOLBAR_BUTTON_CLOSE),onClick:J,onMouseDown:P,onTouchStart:P},typeof s.closeTabset=="function"?s.closeTabset(e):s.closeTabset))}yi=wp.element.createElement("div",{key:"toolbar",ref:r,className:A(g.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:f=>{f.preventDefault()}},Y);let bt,Et,st=A(g.FLEXLAYOUT__TABSET_TABBAR_OUTER);if(e.getClassNameTabStrip()!==void 0&&(st+=" "+e.getClassNameTabStrip()),st+=" "+g.FLEXLAYOUT__TABSET_TABBAR_OUTER_+e.getTabLocation(),e.isActive()&&!F&&(st+=" "+A(g.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&!F&&(st+=" "+A(g.FLEXLAYOUT__TABSET_MAXIMIZED)),F){const f=wp.element.createElement("div",{key:"toolbar",ref:r,className:A(g.FLEXLAYOUT__TAB_TOOLBAR),onMouseDown:P,onTouchStart:P,onDragStart:ye=>{ye.preventDefault()}},me);let X=A(g.FLEXLAYOUT__TABSET_HEADER);e.isActive()&&(X+=" "+A(g.FLEXLAYOUT__TABSET_SELECTED)),e.isMaximized()&&(X+=" "+A(g.FLEXLAYOUT__TABSET_MAXIMIZED)),e.getClassNameHeader()!==void 0&&(X+=" "+e.getClassNameHeader()),bt=wp.element.createElement("div",{className:X,style:{height:e.getHeaderHeight()+"px"},"data-layout-path":a+"/header",onMouseDown:b,onContextMenu:R,onClick:B,onAuxClick:B,onTouchStart:b},wp.element.createElement("div",{className:A(g.FLEXLAYOUT__TABSET_HEADER_CONTENT)},_o),f)}const uo={height:e.getTabStripHeight()+"px"};Et=wp.element.createElement("div",{className:st,style:uo,"data-layout-path":a+"/tabstrip",onMouseDown:b,onContextMenu:R,onClick:B,onAuxClick:B,onTouchStart:b},wp.element.createElement("div",{ref:h,className:A(g.FLEXLAYOUT__TABSET_TABBAR_INNER)+" "+A(g.FLEXLAYOUT__TABSET_TABBAR_INNER_+e.getTabLocation())},wp.element.createElement("div",{style:{left:m},className:A(g.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER)+" "+A(g.FLEXLAYOUT__TABSET_TABBAR_INNER_TAB_CONTAINER_+e.getTabLocation())},v)),yi),j=t.styleFont(j);var Oi=void 0;if(e.getChildren().length===0){const f=t.getTabSetPlaceHolderCallback();f&&(Oi=f(e))}const Li=wp.element.createElement("div",{className:A(g.FLEXLAYOUT__TABSET_CONTENT)},Oi);var ft;return e.getTabLocation()==="top"?ft=wp.element.createElement(wp.element.Fragment,null,bt,Et,Li):ft=wp.element.createElement(wp.element.Fragment,null,bt,Li,Et),wp.element.createElement("div",{ref:d,dir:"ltr","data-layout-path":a,style:j,className:A(g.FLEXLAYOUT__TABSET),onWheel:T},ft)},"TabSet");var yn=Object.defineProperty,qt=_((i,e)=>yn(i,"name",{value:e,configurable:!0}),"h$1");const Qt=qt(i=>{const{title:e,id:t,url:n,rect:o,onCloseWindow:s,onSetWindow:a,children:r}=i,l=wp.element.useRef(null),h=wp.element.useRef(null),[c,d]=wp.element.useState(void 0);return wp.element.useLayoutEffect(()=>{h.current&&clearTimeout(h.current);const m=o,E=Array.from(window.document.styleSheets).reduce((u,T)=>{let C;try{C=T.cssRules}catch{}try{return[...u,{href:T.href,type:T.type,rules:C?Array.from(C).map(x=>x.cssText):null}]}catch{return u}},[]);return l.current=window.open(n,t,`left=${m.x},top=${m.y},width=${m.width},height=${m.height}`),l.current!==null?(a(t,l.current),window.addEventListener("beforeunload",()=>{l.current&&(l.current.close(),l.current=null)}),l.current.addEventListener("load",()=>{const u=l.current.document;u.title=e;const T=u.createElement("div");T.className=g.FLEXLAYOUT__FLOATING_WINDOW_CONTENT,u.body.appendChild(T),ei(u,E).then(()=>{d(T)}),l.current.addEventListener("beforeunload",()=>{s(t)})})):(console.warn(`Unable to open window ${n}`),s(t)),()=>{h.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},0)}},[]),c!==void 0?wp.element.createPortal(r,c):null},"FloatingWindow");function ei(i,e){const t=i.head,n=[];for(const o of e)if(o.href){const s=i.createElement("link");s.type=o.type,s.rel="stylesheet",s.href=o.href,t.appendChild(s),n.push(new Promise((a,r)=>{s.onload=()=>a(!0)}))}else if(o.rules){const s=i.createElement("style");for(const a of o.rules)s.appendChild(i.createTextNode(a));t.appendChild(s)}return Promise.all(n)}_(ei,"L$1"),qt(ei,"copyStyles");var On=Object.defineProperty,Ln=_((i,e)=>On(i,"name",{value:e,configurable:!0}),"a$1");const ti=Ln(i=>{const{layout:e,node:t,factory:n}=i,o=e.getClassName,s=n(t);return wp.element.createElement("div",{className:o(g.FLEXLAYOUT__FLOATING_WINDOW_TAB)},wp.element.createElement(Jt,{message:i.layout.i18nName(K.Error_rendering_component)},wp.element.createElement(wp.element.Fragment,null,s)))},"FloatingWindowTab");var Rn=Object.defineProperty,xe=_((i,e)=>Rn(i,"name",{value:e,configurable:!0}),"n$1");const ii=xe(i=>{const{layout:e,selected:t,node:n,path:o}=i,s=xe(()=>{n.getWindow()&&n.getWindow().focus()},"showPopout"),a=xe(()=>{e.doAction(S.unFloatTab(n.getId()))},"dockPopout"),r=xe(()=>{const x=n.getParent();x.getType()===I.TYPE&&(x.isActive()||e.doAction(S.setActiveTabset(x.getId())))},"onMouseDown"),l=xe(x=>{x.preventDefault(),s()},"onClickFocus"),h=xe(x=>{x.preventDefault(),a()},"onClickDock"),c=e.getClassName,d=n.getParent(),m=n._styleWithPosition();t||Ce(m,n.getModel().isUseVisibility()),d instanceof I&&n.getModel().getMaximizedTabset()!==void 0&&!d.isMaximized()&&Ce(m,n.getModel().isUseVisibility());const E=e.i18nName(K.Floating_Window_Message),u=e.i18nName(K.Floating_Window_Show_Window),T=e.i18nName(K.Floating_Window_Dock_Window),C=e.getOnRenderFloatingTabPlaceholder();return C?wp.element.createElement("div",{className:c(g.FLEXLAYOUT__TAB_FLOATING),onMouseDown:r,onTouchStart:r,style:m},C(a,s)):wp.element.createElement("div",{className:c(g.FLEXLAYOUT__TAB_FLOATING),"data-layout-path":o,onMouseDown:r,onTouchStart:r,style:m},wp.element.createElement("div",{className:c(g.FLEXLAYOUT__TAB_FLOATING_INNER)},wp.element.createElement("div",null,E),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:l},u)),wp.element.createElement("div",null,wp.element.createElement("a",{href:"#",onClick:h},T))))},"TabFloating");var An=Object.defineProperty,je=_((i,e)=>An(i,"name",{value:e,configurable:!0}),"o$1");const Je={width:"1em",height:"1em",display:"flex",alignItems:"center"},ni=je(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Je,viewBox:"0 0 24 24"},wp.element.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),wp.element.createElement("path",{stroke:"var(--color-icon)",fill:"var(--color-icon)",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),"CloseIcon"),Nn=je(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Je,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})),"MaximizeIcon"),Sn=je(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Je,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M7 10l5 5 5-5z"})),"OverflowIcon"),Dn=je(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Je,viewBox:"0 0 20 20",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M11 3a1 1 0 100 2h2.586l-6.293 6.293a1 1 0 101.414 1.414L15 6.414V9a1 1 0 102 0V4a1 1 0 00-1-1h-5z"}),wp.element.createElement("path",{d:"M5 5a2 2 0 00-2 2v8a2 2 0 002 2h8a2 2 0 002-2v-3a1 1 0 10-2 0v3H5V7h3a1 1 0 000-2H5z"})),"PopoutIcon"),Bn=je(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",style:Je,viewBox:"0 0 24 24",fill:"var(--color-icon)"},wp.element.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),wp.element.createElement("path",{stroke:"var(--color-icon)",d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})),"RestoreIcon");var oi=Object.defineProperty,Cn=_((i,e,t)=>e in i?oi(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"k$1"),V=_((i,e)=>oi(i,"name",{value:e,configurable:!0}),"u"),L=_((i,e,t)=>(Cn(i,typeof e!="symbol"?e+"":e,t),t),"n");const Mn={close:wp.element.createElement(ni,null),closeTabset:wp.element.createElement(ni,null),popout:wp.element.createElement(Dn,null),maximize:wp.element.createElement(Nn,null),restore:wp.element.createElement(Bn,null),more:wp.element.createElement(Sn,null)},xn=typeof window<"u"&&(window.document.documentMode||/Edge\//.test(window.navigator.userAgent)),In=typeof window<"u"&&window.matchMedia&&window.matchMedia("(hover: hover) and (pointer: fine)").matches,Un=In&&!xn,si=(nt=class extends wp.element.Component{constructor(e){super(e),L(this,"selfRef"),L(this,"findHeaderBarSizeRef"),L(this,"findTabBarSizeRef"),L(this,"findBorderBarSizeRef"),L(this,"previousModel"),L(this,"centerRect"),L(this,"tabIds"),L(this,"newTabJson"),L(this,"firstMove",!1),L(this,"dragNode"),L(this,"dragDiv"),L(this,"dragRectRendered",!0),L(this,"dragDivText"),L(this,"dropInfo"),L(this,"customDrop"),L(this,"outlineDiv"),L(this,"edgeRectLength",100),L(this,"edgeRectWidth",10),L(this,"fnNewNodeDropped"),L(this,"currentDocument"),L(this,"currentWindow"),L(this,"supportsPopout"),L(this,"popoutURL"),L(this,"icons"),L(this,"resizeObserver"),L(this,"onModelChange",V(t=>{this.forceUpdate(),this.props.onModelChange&&this.props.onModelChange(this.props.model,t)},"onModelChange")),L(this,"updateRect",V((t=this.getDomRect())=>{const n=new D(0,0,t.width,t.height);!n.equals(this.state.rect)&&n.width!==0&&n.height!==0&&this.setState({rect:n})},"updateRect")),L(this,"updateLayoutMetrics",V(()=>{if(this.findHeaderBarSizeRef.current){const t=this.findHeaderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedHeaderBarSize&&this.setState({calculatedHeaderBarSize:t})}if(this.findTabBarSizeRef.current){const t=this.findTabBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedTabBarSize&&this.setState({calculatedTabBarSize:t})}if(this.findBorderBarSizeRef.current){const t=this.findBorderBarSizeRef.current.getBoundingClientRect().height;t!==this.state.calculatedBorderBarSize&&this.setState({calculatedBorderBarSize:t})}},"updateLayoutMetrics")),L(this,"getClassName",V(t=>this.props.classNameMapper===void 0?t:this.props.classNameMapper(t),"getClassName")),L(this,"onCloseWindow",V(t=>{this.doAction(S.unFloatTab(t));try{this.props.model.getNodeById(t)._setWindow(void 0)}catch{}},"onCloseWindow")),L(this,"onSetWindow",V((t,n)=>{this.props.model.getNodeById(t)._setWindow(n)},"onSetWindow")),L(this,"onCancelAdd",V(()=>{this.selfRef.current.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{this.customDrop?.invalidated?.()}catch(t){console.error(t)}ae.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0},"onCancelAdd")),L(this,"onCancelDrag",V(t=>{if(t){const n=this.selfRef.current;try{n.removeChild(this.outlineDiv)}catch{}try{n.removeChild(this.dragDiv)}catch{}this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0);try{this.customDrop?.invalidated?.()}catch(o){console.error(o)}ae.instance.hideGlass(),this.newTabJson=void 0,this.customDrop=void 0}this.setState({showHiddenBorder:w.CENTER})},"onCancelDrag")),L(this,"onDragDivMouseDown",V(t=>{t.preventDefault(),this.dragStart(t,this.dragDivText,z._fromJson(this.newTabJson,this.props.model,!1),!0,void 0,void 0)},"onDragDivMouseDown")),L(this,"dragStart",V((t,n,o,s,a,r)=>{s?(this.dragNode=o,this.dragDivText=n,ae.instance.startDrag(t,this.onDragStart,this.onDragMove,this.onDragEnd,this.onCancelDrag,a,r,this.currentDocument,this.selfRef.current)):ae.instance.startDrag(t,void 0,void 0,void 0,void 0,a,r,this.currentDocument,this.selfRef.current)},"dragStart")),L(this,"dragRectRender",V((t,n,o,s)=>{let a;if(t!==void 0?a=wp.element.createElement("div",{style:{whiteSpace:"pre"}},t.replace("<br>",`
`)):n&&n instanceof z&&(a=wp.element.createElement($t,{node:n,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory})),this.props.onRenderDragRect!==void 0){const r=this.props.onRenderDragRect(a,n,o);r!==void 0&&(a=r)}this.dragDiv.style.visibility="hidden",this.dragRectRendered=!1,this.showPortal(wp.element.createElement(zn,{onRendered:()=>{this.dragRectRendered=!0,s?.()}},a),this.dragDiv)},"dragRectRender")),L(this,"showPortal",V((t,n)=>{const o=wp.element.createPortal(t,n);this.setState({portal:o})},"showPortal")),L(this,"hidePortal",V(()=>{this.setState({portal:void 0})},"hidePortal")),L(this,"onDragStart",V(()=>{this.dropInfo=void 0,this.customDrop=void 0;const t=this.selfRef.current;return this.outlineDiv=this.currentDocument.createElement("div"),this.outlineDiv.className=this.getClassName(g.FLEXLAYOUT__OUTLINE_RECT),this.outlineDiv.style.visibility="hidden",t.appendChild(this.outlineDiv),this.dragDiv==null&&(this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(g.FLEXLAYOUT__DRAG_RECT),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragRectRender(this.dragDivText,this.dragNode,this.newTabJson),t.appendChild(this.dragDiv)),this.props.model.getMaximizedTabset()===void 0&&this.setState({showEdges:!0}),this.dragNode!==void 0&&this.dragNode instanceof z&&this.dragNode.getTabRect()!==void 0&&this.dragNode.getTabRect().positionElement(this.outlineDiv),this.firstMove=!0,!0},"onDragStart")),L(this,"onDragMove",V(t=>{if(this.firstMove===!1){const l=this.props.model._getAttribute("tabDragSpeed");this.outlineDiv.style.transition=`top ${l}s, left ${l}s, width ${l}s, height ${l}s`}this.firstMove=!1;const n=this.selfRef.current.getBoundingClientRect(),o={x:t.clientX-n.left,y:t.clientY-n.top};this.checkForBorderToShow(o.x,o.y);const s=this.dragDiv.getBoundingClientRect();let a=o.x-s.width/2;a+s.width>n.width&&(a=n.width-s.width),a=Math.max(0,a),this.dragDiv.style.left=a+"px",this.dragDiv.style.top=o.y+5+"px",this.dragRectRendered&&this.dragDiv.style.visibility==="hidden"&&(this.dragDiv.style.visibility="visible");let r=this.props.model._findDropTargetNode(this.dragNode,o.x,o.y);r&&(this.props.onTabDrag?this.handleCustomTabDrag(r,o,t):(this.dropInfo=r,this.outlineDiv.className=this.getClassName(r.className),r.rect.positionElement(this.outlineDiv),this.outlineDiv.style.visibility="visible"))},"onDragMove")),L(this,"onDragEnd",V(t=>{const n=this.selfRef.current;if(n.removeChild(this.outlineDiv),n.removeChild(this.dragDiv),this.dragDiv=void 0,this.hidePortal(),this.setState({showEdges:!1}),ae.instance.hideGlass(),this.dropInfo)if(this.customDrop){this.newTabJson=void 0;try{const{callback:o,dragging:s,over:a,x:r,y:l,location:h}=this.customDrop;o(s,a,r,l,h),this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(),this.fnNewNodeDropped=void 0)}catch(o){console.error(o)}}else if(this.newTabJson!==void 0){const o=this.doAction(S.addNode(this.newTabJson,this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.fnNewNodeDropped!=null&&(this.fnNewNodeDropped(o,t),this.fnNewNodeDropped=void 0),this.newTabJson=void 0}else this.dragNode!==void 0&&this.doAction(S.moveNode(this.dragNode.getId(),this.dropInfo.node.getId(),this.dropInfo.location,this.dropInfo.index));this.setState({showHiddenBorder:w.CENTER})},"onDragEnd")),this.props.model._setChangeListener(this.onModelChange),this.tabIds=[],this.selfRef=wp.element.createRef(),this.findHeaderBarSizeRef=wp.element.createRef(),this.findTabBarSizeRef=wp.element.createRef(),this.findBorderBarSizeRef=wp.element.createRef(),this.supportsPopout=e.supportsPopout!==void 0?e.supportsPopout:Un,this.popoutURL=e.popoutURL?e.popoutURL:"popout.html",this.icons={...Mn,...e.icons},this.state={rect:new D(0,0,0,0),calculatedHeaderBarSize:25,calculatedTabBarSize:26,calculatedBorderBarSize:30,editingTab:void 0,showHiddenBorder:w.CENTER,showEdges:!1},this.onDragEnter=this.onDragEnter.bind(this)}styleFont(e){return this.props.font&&(this.selfRef.current&&(this.props.font.size&&this.selfRef.current.style.setProperty("--font-size",this.props.font.size),this.props.font.family&&this.selfRef.current.style.setProperty("--font-family",this.props.font.family)),this.props.font.style&&(e.fontStyle=this.props.font.style),this.props.font.weight&&(e.fontWeight=this.props.font.weight)),e}doAction(e){if(this.props.onAction!==void 0){const t=this.props.onAction(e);return t!==void 0?this.props.model.doAction(t):void 0}else return this.props.model.doAction(e)}componentDidMount(){this.updateRect(),this.updateLayoutMetrics(),this.currentDocument=this.selfRef.current.ownerDocument,this.currentWindow=this.currentDocument.defaultView,this.resizeObserver=new ResizeObserver(e=>{this.updateRect(e[0].contentRect)}),this.resizeObserver.observe(this.selfRef.current)}componentDidUpdate(){this.updateLayoutMetrics(),this.props.model!==this.previousModel&&(this.previousModel!==void 0&&this.previousModel._setChangeListener(void 0),this.props.model._setChangeListener(this.onModelChange),this.previousModel=this.props.model)}getCurrentDocument(){return this.currentDocument}getDomRect(){return this.selfRef.current.getBoundingClientRect()}getRootDiv(){return this.selfRef.current}isSupportsPopout(){return this.supportsPopout}isRealtimeResize(){return this.props.realtimeResize??!1}onTabDrag(...e){return this.props.onTabDrag?.(...e)}getPopoutURL(){return this.popoutURL}componentWillUnmount(){this.resizeObserver?.unobserve(this.selfRef.current)}setEditingTab(e){this.setState({editingTab:e})}getEditingTab(){return this.state.editingTab}render(){if(!this.selfRef.current)return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT)},this.metricsElements());this.props.model._setPointerFine(window&&window.matchMedia&&window.matchMedia("(pointer: fine)").matches);const e=[],t=[],n=[],o={},s=[],a={headerBarSize:this.state.calculatedHeaderBarSize,tabBarSize:this.state.calculatedTabBarSize,borderBarSize:this.state.calculatedBorderBarSize};this.props.model._setShowHiddenBorder(this.state.showHiddenBorder),this.centerRect=this.props.model._layout(this.state.rect,a),this.renderBorder(this.props.model.getBorderSet(),e,o,n,s),this.renderChildren("",this.props.model.getRoot(),t,o,n,s);const r=[],l={};for(const c of this.tabIds)o[c]&&(r.push(c),l[c]=c);this.tabIds=r;for(const c of Object.keys(o))l[c]||this.tabIds.push(c);const h=[];if(this.state.showEdges){const c=this.centerRect,d=this.edgeRectLength,m=this.edgeRectWidth,E=this.edgeRectLength/2,u=this.getClassName(g.FLEXLAYOUT__EDGE_RECT),T=50;h.push(wp.element.createElement("div",{key:"North",style:{top:c.y,left:c.x+c.width/2-E,width:d,height:m,borderBottomLeftRadius:T,borderBottomRightRadius:T},className:u})),h.push(wp.element.createElement("div",{key:"West",style:{top:c.y+c.height/2-E,left:c.x,width:m,height:d,borderTopRightRadius:T,borderBottomRightRadius:T},className:u})),h.push(wp.element.createElement("div",{key:"South",style:{top:c.y+c.height-m,left:c.x+c.width/2-E,width:d,height:m,borderTopLeftRadius:T,borderTopRightRadius:T},className:u})),h.push(wp.element.createElement("div",{key:"East",style:{top:c.y+c.height/2-E,left:c.x+c.width-m,width:m,height:d,borderTopLeftRadius:T,borderBottomLeftRadius:T},className:u}))}return wp.element.createElement("div",{ref:this.selfRef,className:this.getClassName(g.FLEXLAYOUT__LAYOUT),onDragEnter:this.props.onExternalDrag?this.onDragEnter:void 0},t,this.tabIds.map(c=>o[c]),e,s,h,n,this.metricsElements(),this.state.portal)}metricsElements(){const e=this.styleFont({visibility:"hidden"});return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",{key:"findHeaderBarSize",ref:this.findHeaderBarSizeRef,style:e,className:this.getClassName(g.FLEXLAYOUT__TABSET_HEADER_SIZER)},"FindHeaderBarSize"),wp.element.createElement("div",{key:"findTabBarSize",ref:this.findTabBarSizeRef,style:e,className:this.getClassName(g.FLEXLAYOUT__TABSET_SIZER)},"FindTabBarSize"),wp.element.createElement("div",{key:"findBorderBarSize",ref:this.findBorderBarSizeRef,style:e,className:this.getClassName(g.FLEXLAYOUT__BORDER_SIZER)},"FindBorderBarSize"))}renderBorder(e,t,n,o,s){for(const a of e.getBorders()){const r=`/border/${a.getLocation().getName()}`;if(a.isShowing()){t.push(wp.element.createElement(gn,{key:`border_${a.getLocation().getName()}`,path:r,border:a,layout:this,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons}));const l=a._getDrawChildren();let h=0,c=0;for(const d of l){if(d instanceof Oe){let m=r+"/s";s.push(wp.element.createElement(Vt,{key:d.getId(),layout:this,node:d,path:m}))}else if(d instanceof z){let m=r+"/t"+c++;if(this.supportsPopout&&d.isFloating()){const E=this._getScreenRect(d);o.push(wp.element.createElement(Qt,{key:d.getId(),url:this.popoutURL,rect:E,title:d.getName(),id:d.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(ti,{layout:this,node:d,factory:this.props.factory}))),n[d.getId()]=wp.element.createElement(ii,{key:d.getId(),layout:this,path:m,node:d,selected:h===a.getSelected()})}else n[d.getId()]=wp.element.createElement(Kt,{key:d.getId(),layout:this,path:m,node:d,selected:h===a.getSelected(),factory:this.props.factory})}h++}}}}renderChildren(e,t,n,o,s,a){const r=t._getDrawChildren();let l=0,h=0,c=0;for(const d of r)if(d instanceof Oe){const m=e+"/s"+l++;a.push(wp.element.createElement(Vt,{key:d.getId(),layout:this,path:m,node:d}))}else if(d instanceof I){const m=e+"/ts"+c++;n.push(wp.element.createElement(wn,{key:d.getId(),layout:this,path:m,node:d,iconFactory:this.props.iconFactory,titleFactory:this.props.titleFactory,icons:this.icons})),this.renderChildren(m,d,n,o,s,a)}else if(d instanceof z){const m=e+"/t"+h++,E=d.getParent().getChildren()[d.getParent().getSelected()];if(E===void 0&&console.warn("undefined selectedTab should not happen"),this.supportsPopout&&d.isFloating()){const u=this._getScreenRect(d);s.push(wp.element.createElement(Qt,{key:d.getId(),url:this.popoutURL,rect:u,title:d.getName(),id:d.getId(),onSetWindow:this.onSetWindow,onCloseWindow:this.onCloseWindow},wp.element.createElement(ti,{layout:this,node:d,factory:this.props.factory}))),o[d.getId()]=wp.element.createElement(ii,{key:d.getId(),layout:this,path:m,node:d,selected:d===E})}else o[d.getId()]=wp.element.createElement(Kt,{key:d.getId(),layout:this,path:m,node:d,selected:d===E,factory:this.props.factory})}else{const m=e+(d.getOrientation()===y.HORZ?"/r":"/c")+c++;this.renderChildren(m,d,n,o,s,a)}}_getScreenRect(e){const t=e.getRect().clone(),n=this.selfRef.current.getBoundingClientRect(),o=Math.min(80,this.currentWindow.outerHeight-this.currentWindow.innerHeight),s=Math.min(80,this.currentWindow.outerWidth-this.currentWindow.innerWidth);return t.x=t.x+n.x+this.currentWindow.screenX+s,t.y=t.y+n.y+this.currentWindow.screenY+o,t}addTabToTabSet(e,t){this.props.model.getNodeById(e)!==void 0&&this.doAction(S.addNode(t,e,w.CENTER,-1))}addTabToActiveTabSet(e){const t=this.props.model.getActiveTabset();t!==void 0&&this.doAction(S.addNode(e,t.getId(),w.CENTER,-1))}addTabWithDragAndDrop(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,this.dragStart(void 0,e,z._fromJson(t,this.props.model,!1),!0,void 0,void 0)}moveTabWithDragAndDrop(e,t){this.dragStart(void 0,t,e,!0,void 0,void 0)}addTabWithDragAndDropIndirect(e,t,n){this.fnNewNodeDropped=n,this.newTabJson=t,ae.instance.addGlass(this.onCancelAdd),this.dragDivText=e,this.dragDiv=this.currentDocument.createElement("div"),this.dragDiv.className=this.getClassName(g.FLEXLAYOUT__DRAG_RECT),this.dragDiv.addEventListener("mousedown",this.onDragDivMouseDown),this.dragDiv.addEventListener("touchstart",this.onDragDivMouseDown,{passive:!1}),this.dragRectRender(this.dragDivText,void 0,this.newTabJson,()=>{if(this.dragDiv){this.dragDiv.style.visibility="visible";const o=this.dragDiv.getBoundingClientRect(),s=new D(0,0,o?.width,o?.height);s.centerInRect(this.state.rect),this.dragDiv.setAttribute("data-layout-path","/drag-rectangle"),this.dragDiv.style.left=s.x+"px",this.dragDiv.style.top=s.y+"px"}}),this.selfRef.current.appendChild(this.dragDiv)}handleCustomTabDrag(e,t,n){let o=this.customDrop?.invalidated;const s=this.customDrop?.callback;this.customDrop=void 0;const a=this.newTabJson||(this.dragNode instanceof z?this.dragNode:void 0);if(a&&(e.node instanceof I||e.node instanceof Q)&&e.index===-1){const r=e.node.getSelectedNode(),l=r?.getRect();if(r&&l?.contains(t.x,t.y)){let h;try{const c=this.onTabDrag(a,r,t.x-l.x,t.y-l.y,e.location,()=>this.onDragMove(n));c&&(h={rect:new D(c.x+l.x,c.y+l.y,c.width,c.height),callback:c.callback,invalidated:c.invalidated,dragging:a,over:r,x:t.x-l.x,y:t.y-l.y,location:e.location,cursor:c.cursor})}catch(c){console.error(c)}h?.callback===s&&(o=void 0),this.customDrop=h}}this.dropInfo=e,this.outlineDiv.className=this.getClassName(this.customDrop?g.FLEXLAYOUT__OUTLINE_RECT:e.className),this.customDrop?this.customDrop.rect.positionElement(this.outlineDiv):e.rect.positionElement(this.outlineDiv),ae.instance.setGlassCursorOverride(this.customDrop?.cursor),this.outlineDiv.style.visibility="visible";try{o?.()}catch(r){console.error(r)}}onDragEnter(e){if(ae.instance.isDragging())return;const t=this.props.onExternalDrag(e);t&&(this.fnNewNodeDropped=t.onDrop,this.newTabJson=t.json,this.dragStart(e,t.dragText,z._fromJson(t.json,this.props.model,!1),!0,void 0,void 0))}checkForBorderToShow(e,t){const n=this.props.model._getOuterInnerRects().outer,o=n.getCenter(),s=this.edgeRectWidth,a=this.edgeRectLength/2;let r=!1;this.props.model.isEnableEdgeDock()&&this.state.showHiddenBorder===w.CENTER&&(t>o.y-a&&t<o.y+a||e>o.x-a&&e<o.x+a)&&(r=!0);let l=w.CENTER;r||(e<=n.x+s?l=w.LEFT:e>=n.getRight()-s?l=w.RIGHT:t<=n.y+s?l=w.TOP:t>=n.getBottom()-s&&(l=w.BOTTOM)),l!==this.state.showHiddenBorder&&this.setState({showHiddenBorder:l})}maximize(e){this.doAction(S.maximizeToggle(e.getId()))}customizeTab(e,t){this.props.onRenderTab&&this.props.onRenderTab(e,t)}customizeTabSet(e,t){this.props.onRenderTabSet&&this.props.onRenderTabSet(e,t)}i18nName(e,t){let n;return this.props.i18nMapper&&(n=this.props.i18nMapper(e,t)),n===void 0&&(n=e+(t===void 0?"":t)),n}getOnRenderFloatingTabPlaceholder(){return this.props.onRenderFloatingTabPlaceholder}getShowOverflowMenu(){return this.props.onShowOverflowMenu}getTabSetPlaceHolderCallback(){return this.props.onTabSetPlaceHolder}showContextMenu(e,t){this.props.onContextMenu&&this.props.onContextMenu(e,t)}auxMouseClick(e,t){this.props.onAuxMouseClick&&this.props.onAuxMouseClick(e,t)}},_(nt,"S"),nt);V(si,"Layout");let Fn=si;const zn=V(i=>(wp.element.useEffect(()=>{i.onRendered?.()},[i]),wp.element.createElement(wp.element.Fragment,null,i.children)),"DragRectRenderWrapper");var ai=Object.defineProperty,Pn=_((i,e,t)=>e in i?ai(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"M"),Hn=_((i,e)=>ai(i,"name",{value:e,configurable:!0}),"z"),ri=_((i,e,t)=>(Pn(i,typeof e!="symbol"?e+"":e,t),t),"_$1");const li=(Fe=class{constructor(e){ri(this,"_model"),ri(this,"_borders"),this._model=e,this._borders=[]}static _fromJson(e,t){const n=new Fe(t);return n._borders=e.map(o=>Q._fromJson(o,t)),n}getBorders(){return this._borders}_forEachNode(e){for(const t of this._borders){e(t,0);for(const n of t.getChildren())n._forEachNode(e,1)}}_toJson(){return this._borders.map(e=>e.toJson())}_layoutBorder(e,t){const n=e.outer,o=this._model.getRoot();let s=Math.max(0,n.height-o.getMinHeight()),a=Math.max(0,n.width-o.getMinWidth()),r=0,l=0,h=0,c=0;const d=this._borders.filter(u=>u.isShowing());for(const u of d){u._setAdjustedSize(u.getSize());const T=u.getSelected()!==-1;u.getLocation().getOrientation()===y.HORZ?(l+=u.getBorderBarSize(),T&&(a-=this._model.getSplitterSize(),l+=u.getSize(),c+=u.getSize())):(r+=u.getBorderBarSize(),T&&(s-=this._model.getSplitterSize(),r+=u.getSize(),h+=u.getSize()))}let m=0,E=!1;for(;l>a&&c>0||r>s&&h>0;){const u=d[m];if(u.getSelected()!==-1){const T=u._getAdjustedSize();l>a&&c>0&&u.getLocation().getOrientation()===y.HORZ&&T>0&&T>u.getMinSize()?(u._setAdjustedSize(T-1),l--,c--,E=!0):r>s&&h>0&&u.getLocation().getOrientation()===y.VERT&&T>0&&T>u.getMinSize()&&(u._setAdjustedSize(T-1),r--,h--,E=!0)}if(m=(m+1)%d.length,m===0)if(E)E=!1;else break}for(const u of d)e.outer=u._layoutBorderOuter(e.outer,t);e.inner=e.outer;for(const u of d)e.inner=u._layoutBorderInner(e.inner,t);return e}_findDropTargetNode(e,t,n){for(const o of this._borders)if(o.isShowing()){const s=o.canDrop(e,t,n);if(s!==void 0)return s}}},_(Fe,"b"),Fe);Hn(li,"BorderSet");let di=li;var hi=Object.defineProperty,Yn=_((i,e,t)=>e in i?hi(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,"E"),Xn=_((i,e)=>hi(i,"name",{value:e,configurable:!0}),"c$1"),le=_((i,e,t)=>(Yn(i,typeof e!="symbol"?e+"":e,t),t),"r");const _t=(ne=class{constructor(){le(this,"_attributes"),le(this,"_idMap"),le(this,"_changeListener"),le(this,"_root"),le(this,"_borders"),le(this,"_onAllowDrop"),le(this,"_maximizedTabSet"),le(this,"_activeTabSet"),le(this,"_borderRects",{inner:D.empty(),outer:D.empty()}),le(this,"_pointerFine"),le(this,"_onCreateTabSet"),le(this,"_showHiddenBorder"),this._attributes={},this._idMap={},this._borders=new di(this),this._pointerFine=!0,this._showHiddenBorder=w.CENTER}static fromJson(e){const t=new ne;return ne._attributeDefinitions.fromJson(e.global,t._attributes),e.borders&&(t._borders=di._fromJson(e.borders,t)),t._root=Le._fromJson(e.layout,t),t._tidy(),t}static _createAttributeDefinitions(){const e=new Se;return e.add("legacyOverflowMenu",!1).setType(p.BOOLEAN),e.add("splitterSize",-1).setType(p.NUMBER),e.add("splitterExtra",0).setType(p.NUMBER),e.add("enableEdgeDock",!0).setType(p.BOOLEAN),e.add("rootOrientationVertical",!1).setType(p.BOOLEAN),e.add("marginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("enableUseVisibility",!1).setType(p.BOOLEAN),e.add("tabEnableClose",!0).setType(p.BOOLEAN),e.add("tabCloseType",1).setType("ICloseType"),e.add("tabEnableFloat",!1).setType(p.BOOLEAN),e.add("tabEnableDrag",!0).setType(p.BOOLEAN),e.add("tabEnableRename",!0).setType(p.BOOLEAN),e.add("tabClassName",void 0).setType(p.STRING),e.add("tabIcon",void 0).setType(p.STRING),e.add("tabEnableRenderOnDemand",!0).setType(p.BOOLEAN),e.add("tabDragSpeed",.3).setType(p.NUMBER),e.add("tabBorderWidth",-1).setType(p.NUMBER),e.add("tabBorderHeight",-1).setType(p.NUMBER),e.add("tabSetEnableDeleteWhenEmpty",!0).setType(p.BOOLEAN),e.add("tabSetEnableDrop",!0).setType(p.BOOLEAN),e.add("tabSetEnableDrag",!0).setType(p.BOOLEAN),e.add("tabSetEnableDivide",!0).setType(p.BOOLEAN),e.add("tabSetEnableMaximize",!0).setType(p.BOOLEAN),e.add("tabSetEnableClose",!1).setType(p.BOOLEAN),e.add("tabSetAutoSelectTab",!0).setType(p.BOOLEAN),e.add("tabSetClassNameTabStrip",void 0).setType(p.STRING),e.add("tabSetClassNameHeader",void 0).setType(p.STRING),e.add("tabSetEnableTabStrip",!0).setType(p.BOOLEAN),e.add("tabSetHeaderHeight",0).setType(p.NUMBER),e.add("tabSetTabStripHeight",0).setType(p.NUMBER),e.add("tabSetMarginInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetBorderInsets",{top:0,right:0,bottom:0,left:0}).setType("IInsets"),e.add("tabSetTabLocation","top").setType("ITabLocation"),e.add("tabSetMinWidth",0).setType(p.NUMBER),e.add("tabSetMinHeight",0).setType(p.NUMBER),e.add("borderSize",200).setType(p.NUMBER),e.add("borderMinSize",0).setType(p.NUMBER),e.add("borderBarSize",0).setType(p.NUMBER),e.add("borderEnableDrop",!0).setType(p.BOOLEAN),e.add("borderAutoSelectTabWhenOpen",!0).setType(p.BOOLEAN),e.add("borderAutoSelectTabWhenClosed",!1).setType(p.BOOLEAN),e.add("borderClassName",void 0).setType(p.STRING),e.add("borderEnableAutoHide",!1).setType(p.BOOLEAN),e}_setChangeListener(e){this._changeListener=e}getActiveTabset(){if(this._activeTabSet&&this.getNodeById(this._activeTabSet.getId()))return this._activeTabSet}_getShowHiddenBorder(){return this._showHiddenBorder}_setShowHiddenBorder(e){this._showHiddenBorder=e}_setActiveTabset(e){this._activeTabSet=e}getMaximizedTabset(){return this._maximizedTabSet}_setMaximizedTabset(e){this._maximizedTabSet=e}getRoot(){return this._root}isRootOrientationVertical(){return this._attributes.rootOrientationVertical}isUseVisibility(){return this._attributes.enableUseVisibility}getBorderSet(){return this._borders}_getOuterInnerRects(){return this._borderRects}_getPointerFine(){return this._pointerFine}_setPointerFine(e){this._pointerFine=e}visitNodes(e){this._borders._forEachNode(e),this._root._forEachNode(e,0)}getNodeById(e){return this._idMap[e]}doAction(e){let t;switch(e.type){case S.ADD_NODE:{const n=new z(this,e.data.json,!0),o=this._idMap[e.data.toNode];(o instanceof I||o instanceof Q||o instanceof Le)&&(o.drop(n,w.getByName(e.data.location),e.data.index,e.data.select),t=n);break}case S.MOVE_NODE:{const n=this._idMap[e.data.fromNode];if(n instanceof z||n instanceof I){const o=this._idMap[e.data.toNode];(o instanceof I||o instanceof Q||o instanceof Le)&&o.drop(n,w.getByName(e.data.location),e.data.index,e.data.select)}break}case S.DELETE_TAB:{const n=this._idMap[e.data.node];n instanceof z&&n._delete();break}case S.DELETE_TABSET:{const n=this._idMap[e.data.node];if(n instanceof I){const o=[...n.getChildren()];for(let s=0;s<o.length;s++){const a=o[s];a.isEnableClose()&&a._delete()}n.getChildren().length===0&&n._delete(),this._tidy()}break}case S.FLOAT_TAB:{const n=this._idMap[e.data.node];n instanceof z&&(n._setFloating(!0),Yt(n));break}case S.UNFLOAT_TAB:{const n=this._idMap[e.data.node];n instanceof z&&(n._setFloating(!1),Xt(n));break}case S.RENAME_TAB:{const n=this._idMap[e.data.node];n instanceof z&&n._setName(e.data.text);break}case S.SELECT_TAB:{const n=this._idMap[e.data.tabNode];if(n instanceof z){const o=n.getParent(),s=o.getChildren().indexOf(n);o instanceof Q?o.getSelected()===s?o._setSelected(-1):o._setSelected(s):o instanceof I&&(o.getSelected()!==s&&o._setSelected(s),this._activeTabSet=o)}break}case S.SET_ACTIVE_TABSET:{const n=this._idMap[e.data.tabsetNode];n instanceof I&&(this._activeTabSet=n);break}case S.ADJUST_SPLIT:{const n=this._idMap[e.data.node1],o=this._idMap[e.data.node2];(n instanceof I||n instanceof Le)&&(o instanceof I||o instanceof Le)&&(this._adjustSplitSide(n,e.data.weight1,e.data.pixelWidth1),this._adjustSplitSide(o,e.data.weight2,e.data.pixelWidth2));break}case S.ADJUST_BORDER_SPLIT:{const n=this._idMap[e.data.node];n instanceof Q&&n._setSize(e.data.pos);break}case S.MAXIMIZE_TOGGLE:{const n=this._idMap[e.data.node];n instanceof I&&(n===this._maximizedTabSet?this._maximizedTabSet=void 0:(this._maximizedTabSet=n,this._activeTabSet=n));break}case S.UPDATE_MODEL_ATTRIBUTES:{this._updateAttrs(e.data.json);break}case S.UPDATE_NODE_ATTRIBUTES:{this._idMap[e.data.node]._updateAttrs(e.data.json);break}}return this._updateIdMap(),this._changeListener!==void 0&&this._changeListener(e),t}_updateIdMap(){this._idMap={},this.visitNodes(e=>this._idMap[e.getId()]=e)}_adjustSplitSide(e,t,n){e._setWeight(t),e.getWidth()!=null&&e.getOrientation()===y.VERT?e._updateAttrs({width:n}):e.getHeight()!=null&&e.getOrientation()===y.HORZ&&e._updateAttrs({height:n})}toJson(){const e={};return ne._attributeDefinitions.toJson(e,this._attributes),this.visitNodes(t=>{t._fireEvent("save",void 0)}),{global:e,borders:this._borders._toJson(),layout:this._root.toJson()}}getSplitterSize(){let e=this._attributes.splitterSize;return e===-1&&(e=this._pointerFine?8:12),e}isLegacyOverflowMenu(){return this._attributes.legacyOverflowMenu}getSplitterExtra(){return this._attributes.splitterExtra}isEnableEdgeDock(){return this._attributes.enableEdgeDock}_addNode(e){const t=e.getId();if(this._idMap[t]!==void 0)throw new Error(`Error: each node must have a unique id, duplicate id:${e.getId()}`);e.getType()!=="splitter"&&(this._idMap[t]=e)}_layout(e,t){return this._borderRects=this._borders._layoutBorder({outer:e,inner:e},t),e=this._borderRects.inner.removeInsets(this._getAttribute("marginInsets")),this._root?.calcMinSize(),this._root._layout(e,t),e}_findDropTargetNode(e,t,n){let o=this._root._findDropTargetNode(e,t,n);return o===void 0&&(o=this._borders._findDropTargetNode(e,t,n)),o}_tidy(){this._root._tidy()}_updateAttrs(e){ne._attributeDefinitions.update(e,this._attributes)}_nextUniqueId(){return"#"+Wt()}_getAttribute(e){return this._attributes[e]}setOnAllowDrop(e){this._onAllowDrop=e}_getOnAllowDrop(){return this._onAllowDrop}setOnCreateTabSet(e){this._onCreateTabSet=e}_getOnCreateTabSet(){return this._onCreateTabSet}static toTypescriptInterfaces(){console.log(ne._attributeDefinitions.toTypescriptInterface("Global",void 0)),console.log(Le.getAttributeDefinitions().toTypescriptInterface("Row",ne._attributeDefinitions)),console.log(I.getAttributeDefinitions().toTypescriptInterface("TabSet",ne._attributeDefinitions)),console.log(z.getAttributeDefinitions().toTypescriptInterface("Tab",ne._attributeDefinitions)),console.log(Q.getAttributeDefinitions().toTypescriptInterface("Border",ne._attributeDefinitions))}toString(){return JSON.stringify(this.toJson())}},_(ne,"d"),ne);Xn(_t,"Model"),le(_t,"_attributeDefinitions",_t._createAttributeDefinitions());let Wn=_t;var kn={global:{enableEdgeDock:!1,splitterSize:5,tabEnableClose:!1,tabEnableRename:!1,tabEnableFloat:!1,tabEnableRenderOnDemand:!0,tabEnableDrag:!0,tabSetEnableClose:!1,tabSetEnableMaximize:!1,tabSetEnableDrop:!0},borders:[{type:"border",location:"right",size:320,barSize:-1,children:[{type:"tab",id:"library",name:"Library",component:""},{type:"tab",id:"support",name:"Support",component:""}]}],layout:{type:"row",weight:100,children:[{type:"row",weight:50,children:[{type:"tabset",weight:20,children:[{type:"tab",name:"Overview",component:"grid"}]},{type:"tabset",weight:80,children:[{type:"tab",name:"Template",component:"editor"},{type:"tab",name:"Style",component:"editor"},{type:"tab",name:"Script",component:"editor"},{type:"tab",name:"Controls",component:"editor"},{type:"tab",name:"Assets",component:"assets"},{type:"tab",name:"Location",component:"location"}]}]},{type:"row",weight:50,children:[{type:"tabset",weight:100,children:[{type:"tab",name:"Preview",component:"preview",enableClose:!1,enableRename:!1,enableFloat:!0}]}]}]}};const $n={template:"html",style:"sass",script:"javascript",control:"html"},ci={},_i=wp.element.memo(({type:i,node:e,content:t,focusOnMount:n=!1})=>{const o=wp.element.useRef();return wp.element.useEffect(()=>{(async()=>{const{CodeEditor:s}=window?.Tangible?.TemplateSystem,a=o.current;a.style="display: flex; flex-direction: column; height: 100%;";const r=await s.create({el:a,lang:$n[i]||"html",content:t,editorActionsPanel:!1});ci[i]=r,r.node=e,n&&r.view.focus()})().catch(console.error)},[o]),wp.element.createElement("div",{ref:o})});var Gn=Object.defineProperty,Vn=_((i,e)=>Gn(i,"name",{value:e,configurable:!0}),"a");const jn=wp.element.memo(({type:i,node:e,onPreviewerReady:t})=>{const n=wp.element.useRef();return wp.element.useEffect(()=>{const o=n.current;console.log("Previewer mount",o)},[]),wp.element.createElement("div",{className:"ide-component",ref:n})});async function Jn(i){console.log("start",i);const e=await startPlaygroundWeb(i);return console.log("playground",e),await e.isReady(),e}_(Jn,"m$1"),Vn(Jn,"start");const Zn=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),Kn=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"})),qn=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Local"),wp.element.createElement("p",null,"List of templates"),wp.element.createElement("h2",null,"Cloud"),wp.element.createElement("p",null,"Catalog"))),Qn=wp.element.memo(({type:i,node:e})=>wp.element.createElement("div",{className:"ide-component"},wp.element.createElement("h2",null,"Keyboard Shortcuts"),wp.element.createElement("p",null,"Ctrl or CMD + SPACE - Autocomplete"),wp.element.createElement("h2",null,"Language Reference")));var eo=Object.defineProperty,ui=_((i,e)=>eo(i,"name",{value:e,configurable:!0}),"l$1");const gi=ui(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},wp.element.createElement("path",{fill:"currentColor",d:"M7 2H2v5l1.8-1.8L6.5 8L8 6.5L5.2 3.8L7 2zm6 0l1.8 1.8L12 6.5L13.5 8l2.7-2.7L18 7V2h-5zm.5 10L12 13.5l2.7 2.7L13 18h5v-5l-1.8 1.8l-2.7-2.8zm-7 0l-2.7 2.7L2 13v5h5l-1.8-1.8L8 13.5L6.5 12z"})),"IconFullScreenOpen"),mi=ui(()=>wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20"},wp.element.createElement("path",{fill:"currentColor",d:"M3.4 2L2 3.4l2.8 2.8L3 8h5V3L6.2 4.8L3.4 2zm11.8 4.2L18 3.4L16.6 2l-2.8 2.8L12 3v5h5l-1.8-1.8zM4.8 13.8L2 16.6L3.4 18l2.8-2.8L8 17v-5H3l1.8 1.8zM17 12h-5v5l1.8-1.8l2.8 2.8l1.4-1.4l-2.8-2.8L17 12z"})),"IconFullScreenClose");var to=Object.defineProperty,Tt=_((i,e)=>to(i,"name",{value:e,configurable:!0}),"l"),io=(i=>(i[i.Default=0]="Default",i[i.Full=1]="Full",i[i.FullScreen=2]="FullScreen",i))(io||{});const pi="tangible-template-system-builder-expanded";function Ti(i){const e=document.documentElement;i?e.classList.add(pi):e.classList.remove(pi),window.dispatchEvent(new Event("resize"))}_(Ti,"p"),Tt(Ti,"updateFullScreenClass");function bi({layoutModel:i,ideElement:e}){const[t,n]=wp.element.useState(1),o=wp.element.useMemo(()=>function(s){function a(){Ti(s===1||s===2),n(s)}if(_(a,"o"),Tt(a,"update"),s===2){if(!document.fullscreenElement){e.requestFullscreen().then(a).catch(r=>{});return}}else document.fullscreenElement&&document.exitFullscreen();a()},[n]);return wp.element.createElement("div",{className:"ide-header"},wp.element.createElement("div",{className:"ide-header--title"},wp.element.createElement("input",{type:"text",value:"Template name"})),wp.element.createElement("div",{className:"ide-header--actions"},wp.element.createElement("button",{className:"ide-header--action"},"Save"),wp.element.createElement("button",{className:"ide-header--action"},"Format"),wp.element.createElement("button",{className:"ide-header--action"},"Export"),wp.element.createElement("div",{className:"ide-header--action-separator"}),wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{i.doAction(S.selectTab("library"))}},"Library"),wp.element.createElement("button",{className:"ide-header--action",onClick:()=>{i.doAction(S.selectTab("support"))}},"Support"),t===2?wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(0)},wp.element.createElement(mi,null)):wp.element.createElement(wp.element.Fragment,null,t===1&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(2),alt:"Full Screen"},wp.element.createElement(gi,null)),t===0&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(1),alt:"Expand"},wp.element.createElement(gi,null)),t===1&&wp.element.createElement("button",{className:"ide-header--action ide-header--action-with-icon",onClick:()=>o(0),alt:"Shrink"},wp.element.createElement(mi,null)))))}_(bi,"Header"),Tt(bi,"Header");var no=Object.defineProperty,Ae=_((i,e)=>no(i,"name",{value:e,configurable:!0}),"s");window?.Tangible?.TemplateSystem;let Ie=document.getElementById("tangible-template-system-builder");Ie||(Ie=document.createElement("div"),Ie.id="tangible-template-system-builder",document.body.prepend(Ie));const oo={},Ei=Wn.fromJson(kn);let fi="";const vi={Library:qn,Support:Qn,Editor:_i,Preview:jn,Assets:Zn,Location:Kn},wi=Ae(i=>i._getAttr("id"),"getNodeId"),so=Ae(i=>{const e=i.getComponent(),t=wi(i),n=i.getName(),o=n.toLowerCase();if(e==="editor")return wp.element.createElement(_i,{type:o,node:i,content:oo[o]||"",focusOnMount:t===fi});if(vi[n]){const s=vi[n];return wp.element.createElement(s,{node:i})}},"componentFactory"),ao=Ae(i=>{const{type:e,data:t}=i;if(e==="FlexLayout_SelectTab"&&t.tabNode){const n=t.tabNode;fi=n;for(const[o,s]of Object.entries(ci))if(wi(s.node)===n){setTimeout(()=>{s.view.focus()},0);break}}return i},"onAction"),ro=Ae(i=>{},"onModelChange"),lo=Ae((i,e)=>{i._attributes;for(const t of i.getChildren()){const{id:n,name:o}=t._attributes||{};o.toLowerCase();return}},"onRenderTabSet");async function ho({lang:i,editor:e}){const t=e.view.state.doc.toString();try{const n=await e.format({lang:i,content:t}),o=n?Math.min(e.view.state.selection.ranges[0].from,n.length-1):0;e.view.dispatch({changes:{from:0,to:t.length,insert:n}}),e.view.focus(),e.view.dispatch({selection:{anchor:o,head:o}})}catch(n){console.error(n)}}_(ho,"O"),Ae(ho,"formatCode"),document.documentElement.classList.add("tangible-template-system-builder-expanded");const co=Ae(()=>(wp.element.useEffect(()=>{document.body.classList.add("ide-loaded")},[]),wp.element.createElement(wp.element.Fragment,null,wp.element.createElement(bi,{layoutModel:Ei,ideElement:Ie}),wp.element.createElement("div",{className:"ide-main"},wp.element.createElement(Fn,{model:Ei,factory:so,onAction:ao,onModelChange:ro,onRenderTabSet:lo,realtimeResize:!0,supportsPopout:!1})))),"App");wp.element.render(wp.element.createElement(co,null),Ie)})();
