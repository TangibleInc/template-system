(function(){"use strict";(function(){const s={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,s);return}}catch(e){}globalThis.process={env:s}})();var T=Object.defineProperty,v=(s,e,n)=>e in s?T(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n,p=(s,e,n)=>(v(s,typeof e!="symbol"?e+"":e,n),n);const{wp:t,Tangible:w,HTMLHint:O}=window,{element:{Component:h},blockEditor:{BlockControls:f,InspectorControls:x},blocks:{registerBlockType:y},components:{Button:d,DropdownMenu:L,KeyboardShortcuts:C,SelectControl:H,TextControl:B,ToolbarItem:N,ToolbarButton:V,ToolbarGroup:u,Panel:I,PanelBody:U,PanelRow:z,withConstrainedTabbing:A},i18n:{__:c},keycodes:{rawShortcut:a},serverSideRender:k}=t,{CodeMirror:D,createCodeEditor:P,gutenbergConfig:b}=w,l=s=>s.stopImmediatePropagation(),M={tab:l,[a.shift("tab")]:l,[a.ctrl("[")]:l,[a.primary("[")]:l,[a.ctrl("]")]:l,[a.primary("]")]:l,[a.ctrl("a")]:l,[a.primary("a")]:l,[a.ctrl("d")]:l,[a.primary("d")]:l,[a.ctrl("z")]:l,[a.ctrlShift("z")]:l,[a.primary("z")]:l,[a.primaryShift("z")]:l},E=()=>t.element.createElement("div",null,"\xA0");class S extends h{constructor(){super(...arguments),p(this,"onEditorUpdate",()=>{const{onChange:e}=this.props;e&&e(this.editor.getValue())})}componentDidMount(){const e=P(this.el,{language:"html",resizable:!0});this.editor=e,this.editor.on("change",this.onEditorUpdate)}componentWillUnmount(){this.editor.off("change",this.onEditorUpdate)}componentShouldUpdate(){return!1}render(){const{value:e,onChange:n}=this.props;return t.element.createElement(C,{shortcuts:M},t.element.createElement("textarea",{ref:i=>this.el=i,value:e,onChange:i=>{n(i.target.value)},cols:"30",rows:"10"}))}}class _ extends h{constructor(e){super(e),p(this,"canEditTemplate",b.canEditTemplate),p(this,"state",{currentTab:this.props.attributes.template_selected||!this.canEditTemplate?"selectTemplate":"editor"}),this.templateOptions=[];const n=b.templateOptions,i=Object.keys(n);for(const r of i)this.templateOptions.push({value:r&&parseInt(r,10),label:n[r]})}showTab(e){this.state.currentTab!==e&&(this.setState({currentTab:e}),e==="editor"&&this.props.attributes.template_selected?this.props.setAttributes({template_selected:0}):e==="selectTemplate"&&!this.props.attributes.template_selected&&this.props.setAttributes({template_selected:this.templateOptions[0].value}))}render(){const{className:e,attributes:n,setAttributes:i}=this.props,{currentTab:r}=this.state;return t.element.createElement(t.element.Fragment,null,t.element.createElement(f,null,t.element.createElement(u,null,this.canEditTemplate&&t.element.createElement(d,{className:"components-tab-button",isPressed:r==="editor",onClick:()=>this.showTab("editor")},t.element.createElement("span",null,c("Editor"))),t.element.createElement(d,{className:"components-tab-button",isPressed:r==="selectTemplate",onClick:()=>this.showTab("selectTemplate")},t.element.createElement("span",null,c("Saved templates")))),t.element.createElement(u,null,t.element.createElement(d,{className:"components-tab-button",isPressed:r==="preview",onClick:()=>this.showTab("preview")},t.element.createElement("span",null,c("Preview"))))),r==="preview"?t.element.createElement(k,{block:"tangible/template",className:e,attributes:n,EmptyResponsePlaceholder:E,LoadingResponsePlaceholder:E}):this.canEditTemplate&&r==="editor"?t.element.createElement(S,{value:n.template,onChange:m=>i({template:m})}):t.element.createElement(H,{label:"Select template",value:n.template_selected,style:{height:"60px"},onChange:m=>i({template_selected:m&&parseInt(m,10)}),options:this.templateOptions}))}}y("tangible/template",{title:c("Tangible Template"),description:c("Dynamic template"),icon:"editor-code",category:"common",keywords:[c("template","loop","content")],edit:_,save(){return null}});const{wp:o}=window,{blocks:{registerBlockCollection:g}}=o;g&&g("tangible",{title:"Tangible",icon:o.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 99"},o.element.createElement("path",{d:"M0 0 H 33 V 33 H 0 L 0 0",fill:"#262262"}),o.element.createElement("path",{d:"M33 0 H 66 V 33 H 33 L 33 0",fill:"#662d91"}),o.element.createElement("path",{d:"M66 0 H 99 V 33 H 66 L 66 0",fill:"#9f1f63"}),o.element.createElement("path",{d:"M0 33 H 33 V 66 H 0 L 0 33",fill:"#2e3192"}),o.element.createElement("path",{d:"M66 33 H 99 V 66 H 66 L 66 33",fill:"#ec008c"}),o.element.createElement("path",{d:"M33 66 H 66 V 99 H 33 L 33 66",fill:"#02aeef"}))})})();
//# sourceMappingURL=gutenberg-template-editor.min.js.map
