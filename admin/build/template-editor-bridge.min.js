var T=Object.defineProperty;var c=(d,r)=>T(d,"name",{value:r,configurable:!0});(function(){"use strict";(function(){const t={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch{}globalThis.process={env:t}})();var d=Object.defineProperty,r=c((t,i)=>d(t,"name",{value:i,configurable:!0}),"d");async function g(t,i={}){const{CodeEditor:u}=window.Tangible.TemplateSystem||{};if(!u)throw new Error("CodeEditor not found");const{language:m="html",onSave:f,htmlTags:w=!0,controlTags:h=!1}=i,o={},n=await u.create({lang:m,content:t.value,onUpdate(e){o.change&&p.emit("change")},onSave(){f&&(s(),f())},htmlTags:w,controlTags:h}),p={codeMirror6:n,updateTextarea:s,getValue(){return n?n.view.state.doc.toString():""},setValue(e){if(!n)return;const a=n.view.state.doc.toString();n.view.dispatch({changes:{from:0,to:a.length,insert:e}})},focus(){n&&n.view.focus()},refresh(){},setSize(e,a){},on(e,a){o[e]||(o[e]=[]),o[e].push(a)},emit(e,...a){if(o[e])for(const l of o[e])l(...a)},off(e,a){o[e]&&(o[e]=o[e].filter(l=>l!==a))}},v="tangible-template-editor-container";t.parentNode?.classList.contains(v)||t.parentNode?.classList.add(v);function s(){t.value=n.view.state.doc.toString()}return c(s,"a"),r(s,"updateTextarea"),t.parentNode?.insertBefore(n.view.dom,t),t.form&&t.form.addEventListener("submit",()=>s()),p}c(g,"createTemplateEditor"),r(g,"createTemplateEditor"),window.Tangible=window.Tangible||{},window.Tangible.createCodeEditor=g})();
