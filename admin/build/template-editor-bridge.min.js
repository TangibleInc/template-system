var T=Object.defineProperty;var c=(d,a)=>T(d,"name",{value:a,configurable:!0});(function(){"use strict";(function(){const t={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,t);return}}catch{}globalThis.process={env:t}})();var d=Object.defineProperty,a=c((t,i)=>d(t,"name",{value:i,configurable:!0}),"d");async function f(t,i={}){const{CodeEditor:u}=window.Tangible.TemplateSystem||{};if(!u)throw new Error("CodeEditor not found");const{language:w="html",onSave:g,htmlTags:m=!0,controlTags:h=!1}=i,o={},n=await u.create({root:t.ownerDocument,lang:w,content:t.value,onUpdate(e){o.change&&p.emit("change")},onSave(){g&&(s(),g())},htmlTags:m,controlTags:h}),p={codeMirror6:n,updateTextarea:s,destroy(){for(const e of Object.keys(o))delete o[e];n?.view?.destroy()},getValue(){return n?n.view.state.doc.toString():""},setValue(e){if(!n)return;const r=n.view.state.doc.toString();n.view.dispatch({changes:{from:0,to:r.length,insert:e}})},focus(){n&&n.view.focus()},refresh(){},setSize(e,r){},on(e,r){o[e]||(o[e]=[]),o[e].push(r)},emit(e,...r){if(o[e])for(const l of o[e])l(...r)},off(e,r){o[e]&&(o[e]=o[e].filter(l=>l!==r))}},v="tangible-template-editor-container";t.parentNode?.classList.contains(v)||t.parentNode?.classList.add(v);function s(){t.value=n.view.state.doc.toString()}return c(s,"a"),a(s,"updateTextarea"),t.parentNode?.insertBefore(n.view.dom,t),t.form&&t.form.addEventListener("submit",()=>s()),p}c(f,"createTemplateEditor"),a(f,"createTemplateEditor"),window.Tangible=window.Tangible||{},window.Tangible.createCodeEditor=f})();
