var _i=Object.defineProperty;var d=(ut,K)=>_i(ut,"name",{value:K,configurable:!0});(function(){"use strict";(function(){const r={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,r);return}}catch{}globalThis.process={env:r}})();var ut={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.handleWarning=K.DecodeWarning=K.createChunkDecodeWarning=K.DecodeError=K.createChunkDecodeError=K.assertChunkCompressionMethod=K.assertChunkMutualExclusion=K.assertChunkFollows=K.assertChunkPrecedes=K.assertChunkDataLengthGte=K.assertChunkDataLengthEquals=K.assertChunkSinglular=void 0;function Nr(r,u){r.parsedChunks.has(u.type)&&it(r,at(u,`Multiple ${u.type} chunks not allowed`,u.offset+4))}d(Nr,"assertChunkSinglular"),K.assertChunkSinglular=Nr;function jr(r,u,i){if(u.dataLength!==i){const o=at(u,`Invalid data length: ${u.dataLength} !== ${i}`,u.offset);if(u.dataLength>i)it(r,o);else throw o}}d(jr,"assertChunkDataLengthEquals"),K.assertChunkDataLengthEquals=jr;function qr(r,u,i){if(u.dataLength<i)throw rn(r,u,`Invalid data length: ${u.dataLength} < ${i}`,u.offset)}d(qr,"assertChunkDataLengthGte"),K.assertChunkDataLengthGte=qr;function Br(r,u,i){r.parsedChunks.has(i)&&it(r,at(u,`Must precede ${i}`,u.offset+4))}d(Br,"assertChunkPrecedes"),K.assertChunkPrecedes=Br;function $r(r,u,i){if(!r.parsedChunks.has(i))throw rn(r,u,`Must follow ${i}`,u.offset+4)}d($r,"assertChunkFollows"),K.assertChunkFollows=$r;function Zr(r,u,i){r.parsedChunks.has(i)&&it(r,at(u,`Should not be present alongside ${i}`,u.offset+4))}d(Zr,"assertChunkMutualExclusion"),K.assertChunkMutualExclusion=Zr;function Hr(r,u,i,o){i!==0&&it(r,at(u,`Unknown compression method "${i}"`,o))}d(Hr,"assertChunkCompressionMethod"),K.assertChunkCompressionMethod=Hr;function rn(r,u,i,o){return new an(r,`${u.type}: ${i}`,o)}d(rn,"createChunkDecodeError"),K.createChunkDecodeError=rn;class an extends Error{constructor(u,i,o){super(i),this.offset=o,this.partiallyDecodedImage={details:"header"in u&&u.header?{width:u.header.width,height:u.header.height,bitDepth:u.header.bitDepth,colorType:u.header.colorType,interlaceMethod:u.header.interlaceMethod}:void 0,info:u.info,metadata:u.metadata,rawChunks:u.rawChunks,warnings:u.warnings}}}d(an,"DecodeError"),K.DecodeError=an;function at(r,u,i){return new on(`${r.type}: ${u}`,i)}d(at,"createChunkDecodeWarning"),K.createChunkDecodeWarning=at;class on extends Error{constructor(u,i){super(u),this.offset=i}}d(on,"DecodeWarning"),K.DecodeWarning=on;function it(r,u){if(r.options.strictMode)throw u;r.warnings.push(u)}d(it,"handleWarning$1"),K.handleWarning=it;var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.handleWarning=Be.EncodeWarning=Be.EncodeError=void 0;class mn extends Error{constructor(u,i){super(u),this.offset=i}}d(mn,"EncodeError"),Be.EncodeError=mn;class kn extends Error{constructor(u,i){super(u),this.offset=i}}d(kn,"EncodeWarning"),Be.EncodeWarning=kn;function Wr(r,u){if(r.options.strictMode)throw u;r.warnings.push(u)}d(Wr,"handleWarning"),Be.handleWarning=Wr;var ze={},ft={},Cn;function Gr(){if(Cn)return ft;Cn=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.convert16BitTo8BitData=void 0;function r(u){const i=new Uint8Array(u.buffer),o=new Uint8Array(u.length);for(let a=0;a<o.length;a++)o[a]=i[a*2+1];return o}return d(r,"convert16BitTo8BitData"),ft.convert16BitTo8BitData=r,ft}d(Gr,"requireArray");var ct={},Fe={},Ke={},Ne={},Je={},En;function Yr(){if(En)return Je;En=1;const r=4,u=0,i=1,o=2;function a(s){let z=s.length;for(;--z>=0;)s[z]=0}d(a,"zero");const t=0,h=1,_=2,v=3,p=258,y=29,T=256,L=T+1+y,R=30,j=19,w=2*L+1,l=15,E=16,S=7,D=256,c=16,g=17,C=18,M=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Z=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),A=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ee=512,Y=new Array((L+2)*2);a(Y);const $=new Array(R*2);a($);const ie=new Array(ee);a(ie);const de=new Array(p-v+1);a(de);const _e=new Array(y);a(_e);const se=new Array(R);a(se);function le(s,z,F,W,X){this.static_tree=s,this.extra_bits=z,this.extra_base=F,this.elems=W,this.max_length=X,this.has_stree=s&&s.length}d(le,"StaticTreeDesc");let Ee,Q,ce;function fe(s,z){this.dyn_tree=s,this.max_code=0,this.stat_desc=z}d(fe,"TreeDesc");const ke=d(s=>s<256?ie[s]:ie[256+(s>>>7)],"d_code"),we=d((s,z)=>{s.pending_buf[s.pending++]=z&255,s.pending_buf[s.pending++]=z>>>8&255},"put_short"),re=d((s,z,F)=>{s.bi_valid>E-F?(s.bi_buf|=z<<s.bi_valid&65535,we(s,s.bi_buf),s.bi_buf=z>>E-s.bi_valid,s.bi_valid+=F-E):(s.bi_buf|=z<<s.bi_valid&65535,s.bi_valid+=F)},"send_bits"),ge=d((s,z,F)=>{re(s,F[z*2],F[z*2+1])},"send_code"),He=d((s,z)=>{let F=0;do F|=s&1,s>>>=1,F<<=1;while(--z>0);return F>>>1},"bi_reverse"),We=d(s=>{s.bi_valid===16?(we(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)},"bi_flush"),Ye=d((s,z)=>{const F=z.dyn_tree,W=z.max_code,X=z.stat_desc.static_tree,J=z.stat_desc.has_stree,b=z.stat_desc.extra_bits,P=z.stat_desc.extra_base,n=z.stat_desc.max_length;let N,te,q,ne,H,he,I=0;for(ne=0;ne<=l;ne++)s.bl_count[ne]=0;for(F[s.heap[s.heap_max]*2+1]=0,N=s.heap_max+1;N<w;N++)te=s.heap[N],ne=F[F[te*2+1]*2+1]+1,ne>n&&(ne=n,I++),F[te*2+1]=ne,!(te>W)&&(s.bl_count[ne]++,H=0,te>=P&&(H=b[te-P]),he=F[te*2],s.opt_len+=he*(ne+H),J&&(s.static_len+=he*(X[te*2+1]+H)));if(I!==0){do{for(ne=n-1;s.bl_count[ne]===0;)ne--;s.bl_count[ne]--,s.bl_count[ne+1]+=2,s.bl_count[n]--,I-=2}while(I>0);for(ne=n;ne!==0;ne--)for(te=s.bl_count[ne];te!==0;)q=s.heap[--N],!(q>W)&&(F[q*2+1]!==ne&&(s.opt_len+=(ne-F[q*2+1])*F[q*2],F[q*2+1]=ne),te--)}},"gen_bitlen"),xe=d((s,z,F)=>{const W=new Array(l+1);let X=0,J,b;for(J=1;J<=l;J++)X=X+F[J-1]<<1,W[J]=X;for(b=0;b<=z;b++){let P=s[b*2+1];P!==0&&(s[b*2]=He(W[P]++,P))}},"gen_codes"),ue=d(()=>{let s,z,F,W,X;const J=new Array(l+1);for(F=0,W=0;W<y-1;W++)for(_e[W]=F,s=0;s<1<<M[W];s++)de[F++]=W;for(de[F-1]=W,X=0,W=0;W<16;W++)for(se[W]=X,s=0;s<1<<Z[W];s++)ie[X++]=W;for(X>>=7;W<R;W++)for(se[W]=X<<7,s=0;s<1<<Z[W]-7;s++)ie[256+X++]=W;for(z=0;z<=l;z++)J[z]=0;for(s=0;s<=143;)Y[s*2+1]=8,s++,J[8]++;for(;s<=255;)Y[s*2+1]=9,s++,J[9]++;for(;s<=279;)Y[s*2+1]=7,s++,J[7]++;for(;s<=287;)Y[s*2+1]=8,s++,J[8]++;for(xe(Y,L+1,J),s=0;s<R;s++)$[s*2+1]=5,$[s*2]=He(s,5);Ee=new le(Y,M,T+1,L,l),Q=new le($,Z,0,R,l),ce=new le(new Array(0),A,0,j,S)},"tr_static_init"),ve=d(s=>{let z;for(z=0;z<L;z++)s.dyn_ltree[z*2]=0;for(z=0;z<R;z++)s.dyn_dtree[z*2]=0;for(z=0;z<j;z++)s.bl_tree[z*2]=0;s.dyn_ltree[D*2]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},"init_block"),Ue=d(s=>{s.bi_valid>8?we(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},"bi_windup"),Me=d((s,z,F,W)=>{const X=z*2,J=F*2;return s[X]<s[J]||s[X]===s[J]&&W[z]<=W[F]},"smaller"),Le=d((s,z,F)=>{const W=s.heap[F];let X=F<<1;for(;X<=s.heap_len&&(X<s.heap_len&&Me(z,s.heap[X+1],s.heap[X],s.depth)&&X++,!Me(z,W,s.heap[X],s.depth));)s.heap[F]=s.heap[X],F=X,X<<=1;s.heap[F]=W},"pqdownheap"),Wt=d((s,z,F)=>{let W,X,J=0,b,P;if(s.sym_next!==0)do W=s.pending_buf[s.sym_buf+J++]&255,W+=(s.pending_buf[s.sym_buf+J++]&255)<<8,X=s.pending_buf[s.sym_buf+J++],W===0?ge(s,X,z):(b=de[X],ge(s,b+T+1,z),P=M[b],P!==0&&(X-=_e[b],re(s,X,P)),W--,b=ke(W),ge(s,b,F),P=Z[b],P!==0&&(W-=se[b],re(s,W,P)));while(J<s.sym_next);ge(s,D,z)},"compress_block"),Se=d((s,z)=>{const F=z.dyn_tree,W=z.stat_desc.static_tree,X=z.stat_desc.has_stree,J=z.stat_desc.elems;let b,P,n=-1,N;for(s.heap_len=0,s.heap_max=w,b=0;b<J;b++)F[b*2]!==0?(s.heap[++s.heap_len]=n=b,s.depth[b]=0):F[b*2+1]=0;for(;s.heap_len<2;)N=s.heap[++s.heap_len]=n<2?++n:0,F[N*2]=1,s.depth[N]=0,s.opt_len--,X&&(s.static_len-=W[N*2+1]);for(z.max_code=n,b=s.heap_len>>1;b>=1;b--)Le(s,F,b);N=J;do b=s.heap[1],s.heap[1]=s.heap[s.heap_len--],Le(s,F,1),P=s.heap[1],s.heap[--s.heap_max]=b,s.heap[--s.heap_max]=P,F[N*2]=F[b*2]+F[P*2],s.depth[N]=(s.depth[b]>=s.depth[P]?s.depth[b]:s.depth[P])+1,F[b*2+1]=F[P*2+1]=N,s.heap[1]=N++,Le(s,F,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],Ye(s,z),xe(F,n,s.bl_count)},"build_tree"),Xe=d((s,z,F)=>{let W,X=-1,J,b=z[0*2+1],P=0,n=7,N=4;for(b===0&&(n=138,N=3),z[(F+1)*2+1]=65535,W=0;W<=F;W++)J=b,b=z[(W+1)*2+1],!(++P<n&&J===b)&&(P<N?s.bl_tree[J*2]+=P:J!==0?(J!==X&&s.bl_tree[J*2]++,s.bl_tree[c*2]++):P<=10?s.bl_tree[g*2]++:s.bl_tree[C*2]++,P=0,X=J,b===0?(n=138,N=3):J===b?(n=6,N=3):(n=7,N=4))},"scan_tree"),Re=d((s,z,F)=>{let W,X=-1,J,b=z[0*2+1],P=0,n=7,N=4;for(b===0&&(n=138,N=3),W=0;W<=F;W++)if(J=b,b=z[(W+1)*2+1],!(++P<n&&J===b)){if(P<N)do ge(s,J,s.bl_tree);while(--P!==0);else J!==0?(J!==X&&(ge(s,J,s.bl_tree),P--),ge(s,c,s.bl_tree),re(s,P-3,2)):P<=10?(ge(s,g,s.bl_tree),re(s,P-3,3)):(ge(s,C,s.bl_tree),re(s,P-11,7));P=0,X=J,b===0?(n=138,N=3):J===b?(n=6,N=3):(n=7,N=4)}},"send_tree"),qe=d(s=>{let z;for(Xe(s,s.dyn_ltree,s.l_desc.max_code),Xe(s,s.dyn_dtree,s.d_desc.max_code),Se(s,s.bl_desc),z=j-1;z>=3&&s.bl_tree[O[z]*2+1]===0;z--);return s.opt_len+=3*(z+1)+5+5+4,z},"build_bl_tree"),Gt=d((s,z,F,W)=>{let X;for(re(s,z-257,5),re(s,F-1,5),re(s,W-4,4),X=0;X<W;X++)re(s,s.bl_tree[O[X]*2+1],3);Re(s,s.dyn_ltree,z-1),Re(s,s.dyn_dtree,F-1)},"send_all_trees"),Ae=d(s=>{let z=4093624447,F;for(F=0;F<=31;F++,z>>>=1)if(z&1&&s.dyn_ltree[F*2]!==0)return u;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return i;for(F=32;F<T;F++)if(s.dyn_ltree[F*2]!==0)return i;return u},"detect_data_type");let me=!1;const Ce=d(s=>{me||(ue(),me=!0),s.l_desc=new fe(s.dyn_ltree,Ee),s.d_desc=new fe(s.dyn_dtree,Q),s.bl_desc=new fe(s.bl_tree,ce),s.bi_buf=0,s.bi_valid=0,ve(s)},"_tr_init"),ae=d((s,z,F,W)=>{re(s,(t<<1)+(W?1:0),3),Ue(s),we(s,F),we(s,~F),F&&s.pending_buf.set(s.window.subarray(z,z+F),s.pending),s.pending+=F},"_tr_stored_block"),$e=d(s=>{re(s,h<<1,3),ge(s,D,Y),We(s)},"_tr_align"),Ge=d((s,z,F,W)=>{let X,J,b=0;s.level>0?(s.strm.data_type===o&&(s.strm.data_type=Ae(s)),Se(s,s.l_desc),Se(s,s.d_desc),b=qe(s),X=s.opt_len+3+7>>>3,J=s.static_len+3+7>>>3,J<=X&&(X=J)):X=J=F+5,F+4<=X&&z!==-1?ae(s,z,F,W):s.strategy===r||J===X?(re(s,(h<<1)+(W?1:0),3),Wt(s,Y,$)):(re(s,(_<<1)+(W?1:0),3),Gt(s,s.l_desc.max_code+1,s.d_desc.max_code+1,b+1),Wt(s,s.dyn_ltree,s.dyn_dtree)),ve(s),W&&Ue(s)},"_tr_flush_block"),Ve=d((s,z,F)=>(s.pending_buf[s.sym_buf+s.sym_next++]=z,s.pending_buf[s.sym_buf+s.sym_next++]=z>>8,s.pending_buf[s.sym_buf+s.sym_next++]=F,z===0?s.dyn_ltree[F*2]++:(s.matches++,z--,s.dyn_ltree[(de[F]+T+1)*2]++,s.dyn_dtree[ke(z)*2]++),s.sym_next===s.sym_end),"_tr_tally");return Je._tr_init=Ce,Je._tr_stored_block=ae,Je._tr_flush_block=Ge,Je._tr_tally=Ve,Je._tr_align=$e,Je}d(Yr,"requireTrees");var sn,Dn;function Tn(){return Dn||(Dn=1,sn=d((u,i,o,a)=>{let t=u&65535|0,h=u>>>16&65535|0,_=0;for(;o!==0;){_=o>2e3?2e3:o,o-=_;do t=t+i[a++]|0,h=h+t|0;while(--_);t%=65521,h%=65521}return t|h<<16|0},"adler32")),sn}d(Tn,"requireAdler32");var ln,xn;function Sn(){if(xn)return ln;xn=1;const r=d(()=>{let o,a=[];for(var t=0;t<256;t++){o=t;for(var h=0;h<8;h++)o=o&1?3988292384^o>>>1:o>>>1;a[t]=o}return a},"makeTable"),u=new Uint32Array(r());return ln=d((o,a,t,h)=>{const _=u,v=h+t;o^=-1;for(let p=h;p<v;p++)o=o>>>8^_[(o^a[p])&255];return o^-1},"crc32"),ln}d(Sn,"requireCrc32$1");var un,Rn;function fn(){return Rn||(Rn=1,un={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),un}d(fn,"requireMessages");var cn,An;function Qe(){return An||(An=1,cn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),cn}d(Qe,"requireConstants");var In;function Xr(){if(In)return Ne;In=1;const{_tr_init:r,_tr_stored_block:u,_tr_flush_block:i,_tr_tally:o,_tr_align:a}=Yr(),t=Tn(),h=Sn(),_=fn(),{Z_NO_FLUSH:v,Z_PARTIAL_FLUSH:p,Z_FULL_FLUSH:y,Z_FINISH:T,Z_BLOCK:L,Z_OK:R,Z_STREAM_END:j,Z_STREAM_ERROR:w,Z_DATA_ERROR:l,Z_BUF_ERROR:E,Z_DEFAULT_COMPRESSION:S,Z_FILTERED:D,Z_HUFFMAN_ONLY:c,Z_RLE:g,Z_FIXED:C,Z_DEFAULT_STRATEGY:M,Z_UNKNOWN:Z,Z_DEFLATED:A}=Qe(),O=9,ee=15,Y=8,$=29,de=256+1+$,_e=30,se=19,le=2*de+1,Ee=15,Q=3,ce=258,fe=ce+Q+1,ke=32,we=42,re=57,ge=69,He=73,We=91,Ye=103,xe=113,ue=666,ve=1,Ue=2,Me=3,Le=4,Wt=3,Se=d((e,x)=>(e.msg=_[x],x),"err"),Xe=d(e=>e*2-(e>4?9:0),"rank"),Re=d(e=>{let x=e.length;for(;--x>=0;)e[x]=0},"zero"),qe=d(e=>{let x,f,m,k=e.w_size;x=e.hash_size,m=x;do f=e.head[--m],e.head[m]=f>=k?f-k:0;while(--x);x=k,m=x;do f=e.prev[--m],e.prev[m]=f>=k?f-k:0;while(--x)},"slide_hash");let Ae=d((e,x,f)=>(x<<e.hash_shift^f)&e.hash_mask,"HASH_ZLIB");const me=d(e=>{const x=e.state;let f=x.pending;f>e.avail_out&&(f=e.avail_out),f!==0&&(e.output.set(x.pending_buf.subarray(x.pending_out,x.pending_out+f),e.next_out),e.next_out+=f,x.pending_out+=f,e.total_out+=f,e.avail_out-=f,x.pending-=f,x.pending===0&&(x.pending_out=0))},"flush_pending"),Ce=d((e,x)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,x),e.block_start=e.strstart,me(e.strm)},"flush_block_only"),ae=d((e,x)=>{e.pending_buf[e.pending++]=x},"put_byte"),$e=d((e,x)=>{e.pending_buf[e.pending++]=x>>>8&255,e.pending_buf[e.pending++]=x&255},"putShortMSB"),Ge=d((e,x,f,m)=>{let k=e.avail_in;return k>m&&(k=m),k===0?0:(e.avail_in-=k,x.set(e.input.subarray(e.next_in,e.next_in+k),f),e.state.wrap===1?e.adler=t(e.adler,x,k,f):e.state.wrap===2&&(e.adler=h(e.adler,x,k,f)),e.next_in+=k,e.total_in+=k,k)},"read_buf"),Ve=d((e,x)=>{let f=e.max_chain_length,m=e.strstart,k,B,V=e.prev_length,G=e.nice_match;const De=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,oe=e.window,be=e.w_mask,Te=e.prev,ye=e.strstart+ce;let Oe=oe[m+V-1],Ie=oe[m+V];e.prev_length>=e.good_match&&(f>>=2),G>e.lookahead&&(G=e.lookahead);do if(k=x,!(oe[k+V]!==Ie||oe[k+V-1]!==Oe||oe[k]!==oe[m]||oe[++k]!==oe[m+1])){m+=2,k++;do;while(oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&m<ye);if(B=ce-(ye-m),m=ye-ce,B>V){if(e.match_start=x,V=B,B>=G)break;Oe=oe[m+V-1],Ie=oe[m+V]}}while((x=Te[x&be])>De&&--f!==0);return V<=e.lookahead?V:e.lookahead},"longest_match"),s=d(e=>{const x=e.w_size;let f,m,k;do{if(m=e.window_size-e.lookahead-e.strstart,e.strstart>=x+(x-fe)&&(e.window.set(e.window.subarray(x,x+x-m),0),e.match_start-=x,e.strstart-=x,e.block_start-=x,e.insert>e.strstart&&(e.insert=e.strstart),qe(e),m+=x),e.strm.avail_in===0)break;if(f=Ge(e.strm,e.window,e.strstart+e.lookahead,m),e.lookahead+=f,e.lookahead+e.insert>=Q)for(k=e.strstart-e.insert,e.ins_h=e.window[k],e.ins_h=Ae(e,e.ins_h,e.window[k+1]);e.insert&&(e.ins_h=Ae(e,e.ins_h,e.window[k+Q-1]),e.prev[k&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=k,k++,e.insert--,!(e.lookahead+e.insert<Q)););}while(e.lookahead<fe&&e.strm.avail_in!==0)},"fill_window"),z=d((e,x)=>{let f=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,m,k,B,V=0,G=e.strm.avail_in;do{if(m=65535,B=e.bi_valid+42>>3,e.strm.avail_out<B||(B=e.strm.avail_out-B,k=e.strstart-e.block_start,m>k+e.strm.avail_in&&(m=k+e.strm.avail_in),m>B&&(m=B),m<f&&(m===0&&x!==T||x===v||m!==k+e.strm.avail_in)))break;V=x===T&&m===k+e.strm.avail_in?1:0,u(e,0,0,V),e.pending_buf[e.pending-4]=m,e.pending_buf[e.pending-3]=m>>8,e.pending_buf[e.pending-2]=~m,e.pending_buf[e.pending-1]=~m>>8,me(e.strm),k&&(k>m&&(k=m),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+k),e.strm.next_out),e.strm.next_out+=k,e.strm.avail_out-=k,e.strm.total_out+=k,e.block_start+=k,m-=k),m&&(Ge(e.strm,e.strm.output,e.strm.next_out,m),e.strm.next_out+=m,e.strm.avail_out-=m,e.strm.total_out+=m)}while(V===0);return G-=e.strm.avail_in,G&&(G>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=G&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-G,e.strm.next_in),e.strstart),e.strstart+=G,e.insert+=G>e.w_size-e.insert?e.w_size-e.insert:G),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),V?Le:x!==v&&x!==T&&e.strm.avail_in===0&&e.strstart===e.block_start?Ue:(B=e.window_size-e.strstart,e.strm.avail_in>B&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,B+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),B>e.strm.avail_in&&(B=e.strm.avail_in),B&&(Ge(e.strm,e.window,e.strstart,B),e.strstart+=B,e.insert+=B>e.w_size-e.insert?e.w_size-e.insert:B),e.high_water<e.strstart&&(e.high_water=e.strstart),B=e.bi_valid+42>>3,B=e.pending_buf_size-B>65535?65535:e.pending_buf_size-B,f=B>e.w_size?e.w_size:B,k=e.strstart-e.block_start,(k>=f||(k||x===T)&&x!==v&&e.strm.avail_in===0&&k<=B)&&(m=k>B?B:k,V=x===T&&e.strm.avail_in===0&&m===k?1:0,u(e,e.block_start,m,V),e.block_start+=m,me(e.strm)),V?Me:ve)},"deflate_stored"),F=d((e,x)=>{let f,m;for(;;){if(e.lookahead<fe){if(s(e),e.lookahead<fe&&x===v)return ve;if(e.lookahead===0)break}if(f=0,e.lookahead>=Q&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),f!==0&&e.strstart-f<=e.w_size-fe&&(e.match_length=Ve(e,f)),e.match_length>=Q)if(m=o(e,e.strstart-e.match_start,e.match_length-Q),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Q){e.match_length--;do e.strstart++,e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+1]);else m=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(m&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=e.strstart<Q-1?e.strstart:Q-1,x===T?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_fast"),W=d((e,x)=>{let f,m,k;for(;;){if(e.lookahead<fe){if(s(e),e.lookahead<fe&&x===v)return ve;if(e.lookahead===0)break}if(f=0,e.lookahead>=Q&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Q-1,f!==0&&e.prev_length<e.max_lazy_match&&e.strstart-f<=e.w_size-fe&&(e.match_length=Ve(e,f),e.match_length<=5&&(e.strategy===D||e.match_length===Q&&e.strstart-e.match_start>4096)&&(e.match_length=Q-1)),e.prev_length>=Q&&e.match_length<=e.prev_length){k=e.strstart+e.lookahead-Q,m=o(e,e.strstart-1-e.prev_match,e.prev_length-Q),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=k&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Q-1,e.strstart++,m&&(Ce(e,!1),e.strm.avail_out===0))return ve}else if(e.match_available){if(m=o(e,0,e.window[e.strstart-1]),m&&Ce(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ve}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(m=o(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Q-1?e.strstart:Q-1,x===T?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_slow"),X=d((e,x)=>{let f,m,k,B;const V=e.window;for(;;){if(e.lookahead<=ce){if(s(e),e.lookahead<=ce&&x===v)return ve;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Q&&e.strstart>0&&(k=e.strstart-1,m=V[k],m===V[++k]&&m===V[++k]&&m===V[++k])){B=e.strstart+ce;do;while(m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&k<B);e.match_length=ce-(B-k),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Q?(f=o(e,1,e.match_length-Q),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(f=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),f&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=0,x===T?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_rle"),J=d((e,x)=>{let f;for(;;){if(e.lookahead===0&&(s(e),e.lookahead===0)){if(x===v)return ve;break}if(e.match_length=0,f=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,f&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=0,x===T?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_huff");function b(e,x,f,m,k){this.good_length=e,this.max_lazy=x,this.nice_length=f,this.max_chain=m,this.func=k}d(b,"Config");const P=[new b(0,0,0,0,z),new b(4,4,8,4,F),new b(4,5,16,8,F),new b(4,6,32,32,F),new b(4,4,16,16,W),new b(8,16,32,32,W),new b(8,16,128,128,W),new b(8,32,128,256,W),new b(32,128,258,1024,W),new b(32,258,258,4096,W)],n=d(e=>{e.window_size=2*e.w_size,Re(e.head),e.max_lazy_match=P[e.level].max_lazy,e.good_match=P[e.level].good_length,e.nice_match=P[e.level].nice_length,e.max_chain_length=P[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Q-1,e.match_available=0,e.ins_h=0},"lm_init");function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(le*2),this.dyn_dtree=new Uint16Array((2*_e+1)*2),this.bl_tree=new Uint16Array((2*se+1)*2),Re(this.dyn_ltree),Re(this.dyn_dtree),Re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ee+1),this.heap=new Uint16Array(2*de+1),Re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*de+1),Re(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}d(N,"DeflateState");const te=d(e=>{if(!e)return 1;const x=e.state;return!x||x.strm!==e||x.status!==we&&x.status!==re&&x.status!==ge&&x.status!==He&&x.status!==We&&x.status!==Ye&&x.status!==xe&&x.status!==ue?1:0},"deflateStateCheck"),q=d(e=>{if(te(e))return Se(e,w);e.total_in=e.total_out=0,e.data_type=Z;const x=e.state;return x.pending=0,x.pending_out=0,x.wrap<0&&(x.wrap=-x.wrap),x.status=x.wrap===2?re:x.wrap?we:xe,e.adler=x.wrap===2?0:1,x.last_flush=-2,r(x),R},"deflateResetKeep"),ne=d(e=>{const x=q(e);return x===R&&n(e.state),x},"deflateReset"),H=d((e,x)=>te(e)||e.state.wrap!==2?w:(e.state.gzhead=x,R),"deflateSetHeader"),he=d((e,x,f,m,k,B)=>{if(!e)return w;let V=1;if(x===S&&(x=6),m<0?(V=0,m=-m):m>15&&(V=2,m-=16),k<1||k>O||f!==A||m<8||m>15||x<0||x>9||B<0||B>C||m===8&&V!==1)return Se(e,w);m===8&&(m=9);const G=new N;return e.state=G,G.strm=e,G.status=we,G.wrap=V,G.gzhead=null,G.w_bits=m,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=k+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+Q-1)/Q),G.window=new Uint8Array(G.w_size*2),G.head=new Uint16Array(G.hash_size),G.prev=new Uint16Array(G.w_size),G.lit_bufsize=1<<k+6,G.pending_buf_size=G.lit_bufsize*4,G.pending_buf=new Uint8Array(G.pending_buf_size),G.sym_buf=G.lit_bufsize,G.sym_end=(G.lit_bufsize-1)*3,G.level=x,G.strategy=B,G.method=f,ne(e)},"deflateInit2"),I=d((e,x)=>he(e,x,A,ee,Y,M),"deflateInit"),U=d((e,x)=>{if(te(e)||x>L||x<0)return e?Se(e,w):w;const f=e.state;if(!e.output||e.avail_in!==0&&!e.input||f.status===ue&&x!==T)return Se(e,e.avail_out===0?E:w);const m=f.last_flush;if(f.last_flush=x,f.pending!==0){if(me(e),e.avail_out===0)return f.last_flush=-1,R}else if(e.avail_in===0&&Xe(x)<=Xe(m)&&x!==T)return Se(e,E);if(f.status===ue&&e.avail_in!==0)return Se(e,E);if(f.status===we&&f.wrap===0&&(f.status=xe),f.status===we){let k=A+(f.w_bits-8<<4)<<8,B=-1;if(f.strategy>=c||f.level<2?B=0:f.level<6?B=1:f.level===6?B=2:B=3,k|=B<<6,f.strstart!==0&&(k|=ke),k+=31-k%31,$e(f,k),f.strstart!==0&&($e(f,e.adler>>>16),$e(f,e.adler&65535)),e.adler=1,f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(f.status===re){if(e.adler=0,ae(f,31),ae(f,139),ae(f,8),f.gzhead)ae(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),ae(f,f.gzhead.time&255),ae(f,f.gzhead.time>>8&255),ae(f,f.gzhead.time>>16&255),ae(f,f.gzhead.time>>24&255),ae(f,f.level===9?2:f.strategy>=c||f.level<2?4:0),ae(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(ae(f,f.gzhead.extra.length&255),ae(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(e.adler=h(e.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=ge;else if(ae(f,0),ae(f,0),ae(f,0),ae(f,0),ae(f,0),ae(f,f.level===9?2:f.strategy>=c||f.level<2?4:0),ae(f,Wt),f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(f.status===ge){if(f.gzhead.extra){let k=f.pending,B=(f.gzhead.extra.length&65535)-f.gzindex;for(;f.pending+B>f.pending_buf_size;){let G=f.pending_buf_size-f.pending;if(f.pending_buf.set(f.gzhead.extra.subarray(f.gzindex,f.gzindex+G),f.pending),f.pending=f.pending_buf_size,f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex+=G,me(e),f.pending!==0)return f.last_flush=-1,R;k=0,B-=G}let V=new Uint8Array(f.gzhead.extra);f.pending_buf.set(V.subarray(f.gzindex,f.gzindex+B),f.pending),f.pending+=B,f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex=0}f.status=He}if(f.status===He){if(f.gzhead.name){let k=f.pending,B;do{if(f.pending===f.pending_buf_size){if(f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k)),me(e),f.pending!==0)return f.last_flush=-1,R;k=0}f.gzindex<f.gzhead.name.length?B=f.gzhead.name.charCodeAt(f.gzindex++)&255:B=0,ae(f,B)}while(B!==0);f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex=0}f.status=We}if(f.status===We){if(f.gzhead.comment){let k=f.pending,B;do{if(f.pending===f.pending_buf_size){if(f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k)),me(e),f.pending!==0)return f.last_flush=-1,R;k=0}f.gzindex<f.gzhead.comment.length?B=f.gzhead.comment.charCodeAt(f.gzindex++)&255:B=0,ae(f,B)}while(B!==0);f.gzhead.hcrc&&f.pending>k&&(e.adler=h(e.adler,f.pending_buf,f.pending-k,k))}f.status=Ye}if(f.status===Ye){if(f.gzhead.hcrc){if(f.pending+2>f.pending_buf_size&&(me(e),f.pending!==0))return f.last_flush=-1,R;ae(f,e.adler&255),ae(f,e.adler>>8&255),e.adler=0}if(f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(e.avail_in!==0||f.lookahead!==0||x!==v&&f.status!==ue){let k=f.level===0?z(f,x):f.strategy===c?J(f,x):f.strategy===g?X(f,x):P[f.level].func(f,x);if((k===Me||k===Le)&&(f.status=ue),k===ve||k===Me)return e.avail_out===0&&(f.last_flush=-1),R;if(k===Ue&&(x===p?a(f):x!==L&&(u(f,0,0,!1),x===y&&(Re(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),me(e),e.avail_out===0))return f.last_flush=-1,R}return x!==T?R:f.wrap<=0?j:(f.wrap===2?(ae(f,e.adler&255),ae(f,e.adler>>8&255),ae(f,e.adler>>16&255),ae(f,e.adler>>24&255),ae(f,e.total_in&255),ae(f,e.total_in>>8&255),ae(f,e.total_in>>16&255),ae(f,e.total_in>>24&255)):($e(f,e.adler>>>16),$e(f,e.adler&65535)),me(e),f.wrap>0&&(f.wrap=-f.wrap),f.pending!==0?R:j)},"deflate$1"),lt=d(e=>{if(te(e))return w;const x=e.state.status;return e.state=null,x===xe?Se(e,l):R},"deflateEnd"),pe=d((e,x)=>{let f=x.length;if(te(e))return w;const m=e.state,k=m.wrap;if(k===2||k===1&&m.status!==we||m.lookahead)return w;if(k===1&&(e.adler=t(e.adler,x,f,0)),m.wrap=0,f>=m.w_size){k===0&&(Re(m.head),m.strstart=0,m.block_start=0,m.insert=0);let De=new Uint8Array(m.w_size);De.set(x.subarray(f-m.w_size,f),0),x=De,f=m.w_size}const B=e.avail_in,V=e.next_in,G=e.input;for(e.avail_in=f,e.next_in=0,e.input=x,s(m);m.lookahead>=Q;){let De=m.strstart,oe=m.lookahead-(Q-1);do m.ins_h=Ae(m,m.ins_h,m.window[De+Q-1]),m.prev[De&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=De,De++;while(--oe);m.strstart=De,m.lookahead=Q-1,s(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=Q-1,m.match_available=0,e.next_in=V,e.input=G,e.avail_in=B,m.wrap=k,R},"deflateSetDictionary");return Ne.deflateInit=I,Ne.deflateInit2=he,Ne.deflateReset=ne,Ne.deflateResetKeep=q,Ne.deflateSetHeader=H,Ne.deflate=U,Ne.deflateEnd=lt,Ne.deflateSetDictionary=pe,Ne.deflateInfo="pako deflate (from Nodeca project)",Ne}d(Xr,"requireDeflate$1");var Yt={},Pn;function Un(){if(Pn)return Yt;Pn=1;const r=d((u,i)=>Object.prototype.hasOwnProperty.call(u,i),"_has");return Yt.assign=function(u){const i=Array.prototype.slice.call(arguments,1);for(;i.length;){const o=i.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(const a in o)r(o,a)&&(u[a]=o[a])}}return u},Yt.flattenChunks=u=>{let i=0;for(let a=0,t=u.length;a<t;a++)i+=u[a].length;const o=new Uint8Array(i);for(let a=0,t=0,h=u.length;a<h;a++){let _=u[a];o.set(_,t),t+=_.length}return o},Yt}d(Un,"requireCommon");var dt={},Mn;function Ln(){if(Mn)return dt;Mn=1;let r=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}const u=new Uint8Array(256);for(let o=0;o<256;o++)u[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;u[254]=u[254]=1,dt.string2buf=o=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(o);let a,t,h,_,v,p=o.length,y=0;for(_=0;_<p;_++)t=o.charCodeAt(_),(t&64512)===55296&&_+1<p&&(h=o.charCodeAt(_+1),(h&64512)===56320&&(t=65536+(t-55296<<10)+(h-56320),_++)),y+=t<128?1:t<2048?2:t<65536?3:4;for(a=new Uint8Array(y),v=0,_=0;v<y;_++)t=o.charCodeAt(_),(t&64512)===55296&&_+1<p&&(h=o.charCodeAt(_+1),(h&64512)===56320&&(t=65536+(t-55296<<10)+(h-56320),_++)),t<128?a[v++]=t:t<2048?(a[v++]=192|t>>>6,a[v++]=128|t&63):t<65536?(a[v++]=224|t>>>12,a[v++]=128|t>>>6&63,a[v++]=128|t&63):(a[v++]=240|t>>>18,a[v++]=128|t>>>12&63,a[v++]=128|t>>>6&63,a[v++]=128|t&63);return a};const i=d((o,a)=>{if(a<65534&&o.subarray&&r)return String.fromCharCode.apply(null,o.length===a?o:o.subarray(0,a));let t="";for(let h=0;h<a;h++)t+=String.fromCharCode(o[h]);return t},"buf2binstring");return dt.buf2string=(o,a)=>{const t=a||o.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(o.subarray(0,a));let h,_;const v=new Array(t*2);for(_=0,h=0;h<t;){let p=o[h++];if(p<128){v[_++]=p;continue}let y=u[p];if(y>4){v[_++]=65533,h+=y-1;continue}for(p&=y===2?31:y===3?15:7;y>1&&h<t;)p=p<<6|o[h++]&63,y--;if(y>1){v[_++]=65533;continue}p<65536?v[_++]=p:(p-=65536,v[_++]=55296|p>>10&1023,v[_++]=56320|p&1023)}return i(v,_)},dt.utf8border=(o,a)=>{a=a||o.length,a>o.length&&(a=o.length);let t=a-1;for(;t>=0&&(o[t]&192)===128;)t--;return t<0||t===0?a:t+u[o[t]]>a?t:a},dt}d(Ln,"requireStrings");var dn,On;function zn(){if(On)return dn;On=1;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return d(r,"ZStream"),dn=r,dn}d(zn,"requireZstream");var Fn;function Vr(){if(Fn)return Ke;Fn=1;const r=Xr(),u=Un(),i=Ln(),o=fn(),a=zn(),t=Object.prototype.toString,{Z_NO_FLUSH:h,Z_SYNC_FLUSH:_,Z_FULL_FLUSH:v,Z_FINISH:p,Z_OK:y,Z_STREAM_END:T,Z_DEFAULT_COMPRESSION:L,Z_DEFAULT_STRATEGY:R,Z_DEFLATED:j}=Qe();function w(D){this.options=u.assign({level:L,method:j,chunkSize:16384,windowBits:15,memLevel:8,strategy:R},D||{});let c=this.options;c.raw&&c.windowBits>0?c.windowBits=-c.windowBits:c.gzip&&c.windowBits>0&&c.windowBits<16&&(c.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let g=r.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(g!==y)throw new Error(o[g]);if(c.header&&r.deflateSetHeader(this.strm,c.header),c.dictionary){let C;if(typeof c.dictionary=="string"?C=i.string2buf(c.dictionary):t.call(c.dictionary)==="[object ArrayBuffer]"?C=new Uint8Array(c.dictionary):C=c.dictionary,g=r.deflateSetDictionary(this.strm,C),g!==y)throw new Error(o[g]);this._dict_set=!0}}d(w,"Deflate"),w.prototype.push=function(D,c){const g=this.strm,C=this.options.chunkSize;let M,Z;if(this.ended)return!1;for(c===~~c?Z=c:Z=c===!0?p:h,typeof D=="string"?g.input=i.string2buf(D):t.call(D)==="[object ArrayBuffer]"?g.input=new Uint8Array(D):g.input=D,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(C),g.next_out=0,g.avail_out=C),(Z===_||Z===v)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(M=r.deflate(g,Z),M===T)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),M=r.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===y;if(g.avail_out===0){this.onData(g.output);continue}if(Z>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},w.prototype.onData=function(D){this.chunks.push(D)},w.prototype.onEnd=function(D){D===y&&(this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=D,this.msg=this.strm.msg};function l(D,c){const g=new w(c);if(g.push(D,!0),g.err)throw g.msg||o[g.err];return g.result}d(l,"deflate");function E(D,c){return c=c||{},c.raw=!0,l(D,c)}d(E,"deflateRaw");function S(D,c){return c=c||{},c.gzip=!0,l(D,c)}return d(S,"gzip"),Ke.Deflate=w,Ke.deflate=l,Ke.deflateRaw=E,Ke.gzip=S,Ke.constants=Qe(),Ke}d(Vr,"requireDeflate");var et={},Pe={},hn,Nn;function Kr(){if(Nn)return hn;Nn=1;const r=16209,u=16191;return hn=d(function(o,a){let t,h,_,v,p,y,T,L,R,j,w,l,E,S,D,c,g,C,M,Z,A,O,ee,Y;const $=o.state;t=o.next_in,ee=o.input,h=t+(o.avail_in-5),_=o.next_out,Y=o.output,v=_-(a-o.avail_out),p=_+(o.avail_out-257),y=$.dmax,T=$.wsize,L=$.whave,R=$.wnext,j=$.window,w=$.hold,l=$.bits,E=$.lencode,S=$.distcode,D=(1<<$.lenbits)-1,c=(1<<$.distbits)-1;e:do{l<15&&(w+=ee[t++]<<l,l+=8,w+=ee[t++]<<l,l+=8),g=E[w&D];t:for(;;){if(C=g>>>24,w>>>=C,l-=C,C=g>>>16&255,C===0)Y[_++]=g&65535;else if(C&16){M=g&65535,C&=15,C&&(l<C&&(w+=ee[t++]<<l,l+=8),M+=w&(1<<C)-1,w>>>=C,l-=C),l<15&&(w+=ee[t++]<<l,l+=8,w+=ee[t++]<<l,l+=8),g=S[w&c];n:for(;;){if(C=g>>>24,w>>>=C,l-=C,C=g>>>16&255,C&16){if(Z=g&65535,C&=15,l<C&&(w+=ee[t++]<<l,l+=8,l<C&&(w+=ee[t++]<<l,l+=8)),Z+=w&(1<<C)-1,Z>y){o.msg="invalid distance too far back",$.mode=r;break e}if(w>>>=C,l-=C,C=_-v,Z>C){if(C=Z-C,C>L&&$.sane){o.msg="invalid distance too far back",$.mode=r;break e}if(A=0,O=j,R===0){if(A+=T-C,C<M){M-=C;do Y[_++]=j[A++];while(--C);A=_-Z,O=Y}}else if(R<C){if(A+=T+R-C,C-=R,C<M){M-=C;do Y[_++]=j[A++];while(--C);if(A=0,R<M){C=R,M-=C;do Y[_++]=j[A++];while(--C);A=_-Z,O=Y}}}else if(A+=R-C,C<M){M-=C;do Y[_++]=j[A++];while(--C);A=_-Z,O=Y}for(;M>2;)Y[_++]=O[A++],Y[_++]=O[A++],Y[_++]=O[A++],M-=3;M&&(Y[_++]=O[A++],M>1&&(Y[_++]=O[A++]))}else{A=_-Z;do Y[_++]=Y[A++],Y[_++]=Y[A++],Y[_++]=Y[A++],M-=3;while(M>2);M&&(Y[_++]=Y[A++],M>1&&(Y[_++]=Y[A++]))}}else if(C&64){o.msg="invalid distance code",$.mode=r;break e}else{g=S[(g&65535)+(w&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){$.mode=u;break e}else{o.msg="invalid literal/length code",$.mode=r;break e}else{g=E[(g&65535)+(w&(1<<C)-1)];continue t}break}}while(t<h&&_<p);M=l>>3,t-=M,l-=M<<3,w&=(1<<l)-1,o.next_in=t,o.next_out=_,o.avail_in=t<h?5+(h-t):5-(t-h),o.avail_out=_<p?257+(p-_):257-(_-p),$.hold=w,$.bits=l},"inflate_fast"),hn}d(Kr,"requireInffast");var _n,jn;function Jr(){if(jn)return _n;jn=1;const r=15,u=852,i=592,o=0,a=1,t=2,h=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),v=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);return _n=d((T,L,R,j,w,l,E,S)=>{const D=S.bits;let c=0,g=0,C=0,M=0,Z=0,A=0,O=0,ee=0,Y=0,$=0,ie,de,_e,se,le,Ee=null,Q;const ce=new Uint16Array(r+1),fe=new Uint16Array(r+1);let ke=null,we,re,ge;for(c=0;c<=r;c++)ce[c]=0;for(g=0;g<j;g++)ce[L[R+g]]++;for(Z=D,M=r;M>=1&&ce[M]===0;M--);if(Z>M&&(Z=M),M===0)return w[l++]=1<<24|64<<16|0,w[l++]=1<<24|64<<16|0,S.bits=1,0;for(C=1;C<M&&ce[C]===0;C++);for(Z<C&&(Z=C),ee=1,c=1;c<=r;c++)if(ee<<=1,ee-=ce[c],ee<0)return-1;if(ee>0&&(T===o||M!==1))return-1;for(fe[1]=0,c=1;c<r;c++)fe[c+1]=fe[c]+ce[c];for(g=0;g<j;g++)L[R+g]!==0&&(E[fe[L[R+g]]++]=g);if(T===o?(Ee=ke=E,Q=20):T===a?(Ee=h,ke=_,Q=257):(Ee=v,ke=p,Q=0),$=0,g=0,c=C,le=l,A=Z,O=0,_e=-1,Y=1<<Z,se=Y-1,T===a&&Y>u||T===t&&Y>i)return 1;for(;;){we=c-O,E[g]+1<Q?(re=0,ge=E[g]):E[g]>=Q?(re=ke[E[g]-Q],ge=Ee[E[g]-Q]):(re=32+64,ge=0),ie=1<<c-O,de=1<<A,C=de;do de-=ie,w[le+($>>O)+de]=we<<24|re<<16|ge|0;while(de!==0);for(ie=1<<c-1;$&ie;)ie>>=1;if(ie!==0?($&=ie-1,$+=ie):$=0,g++,--ce[c]===0){if(c===M)break;c=L[R+E[g]]}if(c>Z&&($&se)!==_e){for(O===0&&(O=Z),le+=C,A=c-O,ee=1<<A;A+O<M&&(ee-=ce[A+O],!(ee<=0));)A++,ee<<=1;if(Y+=1<<A,T===a&&Y>u||T===t&&Y>i)return 1;_e=$&se,w[_e]=Z<<24|A<<16|le-l|0}}return $!==0&&(w[le+$]=c-O<<24|64<<16|0),S.bits=Z,0},"inflate_table"),_n}d(Jr,"requireInftrees");var qn;function Qr(){if(qn)return Pe;qn=1;const r=Tn(),u=Sn(),i=Kr(),o=Jr(),a=0,t=1,h=2,{Z_FINISH:_,Z_BLOCK:v,Z_TREES:p,Z_OK:y,Z_STREAM_END:T,Z_NEED_DICT:L,Z_STREAM_ERROR:R,Z_DATA_ERROR:j,Z_MEM_ERROR:w,Z_BUF_ERROR:l,Z_DEFLATED:E}=Qe(),S=16180,D=16181,c=16182,g=16183,C=16184,M=16185,Z=16186,A=16187,O=16188,ee=16189,Y=16190,$=16191,ie=16192,de=16193,_e=16194,se=16195,le=16196,Ee=16197,Q=16198,ce=16199,fe=16200,ke=16201,we=16202,re=16203,ge=16204,He=16205,We=16206,Ye=16207,xe=16208,ue=16209,ve=16210,Ue=16211,Me=852,Le=592,Se=15,Xe=d(b=>(b>>>24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24),"zswap32");function Re(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}d(Re,"InflateState");const qe=d(b=>{if(!b)return 1;const P=b.state;return!P||P.strm!==b||P.mode<S||P.mode>Ue?1:0},"inflateStateCheck"),Gt=d(b=>{if(qe(b))return R;const P=b.state;return b.total_in=b.total_out=P.total=0,b.msg="",P.wrap&&(b.adler=P.wrap&1),P.mode=S,P.last=0,P.havedict=0,P.flags=-1,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new Int32Array(Me),P.distcode=P.distdyn=new Int32Array(Le),P.sane=1,P.back=-1,y},"inflateResetKeep"),Ae=d(b=>{if(qe(b))return R;const P=b.state;return P.wsize=0,P.whave=0,P.wnext=0,Gt(b)},"inflateReset"),me=d((b,P)=>{let n;if(qe(b))return R;const N=b.state;return P<0?(n=0,P=-P):(n=(P>>4)+5,P<48&&(P&=15)),P&&(P<8||P>15)?R:(N.window!==null&&N.wbits!==P&&(N.window=null),N.wrap=n,N.wbits=P,Ae(b))},"inflateReset2"),Ce=d((b,P)=>{if(!b)return R;const n=new Re;b.state=n,n.strm=b,n.window=null,n.mode=S;const N=me(b,P);return N!==y&&(b.state=null),N},"inflateInit2"),ae=d(b=>Ce(b,Se),"inflateInit");let $e=!0,Ge,Ve;const s=d(b=>{if($e){Ge=new Int32Array(512),Ve=new Int32Array(32);let P=0;for(;P<144;)b.lens[P++]=8;for(;P<256;)b.lens[P++]=9;for(;P<280;)b.lens[P++]=7;for(;P<288;)b.lens[P++]=8;for(o(t,b.lens,0,288,Ge,0,b.work,{bits:9}),P=0;P<32;)b.lens[P++]=5;o(h,b.lens,0,32,Ve,0,b.work,{bits:5}),$e=!1}b.lencode=Ge,b.lenbits=9,b.distcode=Ve,b.distbits=5},"fixedtables"),z=d((b,P,n,N)=>{let te;const q=b.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new Uint8Array(q.wsize)),N>=q.wsize?(q.window.set(P.subarray(n-q.wsize,n),0),q.wnext=0,q.whave=q.wsize):(te=q.wsize-q.wnext,te>N&&(te=N),q.window.set(P.subarray(n-N,n-N+te),q.wnext),N-=te,N?(q.window.set(P.subarray(n-N,n),0),q.wnext=N,q.whave=q.wsize):(q.wnext+=te,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=te))),0},"updatewindow"),F=d((b,P)=>{let n,N,te,q,ne,H,he,I,U,lt,pe,e,x,f,m=0,k,B,V,G,De,oe,be,Te;const ye=new Uint8Array(4);let Oe,Ie;const Fr=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qe(b)||!b.output||!b.input&&b.avail_in!==0)return R;n=b.state,n.mode===$&&(n.mode=ie),ne=b.next_out,te=b.output,he=b.avail_out,q=b.next_in,N=b.input,H=b.avail_in,I=n.hold,U=n.bits,lt=H,pe=he,Te=y;e:for(;;)switch(n.mode){case S:if(n.wrap===0){n.mode=ie;break}for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&2&&I===35615){n.wbits===0&&(n.wbits=15),n.check=0,ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0),I=0,U=0,n.mode=D;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((I&255)<<8)+(I>>8))%31){b.msg="incorrect header check",n.mode=ue;break}if((I&15)!==E){b.msg="unknown compression method",n.mode=ue;break}if(I>>>=4,U-=4,be=(I&15)+8,n.wbits===0&&(n.wbits=be),be>15||be>n.wbits){b.msg="invalid window size",n.mode=ue;break}n.dmax=1<<n.wbits,n.flags=0,b.adler=n.check=1,n.mode=I&512?ee:$,I=0,U=0;break;case D:for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.flags=I,(n.flags&255)!==E){b.msg="unknown compression method",n.mode=ue;break}if(n.flags&57344){b.msg="unknown header flags set",n.mode=ue;break}n.head&&(n.head.text=I>>8&1),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0,n.mode=c;case c:for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.head&&(n.head.time=I),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,ye[2]=I>>>16&255,ye[3]=I>>>24&255,n.check=u(n.check,ye,4,0)),I=0,U=0,n.mode=g;case g:for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.head&&(n.head.xflags=I&255,n.head.os=I>>8),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0,n.mode=C;case C:if(n.flags&1024){for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.length=I,n.head&&(n.head.extra_len=I),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(n.flags&1024&&(e=n.length,e>H&&(e=H),e&&(n.head&&(be=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(N.subarray(q,q+e),be)),n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,n.length-=e),n.length))break e;n.length=0,n.mode=Z;case Z:if(n.flags&2048){if(H===0)break e;e=0;do be=N[q+e++],n.head&&be&&n.length<65536&&(n.head.name+=String.fromCharCode(be));while(be&&e<H);if(n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,be)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(n.flags&4096){if(H===0)break e;e=0;do be=N[q+e++],n.head&&be&&n.length<65536&&(n.head.comment+=String.fromCharCode(be));while(be&&e<H);if(n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,be)break e}else n.head&&(n.head.comment=null);n.mode=O;case O:if(n.flags&512){for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&4&&I!==(n.check&65535)){b.msg="header crc mismatch",n.mode=ue;break}I=0,U=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),b.adler=n.check=0,n.mode=$;break;case ee:for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}b.adler=n.check=Xe(I),I=0,U=0,n.mode=Y;case Y:if(n.havedict===0)return b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,L;b.adler=n.check=1,n.mode=$;case $:if(P===v||P===p)break e;case ie:if(n.last){I>>>=U&7,U-=U&7,n.mode=We;break}for(;U<3;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}switch(n.last=I&1,I>>>=1,U-=1,I&3){case 0:n.mode=de;break;case 1:if(s(n),n.mode=ce,P===p){I>>>=2,U-=2;break e}break;case 2:n.mode=le;break;case 3:b.msg="invalid block type",n.mode=ue}I>>>=2,U-=2;break;case de:for(I>>>=U&7,U-=U&7;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if((I&65535)!==(I>>>16^65535)){b.msg="invalid stored block lengths",n.mode=ue;break}if(n.length=I&65535,I=0,U=0,n.mode=_e,P===p)break e;case _e:n.mode=se;case se:if(e=n.length,e){if(e>H&&(e=H),e>he&&(e=he),e===0)break e;te.set(N.subarray(q,q+e),ne),H-=e,q+=e,he-=e,ne+=e,n.length-=e;break}n.mode=$;break;case le:for(;U<14;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.nlen=(I&31)+257,I>>>=5,U-=5,n.ndist=(I&31)+1,I>>>=5,U-=5,n.ncode=(I&15)+4,I>>>=4,U-=4,n.nlen>286||n.ndist>30){b.msg="too many length or distance symbols",n.mode=ue;break}n.have=0,n.mode=Ee;case Ee:for(;n.have<n.ncode;){for(;U<3;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.lens[Fr[n.have++]]=I&7,I>>>=3,U-=3}for(;n.have<19;)n.lens[Fr[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Oe={bits:n.lenbits},Te=o(a,n.lens,0,19,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,Te){b.msg="invalid code lengths set",n.mode=ue;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.nlen+n.ndist;){for(;m=n.lencode[I&(1<<n.lenbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(V<16)I>>>=k,U-=k,n.lens[n.have++]=V;else{if(V===16){for(Ie=k+2;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(I>>>=k,U-=k,n.have===0){b.msg="invalid bit length repeat",n.mode=ue;break}be=n.lens[n.have-1],e=3+(I&3),I>>>=2,U-=2}else if(V===17){for(Ie=k+3;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=k,U-=k,be=0,e=3+(I&7),I>>>=3,U-=3}else{for(Ie=k+7;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=k,U-=k,be=0,e=11+(I&127),I>>>=7,U-=7}if(n.have+e>n.nlen+n.ndist){b.msg="invalid bit length repeat",n.mode=ue;break}for(;e--;)n.lens[n.have++]=be}}if(n.mode===ue)break;if(n.lens[256]===0){b.msg="invalid code -- missing end-of-block",n.mode=ue;break}if(n.lenbits=9,Oe={bits:n.lenbits},Te=o(t,n.lens,0,n.nlen,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,Te){b.msg="invalid literal/lengths set",n.mode=ue;break}if(n.distbits=6,n.distcode=n.distdyn,Oe={bits:n.distbits},Te=o(h,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Oe),n.distbits=Oe.bits,Te){b.msg="invalid distances set",n.mode=ue;break}if(n.mode=ce,P===p)break e;case ce:n.mode=fe;case fe:if(H>=6&&he>=258){b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,i(b,pe),ne=b.next_out,te=b.output,he=b.avail_out,q=b.next_in,N=b.input,H=b.avail_in,I=n.hold,U=n.bits,n.mode===$&&(n.back=-1);break}for(n.back=0;m=n.lencode[I&(1<<n.lenbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(B&&!(B&240)){for(G=k,De=B,oe=V;m=n.lencode[oe+((I&(1<<G+De)-1)>>G)],k=m>>>24,B=m>>>16&255,V=m&65535,!(G+k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=G,U-=G,n.back+=G}if(I>>>=k,U-=k,n.back+=k,n.length=V,B===0){n.mode=He;break}if(B&32){n.back=-1,n.mode=$;break}if(B&64){b.msg="invalid literal/length code",n.mode=ue;break}n.extra=B&15,n.mode=ke;case ke:if(n.extra){for(Ie=n.extra;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.length+=I&(1<<n.extra)-1,I>>>=n.extra,U-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=we;case we:for(;m=n.distcode[I&(1<<n.distbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(!(B&240)){for(G=k,De=B,oe=V;m=n.distcode[oe+((I&(1<<G+De)-1)>>G)],k=m>>>24,B=m>>>16&255,V=m&65535,!(G+k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=G,U-=G,n.back+=G}if(I>>>=k,U-=k,n.back+=k,B&64){b.msg="invalid distance code",n.mode=ue;break}n.offset=V,n.extra=B&15,n.mode=re;case re:if(n.extra){for(Ie=n.extra;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.offset+=I&(1<<n.extra)-1,I>>>=n.extra,U-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){b.msg="invalid distance too far back",n.mode=ue;break}n.mode=ge;case ge:if(he===0)break e;if(e=pe-he,n.offset>e){if(e=n.offset-e,e>n.whave&&n.sane){b.msg="invalid distance too far back",n.mode=ue;break}e>n.wnext?(e-=n.wnext,x=n.wsize-e):x=n.wnext-e,e>n.length&&(e=n.length),f=n.window}else f=te,x=ne-n.offset,e=n.length;e>he&&(e=he),he-=e,n.length-=e;do te[ne++]=f[x++];while(--e);n.length===0&&(n.mode=fe);break;case He:if(he===0)break e;te[ne++]=n.length,he--,n.mode=fe;break;case We:if(n.wrap){for(;U<32;){if(H===0)break e;H--,I|=N[q++]<<U,U+=8}if(pe-=he,b.total_out+=pe,n.total+=pe,n.wrap&4&&pe&&(b.adler=n.check=n.flags?u(n.check,te,pe,ne-pe):r(n.check,te,pe,ne-pe)),pe=he,n.wrap&4&&(n.flags?I:Xe(I))!==n.check){b.msg="incorrect data check",n.mode=ue;break}I=0,U=0}n.mode=Ye;case Ye:if(n.wrap&&n.flags){for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&4&&I!==(n.total&4294967295)){b.msg="incorrect length check",n.mode=ue;break}I=0,U=0}n.mode=xe;case xe:Te=T;break e;case ue:Te=j;break e;case ve:return w;case Ue:default:return R}return b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,(n.wsize||pe!==b.avail_out&&n.mode<ue&&(n.mode<We||P!==_))&&z(b,b.output,b.next_out,pe-b.avail_out),lt-=b.avail_in,pe-=b.avail_out,b.total_in+=lt,b.total_out+=pe,n.total+=pe,n.wrap&4&&pe&&(b.adler=n.check=n.flags?u(n.check,te,pe,b.next_out-pe):r(n.check,te,pe,b.next_out-pe)),b.data_type=n.bits+(n.last?64:0)+(n.mode===$?128:0)+(n.mode===ce||n.mode===_e?256:0),(lt===0&&pe===0||P===_)&&Te===y&&(Te=l),Te},"inflate$1"),W=d(b=>{if(qe(b))return R;let P=b.state;return P.window&&(P.window=null),b.state=null,y},"inflateEnd"),X=d((b,P)=>{if(qe(b))return R;const n=b.state;return n.wrap&2?(n.head=P,P.done=!1,y):R},"inflateGetHeader"),J=d((b,P)=>{const n=P.length;let N,te,q;return qe(b)||(N=b.state,N.wrap!==0&&N.mode!==Y)?R:N.mode===Y&&(te=1,te=r(te,P,n,0),te!==N.check)?j:(q=z(b,P,n,n),q?(N.mode=ve,w):(N.havedict=1,y))},"inflateSetDictionary");return Pe.inflateReset=Ae,Pe.inflateReset2=me,Pe.inflateResetKeep=Gt,Pe.inflateInit=ae,Pe.inflateInit2=Ce,Pe.inflate=F,Pe.inflateEnd=W,Pe.inflateGetHeader=X,Pe.inflateSetDictionary=J,Pe.inflateInfo="pako inflate (from Nodeca project)",Pe}d(Qr,"requireInflate$1");var pn,Bn;function ea(){if(Bn)return pn;Bn=1;function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return d(r,"GZheader"),pn=r,pn}d(ea,"requireGzheader");var $n;function ta(){if($n)return et;$n=1;const r=Qr(),u=Un(),i=Ln(),o=fn(),a=zn(),t=ea(),h=Object.prototype.toString,{Z_NO_FLUSH:_,Z_FINISH:v,Z_OK:p,Z_STREAM_END:y,Z_NEED_DICT:T,Z_STREAM_ERROR:L,Z_DATA_ERROR:R,Z_MEM_ERROR:j}=Qe();function w(S){this.options=u.assign({chunkSize:1024*64,windowBits:15,to:""},S||{});const D=this.options;D.raw&&D.windowBits>=0&&D.windowBits<16&&(D.windowBits=-D.windowBits,D.windowBits===0&&(D.windowBits=-15)),D.windowBits>=0&&D.windowBits<16&&!(S&&S.windowBits)&&(D.windowBits+=32),D.windowBits>15&&D.windowBits<48&&(D.windowBits&15||(D.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let c=r.inflateInit2(this.strm,D.windowBits);if(c!==p)throw new Error(o[c]);if(this.header=new t,r.inflateGetHeader(this.strm,this.header),D.dictionary&&(typeof D.dictionary=="string"?D.dictionary=i.string2buf(D.dictionary):h.call(D.dictionary)==="[object ArrayBuffer]"&&(D.dictionary=new Uint8Array(D.dictionary)),D.raw&&(c=r.inflateSetDictionary(this.strm,D.dictionary),c!==p)))throw new Error(o[c])}d(w,"Inflate"),w.prototype.push=function(S,D){const c=this.strm,g=this.options.chunkSize,C=this.options.dictionary;let M,Z,A;if(this.ended)return!1;for(D===~~D?Z=D:Z=D===!0?v:_,h.call(S)==="[object ArrayBuffer]"?c.input=new Uint8Array(S):c.input=S,c.next_in=0,c.avail_in=c.input.length;;){for(c.avail_out===0&&(c.output=new Uint8Array(g),c.next_out=0,c.avail_out=g),M=r.inflate(c,Z),M===T&&C&&(M=r.inflateSetDictionary(c,C),M===p?M=r.inflate(c,Z):M===R&&(M=T));c.avail_in>0&&M===y&&c.state.wrap>0&&S[c.next_in]!==0;)r.inflateReset(c),M=r.inflate(c,Z);switch(M){case L:case R:case T:case j:return this.onEnd(M),this.ended=!0,!1}if(A=c.avail_out,c.next_out&&(c.avail_out===0||M===y))if(this.options.to==="string"){let O=i.utf8border(c.output,c.next_out),ee=c.next_out-O,Y=i.buf2string(c.output,O);c.next_out=ee,c.avail_out=g-ee,ee&&c.output.set(c.output.subarray(O,O+ee),0),this.onData(Y)}else this.onData(c.output.length===c.next_out?c.output:c.output.subarray(0,c.next_out));if(!(M===p&&A===0)){if(M===y)return M=r.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,!0;if(c.avail_in===0)break}}return!0},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function l(S,D){const c=new w(D);if(c.push(S),c.err)throw c.msg||o[c.err];return c.result}d(l,"inflate");function E(S,D){return D=D||{},D.raw=!0,l(S,D)}return d(E,"inflateRaw"),et.Inflate=w,et.inflate=l,et.inflateRaw=E,et.ungzip=l,et.constants=Qe(),et}d(ta,"requireInflate");var Zn;function wn(){if(Zn)return Fe;Zn=1;const{Deflate:r,deflate:u,deflateRaw:i,gzip:o}=Vr(),{Inflate:a,inflate:t,inflateRaw:h,ungzip:_}=ta(),v=Qe();return Fe.Deflate=r,Fe.deflate=u,Fe.deflateRaw=i,Fe.gzip=o,Fe.Inflate=a,Fe.inflate=t,Fe.inflateRaw=h,Fe.ungzip=_,Fe.constants=v,Fe}d(wn,"requirePako");var ht={},Hn;function Wn(){if(Hn)return ht;Hn=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.paethPredicator=void 0;function r(u,i,o){const a=u+i-o,t=Math.abs(a-u),h=Math.abs(a-i),_=Math.abs(a-o);return t<=h&&t<=_?u:h<=_?i:o}return d(r,"paethPredicator"),ht.paethPredicator=r,ht}d(Wn,"requirePaeth");var Gn;function na(){if(Gn)return ct;Gn=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.parseChunk=void 0;const r=wn(),u=K,i=Wn();function o(w,l,E){const S=a(w,E);let D;l.interlaceMethod===1?D=L(w,l,S):D=t(w,l,S);const c=w.metadata.find(C=>C.type==="tRNS"),g=R(w,l,D,w.palette,c);return c&&(l.colorType===0||l.colorType===2)&&j(l,g,c),g}d(o,"parseChunk"),ct.parseChunk=o;function a(w,l){const E=new r.Inflate;let S=0;for(const D of l)S=D.offset+4+4,E.push(w.view.buffer.slice(w.view.byteOffset+S,w.view.byteOffset+S+D.dataLength));if(E.err)throw(0,u.createChunkDecodeError)(w,l[0],`Inflate error: ${E.msg}`,l[0].offset);if(E.result===void 0)throw new u.DecodeError(w,"IDAT: Failed to decompress data chunks",0);return E.result}d(a,"decompress");function t(w,l,E,S=0,D=l.width,c=l.height){let g=0;const C=v(l),M=p(l),Z=y(l,D),A=Math.ceil(D*M),O=new Uint8Array(c*A),ee=new Map;for(let Y=0;Y<c;Y++){let $=S+Y*(Z+1);const ie=E[$++];if(!h)throw new u.DecodeError(w,`IDAT: Invalid filter type ${ie}`,0);let de=ee.get(ie);de||(de=_(M,Z,D,ie),ee.set(ie,de));let _e=1,se=0;switch(ie){case 0:case 1:{for(;se<C;se++)O[g]=E[$+se],g++;break}case 3:{let le=0;for(;se<C;se++)le=g-D*C,O[g]=E[$+se]+Math.floor(0+(le<0?0:O[le]))/2,g++;break}case 2:{_e=0;break}case 4:{for(;se<C;se++){const le=Math.floor(g-Z);O[g]=(E[$+se]+(0,i.paethPredicator)(0,le<0?0:O[le],0))%256,g++}break}}if(l.bitDepth>=8)for(;_e<D;_e++)for(let le=0;le<C;le++)O[g]=de(E,$+_e*C+le,O,g),g++;else{for(_e&&(g-=_e),se=_e;se<Z;se++)O[g+se]=de(E,$+se,O,g+se);g+=Z}}return O}d(t,"defilter");function h(w){return w%1===0&&w>=0&&w<=4}d(h,"isValidFilterType");function _(w,l,E,S){let D=0,c=0,g=0;switch(S){case 0:return(C,M)=>C[M];case 1:return(C,M,Z,A)=>(C[M]+Z[Math.floor(A-w)])%256;case 2:return(C,M,Z,A)=>(c=Math.floor(A-E*w),c<0?C[M]:(C[M]+Z[c])%256);case 3:return(C,M,Z,A)=>(D=Math.floor(A-w),c=Math.floor(A-E*w),C[M]+Math.floor((D<0?0:Z[D])+(c<0?0:Z[c]))/2);case 4:return(C,M,Z,A)=>(D=Math.floor(A-Math.ceil(w)),c=Math.floor(A-l),g=Math.floor(A-l-Math.ceil(w)),(C[M]+(0,i.paethPredicator)(D<0?0:Z[D],c<0?0:Z[c],g<0?0:Z[g]))%256)}}d(_,"buildDefilterFunction");function v(w){return Math.ceil(p(w))}d(v,"getBytesPerPixel");function p(w){return T(w.colorType)*w.bitDepth/8}d(p,"getBytesPerPixelFloat");function y(w,l){return Math.ceil(T(w.colorType)*w.bitDepth*l/8)}d(y,"getBytesPerLine");function T(w){switch(w){case 0:return 1;case 2:return 3;case 3:return 1;case 4:return 2;case 6:return 4}}d(T,"getChannelCount");function L(w,l,E){const S=p(l),D=Math.ceil(l.width*S),c=new Uint8Array(D*l.height),g=v(l),C=8/l.bitDepth,M=(1<<l.bitDepth)-1,Z=[0,4,0,2,0,1,0],A=[0,0,4,0,2,0,1],O=[8,8,4,4,2,2,1],ee=[8,8,8,4,4,2,2];let Y=0;for(let $=0;$<7;$++){const ie=Z[$],de=A[$],_e=O[$],se=ee[$],le=Math.ceil((l.width-ie)/_e),Ee=Math.ceil((l.height-de)/se),Q=Math.ceil(S*le);if(le===0||Ee===0)continue;const ce=t(w,l,E,Y,le,Ee);let fe=0;for(let ke=0;ke<Ee;ke++){fe=(de+ke*se)*D+ie*S;for(let we=0;we<le;we++){if(l.bitDepth<8){let re=ce[ke*Q+Math.floor(we*S)];re>>=(C-we%C-1)*l.bitDepth,re&=M;const ge=(C-1-fe%1*C)*l.bitDepth;re<<=ge,c[Math.floor(fe)]|=re}else for(let re=0;re<g;re++)c[fe+re]=ce[(ke*le+we)*g+re];fe+=_e*S}}Y+=Ee*(1+y(l,le))}return c}d(L,"deinterlaceAdam7");function R(w,l,E,S,D){const c=new(l.bitDepth===16?Uint16Array:Uint8Array)(l.width*l.height*4);let g=0;const C=v(l),M=p(l),Z=Math.ceil(l.width*M);switch(l.colorType){case 0:{switch(l.bitDepth){case 1:case 2:case 4:{const A=8/l.bitDepth,O=(1<<l.bitDepth)-1,ee=l.bitDepth/8;for(let Y=0;Y<l.height;Y++)for(let $=0;$<l.width;$++)g=(Y*l.width+$)*4,c[g]=E[Y*Z+Math.floor($*ee)],c[g]>>=(A-$%A-1)*l.bitDepth,c[g]&=O,c[g]*=255/O,c[g+1]=c[g],c[g+2]=c[g],c[g+3]=255;break}case 8:case 16:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1]:c[g]=E[(A*l.width+O)*C],c[g+1]=c[g],c[g+2]=c[g],c[g+3]=l.bitDepth===16?65535:255;break}}break}case 4:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1]:c[g]=E[(A*l.width+O)*C],c[g+1]=c[g],c[g+2]=c[g],l.bitDepth===16?c[g+3]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3]:c[g+3]=E[(A*l.width+O)*C+1];break}case 3:{if(!S)throw new u.DecodeError(w,"IDAT: Cannot decode indexed color type without a palette",0);switch(l.bitDepth){case 1:case 2:case 4:{const A=8/l.bitDepth,O=(1<<l.bitDepth)-1,ee=l.bitDepth/8;for(let Y=0;Y<l.height;Y++)for(let $=0;$<l.width;$++){g=(Y*l.width+$)*4;let ie=E[Y*Z+Math.floor($*ee)];ie>>=(A-$%A-1)*l.bitDepth,ie&=O,S.setRgba(c,g,ie),D&&D.transparency.length>ie&&(c[g+3]=D.transparency[ie])}break}case 8:{let A=0;for(let O=0;O<l.height;O++)for(let ee=0;ee<l.width;ee++)g=(O*l.width+ee)*4,A=E[O*l.width+ee],S.setRgba(c,g,A),D&&D.transparency.length>A&&(c[g+3]=D.transparency[A]);break}}break}case 2:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?(c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1],c[g+1]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3],c[g+2]=E[(A*l.width+O)*C+4]<<8|E[(A*l.width+O)*C+5]):(c[g]=E[(A*l.width+O)*C],c[g+1]=E[(A*l.width+O)*C+1],c[g+2]=E[(A*l.width+O)*C+2]),c[g+3]=l.bitDepth===16?65535:255;break}case 6:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?(c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1],c[g+1]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3],c[g+2]=E[(A*l.width+O)*C+4]<<8|E[(A*l.width+O)*C+5],c[g+3]=E[(A*l.width+O)*C+6]<<8|E[(A*l.width+O)*C+7]):(c[g]=E[(A*l.width+O)*C],c[g+1]=E[(A*l.width+O)*C+1],c[g+2]=E[(A*l.width+O)*C+2],c[g+3]=E[(A*l.width+O)*C+3]);break}}return c}d(R,"mapPackedDataToRgba");function j(w,l,E){const S=(1<<w.bitDepth)-1,D=w.bitDepth===16?65535:255;if(w.colorType===0){const c=D/S*E.transparency;for(let g=0;g<l.length;g+=4)l[g]===c&&(l[g+3]=0);return}if(w.colorType===2){const c=[D/S*E.transparency[0],D/S*E.transparency[1],D/S*E.transparency[2]];for(let g=0;g<l.length;g+=4)l[g]===c[0]&&l[g+1]===c[1]&&l[g+2]===c[2]&&(l[g+3]=0);return}}return d(j,"applyTransparency"),ct}d(na,"requireChunk_IDAT");var _t={},Yn;function ra(){if(Yn)return _t;Yn=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkFollows)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,0)}return d(u,"parseChunk"),_t.parseChunk=u,_t}d(ra,"requireChunk_IEND");var pt={},je={},Xn;function aa(){if(Xn)return je;Xn=1,Object.defineProperty(je,"__esModule",{value:!0}),je.isValidInterlaceMethod=je.isValidFilterMethod=je.isValidColorType=je.isValidBitDepth=void 0;function r(a){return a===1||a===2||a===4||a===8||a===16}d(r,"isValidBitDepth"),je.isValidBitDepth=r;function u(a,t){return a===0&&t>=1&&t<=16||a===2&&t>=8&&t<=16||a===3&&t>=1&&t<=8||a===4&&t>=8&&t<=16||a===6&&t>=8&&t<=16}d(u,"isValidColorType"),je.isValidColorType=u;function i(a){return a===0}d(i,"isValidFilterMethod"),je.isValidFilterMethod=i;function o(a){return a===0||a===1}return d(o,"isValidInterlaceMethod"),je.isValidInterlaceMethod=o,je}d(aa,"requireValidate");var Vn;function ia(){if(Vn)return pt;Vn=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.parseChunk=void 0;const r=K,u=aa();function i(o,a){(0,r.assertChunkDataLengthEquals)(o,a,13);let t=a.offset+4+4;const h=o.view.getUint32(t);t+=4;const _=o.view.getUint32(t);t+=4;const v=o.view.getUint8(t);if(!(0,u.isValidBitDepth)(v))throw(0,r.createChunkDecodeError)(o,a,`Bit depth "${v}" is not valid`,t);t++;const p=o.view.getUint8(t);if(!(0,u.isValidColorType)(p,v))throw(0,r.createChunkDecodeError)(o,a,`Color type "${p}" is not valid with bit depth "${v}"`,t);t++;const y=o.view.getUint8(t);(0,r.assertChunkCompressionMethod)(o,a,y,t),t++;let T=o.view.getUint8(t);(0,u.isValidFilterMethod)(T)||((0,r.handleWarning)(o,(0,r.createChunkDecodeWarning)(a,`Filter method "${T}" is not valid`,t)),T=0),t++;let L=o.view.getUint8(t);return(0,u.isValidInterlaceMethod)(L)||((0,r.handleWarning)(o,(0,r.createChunkDecodeWarning)(a,`Interlace method "${L}" is not valid`,t)),L=0),t++,{width:h,height:_,bitDepth:v,colorType:p,interlaceMethod:L}}return d(i,"parseChunk"),pt.parseChunk=i,pt}d(ia,"requireChunk_IHDR");var tt={},Kn;function Jn(){if(Kn)return tt;Kn=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.crc32=tt.getCrcTable=void 0;let r;function u(){if(r)return r;r=[];for(let a=0;a<256;a++){let t=a;for(let h=0;h<8;h++)t&1?t=3988292384^t>>>1:t=t>>>1;r[a]=t>>>0}return r}d(u,"getCrcTable"),tt.getCrcTable=u;function i(a,t,h,_){const v=u();let p=a;for(let y=0;y<_;y++)p=v[(p^t.getUint8(h+y))&255]^p>>>8;return p}d(i,"updateCrc");function o(a,t,h){return(i(4294967295,a,t,h)^4294967295)>>>0}return d(o,"crc32$1"),tt.crc32=o,tt}d(Jn,"requireCrc32");var wt={},Qn;function oa(){if(Qn)return wt;Qn=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"IDAT");const t=a.offset+4+4;let h,_;switch(o.colorType){case 0:case 4:{h=i.view.getUint16(t),_=2;break}case 2:case 6:{h=[i.view.getUint16(t),i.view.getUint16(t+2),i.view.getUint16(t+4)],_=6;break}case 3:{h=i.view.getUint8(t),_=1;break}default:throw(0,r.createChunkDecodeWarning)(a,`Unrecognized color type "${o.colorType}"`,t)}return(0,r.assertChunkDataLengthEquals)(i,a,_),{type:"bKGD",color:h}}return d(u,"parseChunk"),wt.parseChunk=u,wt}d(oa,"requireChunk_bKGD");var gt={},er;function sa(){if(er)return gt;er=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"PLTE"),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,32);let t=a.offset+4+4;const h={x:i.view.getUint32(t)/1e5,y:i.view.getUint32(t+4)/1e5};if(h.x>1||h.y>1)throw(0,r.createChunkDecodeWarning)(a,`Invalid white point (${h.x},${h.y})`,t);t+=8;const _={x:i.view.getUint32(t)/1e5,y:i.view.getUint32(t+4)/1e5};if(_.x>1||_.y>1)throw(0,r.createChunkDecodeWarning)(a,`Invalid red (${_.x},${_.y})`,t);t+=8;const v={x:i.view.getUint32(t)/1e5,y:i.view.getUint32(t+4)/1e5};if(v.x>1||v.y>1)throw(0,r.createChunkDecodeWarning)(a,`Invalid green (${v.x},${v.y})`,t);t+=8;const p={x:i.view.getUint32(t)/1e5,y:i.view.getUint32(t+4)/1e5};if(p.x>1||p.y>1)throw(0,r.createChunkDecodeWarning)(a,`Invalid blue (${p.x},${p.y})`,t);return{type:"cHRM",whitePoint:h,red:_,green:v,blue:p}}return d(u,"parseChunk"),gt.parseChunk=u,gt}d(sa,"requireChunk_cHRM");var bt={},tr;function la(){if(tr)return bt;tr=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.parseChunk=void 0;function r(u,i,o){const a=o.offset+4+4;return{type:"eXIf",value:u.view.buffer.slice(u.view.byteOffset+a,u.view.byteOffset+a+o.dataLength)}}return d(r,"parseChunk"),bt.parseChunk=r,bt}d(la,"requireChunk_eXIf");var vt={},nr;function ua(){if(nr)return vt;nr=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"PLTE"),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,4);const t=a.offset+4+4,h=i.view.getUint32(t)/1e5;return h===0&&(0,r.handleWarning)(i,(0,r.createChunkDecodeWarning)(a,"A value of 0 is meaningless",t)),{type:"gAMA",value:h}}return d(u,"parseChunk"),vt.parseChunk=u,vt}d(ua,"requireChunk_gAMA");var yt={},rr;function fa(){if(rr)return yt;rr=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkFollows)(i,a,"PLTE"),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,i.palette.size*2);const t=a.offset+4+4,h=[];for(let _=0;_<i.palette.size*2;_+=2)h.push(i.view.getUint16(t+_));return{type:"hIST",frequency:h}}return d(u,"parseChunk"),yt.parseChunk=u,yt}d(fa,"requireChunk_hIST");var mt={},kt={},ar;function nt(){if(ar)return kt;ar=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.readText=void 0;const r=wn(),u=K;function i(o,a,t,h,_,v,p,y){const T=[];let L=0,R=0;for(;(h===void 0||R<h)&&!(!p&&_===v);R++){try{L=o.view.getUint8(_)}catch(w){throw w instanceof Error&&w.message==="Offset is outside the bounds of the DataView"?(0,u.createChunkDecodeWarning)(a,"EOF while reading text",_):w}if(!y&&L===0)break;_++,T.push(L)}if(p&&o.view.getUint8(_)!==0)throw(0,u.createChunkDecodeWarning)(a,"No null character after text",_);let j=new Uint8Array(T);if(y){const w=new r.Inflate;if(w.push(j),w.err)throw(0,u.createChunkDecodeWarning)(a,`Inflate error: ${w.msg}`,_);j=w.result}return{text:t?t.decode(j):String.fromCharCode(...T),bytesRead:R+1}}return d(i,"readText"),kt.readText=i,kt}d(nt,"requireText");var ir;function ca(){if(ir)return mt;ir=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.parseChunk=void 0;const r=K,u=nt();function i(o,a,t){(0,r.assertChunkSinglular)(o,t),(0,r.assertChunkMutualExclusion)(o,t,"sRGB"),(0,r.assertChunkPrecedes)(o,t,"PLTE"),(0,r.assertChunkPrecedes)(o,t,"IDAT"),(0,r.assertChunkDataLengthGte)(o,t,3);const h=t.offset+4+4,_=h+t.dataLength;let v=h;const p=new TextDecoder("latin1"),y=(0,u.readText)(o,t,p,79,v,_,!0);v+=y.bytesRead;const T=y.text,L=o.view.getUint8(v);(0,r.assertChunkCompressionMethod)(o,t,L,v),v++;const R=new Uint8Array(o.view.buffer.slice(o.view.byteOffset+v,o.view.byteOffset+_));return{type:"iCCP",name:T,data:R}}return d(i,"parseChunk"),mt.parseChunk=i,mt}d(ca,"requireChunk_iCCP");var Ct={},or;function da(){if(or)return Ct;or=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.parseChunk=void 0;const r=K,u=nt();function i(o,a,t){(0,r.assertChunkDataLengthGte)(o,t,6);let h=t.offset+4+4;const _=h+t.dataLength,v=new TextDecoder("utf8");let p;p=(0,u.readText)(o,t,v,79,h,_,!0),h+=p.bytesRead;const y=p.text,T=o.view.getUint8(h++)===1,L=o.view.getUint8(h);T&&(0,r.assertChunkCompressionMethod)(o,t,L,h),h++,p=(0,u.readText)(o,t,v,void 0,h,_,!0),h+=p.bytesRead;const R=p.text;p=(0,u.readText)(o,t,v,void 0,h,_,!0),h+=p.bytesRead;const j=p.text;p=(0,u.readText)(o,t,v,void 0,h,_,!1,T),h+=p.bytesRead;const w=p.text;return{type:"iTXt",keyword:y,languageTag:R,translatedKeyword:j,text:w}}return d(i,"parseChunk"),Ct.parseChunk=i,Ct}d(da,"requireChunk_iTXt");var Et={},sr;function ha(){if(sr)return Et;sr=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkDataLengthEquals)(i,a,7);let t=a.offset+4+4;const h=i.view.getUint16(t);t+=2;const _=i.view.getUint8(t++),v=i.view.getUint8(t++),p=i.view.getUint8(t++),y=i.view.getUint8(t++),T=i.view.getUint8(t++);return{type:"tIME",value:new Date(h,_,v,p,y,T)}}return d(u,"parseChunk"),Et.parseChunk=u,Et}d(ha,"requireChunk_tIME");var Dt={},lr;function _a(){if(lr)return Dt;lr=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,9);let t=a.offset+4+4;const h=i.view.getInt32(t);t+=4;const _=i.view.getInt32(t);t+=4;const v=i.view.getUint8(t);let p;switch(v){case 0:p="pixel";break;case 1:p="micrometer";break;default:throw(0,r.createChunkDecodeWarning)(a,`Invalid oFFs unit type ("${v}")`,t)}return{type:"oFFs",offset:{x:h,y:_},unitType:p}}return d(u,"parseChunk"),Dt.parseChunk=u,Dt}d(_a,"requireChunk_oFFs");var Tt={},xt={},ur;function fr(){if(ur)return xt;ur=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.readFloat=void 0;const r=K,u=nt();function i(a,t,h,_,v,p){const y=(0,u.readText)(a,t,h,void 0,_,v,p);_+=y.bytesRead,o(y.text)||(0,r.handleWarning)(a,(0,r.createChunkDecodeWarning)(t,`Invalid character in floating point number ("${y.text}")`,_));const T=parseFloat(y.text);return{bytesRead:y.bytesRead,value:T}}d(i,"readFloat"),xt.readFloat=i;function o(a){return a.match(/^[+-]?[0-9]+\.[0-9]+([eE][+-]?[0-9]+)?$/)||a.match(/^[+-]?[0-9]+\.?([eE][+-]?[0-9]+)?$/)||a.match(/^[+-]?\.[0-9]+([eE][+-]?[0-9]+)?$/)}return d(o,"isValidFloatingPoint"),xt}d(fr,"requireFloat");var cr;function pa(){if(cr)return Tt;cr=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.parseChunk=void 0;const r=K,u=fr(),i=nt();function o(a,t,h){(0,r.assertChunkSinglular)(a,h),(0,r.assertChunkPrecedes)(a,h,"IDAT"),(0,r.assertChunkDataLengthGte)(a,h,4);const _=h.offset+4+4,v=_+h.dataLength;let p=_;const y=new TextDecoder("latin1");let T;T=(0,i.readText)(a,h,y,79,p,v,!0),p+=T.bytesRead;const L=T.text,R=a.view.getInt32(p);p+=4;const j=a.view.getInt32(p);p+=4;const w=a.view.getUint8(p++);let l;switch(w){case 0:l="linear-mapping";break;case 1:l="base-e exponential mapping";break;case 2:l="arbitrary-base exponential mapping";break;case 3:l="hyperbolic mapping";break;default:throw(0,r.createChunkDecodeWarning)(h,`Invalid equation type "${w}"`,p)}const E=a.view.getUint8(p++);T=(0,i.readText)(a,h,y,79,p,v,!0),p+=T.bytesRead;const S=T.text,D=[];let c;for(let g=0;g<E;g++)c=(0,u.readFloat)(a,h,y,p,v,g<E-1),p+=c.bytesRead,D.push(c.value);return{type:"pCAL",calibrationName:L,x0:R,x1:j,equationType:l,unitName:S,params:D}}return d(o,"parseChunk"),Tt.parseChunk=o,Tt}d(pa,"requireChunk_pCAL");var St={},dr;function wa(){if(dr)return St;dr=1,Object.defineProperty(St,"__esModule",{value:!0}),St.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,9);let t=a.offset+4+4;const h=i.view.getUint32(t);t+=4;const _=i.view.getUint32(t);t+=4;const v=i.view.getUint8(t)===1?"meter":"unknown";return{type:"pHYs",pixelsPerUnit:{x:h,y:_},unitType:v}}return d(u,"parseChunk"),St.parseChunk=u,St}d(wa,"requireChunk_pHYs");var Rt={},hr;function ga(){if(hr)return Rt;hr=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"PLTE"),(0,r.assertChunkPrecedes)(i,a,"IDAT");const t=a.offset+4+4;let h,_;switch(o.colorType){case 0:{h=i.view.getUint8(t),_=1;break}case 2:case 3:{h=[i.view.getUint8(t),i.view.getUint8(t+1),i.view.getUint8(t+2)],_=3;break}case 4:{h=[i.view.getUint8(t),i.view.getUint8(t+1)],_=2;break}case 6:{h=[i.view.getUint8(t),i.view.getUint8(t+1),i.view.getUint8(t+2),i.view.getUint8(t+3)],_=4;break}default:throw(0,r.createChunkDecodeWarning)(a,`Unrecognized color type "${o.colorType}"`,t)}return(0,r.assertChunkDataLengthEquals)(i,a,_),{type:"sBIT",value:h}}return d(u,"parseChunk"),Rt.parseChunk=u,Rt}d(ga,"requireChunk_sBIT");var At={},_r;function ba(){if(_r)return At;_r=1,Object.defineProperty(At,"__esModule",{value:!0}),At.parseChunk=void 0;const r=K,u=fr();function i(o,a,t){(0,r.assertChunkSinglular)(o,t),(0,r.assertChunkPrecedes)(o,t,"IDAT"),(0,r.assertChunkDataLengthGte)(o,t,4);const h=t.offset+4+4,_=h+t.dataLength;let v=h;const p=new TextDecoder("latin1"),y=o.view.getUint8(v);let T;switch(y){case 0:T="meter";break;case 1:T="radian";break;default:throw(0,r.createChunkDecodeWarning)(t,`Invalid sCAL unit type ("${y}")`,v)}v++;let L;L=(0,u.readFloat)(o,t,p,v,_,!0),v+=L.bytesRead;const R=L.value;L=(0,u.readFloat)(o,t,p,v,_,!1),v+=L.bytesRead;const j=L.value;if(R<0||j<0)throw(0,r.createChunkDecodeWarning)(t,`Values cannot be negative (${R}, ${j})`,v);return{type:"sCAL",pixelsPerUnit:{x:R,y:j},unitType:T}}return d(i,"parseChunk"),At.parseChunk=i,At}d(ba,"requireChunk_sCAL");var It={},pr;function va(){if(pr)return It;pr=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseChunk=void 0;const r=K,u=nt();function i(o,a,t){(0,r.assertChunkPrecedes)(o,t,"IDAT");const h=t.offset+4+4;let _=h;const v=_+t.dataLength,p=new TextDecoder("latin1"),y=(0,u.readText)(o,t,p,void 0,_,v,!0);_+=y.bytesRead;const T=y.text,L=o.view.getUint8(_++),R=L===16?2:1,j=R*4+2,w=t.dataLength-(_-h),l=w/j;if(l%1!==0)throw(0,r.createChunkDecodeWarning)(t,`Invalid data length: ${w} should be divisible by entry size ${j}`,_);const E=[];for(let S=0;S<l;S++){const D=[];for(let g=0;g<4;g++)D.push(R===2?o.view.getUint16(_):o.view.getUint8(_)),_+=R;const c=o.view.getUint16(_);_+=2,E.push({red:D[0],green:D[1],blue:D[2],alpha:D[3],frequency:c})}return{type:"sPLT",name:T,sampleDepth:L,entries:E}}return d(i,"parseChunk"),It.parseChunk=i,It}d(va,"requireChunk_sPLT");var Pt={},wr;function ya(){if(wr)return Pt;wr=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkMutualExclusion)(i,a,"iCCP"),(0,r.assertChunkPrecedes)(i,a,"PLTE"),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,1);const t=a.offset+4+4,h=i.view.getUint8(t);let _;switch(h){case 0:case 1:case 2:case 3:_=h;break;default:throw(0,r.createChunkDecodeWarning)(a,`Invalid rendering intent "${h}"`,t)}return{type:"sRGB",renderingIntent:_}}return d(u,"parseChunk"),Pt.parseChunk=u,Pt}d(ya,"requireChunk_sRGB");var Ut={},gr;function ma(){if(gr)return Ut;gr=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.parseChunk=void 0;const r=K;function u(i,o,a){(0,r.assertChunkSinglular)(i,a),(0,r.assertChunkPrecedes)(i,a,"IDAT"),(0,r.assertChunkDataLengthEquals)(i,a,1);const t=a.offset+4+4,h=i.view.getUint8(t);let _;switch(h){case 0:_="cross-fuse";break;case 1:_="diverging-fuse";break;default:throw(0,r.createChunkDecodeWarning)(a,`Invalid layout mode "${h}"`,t)}const v=15-(o.width-1)%16;if(v>7)throw(0,r.createChunkDecodeWarning)(a,`Invalid padding value "${v}" for image width ${o.width}`,t);const p=Math.floor((o.width-v)/2);return{type:"sTER",layoutMode:_,subimageWidth:p,padding:v}}return d(u,"parseChunk"),Ut.parseChunk=u,Ut}d(ma,"requireChunk_sTER");var Mt={},br;function ka(){if(br)return Mt;br=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.parseChunk=void 0;const r=K,u=nt();function i(o,a,t){(0,r.assertChunkDataLengthGte)(o,t,6);const h=t.offset+4+4,_=h+t.dataLength;let v=h;const p=new TextDecoder("latin1");let y;y=(0,u.readText)(o,t,p,79,v,_,!0),v+=y.bytesRead;const T=y.text;y=(0,u.readText)(o,t,p,void 0,v,_,!1),v+=y.bytesRead;const L=y.text;return{type:"tEXt",keyword:T,text:L}}return d(i,"parseChunk"),Mt.parseChunk=i,Mt}d(ka,"requireChunk_tEXt");var Lt={},vr;function Ca(){if(vr)return Lt;vr=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.parseChunk=void 0;const r=K;function u(i,o,a){switch((0,r.assertChunkPrecedes)(i,a,"IDAT"),o.colorType){case 0:(0,r.assertChunkDataLengthEquals)(i,a,2);break;case 2:(0,r.assertChunkDataLengthEquals)(i,a,6);break;case 3:if((0,r.assertChunkFollows)(i,a,"PLTE"),a.dataLength>i.palette.size)throw(0,r.createChunkDecodeWarning)(a,`Invalid data length for color type ${o.colorType}: ${a.dataLength} > ${i.palette.size}`,a.offset+4+4);break;case 4:case 6:throw(0,r.createChunkDecodeWarning)(a,`Chunk invalid when color type has alpha (${o.colorType})`,a.offset+4+4)}const t=a.offset+4+4;let h;switch(o.colorType){case 0:h=i.view.getUint16(t);break;case 2:h=[i.view.getUint16(t),i.view.getUint16(t+2),i.view.getUint16(t+4)];break;case 3:h=[];for(let _=0;_<a.dataLength;_++)h.push(i.view.getUint8(t+_));break}return{type:"tRNS",transparency:h}}return d(u,"parseChunk"),Lt.parseChunk=u,Lt}d(Ca,"requireChunk_tRNS");var Ot={},yr;function Ea(){if(yr)return Ot;yr=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.parseChunk=void 0;const r=K,u=nt();function i(o,a,t){(0,r.assertChunkDataLengthGte)(o,t,6);const h=t.offset+4+4,_=h+t.dataLength;let v=h;const p=new TextDecoder("latin1");let y;y=(0,u.readText)(o,t,p,79,v,_,!0),v+=y.bytesRead;const T=y.text,L=o.view.getUint8(v);(0,r.assertChunkCompressionMethod)(o,t,L,v),v++,y=(0,u.readText)(o,t,p,void 0,v,_,!1,!0),v+=y.bytesRead;const R=y.text;return{type:"zTXt",keyword:T,text:R}}return d(i,"parseChunk"),Ot.parseChunk=i,Ot}d(Ea,"requireChunk_zTXt");var rt={},mr;function Da(){if(mr)return rt;mr=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.Palette=rt.parseChunk=void 0;const r=K;function u(o,a,t){(0,r.assertChunkSinglular)(o,t),(0,r.assertChunkPrecedes)(o,t,"bKGD"),(0,r.assertChunkPrecedes)(o,t,"hIST"),(0,r.assertChunkPrecedes)(o,t,"tRNS"),(0,r.assertChunkPrecedes)(o,t,"IDAT");let h=t.offset+4;if(a.colorType===0||a.colorType===4)throw(0,r.createChunkDecodeWarning)(t,`Color type "${a.colorType}" cannot have a palette`,h);if(h+=4,t.dataLength===0)throw(0,r.createChunkDecodeWarning)(t,"Cannot have 0 entries",h);if(t.dataLength%3!==0)throw(0,r.createChunkDecodeWarning)(t,`Chunk length must be divisible by 3 (actual "${t.dataLength}")`,h);return t.dataLength/3>256&&(0,r.handleWarning)(o,(0,r.createChunkDecodeWarning)(t,`Too many entries (${t.dataLength/3} > 256)`,h)),t.dataLength/3>Math.pow(2,a.bitDepth)&&(0,r.handleWarning)(o,(0,r.createChunkDecodeWarning)(t,`Too many entries for bit depth (${t.dataLength/3} > 2^${a.bitDepth})`,h)),new i(o.view,t.offset+4+4,t.dataLength)}d(u,"parseChunk"),rt.parseChunk=u;class i{constructor(a,t,h){this._view=a,this._paletteOffset=t,this._length=h}get size(){return this._length/3}getRgb(a){return this._checkIndex(a),new Uint8Array(this._view.buffer.slice(this._view.byteOffset+this._paletteOffset+a*3,this._view.byteOffset+this._paletteOffset+a*3+3))}setRgba(a,t,h){this._checkIndex(h);const _=this._paletteOffset+h*3;a[t]=this._view.getUint8(_),a[t+1]=this._view.getUint8(_+1),a[t+2]=this._view.getUint8(_+2),a[t+3]=255}_checkIndex(a){if(a<0||a*3>this._length-3)throw new Error(`Palette does not contain color index "${a}"`)}}return d(i,"Palette"),rt.Palette=i,rt}d(Da,"requireChunk_PLTE");var kr;function Ta(){if(kr)return ze;kr=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.readChunk=ze.readChunks=ze.decodePng=ze.verifyPngSignature=void 0;const r=Gr(),u=K,i=na(),o=ra(),a=ia(),t=Jn();function h(w){if(w.view.byteLength<7)throw new u.DecodeError(w,`Not enough bytes in file for png signature (${w.view.byteLength})`,0);if(!(w.view.getUint8(0)===137&&w.view.getUint8(1)===80&&w.view.getUint8(2)===78&&w.view.getUint8(3)===71&&w.view.getUint8(4)===13&&w.view.getUint8(5)===10&&w.view.getUint8(6)===26&&w.view.getUint8(7)===10)){const E=_(Array.from(new Uint8Array(w.view.buffer).slice(w.view.byteOffset,w.view.byteOffset+8))),S=_([137,80,78,71,13,10,26,10]);throw new u.DecodeError(w,`Png signature is not correct (${E} !== ${S})`,0)}}d(h,"verifyPngSignature"),ze.verifyPngSignature=h;function _(w){return`0x${w.map(l=>l.toString(16).padStart(2,"0")).join("")}`}d(_,"formatHexAssertion");const v=Object.freeze(["tRNS"]),p=Object.freeze(["bKGD","cHRM","eXIf","gAMA","hIST","iCCP","iTXt","tIME","oFFs","pCAL","pHYs","sBIT","sCAL","sPLT","sRGB","sTER","tEXt","tRNS","zTXt"]);function y(w){switch(w){case"bKGD":return Promise.resolve().then(()=>oa());case"cHRM":return Promise.resolve().then(()=>sa());case"eXIf":return Promise.resolve().then(()=>la());case"gAMA":return Promise.resolve().then(()=>ua());case"hIST":return Promise.resolve().then(()=>fa());case"iCCP":return Promise.resolve().then(()=>ca());case"iTXt":return Promise.resolve().then(()=>da());case"tIME":return Promise.resolve().then(()=>ha());case"oFFs":return Promise.resolve().then(()=>_a());case"pCAL":return Promise.resolve().then(()=>pa());case"pHYs":return Promise.resolve().then(()=>wa());case"sBIT":return Promise.resolve().then(()=>ga());case"sCAL":return Promise.resolve().then(()=>ba());case"sPLT":return Promise.resolve().then(()=>va());case"sRGB":return Promise.resolve().then(()=>ya());case"sTER":return Promise.resolve().then(()=>ma());case"tEXt":return Promise.resolve().then(()=>ka());case"tRNS":return Promise.resolve().then(()=>Ca());case"zTXt":return Promise.resolve().then(()=>Ea());default:throw new Error(`Could not get decoder for chunk type "${w}"`)}}d(y,"getChunkDecoder");async function T(w,l={}){const E={view:new DataView(w.buffer,w.byteOffset,w.byteLength),image:void 0,palette:void 0,metadata:[],parsedChunks:new Set,warnings:[],info:[],options:l};h(E);const S=L(E);E.rawChunks=S;const D=(0,a.parseChunk)(E,S[0]),c={...E,header:D};let g;l&&l.parseChunkTypes?l.parseChunkTypes==="*"?g=p:g=v.concat(l.parseChunkTypes):g=v;for(let C=1;C<S.length;C++){const M=S[C];switch(M.type){case"IHDR":(0,u.handleWarning)(c,(0,u.createChunkDecodeWarning)(M,"Multiple IHDR chunks not allowed",M.offset+4));break;case"IDAT":{const Z=[M];for(;S.length>C+1&&S[C+1].type==="IDAT";)Z.push(S[++C]);c.image={width:D.width,height:D.height,data:(0,i.parseChunk)(c,D,Z)};break}case"PLTE":c.palette=(await Promise.resolve().then(()=>Da())).parseChunk(c,D,M);break;case"IEND":(0,o.parseChunk)(c,D,M);break;default:if(g.includes(M.type))try{c.metadata.push((await y(M.type)).parseChunk(c,D,M))}catch(Z){if(Z instanceof u.DecodeWarning)(0,u.handleWarning)(c,Z);else throw Z}else if(!p.includes(M.type))if(M.isAncillary)c.info.push(`Unrecognized chunk type "${M.type}"`);else throw new u.DecodeError(c,`Unrecognized critical chunk type "${M.type}"`,M.offset+4);break}c.parsedChunks.add(M.type)}if(!c.image)throw new u.DecodeError(c,"Failed to decode, no IDAT chunk",0);return l&&l.force32&&c.image.data.BYTES_PER_ELEMENT===2&&(c.image.data=(0,r.convert16BitTo8BitData)(c.image.data)),{image:c.image,details:{width:D.width,height:D.height,bitDepth:D.bitDepth,colorType:D.colorType,interlaceMethod:D.interlaceMethod},palette:c.palette,metadata:c.metadata,rawChunks:S,warnings:c.warnings,info:c.info}}d(T,"decodePng"),ze.decodePng=T;function L(w){const l=[];let E=8,S=!1,D=!1,c;for(;E<w.view.byteLength;){try{c=R(w,E)}catch(g){if(!D||!(g instanceof Error))throw g;(0,u.handleWarning)(w,new u.DecodeWarning("Could not parse chunk after IEND: "+g.message,E))}E+=4+4+c.dataLength+4,l.push(c),S||(S=c.type==="IDAT"),D||(D=c.type==="IEND")}if(l[0].type!=="IHDR")throw new u.DecodeError(w,"First chunk is not IHDR",l[0].offset+4);if(l[l.length-1].type!=="IEND"&&(0,u.handleWarning)(w,new u.DecodeWarning("Last chunk is not IEND",l[l.length-1].offset+4)),!S)throw new u.DecodeError(w,"No IDAT chunk",0);return l}d(L,"readChunks"),ze.readChunks=L;function R(w,l){if(w.view.byteLength<l+4)throw new u.DecodeError(w,"EOF while reading chunk length",l);const E=w.view.getUint32(l);if(w.view.byteLength<l+4+4)throw new u.DecodeError(w,"EOF while reading chunk type",l);const S=String.fromCharCode(w.view.getUint8(l+4),w.view.getUint8(l+5),w.view.getUint8(l+6),w.view.getUint8(l+7));if(w.view.byteLength<l+4+4+E+4)throw new u.DecodeError(w,`EOF while reading chunk "${S}"`,l);const D=w.view.getUint32(l+4+4+E)>>>0,c=(0,t.crc32)(w.view,l+4,4+E);return D!==c&&(0,u.handleWarning)(w,new u.DecodeWarning(`CRC for chunk "${S}" at offset 0x${l.toString(16)} doesn't match (0x${D.toString(16)} !== 0x${c.toString(16)})`,l)),{offset:l,type:S,dataLength:E,isAncillary:j(S,0),isPrivate:j(S,1),isSafeToCopy:j(S,3)}}d(R,"readChunk"),ze.readChunk=R;function j(w,l){return!!(w.charCodeAt(l)&32)}return d(j,"isCharLowercase"),ze}d(Ta,"requireDecoder");var zt={},Ft={},Cr;function gn(){if(Cr)return Ft;Cr=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.ByteStream=void 0;class r{constructor(i){this.offset=0,this.array=new Uint8Array(i),this.view=new DataView(this.array.buffer,this.array.byteOffset,this.array.byteLength)}writeUint8(i){this.view.setUint8(this.offset,i),this.offset+=1}writeUint16(i){this.view.setUint16(this.offset,i),this.offset+=2}writeUint32(i){this.view.setUint32(this.offset,i),this.offset+=4}writeArray(i){this.array.set(i,this.array.byteOffset+this.offset),this.offset+=i.length}assertAtEnd(){if(this.offset!==this.array.length)throw new Error("Writing finished before expected length of stream")}}return d(r,"ByteStream"),Ft.ByteStream=r,Ft}d(gn,"requireByteStream");var Nt={},Ze={},Er;function ot(){if(Er)return Ze;Er=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.writeChunkDataFn=Ze.writeChunk=Ze.writeChunkType=void 0;const r=gn(),u=Jn();function i(t,h){t.writeUint8(h.charCodeAt(0)),t.writeUint8(h.charCodeAt(1)),t.writeUint8(h.charCodeAt(2)),t.writeUint8(h.charCodeAt(3))}d(i,"writeChunkType"),Ze.writeChunkType=i;function o(t,h){const _=new r.ByteStream(8+h.length+4);if(_.writeUint32(h.length),t.length!==4)throw new Error(`Cannot encode a chunk type of length ${t.length}`);return i(_,t),_.writeArray(h),_.writeUint32((0,u.crc32)(_.view,4,4+h.length)),_.assertAtEnd(),_.array}d(o,"writeChunk"),Ze.writeChunk=o;function a(t,h,_){const v=new r.ByteStream(8+h+4);if(v.writeUint32(h),t.length!==4)throw new Error(`Cannot encode a chunk type of length ${t.length}`);return i(v,t),_(v),v.writeUint32((0,u.crc32)(v.view,4,4+h)),v.assertAtEnd(),v.array}return d(a,"writeChunkDataFn"),Ze.writeChunkDataFn=a,Ze}d(ot,"requireWrite");var Dr;function xa(){if(Dr)return Nt;Dr=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.encodeChunk=void 0;const r=wn(),u=gn(),i=Wn(),o=ot();function a(y,T){const L=t(y,T),R=new u.ByteStream(L);h(y,T,R);const j=r.deflate(R.array);return(0,o.writeChunk)("IDAT",j)}d(a,"encodeChunk"),Nt.encodeChunk=a;function t(y,T){if(y.bitDepth<8)throw new Error("Only bit depth 8 and 16 is supported currently");if(T.data.BYTES_PER_ELEMENT===2&&y.bitDepth===8)throw new Error("16 to 8 bit conversion isn't supported yet");if(y.interlaceMethod!==0)throw new Error("Only interlace method 0 is supported currently");let L;switch(y.colorType){case 0:L=1;break;case 2:L=3;break;case 3:L=1;break;case 4:L=2;break;case 6:L=4;break}const R=y.bitDepth===16?2:1;return(1+L*R*T.width)*T.height}d(t,"calculateDataLength");function h(y,T,L){let R=0,j=0,w=0;if(y.colorType===3){if(!y.palette)throw new Error("Cannot encode indexed file without palette");if(T.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode indexed file from 16-bit image");for(;w<T.height;w++)for(L.writeUint8(0),j=0;j<T.width;j++)L.writeUint8(y.palette.get(T.data[R]<<24|T.data[R+1]<<16|T.data[R+2]<<8|T.data[R+3])),R+=4;return}let l;if(y.options.filterPattern){if(y.options.filterPattern.length===0)throw new Error("Filter pattern with 0 entries");l=y.options.filterPattern}const E=4*T.data.BYTES_PER_ELEMENT,S=[];for(const c of[0,1,2,3,4])S[c]=v(E,E*T.width,c);const D=p(y.colorType);for(;w<T.height;w++){const c=l?l[w%l.length]:_(y.colorType,T,w*T.width*4,S),g=new Uint8Array(T.data.buffer,T.data.byteOffset,T.data.byteLength);L.writeUint8(c);let C=0,M=0;for(j=0;j<T.width;j++){for(M of D)for(C=T.data.BYTES_PER_ELEMENT-1;C>=0;C--)L.writeUint8(S[c](g,(R+M)*T.data.BYTES_PER_ELEMENT+C,j===0));R+=4}}}d(h,"writeUncompressedData");function _(y,T,L,R){const j=[];4*T.data.BYTES_PER_ELEMENT;for(const E of[0,1,2,3,4]){let S=0;const D=p(y),c=new Uint8Array(T.data.buffer,T.data.byteOffset,T.data.byteLength);let g=0,C=0;for(let M=L;M<L+T.width*4;M+=4)for(g of D)for(C=T.data.BYTES_PER_ELEMENT-1;C>=0;C--)S+=R[E](c,(M+g)*T.data.BYTES_PER_ELEMENT+C,M===L);j[E]=S}let w=0,l=j[0];for(const E of[1,2,3,4])j[E]<l&&(w=E,l=j[E]);return w}d(_,"pickFilterType");function v(y,T,L){let R=0,j=0,w=0;switch(L){case 0:return(l,E)=>l[E];case 1:return(l,E,S)=>(R=S?-1:E-y,(l[E]-(R<0?0:l[E-y])+256)%256);case 2:return(l,E)=>(j=E-T,(l[E]-(j<0?0:l[j])+256)%256);case 3:return(l,E,S)=>(R=S?-1:E-y,j=E-T,(l[E]-Math.floor(((R<0?0:l[R])+(j<0?0:l[j]))/2)+256)%256);case 4:return(l,E,S)=>(R=S?-1:E-y,j=E-T,w=S?-1:E-y-T,(l[E]-(0,i.paethPredicator)(R<0?0:l[R],j<0?0:l[j],w<0?0:l[w])+256)%256)}}d(v,"buildFilterFunction");function p(y){switch(y){case 0:return[0];case 2:return[0,1,2];case 4:return[0,3];case 6:return[0,1,2,3]}}return d(p,"getChannelsToWrite"),Nt}d(xa,"requireIDAT_encode");var jt={},Tr;function Sa(){if(Tr)return jt;Tr=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.encodeChunk=void 0;const r=ot();function u(){return(0,r.writeChunk)("IEND",new Uint8Array(0))}return d(u,"encodeChunk"),jt.encodeChunk=u,jt}d(Sa,"requireIEND_encode");var qt={},xr;function Ra(){if(xr)return qt;xr=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.encodeChunk=void 0;const r=ot();function u(i,o){if(o.width<=0||o.height<=0)throw new Error(`Invalid dimensions ${o.width}x${o.height}`);return(0,r.writeChunkDataFn)("IHDR",13,a=>{a.writeUint32(o.width),a.writeUint32(o.height),a.writeUint8(i.bitDepth),a.writeUint8(i.colorType),a.writeUint8(0),a.writeUint8(0),a.writeUint8(i.interlaceMethod)})}return d(u,"encodeChunk"),qt.encodeChunk=u,qt}d(Ra,"requireIHDR_encode");var Bt={},Sr;function Aa(){if(Sr)return Bt;Sr=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.encodeChunk=void 0;const r=ot();function u(i,o){switch(i.colorType){case 0:{if(i.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for grayscale without any transparent colors");const a=i.firstTransparentColor;return(0,r.writeChunkDataFn)("tRNS",2,t=>{o.data.BYTES_PER_ELEMENT===2?t.writeUint16(a>>48&65535):t.writeUint16(a>>24&255)})}case 3:{if(!i.palette)throw new Error("Cannot encode tRNS chunk for indexed image without palette");return(0,r.writeChunkDataFn)("tRNS",i.palette.size,a=>{for(const t of i.colorSet)a.writeUint8(t&255)})}case 2:{if(i.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for True color without any transparent colors");const a=i.firstTransparentColor;return(0,r.writeChunkDataFn)("tRNS",6,t=>{o.data.BYTES_PER_ELEMENT===2?(t.writeUint16(a>>48&65535),t.writeUint16(a>>32&65535),t.writeUint16(a>>16&65535)):(t.writeUint16(a>>24&255),t.writeUint16(a>>16&255),t.writeUint16(a>>8&255))})}default:throw new Error(`Cannot encode tRNS chunk for color type "${i.colorType}"`)}}return d(u,"encodeChunk"),Bt.encodeChunk=u,Bt}d(Aa,"requireTRNS_encode");var $t={},Rr;function Ia(){if(Rr)return $t;Rr=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.encodeChunk=void 0;const r=ot();function u(i,o){if(i.bitDepth===16||o.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode 16 bit images using indexed color type");if(i.colorSet.size>Math.pow(2,i.bitDepth))throw new Error(`Too many colors ${i.colorSet.size} to encode into indexed image (2^${i.bitDepth} = ${Math.pow(2,i.bitDepth)})`);const a=(0,r.writeChunkDataFn)("PLTE",i.colorSet.size*3,h=>{for(const _ of i.colorSet.values())h.writeUint8(_>>24&255),h.writeUint8(_>>16&255),h.writeUint8(_>>8&255)}),t=new Map;for(const h of i.colorSet.values())t.set(h,t.size);return{chunkData:a,palette:t}}return d(u,"encodeChunk"),$t.encodeChunk=u,$t}d(Ia,"requirePLTE_encode");var Zt={},Ar;function Ir(){if(Ar)return Zt;Ar=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.encodeChunk=void 0;const r=Be,u=ot();function i(o,a,t,h){if(t.length===0||t.length>79)throw new r.EncodeError(`tEXt: Invalid keyword length: 0 < ${t.length} < 80`,0);const _=t.length+1+h.length;return(0,u.writeChunkDataFn)("tEXt",_,v=>{let p=0;for(;p<t.length;p++)v.writeUint8(t.charCodeAt(p));for(v.writeUint8(0),p=0;p<h.length;p++)v.writeUint8(h.charCodeAt(p))})}return d(i,"encodeChunk"),Zt.encodeChunk=i,Zt}d(Ir,"requireTEXt_encode");var Pr;function Pa(){if(Pr)return zt;Pr=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.encodePng=void 0;const r=gn(),u=xa(),i=Sa(),o=Ra(),a=Be;function t(p){switch(p){case"tRNS":return Promise.resolve().then(()=>Aa());default:throw new Error(`Could not get encoder for chunk type "${p}"`)}}d(t,"getChunkDecoder");async function h(p,y={}){if(p.data.length!==p.width*p.height*4)throw new a.EncodeError(`Provided image data length (${p.data.length}) is not expected length (${p.width*p.height*4})`,Math.min(p.data.length,p.width*p.height*4)-1);const T=[];T.push(_());const L=v(p,y);if(T.push((0,o.encodeChunk)(L,p)),L.colorType===3){const l=(await Promise.resolve().then(()=>Ia())).encodeChunk(L,p);L.palette=l.palette,T.push(l.chunkData)}if(L.useTransparencyChunk&&T.push((await t("tRNS")).encodeChunk(L,p)),T.push((0,u.encodeChunk)(L,p)),y?.ancillaryChunks===void 0)T.push((await Promise.resolve().then(()=>Ir())).encodeChunk(L,p,"Software","@lunapaint/png-codec"));else for(const l of y.ancillaryChunks)switch(l.type){case"tEXt":T.push((await Promise.resolve().then(()=>Ir())).encodeChunk(L,p,l.keyword,l.text));break;default:throw new Error(`Cannot encode chunk type "${l.type}"`)}T.push((0,i.encodeChunk)());const R=T.reduce((l,E)=>l+E.length,0),j=new Uint8Array(R);let w=0;for(const l of T)j.set(l,w),w+=l.length;return{data:j,warnings:L.warnings,info:L.info}}d(h,"encodePng"),zt.encodePng=h;function _(){const p=new r.ByteStream(8);return p.writeUint8(137),p.writeUint8(80),p.writeUint8(78),p.writeUint8(71),p.writeUint8(13),p.writeUint8(10),p.writeUint8(26),p.writeUint8(10),p.assertAtEnd(),p.array}d(_,"writePngSignature");function v(p,y={}){const T=[],L=[],j=p.width*p.height*4,w=new Set,l=new Set;let E=0;if(p.data.BYTES_PER_ELEMENT===2)for(let c=0;c<j;c+=4)E=p.data[c]<<48|p.data[c+1]<<32|p.data[c+2]<<16|p.data[c+3],p.data[c+3]<65535&&l.add(E),w.add(E);else for(let c=0;c<j;c+=4)E=p.data[c]<<24|p.data[c+1]<<16|p.data[c+2]<<8|p.data[c+3],p.data[c+3]<255&&l.add(E),w.add(E);let S=y.colorType;S===void 0&&(w.size>256||p.data.BYTES_PER_ELEMENT===2?S=2:S=3);let D;switch(S){case 0:case 2:D=l.size===1,!D&&l.size>1&&(S=S===2?6:4,y.colorType===2&&(0,a.handleWarning)({options:y,warnings:T},new a.EncodeWarning(`Cannot encode image as color type Truecolor as it contains ${l.size} transparent colors`,0)));break;case 3:D=l.size>0;break;default:D=!1}return y.colorType===void 0&&L.push(`Using color type ${S}`),{colorType:S,bitDepth:p.data.BYTES_PER_ELEMENT===2?16:8,interlaceMethod:0,colorSet:w,transparentColorCount:l.size,firstTransparentColor:l.size>0?l.values().next().value:void 0,useTransparencyChunk:D,options:y,warnings:T,info:L}}return d(v,"analyze"),zt}d(Pa,"requireEncoder"),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.encodePng=r.decodePng=r.EncodeWarning=r.EncodeError=r.DecodeWarning=r.DecodeError=void 0;var u=K;Object.defineProperty(r,"DecodeError",{enumerable:!0,get:function(){return u.DecodeError}}),Object.defineProperty(r,"DecodeWarning",{enumerable:!0,get:function(){return u.DecodeWarning}});var i=Be;Object.defineProperty(r,"EncodeError",{enumerable:!0,get:function(){return i.EncodeError}}),Object.defineProperty(r,"EncodeWarning",{enumerable:!0,get:function(){return i.EncodeWarning}});async function o(t,h){return(await Promise.resolve().then(()=>Ta())).decodePng(t,h)}d(o,"decodePng"),r.decodePng=o;async function a(t,h){return(await Promise.resolve().then(()=>Pa())).encodePng(t,h)}d(a,"encodePng"),r.encodePng=a}(ut);function Ua(r,u){const i=r.length;for(let o=0;o<3;o++)u[o]=i/Math.pow(256,o)%256|0;u[3]=255;for(let o=4,a=0,t=u.length;o<t;o+=4,a+=3)u[o]=r[a]||0,u[o+1]=r[a+1]||0,u[o+2]=r[a+2]||0,u[o+3]=255;return u}d(Ua,"encodeDataIntoImage");function Ma(r){let u=0;for(let o=0;o<3;o++){const a=r[o]*Math.pow(256,o);u+=a}const i=new Uint8Array(u);e:for(let o=4,a=0,t=r.length;a<t;o+=4,a+=3)for(let h=0;h<3;h++){if(a+h>=u)break e;i[a+h]=r[o+h]}return i.buffer}d(Ma,"decodeDataFromImage");async function La(r){const u=new Uint8Array(r),i=Math.ceil(Math.sqrt(u.length/3+1)),o=new ImageData(i,i);return Ua(u,o.data),(await ut.encodePng({width:i,height:i,data:new Uint8Array(o.data.buffer)})).data.buffer}d(La,"encodeBinaryToPng");async function Oa(r){const u=await La(r);return new Blob([u],{type:"image/png"})}d(Oa,"encodeBinaryToBlob");async function za(r){if(!(r instanceof ArrayBuffer))throw new Error("Expected ArrayBuffer but got "+typeof r);const u=await ut.decodePng(new Uint8Array(r));return Ma(new Uint8ClampedArray(u.image.data.buffer))}d(za,"decodeBinaryFromPng");const{CompressionStream:Fa,DecompressionStream:Na,Response:Xt}=globalThis,bn="gzip";async function ja(r,u=bn){const i=new Fa(u),o=new Xt(r).body?.pipeThrough(i);return await new Xt(o).arrayBuffer()}d(ja,"compress");async function qa(r,u=bn){const i=new Na(u),o=new Xt(r).body?.pipeThrough(i);return new Xt(o)}d(qa,"decompressAsResponse");async function Ba(r,u=bn){return(await qa(r,u)).arrayBuffer()}d(Ba,"decompressAsArrayBuffer");function $a(r){return new TextEncoder().encode(JSON.stringify(r)).buffer}d($a,"valueToArrayBuffer");function Za(r){return JSON.parse(new TextDecoder().decode(r))}d(Za,"arrayBufferToValue");async function Ha(r){return await Oa(await ja($a(r)))}d(Ha,"encodeToBlob");async function Wa(r){return Za(await Ga(r))}d(Wa,"decode");async function Ga(r){return await Ba(await za(r))}d(Ga,"decodeBinary");function Ya(r,u="compressed.png"){const i=URL.createObjectURL(r),o=document.createElement("a");o.download=u,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i)}d(Ya,"downloadImage");const{Tangible:{ajax:Vt}}=window,Kt="tangible_template_import_export__";var Xa=Object.defineProperty,Va=d((r,u)=>Xa(r,"name",{value:u,configurable:!0}),"c");function vn({mode:r,inputStateRef:u,setInputState:i}){const{importData:o}=u.current;if(!o||!o.post_types){console.warn("Import data not found",o);return}const a={...o,post_types:{},handle_duplicates:r};for(const{id:t,title:h,post_type:_}of u.current.duplicatesFound){const v=o.post_types[_].filter(p=>p.id===t)[0];if(!v){console.warn("Corresponding post not found",t,_,h);continue}a.post_types[_]||(a.post_types[_]=[]),a.post_types[_].push(v)}i({...u.current,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:""}),Vt(Kt+"import",a).then(t=>{const h={...a,old_to_new_id:{...u.current.old_to_new_id||{},...t.old_to_new_id||{}}};console.log("Imported duplicates",h),i({...u.current,importing:!1,importData:{},importedData:h,duplicatesFound:[],duplicatesHandledMessage:"",message:t.post_count+" template"+(t.post_count!==1?"s":"")+" imported"})}).catch(t=>{i({...u.current,duplicatesHandledMessage:"Error: "+t.message})})}d(vn,"m$2"),Va(vn,"handleDuplicates");var Ka=Object.defineProperty,Ht=d((r,u)=>Ka(r,"name",{value:u,configurable:!0}),"l");const Ja=!1,Jt=Ht((...r)=>Ja,"log"),{FileReader:Qa}=window,yn={tangible_template:"Templates",tangible_style:"Styles",tangible_script:"Scripts",tangible_layout:"Layouts",tangible_block:"Blocks"},ei=Ht(({useInput:r=!0,directImportData:u})=>{const[i,o]=wp.element.useState({importing:!1,importData:{},importedData:{},message:"",duplicatesFound:[],duplicatesHandledMessage:""}),a=wp.element.useRef();a.current=i;const t=Ht(()=>{o({...a.current,importing:!0,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:"Importing.."})},"preImport"),h=Ht(p=>o({...a.current,importing:!1,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:"Error: "+p}),"onError"),_=Ht(p=>{o({...a.current,importData:p}),Vt(Kt+"import",p).then(y=>{Jt("Import success",y);const{importData:T}=a.current,L={post_types:Object.keys(T.post_types).reduce((R,j)=>{const w=y.duplicates_found.filter(l=>l.post_type===j).map(l=>l.id);return R[j]=T.post_types[j].filter(l=>w.indexOf(l.id)<0),R},{}),old_to_new_id:y.old_to_new_id||{}};Jt("Imported minus duplicates",L),o({...a.current,importing:!1,duplicatesFound:y.duplicates_found,importData:y.duplicates_found.length?T:{},importedData:L,message:y.post_count+" template"+(y.post_count!==1?"s":"")+" imported"+(y.failed_post_count?" - "+y.failed_post_count+" template"+(y.failed_post_count!==1?"s":"")+" failed":"")})}).catch(y=>{console.error(y),h(y.message)})},"importJSON");wp.element.useEffect(()=>{u&&(t(),_(u))},[]);const v=wp.element.useRef();return wp.element.createElement("div",{id:"importer"},r&&wp.element.createElement("p",null,wp.element.createElement("input",{type:"file",hidden:!0,ref:v,accept:".json,text/json,.png,image/png",onChange:({target:{files:p}})=>{const y=p[0],T=y.name.endsWith(".png"),L=new Qa;t(),L.onload=function(R){const j=R.target.result;if(T){Wa(j).then(w=>{_(w)}).catch(w=>{console.error(w),h(w.message)});return}try{const w=JSON.parse(j);Jt("Import data",w),_(w)}catch{Jt("Invalid JSON",j),h("Invalid JSON")}},L.onerror=function(R){h(R.message)},T?L.readAsArrayBuffer(y):L.readAsText(y)}}),wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{i.importing||v.current&&v.current.click()}},"Import")),i.message&&wp.element.createElement("p",null,i.message),Object.keys(i.importedData.post_types||{}).map(p=>i.importedData.post_types[p]&&i.importedData.post_types[p].length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",null,wp.element.createElement("b",null,yn[p]||"Templates")),wp.element.createElement("ul",null,i.importedData.post_types[p].map((y,T)=>wp.element.createElement("li",{key:`post-${T}`},i.importedData.old_to_new_id&&i.importedData.old_to_new_id[y.id]?wp.element.createElement("a",{href:`post.php?post=${i.importedData.old_to_new_id[y.id]}&action=edit`},y.title):y.title))))),i.duplicatesFound.length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("p",{style:{fontWeight:"bold",color:"red"}},i.duplicatesFound.length," duplicate template",i.duplicatesFound!==1?"s":""," found"),Object.keys(yn).map(p=>{const y=i.duplicatesFound.filter(T=>T.post_type===p);if(y.length)return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",null,wp.element.createElement("b",null,yn[p]||"Templates")),wp.element.createElement("ul",null,y.map((T,L)=>wp.element.createElement("li",{key:`duplicate-post-${L}`},T.title))))}),wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{vn({mode:"overwrite",inputStateRef:a,setInputState:o})}},"Overwrite"),"\xA0",wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{vn({mode:"keep_both",inputStateRef:a,setInputState:o})}},"Keep both"),"\xA0",wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{o({...a.current,importing:!1,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:""})}},"Skip"),i.duplicatesHandledMessage&&wp.element.createElement("p",null,i.duplicatesHandledMessage)))},"Importer");var ti=Object.defineProperty,ni=d((r,u)=>ti(r,"name",{value:u,configurable:!0}),"a");const{jQuery:ri}=window,Qt=ni(({labelForEmptyValue:r="",options:u=[],value:i="",onChange:o,multiSelect:a,style:t})=>{const h=wp.element.useRef();if(wp.element.useEffect(()=>{const _=ri(h.current);h.current.$el=_,o(i),_.tangibleSelect({minimumResultsForSearch:5}),a&&(_.val(i),_.trigger("change")),_.on("change",function(p){if(!a){o(p.target.value);return}if(!h.current)return;const y=_.select2("data").map(T=>T.id);o(y)});const v=h.current.select2=_.data("select2");return()=>{v&&v.destroy()}},[]),h.current&&h.current.$el)if(a){const _=h.current.$el.val();i.length!==_.length&&u.length&&setTimeout(function(){h.current.$el.val(i),h.current.$el.trigger("change")},0)}else h.current.value!==i&&(h.current.$el.val(i),h.current.$el.trigger("change"));return wp.element.createElement("select",{ref:h,defaultValue:i,autoComplete:"off",multiple:a,style:{display:"none",width:"160px",...t}},r&&wp.element.createElement("option",{value:"",disabled:!0},r),u.map((_,v)=>wp.element.createElement("option",{key:`option-${v}`,value:_.value},_.label)))},"Select");var ai=Object.defineProperty,ii=d((r,u)=>ai(r,"name",{value:u,configurable:!0}),"d");const oi=ii(({rule:r,ruleIndex:u,exportRulesRef:i,setExportRules:o,templateTypeItemOptionsRef:a,ensureTemplateTypeItemOptions:t,templateCategoryOptions:h,hasPlugin:_})=>wp.element.createElement("div",{className:"export-rule"},wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(Qt,{labelForEmptyValue:"Select template type",options:[..._.blocks&&_.blocks_editor?[{label:"Block",value:"tangible_block"}]:[],..._.loops||_.template_system?[{label:"Template",value:"tangible_template"},{label:"Style",value:"tangible_style"},{label:"Script",value:"tangible_script"},{label:"Layout",value:"tangible_layout"}]:[]],value:r.field,onChange(v){r.field=v,i.current[u]=r,o(i.current)}})),r.field&&wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(Qt,{options:[{label:"All",value:"all"},{label:"Include",value:"include"},{label:"Exclude",value:"exclude"},{label:"Include category",value:"include_template_categories"},{label:"Exclude category",value:"exclude_template_categories"}],value:r.operator,onChange(v){r.operator=v,v==="all"&&(r.values=[]),i.current[u]=r,o(i.current),["include","exclude"].includes(v)&&t(r.field)},style:{width:"auto"}})),r.field&&r.operator!=="all"&&(["include_template_categories","exclude_template_categories"].includes(r.operator)?wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(Qt,{options:h,value:r.values,onChange(v){r.values=v,i.current[u]=r,o(i.current)},multiSelect:!0})):a.current[r.field]&&wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(Qt,{options:a.current[r.field]instanceof Promise?[]:a.current[r.field],value:r.values,onChange(v){r.values=v,i.current[u]=r,o(i.current)},multiSelect:!0}))),wp.element.createElement("div",{className:"export-rule-part export-rule-part--remove-rule"},wp.element.createElement("div",{className:"icon",onClick:()=>{i.current.splice(u,1),o(i.current)}},wp.element.createElement("svg",{viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"}))))),"ExportRule");var si=Object.defineProperty,Ur=d((r,u)=>si(r,"name",{value:u,configurable:!0}),"e$1");function Mr(r){window.localStorage&&window.localStorage.setItem("exporterState",JSON.stringify(r))}d(Mr,"saveStateToLocalStorage"),Ur(Mr,"saveStateToLocalStorage");function Lr(){if(!window.localStorage)return;let r=window.localStorage.getItem("exporterState");if(r)try{return r=JSON.parse(r),r}catch{}}d(Lr,"getSavedStateFromLocalStorage"),Ur(Lr,"getSavedStateFromLocalStorage");var li=Object.defineProperty,st=d((r,u)=>li(r,"name",{value:u,configurable:!0}),"n$1");const ui=!1,en=st((...r)=>ui,"log"),tn=Lr(),Or=tn&&tn.name||"tangible-templates",fi=tn&&tn.rules||[{field:"tangible_template",operator:"all",values:[]}],ci=st(({templateCategoryOptions:r,hasPlugin:u})=>{const i=wp.element.useRef(),[o,a]=wp.element.useState(fi),t=wp.element.useRef();t.current=o;const h=st(l=>{a([...l])},"setExportRules"),[_,v]=wp.element.useState({}),p=wp.element.useRef();p.current=_;const[y,T]=wp.element.useState({exporting:!1,message:"",json:"",packageName:""}),L=wp.element.useRef();L.current=y;const R=st(l=>{T({...L.current,...l})},"setExportState"),j=st(async l=>{if(p.current[l])return;en("ensureTemplateTypeItemOptions",l,p.current);const E=Vt(Kt+"get_template_type_item_options",{post_type:l}).then(S=>{en("ensureTemplateTypeItemOptions Success",S),v({...p.current,[l]:S})}).catch(S=>{en("ensureTemplateTypeItemOptions Fail",S)});v({...p.current,[l]:E})},"ensureTemplateTypeItemOptions"),w=wp.element.useCallback((l="json")=>{const E=i.current&&i.current.value||Or;Mr({name:E,rules:t.current}),en("Export start",t.current),R({exporting:!0,message:"Exporting.."});function S(D){console.error(D),R({exporting:!1,message:"Error: "+D.message})}d(S,"r"),st(S,"handleError"),Vt(Kt+"export",{export_rules:t.current}).then(D=>{console.log("Export success",D),R({exporting:!1,message:"Export success"});const c={package_name:E,...D},g=new Date().toISOString().slice(0,10).replace(/-/g,"");if(l==="png"){Ha(c).then(M=>{Ya(M,`${E}-${g}.png`)}).catch(S);return}const C=document.createElement("a");C.href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c,null,2)),C.download=`${E}-${g}.json`,C.style.display="none",document.body.appendChild(C),C.click()}).catch(S)},[]);return wp.element.createElement("div",{id:"exporter"},wp.element.createElement("div",{className:"export-name"},"Package name:"," ",wp.element.createElement("input",{type:"text",name:"name",defaultValue:Or,ref:i})),wp.element.createElement("div",{className:"export-rules"},o.map((l,E)=>wp.element.createElement(oi,{key:`export-rule-${E}`,rule:l,ruleIndex:E,exportRulesRef:t,setExportRules:h,templateTypeItemOptionsRef:p,ensureTemplateTypeItemOptions:j,templateCategoryOptions:r,hasPlugin:u}))),wp.element.createElement("p",null,wp.element.createElement("button",{type:"button",className:"button button-secondary",onClick:()=>{t.current.push({field:"tangible_template",operator:"all",values:[]}),h(t.current)}},"Add export rule")),t.current.length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("p",null,wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:l=>{l.preventDefault(),!y.exporting&&w("png")}},"Export")),wp.element.createElement("p",null,wp.element.createElement("a",{href:"#",style:{},onClick:l=>{l.preventDefault(),!y.exporting&&w()}},"Export as JSON (Uncompressed)")),wp.element.createElement("p",null,y.message)))},"Exporter"),{hasPlugin:nn={},templateCategoryOptions:di=[]}=window.TangibleTemplateImportExport,zr=document.getElementById("tangible_template_import_export_form");zr.addEventListener("submit",function(r){r.preventDefault()});const hi=nn.loops||nn.blocks_editor||nn.template_system;wp.element.createRoot(zr).render(wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("h1",{className:"wp-heading-inline"},"Import"),wp.element.createElement(ei,null),hi&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("hr",null),wp.element.createElement("h1",{className:"wp-heading-inline"},"Export"),wp.element.createElement(ci,{templateCategoryOptions:di,hasPlugin:nn}))))})();
//# sourceMappingURL=template-import-export.min.js.map
