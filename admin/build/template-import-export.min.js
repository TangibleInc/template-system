var bi=Object.defineProperty;var h=(ut,K)=>bi(ut,"name",{value:K,configurable:!0});(function(){"use strict";(function(){const r={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,r);return}}catch{}globalThis.process={env:r}})();var ut={},K={};Object.defineProperty(K,"__esModule",{value:!0}),K.handleWarning=K.DecodeWarning=K.createChunkDecodeWarning=K.DecodeError=K.createChunkDecodeError=K.assertChunkCompressionMethod=K.assertChunkMutualExclusion=K.assertChunkFollows=K.assertChunkPrecedes=K.assertChunkDataLengthGte=K.assertChunkDataLengthEquals=K.assertChunkSinglular=void 0;function $r(r,u){r.parsedChunks.has(u.type)&&it(r,at(u,`Multiple ${u.type} chunks not allowed`,u.offset+4))}h($r,"assertChunkSinglular"),K.assertChunkSinglular=$r;function Zr(r,u,o){if(u.dataLength!==o){const a=at(u,`Invalid data length: ${u.dataLength} !== ${o}`,u.offset);if(u.dataLength>o)it(r,a);else throw a}}h(Zr,"assertChunkDataLengthEquals"),K.assertChunkDataLengthEquals=Zr;function Hr(r,u,o){if(u.dataLength<o)throw on(r,u,`Invalid data length: ${u.dataLength} < ${o}`,u.offset)}h(Hr,"assertChunkDataLengthGte"),K.assertChunkDataLengthGte=Hr;function Wr(r,u,o){r.parsedChunks.has(o)&&it(r,at(u,`Must precede ${o}`,u.offset+4))}h(Wr,"assertChunkPrecedes"),K.assertChunkPrecedes=Wr;function Gr(r,u,o){if(!r.parsedChunks.has(o))throw on(r,u,`Must follow ${o}`,u.offset+4)}h(Gr,"assertChunkFollows"),K.assertChunkFollows=Gr;function Yr(r,u,o){r.parsedChunks.has(o)&&it(r,at(u,`Should not be present alongside ${o}`,u.offset+4))}h(Yr,"assertChunkMutualExclusion"),K.assertChunkMutualExclusion=Yr;function Xr(r,u,o,a){o!==0&&it(r,at(u,`Unknown compression method "${o}"`,a))}h(Xr,"assertChunkCompressionMethod"),K.assertChunkCompressionMethod=Xr;function on(r,u,o,a){return new Yt(r,`${u.type}: ${o}`,a)}h(on,"createChunkDecodeError"),K.createChunkDecodeError=on;const Cn=class Cn extends Error{constructor(u,o,a){super(o),this.offset=a,this.partiallyDecodedImage={details:"header"in u&&u.header?{width:u.header.width,height:u.header.height,bitDepth:u.header.bitDepth,colorType:u.header.colorType,interlaceMethod:u.header.interlaceMethod}:void 0,info:u.info,metadata:u.metadata,rawChunks:u.rawChunks,warnings:u.warnings}}};h(Cn,"DecodeError");let Yt=Cn;K.DecodeError=Yt;function at(r,u,o){return new Xt(`${r.type}: ${u}`,o)}h(at,"createChunkDecodeWarning"),K.createChunkDecodeWarning=at;const En=class En extends Error{constructor(u,o){super(u),this.offset=o}};h(En,"DecodeWarning");let Xt=En;K.DecodeWarning=Xt;function it(r,u){if(r.options.strictMode)throw u;r.warnings.push(u)}h(it,"handleWarning$1"),K.handleWarning=it;var Be={};Object.defineProperty(Be,"__esModule",{value:!0}),Be.handleWarning=Be.EncodeWarning=Be.EncodeError=void 0;const Tn=class Tn extends Error{constructor(u,o){super(u),this.offset=o}};h(Tn,"EncodeError");let sn=Tn;Be.EncodeError=sn;const Dn=class Dn extends Error{constructor(u,o){super(u),this.offset=o}};h(Dn,"EncodeWarning");let ln=Dn;Be.EncodeWarning=ln;function Vr(r,u){if(r.options.strictMode)throw u;r.warnings.push(u)}h(Vr,"handleWarning"),Be.handleWarning=Vr;var ze={},ft={},xn;function Kr(){if(xn)return ft;xn=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.convert16BitTo8BitData=void 0;function r(u){const o=new Uint8Array(u.buffer),a=new Uint8Array(u.length);for(let i=0;i<a.length;i++)a[i]=o[i*2+1];return a}return h(r,"convert16BitTo8BitData"),ft.convert16BitTo8BitData=r,ft}h(Kr,"requireArray");var ct={},Fe={},Ke={},Ne={},Je={},Sn;function Jr(){if(Sn)return Je;Sn=1;const r=4,u=0,o=1,a=2;function i(s){let z=s.length;for(;--z>=0;)s[z]=0}h(i,"zero");const t=0,d=1,_=2,v=3,p=258,y=29,D=256,L=D+1+y,R=30,j=19,w=2*L+1,l=15,E=16,S=7,T=256,c=16,g=17,C=18,M=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),$=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),A=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ee=512,Y=new Array((L+2)*2);i(Y);const Z=new Array(R*2);i(Z);const ie=new Array(ee);i(ie);const de=new Array(p-v+1);i(de);const _e=new Array(y);i(_e);const se=new Array(R);i(se);function le(s,z,F,W,X){this.static_tree=s,this.extra_bits=z,this.extra_base=F,this.elems=W,this.max_length=X,this.has_stree=s&&s.length}h(le,"StaticTreeDesc");let Ee,Q,ce;function fe(s,z){this.dyn_tree=s,this.max_code=0,this.stat_desc=z}h(fe,"TreeDesc");const ke=h(s=>s<256?ie[s]:ie[256+(s>>>7)],"d_code"),we=h((s,z)=>{s.pending_buf[s.pending++]=z&255,s.pending_buf[s.pending++]=z>>>8&255},"put_short"),re=h((s,z,F)=>{s.bi_valid>E-F?(s.bi_buf|=z<<s.bi_valid&65535,we(s,s.bi_buf),s.bi_buf=z>>E-s.bi_valid,s.bi_valid+=F-E):(s.bi_buf|=z<<s.bi_valid&65535,s.bi_valid+=F)},"send_bits"),ge=h((s,z,F)=>{re(s,F[z*2],F[z*2+1])},"send_code"),He=h((s,z)=>{let F=0;do F|=s&1,s>>>=1,F<<=1;while(--z>0);return F>>>1},"bi_reverse"),We=h(s=>{s.bi_valid===16?(we(s,s.bi_buf),s.bi_buf=0,s.bi_valid=0):s.bi_valid>=8&&(s.pending_buf[s.pending++]=s.bi_buf&255,s.bi_buf>>=8,s.bi_valid-=8)},"bi_flush"),Ye=h((s,z)=>{const F=z.dyn_tree,W=z.max_code,X=z.stat_desc.static_tree,J=z.stat_desc.has_stree,b=z.stat_desc.extra_bits,P=z.stat_desc.extra_base,n=z.stat_desc.max_length;let N,te,q,ne,H,he,I=0;for(ne=0;ne<=l;ne++)s.bl_count[ne]=0;for(F[s.heap[s.heap_max]*2+1]=0,N=s.heap_max+1;N<w;N++)te=s.heap[N],ne=F[F[te*2+1]*2+1]+1,ne>n&&(ne=n,I++),F[te*2+1]=ne,!(te>W)&&(s.bl_count[ne]++,H=0,te>=P&&(H=b[te-P]),he=F[te*2],s.opt_len+=he*(ne+H),J&&(s.static_len+=he*(X[te*2+1]+H)));if(I!==0){do{for(ne=n-1;s.bl_count[ne]===0;)ne--;s.bl_count[ne]--,s.bl_count[ne+1]+=2,s.bl_count[n]--,I-=2}while(I>0);for(ne=n;ne!==0;ne--)for(te=s.bl_count[ne];te!==0;)q=s.heap[--N],!(q>W)&&(F[q*2+1]!==ne&&(s.opt_len+=(ne-F[q*2+1])*F[q*2],F[q*2+1]=ne),te--)}},"gen_bitlen"),xe=h((s,z,F)=>{const W=new Array(l+1);let X=0,J,b;for(J=1;J<=l;J++)X=X+F[J-1]<<1,W[J]=X;for(b=0;b<=z;b++){let P=s[b*2+1];P!==0&&(s[b*2]=He(W[P]++,P))}},"gen_codes"),ue=h(()=>{let s,z,F,W,X;const J=new Array(l+1);for(F=0,W=0;W<y-1;W++)for(_e[W]=F,s=0;s<1<<M[W];s++)de[F++]=W;for(de[F-1]=W,X=0,W=0;W<16;W++)for(se[W]=X,s=0;s<1<<$[W];s++)ie[X++]=W;for(X>>=7;W<R;W++)for(se[W]=X<<7,s=0;s<1<<$[W]-7;s++)ie[256+X++]=W;for(z=0;z<=l;z++)J[z]=0;for(s=0;s<=143;)Y[s*2+1]=8,s++,J[8]++;for(;s<=255;)Y[s*2+1]=9,s++,J[9]++;for(;s<=279;)Y[s*2+1]=7,s++,J[7]++;for(;s<=287;)Y[s*2+1]=8,s++,J[8]++;for(xe(Y,L+1,J),s=0;s<R;s++)Z[s*2+1]=5,Z[s*2]=He(s,5);Ee=new le(Y,M,D+1,L,l),Q=new le(Z,$,0,R,l),ce=new le(new Array(0),A,0,j,S)},"tr_static_init"),ve=h(s=>{let z;for(z=0;z<L;z++)s.dyn_ltree[z*2]=0;for(z=0;z<R;z++)s.dyn_dtree[z*2]=0;for(z=0;z<j;z++)s.bl_tree[z*2]=0;s.dyn_ltree[T*2]=1,s.opt_len=s.static_len=0,s.sym_next=s.matches=0},"init_block"),Ue=h(s=>{s.bi_valid>8?we(s,s.bi_buf):s.bi_valid>0&&(s.pending_buf[s.pending++]=s.bi_buf),s.bi_buf=0,s.bi_valid=0},"bi_windup"),Me=h((s,z,F,W)=>{const X=z*2,J=F*2;return s[X]<s[J]||s[X]===s[J]&&W[z]<=W[F]},"smaller"),Le=h((s,z,F)=>{const W=s.heap[F];let X=F<<1;for(;X<=s.heap_len&&(X<s.heap_len&&Me(z,s.heap[X+1],s.heap[X],s.depth)&&X++,!Me(z,W,s.heap[X],s.depth));)s.heap[F]=s.heap[X],F=X,X<<=1;s.heap[F]=W},"pqdownheap"),Wt=h((s,z,F)=>{let W,X,J=0,b,P;if(s.sym_next!==0)do W=s.pending_buf[s.sym_buf+J++]&255,W+=(s.pending_buf[s.sym_buf+J++]&255)<<8,X=s.pending_buf[s.sym_buf+J++],W===0?ge(s,X,z):(b=de[X],ge(s,b+D+1,z),P=M[b],P!==0&&(X-=_e[b],re(s,X,P)),W--,b=ke(W),ge(s,b,F),P=$[b],P!==0&&(W-=se[b],re(s,W,P)));while(J<s.sym_next);ge(s,T,z)},"compress_block"),Se=h((s,z)=>{const F=z.dyn_tree,W=z.stat_desc.static_tree,X=z.stat_desc.has_stree,J=z.stat_desc.elems;let b,P,n=-1,N;for(s.heap_len=0,s.heap_max=w,b=0;b<J;b++)F[b*2]!==0?(s.heap[++s.heap_len]=n=b,s.depth[b]=0):F[b*2+1]=0;for(;s.heap_len<2;)N=s.heap[++s.heap_len]=n<2?++n:0,F[N*2]=1,s.depth[N]=0,s.opt_len--,X&&(s.static_len-=W[N*2+1]);for(z.max_code=n,b=s.heap_len>>1;b>=1;b--)Le(s,F,b);N=J;do b=s.heap[1],s.heap[1]=s.heap[s.heap_len--],Le(s,F,1),P=s.heap[1],s.heap[--s.heap_max]=b,s.heap[--s.heap_max]=P,F[N*2]=F[b*2]+F[P*2],s.depth[N]=(s.depth[b]>=s.depth[P]?s.depth[b]:s.depth[P])+1,F[b*2+1]=F[P*2+1]=N,s.heap[1]=N++,Le(s,F,1);while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],Ye(s,z),xe(F,n,s.bl_count)},"build_tree"),Xe=h((s,z,F)=>{let W,X=-1,J,b=z[0*2+1],P=0,n=7,N=4;for(b===0&&(n=138,N=3),z[(F+1)*2+1]=65535,W=0;W<=F;W++)J=b,b=z[(W+1)*2+1],!(++P<n&&J===b)&&(P<N?s.bl_tree[J*2]+=P:J!==0?(J!==X&&s.bl_tree[J*2]++,s.bl_tree[c*2]++):P<=10?s.bl_tree[g*2]++:s.bl_tree[C*2]++,P=0,X=J,b===0?(n=138,N=3):J===b?(n=6,N=3):(n=7,N=4))},"scan_tree"),Re=h((s,z,F)=>{let W,X=-1,J,b=z[0*2+1],P=0,n=7,N=4;for(b===0&&(n=138,N=3),W=0;W<=F;W++)if(J=b,b=z[(W+1)*2+1],!(++P<n&&J===b)){if(P<N)do ge(s,J,s.bl_tree);while(--P!==0);else J!==0?(J!==X&&(ge(s,J,s.bl_tree),P--),ge(s,c,s.bl_tree),re(s,P-3,2)):P<=10?(ge(s,g,s.bl_tree),re(s,P-3,3)):(ge(s,C,s.bl_tree),re(s,P-11,7));P=0,X=J,b===0?(n=138,N=3):J===b?(n=6,N=3):(n=7,N=4)}},"send_tree"),qe=h(s=>{let z;for(Xe(s,s.dyn_ltree,s.l_desc.max_code),Xe(s,s.dyn_dtree,s.d_desc.max_code),Se(s,s.bl_desc),z=j-1;z>=3&&s.bl_tree[O[z]*2+1]===0;z--);return s.opt_len+=3*(z+1)+5+5+4,z},"build_bl_tree"),Gt=h((s,z,F,W)=>{let X;for(re(s,z-257,5),re(s,F-1,5),re(s,W-4,4),X=0;X<W;X++)re(s,s.bl_tree[O[X]*2+1],3);Re(s,s.dyn_ltree,z-1),Re(s,s.dyn_dtree,F-1)},"send_all_trees"),Ae=h(s=>{let z=4093624447,F;for(F=0;F<=31;F++,z>>>=1)if(z&1&&s.dyn_ltree[F*2]!==0)return u;if(s.dyn_ltree[9*2]!==0||s.dyn_ltree[10*2]!==0||s.dyn_ltree[13*2]!==0)return o;for(F=32;F<D;F++)if(s.dyn_ltree[F*2]!==0)return o;return u},"detect_data_type");let me=!1;const Ce=h(s=>{me||(ue(),me=!0),s.l_desc=new fe(s.dyn_ltree,Ee),s.d_desc=new fe(s.dyn_dtree,Q),s.bl_desc=new fe(s.bl_tree,ce),s.bi_buf=0,s.bi_valid=0,ve(s)},"_tr_init"),ae=h((s,z,F,W)=>{re(s,(t<<1)+(W?1:0),3),Ue(s),we(s,F),we(s,~F),F&&s.pending_buf.set(s.window.subarray(z,z+F),s.pending),s.pending+=F},"_tr_stored_block"),$e=h(s=>{re(s,d<<1,3),ge(s,T,Y),We(s)},"_tr_align"),Ge=h((s,z,F,W)=>{let X,J,b=0;s.level>0?(s.strm.data_type===a&&(s.strm.data_type=Ae(s)),Se(s,s.l_desc),Se(s,s.d_desc),b=qe(s),X=s.opt_len+3+7>>>3,J=s.static_len+3+7>>>3,J<=X&&(X=J)):X=J=F+5,F+4<=X&&z!==-1?ae(s,z,F,W):s.strategy===r||J===X?(re(s,(d<<1)+(W?1:0),3),Wt(s,Y,Z)):(re(s,(_<<1)+(W?1:0),3),Gt(s,s.l_desc.max_code+1,s.d_desc.max_code+1,b+1),Wt(s,s.dyn_ltree,s.dyn_dtree)),ve(s),W&&Ue(s)},"_tr_flush_block"),Ve=h((s,z,F)=>(s.pending_buf[s.sym_buf+s.sym_next++]=z,s.pending_buf[s.sym_buf+s.sym_next++]=z>>8,s.pending_buf[s.sym_buf+s.sym_next++]=F,z===0?s.dyn_ltree[F*2]++:(s.matches++,z--,s.dyn_ltree[(de[F]+D+1)*2]++,s.dyn_dtree[ke(z)*2]++),s.sym_next===s.sym_end),"_tr_tally");return Je._tr_init=Ce,Je._tr_stored_block=ae,Je._tr_flush_block=Ge,Je._tr_tally=Ve,Je._tr_align=$e,Je}h(Jr,"requireTrees");var un,Rn;function An(){return Rn||(Rn=1,un=h((u,o,a,i)=>{let t=u&65535|0,d=u>>>16&65535|0,_=0;for(;a!==0;){_=a>2e3?2e3:a,a-=_;do t=t+o[i++]|0,d=d+t|0;while(--_);t%=65521,d%=65521}return t|d<<16|0},"adler32")),un}h(An,"requireAdler32");var fn,In;function Pn(){if(In)return fn;In=1;const r=h(()=>{let a,i=[];for(var t=0;t<256;t++){a=t;for(var d=0;d<8;d++)a=a&1?3988292384^a>>>1:a>>>1;i[t]=a}return i},"makeTable"),u=new Uint32Array(r());return fn=h((a,i,t,d)=>{const _=u,v=d+t;a^=-1;for(let p=d;p<v;p++)a=a>>>8^_[(a^i[p])&255];return a^-1},"crc32"),fn}h(Pn,"requireCrc32$1");var cn,Un;function dn(){return Un||(Un=1,cn={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),cn}h(dn,"requireMessages");var hn,Mn;function Qe(){return Mn||(Mn=1,hn={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),hn}h(Qe,"requireConstants");var Ln;function Qr(){if(Ln)return Ne;Ln=1;const{_tr_init:r,_tr_stored_block:u,_tr_flush_block:o,_tr_tally:a,_tr_align:i}=Jr(),t=An(),d=Pn(),_=dn(),{Z_NO_FLUSH:v,Z_PARTIAL_FLUSH:p,Z_FULL_FLUSH:y,Z_FINISH:D,Z_BLOCK:L,Z_OK:R,Z_STREAM_END:j,Z_STREAM_ERROR:w,Z_DATA_ERROR:l,Z_BUF_ERROR:E,Z_DEFAULT_COMPRESSION:S,Z_FILTERED:T,Z_HUFFMAN_ONLY:c,Z_RLE:g,Z_FIXED:C,Z_DEFAULT_STRATEGY:M,Z_UNKNOWN:$,Z_DEFLATED:A}=Qe(),O=9,ee=15,Y=8,de=256+1+29,_e=30,se=19,le=2*de+1,Ee=15,Q=3,ce=258,fe=ce+Q+1,ke=32,we=42,re=57,ge=69,He=73,We=91,Ye=103,xe=113,ue=666,ve=1,Ue=2,Me=3,Le=4,Wt=3,Se=h((e,x)=>(e.msg=_[x],x),"err"),Xe=h(e=>e*2-(e>4?9:0),"rank"),Re=h(e=>{let x=e.length;for(;--x>=0;)e[x]=0},"zero"),qe=h(e=>{let x,f,m,k=e.w_size;x=e.hash_size,m=x;do f=e.head[--m],e.head[m]=f>=k?f-k:0;while(--x);x=k,m=x;do f=e.prev[--m],e.prev[m]=f>=k?f-k:0;while(--x)},"slide_hash");let Ae=h((e,x,f)=>(x<<e.hash_shift^f)&e.hash_mask,"HASH_ZLIB");const me=h(e=>{const x=e.state;let f=x.pending;f>e.avail_out&&(f=e.avail_out),f!==0&&(e.output.set(x.pending_buf.subarray(x.pending_out,x.pending_out+f),e.next_out),e.next_out+=f,x.pending_out+=f,e.total_out+=f,e.avail_out-=f,x.pending-=f,x.pending===0&&(x.pending_out=0))},"flush_pending"),Ce=h((e,x)=>{o(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,x),e.block_start=e.strstart,me(e.strm)},"flush_block_only"),ae=h((e,x)=>{e.pending_buf[e.pending++]=x},"put_byte"),$e=h((e,x)=>{e.pending_buf[e.pending++]=x>>>8&255,e.pending_buf[e.pending++]=x&255},"putShortMSB"),Ge=h((e,x,f,m)=>{let k=e.avail_in;return k>m&&(k=m),k===0?0:(e.avail_in-=k,x.set(e.input.subarray(e.next_in,e.next_in+k),f),e.state.wrap===1?e.adler=t(e.adler,x,k,f):e.state.wrap===2&&(e.adler=d(e.adler,x,k,f)),e.next_in+=k,e.total_in+=k,k)},"read_buf"),Ve=h((e,x)=>{let f=e.max_chain_length,m=e.strstart,k,B,V=e.prev_length,G=e.nice_match;const Te=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,oe=e.window,be=e.w_mask,De=e.prev,ye=e.strstart+ce;let Oe=oe[m+V-1],Ie=oe[m+V];e.prev_length>=e.good_match&&(f>>=2),G>e.lookahead&&(G=e.lookahead);do if(k=x,!(oe[k+V]!==Ie||oe[k+V-1]!==Oe||oe[k]!==oe[m]||oe[++k]!==oe[m+1])){m+=2,k++;do;while(oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&oe[++m]===oe[++k]&&m<ye);if(B=ce-(ye-m),m=ye-ce,B>V){if(e.match_start=x,V=B,B>=G)break;Oe=oe[m+V-1],Ie=oe[m+V]}}while((x=De[x&be])>Te&&--f!==0);return V<=e.lookahead?V:e.lookahead},"longest_match"),s=h(e=>{const x=e.w_size;let f,m,k;do{if(m=e.window_size-e.lookahead-e.strstart,e.strstart>=x+(x-fe)&&(e.window.set(e.window.subarray(x,x+x-m),0),e.match_start-=x,e.strstart-=x,e.block_start-=x,e.insert>e.strstart&&(e.insert=e.strstart),qe(e),m+=x),e.strm.avail_in===0)break;if(f=Ge(e.strm,e.window,e.strstart+e.lookahead,m),e.lookahead+=f,e.lookahead+e.insert>=Q)for(k=e.strstart-e.insert,e.ins_h=e.window[k],e.ins_h=Ae(e,e.ins_h,e.window[k+1]);e.insert&&(e.ins_h=Ae(e,e.ins_h,e.window[k+Q-1]),e.prev[k&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=k,k++,e.insert--,!(e.lookahead+e.insert<Q)););}while(e.lookahead<fe&&e.strm.avail_in!==0)},"fill_window"),z=h((e,x)=>{let f=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,m,k,B,V=0,G=e.strm.avail_in;do{if(m=65535,B=e.bi_valid+42>>3,e.strm.avail_out<B||(B=e.strm.avail_out-B,k=e.strstart-e.block_start,m>k+e.strm.avail_in&&(m=k+e.strm.avail_in),m>B&&(m=B),m<f&&(m===0&&x!==D||x===v||m!==k+e.strm.avail_in)))break;V=x===D&&m===k+e.strm.avail_in?1:0,u(e,0,0,V),e.pending_buf[e.pending-4]=m,e.pending_buf[e.pending-3]=m>>8,e.pending_buf[e.pending-2]=~m,e.pending_buf[e.pending-1]=~m>>8,me(e.strm),k&&(k>m&&(k=m),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+k),e.strm.next_out),e.strm.next_out+=k,e.strm.avail_out-=k,e.strm.total_out+=k,e.block_start+=k,m-=k),m&&(Ge(e.strm,e.strm.output,e.strm.next_out,m),e.strm.next_out+=m,e.strm.avail_out-=m,e.strm.total_out+=m)}while(V===0);return G-=e.strm.avail_in,G&&(G>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=G&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-G,e.strm.next_in),e.strstart),e.strstart+=G,e.insert+=G>e.w_size-e.insert?e.w_size-e.insert:G),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),V?Le:x!==v&&x!==D&&e.strm.avail_in===0&&e.strstart===e.block_start?Ue:(B=e.window_size-e.strstart,e.strm.avail_in>B&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,B+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),B>e.strm.avail_in&&(B=e.strm.avail_in),B&&(Ge(e.strm,e.window,e.strstart,B),e.strstart+=B,e.insert+=B>e.w_size-e.insert?e.w_size-e.insert:B),e.high_water<e.strstart&&(e.high_water=e.strstart),B=e.bi_valid+42>>3,B=e.pending_buf_size-B>65535?65535:e.pending_buf_size-B,f=B>e.w_size?e.w_size:B,k=e.strstart-e.block_start,(k>=f||(k||x===D)&&x!==v&&e.strm.avail_in===0&&k<=B)&&(m=k>B?B:k,V=x===D&&e.strm.avail_in===0&&m===k?1:0,u(e,e.block_start,m,V),e.block_start+=m,me(e.strm)),V?Me:ve)},"deflate_stored"),F=h((e,x)=>{let f,m;for(;;){if(e.lookahead<fe){if(s(e),e.lookahead<fe&&x===v)return ve;if(e.lookahead===0)break}if(f=0,e.lookahead>=Q&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),f!==0&&e.strstart-f<=e.w_size-fe&&(e.match_length=Ve(e,f)),e.match_length>=Q)if(m=a(e,e.strstart-e.match_start,e.match_length-Q),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=Q){e.match_length--;do e.strstart++,e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+1]);else m=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(m&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=e.strstart<Q-1?e.strstart:Q-1,x===D?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_fast"),W=h((e,x)=>{let f,m,k;for(;;){if(e.lookahead<fe){if(s(e),e.lookahead<fe&&x===v)return ve;if(e.lookahead===0)break}if(f=0,e.lookahead>=Q&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=Q-1,f!==0&&e.prev_length<e.max_lazy_match&&e.strstart-f<=e.w_size-fe&&(e.match_length=Ve(e,f),e.match_length<=5&&(e.strategy===T||e.match_length===Q&&e.strstart-e.match_start>4096)&&(e.match_length=Q-1)),e.prev_length>=Q&&e.match_length<=e.prev_length){k=e.strstart+e.lookahead-Q,m=a(e,e.strstart-1-e.prev_match,e.prev_length-Q),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=k&&(e.ins_h=Ae(e,e.ins_h,e.window[e.strstart+Q-1]),f=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=Q-1,e.strstart++,m&&(Ce(e,!1),e.strm.avail_out===0))return ve}else if(e.match_available){if(m=a(e,0,e.window[e.strstart-1]),m&&Ce(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return ve}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(m=a(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<Q-1?e.strstart:Q-1,x===D?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_slow"),X=h((e,x)=>{let f,m,k,B;const V=e.window;for(;;){if(e.lookahead<=ce){if(s(e),e.lookahead<=ce&&x===v)return ve;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=Q&&e.strstart>0&&(k=e.strstart-1,m=V[k],m===V[++k]&&m===V[++k]&&m===V[++k])){B=e.strstart+ce;do;while(m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&m===V[++k]&&k<B);e.match_length=ce-(B-k),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=Q?(f=a(e,1,e.match_length-Q),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(f=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),f&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=0,x===D?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_rle"),J=h((e,x)=>{let f;for(;;){if(e.lookahead===0&&(s(e),e.lookahead===0)){if(x===v)return ve;break}if(e.match_length=0,f=a(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,f&&(Ce(e,!1),e.strm.avail_out===0))return ve}return e.insert=0,x===D?(Ce(e,!0),e.strm.avail_out===0?Me:Le):e.sym_next&&(Ce(e,!1),e.strm.avail_out===0)?ve:Ue},"deflate_huff");function b(e,x,f,m,k){this.good_length=e,this.max_lazy=x,this.nice_length=f,this.max_chain=m,this.func=k}h(b,"Config");const P=[new b(0,0,0,0,z),new b(4,4,8,4,F),new b(4,5,16,8,F),new b(4,6,32,32,F),new b(4,4,16,16,W),new b(8,16,32,32,W),new b(8,16,128,128,W),new b(8,32,128,256,W),new b(32,128,258,1024,W),new b(32,258,258,4096,W)],n=h(e=>{e.window_size=2*e.w_size,Re(e.head),e.max_lazy_match=P[e.level].max_lazy,e.good_match=P[e.level].good_length,e.nice_match=P[e.level].nice_length,e.max_chain_length=P[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=Q-1,e.match_available=0,e.ins_h=0},"lm_init");function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=A,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(le*2),this.dyn_dtree=new Uint16Array((2*_e+1)*2),this.bl_tree=new Uint16Array((2*se+1)*2),Re(this.dyn_ltree),Re(this.dyn_dtree),Re(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Ee+1),this.heap=new Uint16Array(2*de+1),Re(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*de+1),Re(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}h(N,"DeflateState");const te=h(e=>{if(!e)return 1;const x=e.state;return!x||x.strm!==e||x.status!==we&&x.status!==re&&x.status!==ge&&x.status!==He&&x.status!==We&&x.status!==Ye&&x.status!==xe&&x.status!==ue?1:0},"deflateStateCheck"),q=h(e=>{if(te(e))return Se(e,w);e.total_in=e.total_out=0,e.data_type=$;const x=e.state;return x.pending=0,x.pending_out=0,x.wrap<0&&(x.wrap=-x.wrap),x.status=x.wrap===2?re:x.wrap?we:xe,e.adler=x.wrap===2?0:1,x.last_flush=-2,r(x),R},"deflateResetKeep"),ne=h(e=>{const x=q(e);return x===R&&n(e.state),x},"deflateReset"),H=h((e,x)=>te(e)||e.state.wrap!==2?w:(e.state.gzhead=x,R),"deflateSetHeader"),he=h((e,x,f,m,k,B)=>{if(!e)return w;let V=1;if(x===S&&(x=6),m<0?(V=0,m=-m):m>15&&(V=2,m-=16),k<1||k>O||f!==A||m<8||m>15||x<0||x>9||B<0||B>C||m===8&&V!==1)return Se(e,w);m===8&&(m=9);const G=new N;return e.state=G,G.strm=e,G.status=we,G.wrap=V,G.gzhead=null,G.w_bits=m,G.w_size=1<<G.w_bits,G.w_mask=G.w_size-1,G.hash_bits=k+7,G.hash_size=1<<G.hash_bits,G.hash_mask=G.hash_size-1,G.hash_shift=~~((G.hash_bits+Q-1)/Q),G.window=new Uint8Array(G.w_size*2),G.head=new Uint16Array(G.hash_size),G.prev=new Uint16Array(G.w_size),G.lit_bufsize=1<<k+6,G.pending_buf_size=G.lit_bufsize*4,G.pending_buf=new Uint8Array(G.pending_buf_size),G.sym_buf=G.lit_bufsize,G.sym_end=(G.lit_bufsize-1)*3,G.level=x,G.strategy=B,G.method=f,ne(e)},"deflateInit2"),I=h((e,x)=>he(e,x,A,ee,Y,M),"deflateInit"),U=h((e,x)=>{if(te(e)||x>L||x<0)return e?Se(e,w):w;const f=e.state;if(!e.output||e.avail_in!==0&&!e.input||f.status===ue&&x!==D)return Se(e,e.avail_out===0?E:w);const m=f.last_flush;if(f.last_flush=x,f.pending!==0){if(me(e),e.avail_out===0)return f.last_flush=-1,R}else if(e.avail_in===0&&Xe(x)<=Xe(m)&&x!==D)return Se(e,E);if(f.status===ue&&e.avail_in!==0)return Se(e,E);if(f.status===we&&f.wrap===0&&(f.status=xe),f.status===we){let k=A+(f.w_bits-8<<4)<<8,B=-1;if(f.strategy>=c||f.level<2?B=0:f.level<6?B=1:f.level===6?B=2:B=3,k|=B<<6,f.strstart!==0&&(k|=ke),k+=31-k%31,$e(f,k),f.strstart!==0&&($e(f,e.adler>>>16),$e(f,e.adler&65535)),e.adler=1,f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(f.status===re){if(e.adler=0,ae(f,31),ae(f,139),ae(f,8),f.gzhead)ae(f,(f.gzhead.text?1:0)+(f.gzhead.hcrc?2:0)+(f.gzhead.extra?4:0)+(f.gzhead.name?8:0)+(f.gzhead.comment?16:0)),ae(f,f.gzhead.time&255),ae(f,f.gzhead.time>>8&255),ae(f,f.gzhead.time>>16&255),ae(f,f.gzhead.time>>24&255),ae(f,f.level===9?2:f.strategy>=c||f.level<2?4:0),ae(f,f.gzhead.os&255),f.gzhead.extra&&f.gzhead.extra.length&&(ae(f,f.gzhead.extra.length&255),ae(f,f.gzhead.extra.length>>8&255)),f.gzhead.hcrc&&(e.adler=d(e.adler,f.pending_buf,f.pending,0)),f.gzindex=0,f.status=ge;else if(ae(f,0),ae(f,0),ae(f,0),ae(f,0),ae(f,0),ae(f,f.level===9?2:f.strategy>=c||f.level<2?4:0),ae(f,Wt),f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(f.status===ge){if(f.gzhead.extra){let k=f.pending,B=(f.gzhead.extra.length&65535)-f.gzindex;for(;f.pending+B>f.pending_buf_size;){let G=f.pending_buf_size-f.pending;if(f.pending_buf.set(f.gzhead.extra.subarray(f.gzindex,f.gzindex+G),f.pending),f.pending=f.pending_buf_size,f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex+=G,me(e),f.pending!==0)return f.last_flush=-1,R;k=0,B-=G}let V=new Uint8Array(f.gzhead.extra);f.pending_buf.set(V.subarray(f.gzindex,f.gzindex+B),f.pending),f.pending+=B,f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex=0}f.status=He}if(f.status===He){if(f.gzhead.name){let k=f.pending,B;do{if(f.pending===f.pending_buf_size){if(f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k)),me(e),f.pending!==0)return f.last_flush=-1,R;k=0}f.gzindex<f.gzhead.name.length?B=f.gzhead.name.charCodeAt(f.gzindex++)&255:B=0,ae(f,B)}while(B!==0);f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k)),f.gzindex=0}f.status=We}if(f.status===We){if(f.gzhead.comment){let k=f.pending,B;do{if(f.pending===f.pending_buf_size){if(f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k)),me(e),f.pending!==0)return f.last_flush=-1,R;k=0}f.gzindex<f.gzhead.comment.length?B=f.gzhead.comment.charCodeAt(f.gzindex++)&255:B=0,ae(f,B)}while(B!==0);f.gzhead.hcrc&&f.pending>k&&(e.adler=d(e.adler,f.pending_buf,f.pending-k,k))}f.status=Ye}if(f.status===Ye){if(f.gzhead.hcrc){if(f.pending+2>f.pending_buf_size&&(me(e),f.pending!==0))return f.last_flush=-1,R;ae(f,e.adler&255),ae(f,e.adler>>8&255),e.adler=0}if(f.status=xe,me(e),f.pending!==0)return f.last_flush=-1,R}if(e.avail_in!==0||f.lookahead!==0||x!==v&&f.status!==ue){let k=f.level===0?z(f,x):f.strategy===c?J(f,x):f.strategy===g?X(f,x):P[f.level].func(f,x);if((k===Me||k===Le)&&(f.status=ue),k===ve||k===Me)return e.avail_out===0&&(f.last_flush=-1),R;if(k===Ue&&(x===p?i(f):x!==L&&(u(f,0,0,!1),x===y&&(Re(f.head),f.lookahead===0&&(f.strstart=0,f.block_start=0,f.insert=0))),me(e),e.avail_out===0))return f.last_flush=-1,R}return x!==D?R:f.wrap<=0?j:(f.wrap===2?(ae(f,e.adler&255),ae(f,e.adler>>8&255),ae(f,e.adler>>16&255),ae(f,e.adler>>24&255),ae(f,e.total_in&255),ae(f,e.total_in>>8&255),ae(f,e.total_in>>16&255),ae(f,e.total_in>>24&255)):($e(f,e.adler>>>16),$e(f,e.adler&65535)),me(e),f.wrap>0&&(f.wrap=-f.wrap),f.pending!==0?R:j)},"deflate$1"),lt=h(e=>{if(te(e))return w;const x=e.state.status;return e.state=null,x===xe?Se(e,l):R},"deflateEnd"),pe=h((e,x)=>{let f=x.length;if(te(e))return w;const m=e.state,k=m.wrap;if(k===2||k===1&&m.status!==we||m.lookahead)return w;if(k===1&&(e.adler=t(e.adler,x,f,0)),m.wrap=0,f>=m.w_size){k===0&&(Re(m.head),m.strstart=0,m.block_start=0,m.insert=0);let Te=new Uint8Array(m.w_size);Te.set(x.subarray(f-m.w_size,f),0),x=Te,f=m.w_size}const B=e.avail_in,V=e.next_in,G=e.input;for(e.avail_in=f,e.next_in=0,e.input=x,s(m);m.lookahead>=Q;){let Te=m.strstart,oe=m.lookahead-(Q-1);do m.ins_h=Ae(m,m.ins_h,m.window[Te+Q-1]),m.prev[Te&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Te,Te++;while(--oe);m.strstart=Te,m.lookahead=Q-1,s(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=Q-1,m.match_available=0,e.next_in=V,e.input=G,e.avail_in=B,m.wrap=k,R},"deflateSetDictionary");return Ne.deflateInit=I,Ne.deflateInit2=he,Ne.deflateReset=ne,Ne.deflateResetKeep=q,Ne.deflateSetHeader=H,Ne.deflate=U,Ne.deflateEnd=lt,Ne.deflateSetDictionary=pe,Ne.deflateInfo="pako deflate (from Nodeca project)",Ne}h(Qr,"requireDeflate$1");var Vt={},On;function zn(){if(On)return Vt;On=1;const r=h((u,o)=>Object.prototype.hasOwnProperty.call(u,o),"_has");return Vt.assign=function(u){const o=Array.prototype.slice.call(arguments,1);for(;o.length;){const a=o.shift();if(a){if(typeof a!="object")throw new TypeError(a+"must be non-object");for(const i in a)r(a,i)&&(u[i]=a[i])}}return u},Vt.flattenChunks=u=>{let o=0;for(let i=0,t=u.length;i<t;i++)o+=u[i].length;const a=new Uint8Array(o);for(let i=0,t=0,d=u.length;i<d;i++){let _=u[i];a.set(_,t),t+=_.length}return a},Vt}h(zn,"requireCommon");var dt={},Fn;function Nn(){if(Fn)return dt;Fn=1;let r=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}const u=new Uint8Array(256);for(let a=0;a<256;a++)u[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;u[254]=u[254]=1,dt.string2buf=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let i,t,d,_,v,p=a.length,y=0;for(_=0;_<p;_++)t=a.charCodeAt(_),(t&64512)===55296&&_+1<p&&(d=a.charCodeAt(_+1),(d&64512)===56320&&(t=65536+(t-55296<<10)+(d-56320),_++)),y+=t<128?1:t<2048?2:t<65536?3:4;for(i=new Uint8Array(y),v=0,_=0;v<y;_++)t=a.charCodeAt(_),(t&64512)===55296&&_+1<p&&(d=a.charCodeAt(_+1),(d&64512)===56320&&(t=65536+(t-55296<<10)+(d-56320),_++)),t<128?i[v++]=t:t<2048?(i[v++]=192|t>>>6,i[v++]=128|t&63):t<65536?(i[v++]=224|t>>>12,i[v++]=128|t>>>6&63,i[v++]=128|t&63):(i[v++]=240|t>>>18,i[v++]=128|t>>>12&63,i[v++]=128|t>>>6&63,i[v++]=128|t&63);return i};const o=h((a,i)=>{if(i<65534&&a.subarray&&r)return String.fromCharCode.apply(null,a.length===i?a:a.subarray(0,i));let t="";for(let d=0;d<i;d++)t+=String.fromCharCode(a[d]);return t},"buf2binstring");return dt.buf2string=(a,i)=>{const t=i||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,i));let d,_;const v=new Array(t*2);for(_=0,d=0;d<t;){let p=a[d++];if(p<128){v[_++]=p;continue}let y=u[p];if(y>4){v[_++]=65533,d+=y-1;continue}for(p&=y===2?31:y===3?15:7;y>1&&d<t;)p=p<<6|a[d++]&63,y--;if(y>1){v[_++]=65533;continue}p<65536?v[_++]=p:(p-=65536,v[_++]=55296|p>>10&1023,v[_++]=56320|p&1023)}return o(v,_)},dt.utf8border=(a,i)=>{i=i||a.length,i>a.length&&(i=a.length);let t=i-1;for(;t>=0&&(a[t]&192)===128;)t--;return t<0||t===0?i:t+u[a[t]]>i?t:i},dt}h(Nn,"requireStrings");var _n,jn;function qn(){if(jn)return _n;jn=1;function r(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return h(r,"ZStream"),_n=r,_n}h(qn,"requireZstream");var Bn;function ea(){if(Bn)return Ke;Bn=1;const r=Qr(),u=zn(),o=Nn(),a=dn(),i=qn(),t=Object.prototype.toString,{Z_NO_FLUSH:d,Z_SYNC_FLUSH:_,Z_FULL_FLUSH:v,Z_FINISH:p,Z_OK:y,Z_STREAM_END:D,Z_DEFAULT_COMPRESSION:L,Z_DEFAULT_STRATEGY:R,Z_DEFLATED:j}=Qe();function w(T){this.options=u.assign({level:L,method:j,chunkSize:16384,windowBits:15,memLevel:8,strategy:R},T||{});let c=this.options;c.raw&&c.windowBits>0?c.windowBits=-c.windowBits:c.gzip&&c.windowBits>0&&c.windowBits<16&&(c.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let g=r.deflateInit2(this.strm,c.level,c.method,c.windowBits,c.memLevel,c.strategy);if(g!==y)throw new Error(a[g]);if(c.header&&r.deflateSetHeader(this.strm,c.header),c.dictionary){let C;if(typeof c.dictionary=="string"?C=o.string2buf(c.dictionary):t.call(c.dictionary)==="[object ArrayBuffer]"?C=new Uint8Array(c.dictionary):C=c.dictionary,g=r.deflateSetDictionary(this.strm,C),g!==y)throw new Error(a[g]);this._dict_set=!0}}h(w,"Deflate"),w.prototype.push=function(T,c){const g=this.strm,C=this.options.chunkSize;let M,$;if(this.ended)return!1;for(c===~~c?$=c:$=c===!0?p:d,typeof T=="string"?g.input=o.string2buf(T):t.call(T)==="[object ArrayBuffer]"?g.input=new Uint8Array(T):g.input=T,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(C),g.next_out=0,g.avail_out=C),($===_||$===v)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(M=r.deflate(g,$),M===D)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),M=r.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===y;if(g.avail_out===0){this.onData(g.output);continue}if($>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},w.prototype.onData=function(T){this.chunks.push(T)},w.prototype.onEnd=function(T){T===y&&(this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg};function l(T,c){const g=new w(c);if(g.push(T,!0),g.err)throw g.msg||a[g.err];return g.result}h(l,"deflate");function E(T,c){return c=c||{},c.raw=!0,l(T,c)}h(E,"deflateRaw");function S(T,c){return c=c||{},c.gzip=!0,l(T,c)}return h(S,"gzip"),Ke.Deflate=w,Ke.deflate=l,Ke.deflateRaw=E,Ke.gzip=S,Ke.constants=Qe(),Ke}h(ea,"requireDeflate");var et={},Pe={},pn,$n;function ta(){if($n)return pn;$n=1;const r=16209,u=16191;return pn=h(function(a,i){let t,d,_,v,p,y,D,L,R,j,w,l,E,S,T,c,g,C,M,$,A,O,ee,Y;const Z=a.state;t=a.next_in,ee=a.input,d=t+(a.avail_in-5),_=a.next_out,Y=a.output,v=_-(i-a.avail_out),p=_+(a.avail_out-257),y=Z.dmax,D=Z.wsize,L=Z.whave,R=Z.wnext,j=Z.window,w=Z.hold,l=Z.bits,E=Z.lencode,S=Z.distcode,T=(1<<Z.lenbits)-1,c=(1<<Z.distbits)-1;e:do{l<15&&(w+=ee[t++]<<l,l+=8,w+=ee[t++]<<l,l+=8),g=E[w&T];t:for(;;){if(C=g>>>24,w>>>=C,l-=C,C=g>>>16&255,C===0)Y[_++]=g&65535;else if(C&16){M=g&65535,C&=15,C&&(l<C&&(w+=ee[t++]<<l,l+=8),M+=w&(1<<C)-1,w>>>=C,l-=C),l<15&&(w+=ee[t++]<<l,l+=8,w+=ee[t++]<<l,l+=8),g=S[w&c];n:for(;;){if(C=g>>>24,w>>>=C,l-=C,C=g>>>16&255,C&16){if($=g&65535,C&=15,l<C&&(w+=ee[t++]<<l,l+=8,l<C&&(w+=ee[t++]<<l,l+=8)),$+=w&(1<<C)-1,$>y){a.msg="invalid distance too far back",Z.mode=r;break e}if(w>>>=C,l-=C,C=_-v,$>C){if(C=$-C,C>L&&Z.sane){a.msg="invalid distance too far back",Z.mode=r;break e}if(A=0,O=j,R===0){if(A+=D-C,C<M){M-=C;do Y[_++]=j[A++];while(--C);A=_-$,O=Y}}else if(R<C){if(A+=D+R-C,C-=R,C<M){M-=C;do Y[_++]=j[A++];while(--C);if(A=0,R<M){C=R,M-=C;do Y[_++]=j[A++];while(--C);A=_-$,O=Y}}}else if(A+=R-C,C<M){M-=C;do Y[_++]=j[A++];while(--C);A=_-$,O=Y}for(;M>2;)Y[_++]=O[A++],Y[_++]=O[A++],Y[_++]=O[A++],M-=3;M&&(Y[_++]=O[A++],M>1&&(Y[_++]=O[A++]))}else{A=_-$;do Y[_++]=Y[A++],Y[_++]=Y[A++],Y[_++]=Y[A++],M-=3;while(M>2);M&&(Y[_++]=Y[A++],M>1&&(Y[_++]=Y[A++]))}}else if(C&64){a.msg="invalid distance code",Z.mode=r;break e}else{g=S[(g&65535)+(w&(1<<C)-1)];continue n}break}}else if(C&64)if(C&32){Z.mode=u;break e}else{a.msg="invalid literal/length code",Z.mode=r;break e}else{g=E[(g&65535)+(w&(1<<C)-1)];continue t}break}}while(t<d&&_<p);M=l>>3,t-=M,l-=M<<3,w&=(1<<l)-1,a.next_in=t,a.next_out=_,a.avail_in=t<d?5+(d-t):5-(t-d),a.avail_out=_<p?257+(p-_):257-(_-p),Z.hold=w,Z.bits=l},"inflate_fast"),pn}h(ta,"requireInffast");var wn,Zn;function na(){if(Zn)return wn;Zn=1;const r=15,u=852,o=592,a=0,i=1,t=2,d=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),_=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),v=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),p=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);return wn=h((D,L,R,j,w,l,E,S)=>{const T=S.bits;let c=0,g=0,C=0,M=0,$=0,A=0,O=0,ee=0,Y=0,Z=0,ie,de,_e,se,le,Ee=null,Q;const ce=new Uint16Array(r+1),fe=new Uint16Array(r+1);let ke=null,we,re,ge;for(c=0;c<=r;c++)ce[c]=0;for(g=0;g<j;g++)ce[L[R+g]]++;for($=T,M=r;M>=1&&ce[M]===0;M--);if($>M&&($=M),M===0)return w[l++]=1<<24|64<<16|0,w[l++]=1<<24|64<<16|0,S.bits=1,0;for(C=1;C<M&&ce[C]===0;C++);for($<C&&($=C),ee=1,c=1;c<=r;c++)if(ee<<=1,ee-=ce[c],ee<0)return-1;if(ee>0&&(D===a||M!==1))return-1;for(fe[1]=0,c=1;c<r;c++)fe[c+1]=fe[c]+ce[c];for(g=0;g<j;g++)L[R+g]!==0&&(E[fe[L[R+g]]++]=g);if(D===a?(Ee=ke=E,Q=20):D===i?(Ee=d,ke=_,Q=257):(Ee=v,ke=p,Q=0),Z=0,g=0,c=C,le=l,A=$,O=0,_e=-1,Y=1<<$,se=Y-1,D===i&&Y>u||D===t&&Y>o)return 1;for(;;){we=c-O,E[g]+1<Q?(re=0,ge=E[g]):E[g]>=Q?(re=ke[E[g]-Q],ge=Ee[E[g]-Q]):(re=96,ge=0),ie=1<<c-O,de=1<<A,C=de;do de-=ie,w[le+(Z>>O)+de]=we<<24|re<<16|ge|0;while(de!==0);for(ie=1<<c-1;Z&ie;)ie>>=1;if(ie!==0?(Z&=ie-1,Z+=ie):Z=0,g++,--ce[c]===0){if(c===M)break;c=L[R+E[g]]}if(c>$&&(Z&se)!==_e){for(O===0&&(O=$),le+=C,A=c-O,ee=1<<A;A+O<M&&(ee-=ce[A+O],!(ee<=0));)A++,ee<<=1;if(Y+=1<<A,D===i&&Y>u||D===t&&Y>o)return 1;_e=Z&se,w[_e]=$<<24|A<<16|le-l|0}}return Z!==0&&(w[le+Z]=c-O<<24|64<<16|0),S.bits=$,0},"inflate_table"),wn}h(na,"requireInftrees");var Hn;function ra(){if(Hn)return Pe;Hn=1;const r=An(),u=Pn(),o=ta(),a=na(),i=0,t=1,d=2,{Z_FINISH:_,Z_BLOCK:v,Z_TREES:p,Z_OK:y,Z_STREAM_END:D,Z_NEED_DICT:L,Z_STREAM_ERROR:R,Z_DATA_ERROR:j,Z_MEM_ERROR:w,Z_BUF_ERROR:l,Z_DEFLATED:E}=Qe(),S=16180,T=16181,c=16182,g=16183,C=16184,M=16185,$=16186,A=16187,O=16188,ee=16189,Y=16190,Z=16191,ie=16192,de=16193,_e=16194,se=16195,le=16196,Ee=16197,Q=16198,ce=16199,fe=16200,ke=16201,we=16202,re=16203,ge=16204,He=16205,We=16206,Ye=16207,xe=16208,ue=16209,ve=16210,Ue=16211,Me=852,Le=592,Se=15,Xe=h(b=>(b>>>24&255)+(b>>>8&65280)+((b&65280)<<8)+((b&255)<<24),"zswap32");function Re(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}h(Re,"InflateState");const qe=h(b=>{if(!b)return 1;const P=b.state;return!P||P.strm!==b||P.mode<S||P.mode>Ue?1:0},"inflateStateCheck"),Gt=h(b=>{if(qe(b))return R;const P=b.state;return b.total_in=b.total_out=P.total=0,b.msg="",P.wrap&&(b.adler=P.wrap&1),P.mode=S,P.last=0,P.havedict=0,P.flags=-1,P.dmax=32768,P.head=null,P.hold=0,P.bits=0,P.lencode=P.lendyn=new Int32Array(Me),P.distcode=P.distdyn=new Int32Array(Le),P.sane=1,P.back=-1,y},"inflateResetKeep"),Ae=h(b=>{if(qe(b))return R;const P=b.state;return P.wsize=0,P.whave=0,P.wnext=0,Gt(b)},"inflateReset"),me=h((b,P)=>{let n;if(qe(b))return R;const N=b.state;return P<0?(n=0,P=-P):(n=(P>>4)+5,P<48&&(P&=15)),P&&(P<8||P>15)?R:(N.window!==null&&N.wbits!==P&&(N.window=null),N.wrap=n,N.wbits=P,Ae(b))},"inflateReset2"),Ce=h((b,P)=>{if(!b)return R;const n=new Re;b.state=n,n.strm=b,n.window=null,n.mode=S;const N=me(b,P);return N!==y&&(b.state=null),N},"inflateInit2"),ae=h(b=>Ce(b,Se),"inflateInit");let $e=!0,Ge,Ve;const s=h(b=>{if($e){Ge=new Int32Array(512),Ve=new Int32Array(32);let P=0;for(;P<144;)b.lens[P++]=8;for(;P<256;)b.lens[P++]=9;for(;P<280;)b.lens[P++]=7;for(;P<288;)b.lens[P++]=8;for(a(t,b.lens,0,288,Ge,0,b.work,{bits:9}),P=0;P<32;)b.lens[P++]=5;a(d,b.lens,0,32,Ve,0,b.work,{bits:5}),$e=!1}b.lencode=Ge,b.lenbits=9,b.distcode=Ve,b.distbits=5},"fixedtables"),z=h((b,P,n,N)=>{let te;const q=b.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new Uint8Array(q.wsize)),N>=q.wsize?(q.window.set(P.subarray(n-q.wsize,n),0),q.wnext=0,q.whave=q.wsize):(te=q.wsize-q.wnext,te>N&&(te=N),q.window.set(P.subarray(n-N,n-N+te),q.wnext),N-=te,N?(q.window.set(P.subarray(n-N,n),0),q.wnext=N,q.whave=q.wsize):(q.wnext+=te,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=te))),0},"updatewindow"),F=h((b,P)=>{let n,N,te,q,ne,H,he,I,U,lt,pe,e,x,f,m=0,k,B,V,G,Te,oe,be,De;const ye=new Uint8Array(4);let Oe,Ie;const Br=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qe(b)||!b.output||!b.input&&b.avail_in!==0)return R;n=b.state,n.mode===Z&&(n.mode=ie),ne=b.next_out,te=b.output,he=b.avail_out,q=b.next_in,N=b.input,H=b.avail_in,I=n.hold,U=n.bits,lt=H,pe=he,De=y;e:for(;;)switch(n.mode){case S:if(n.wrap===0){n.mode=ie;break}for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&2&&I===35615){n.wbits===0&&(n.wbits=15),n.check=0,ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0),I=0,U=0,n.mode=T;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((I&255)<<8)+(I>>8))%31){b.msg="incorrect header check",n.mode=ue;break}if((I&15)!==E){b.msg="unknown compression method",n.mode=ue;break}if(I>>>=4,U-=4,be=(I&15)+8,n.wbits===0&&(n.wbits=be),be>15||be>n.wbits){b.msg="invalid window size",n.mode=ue;break}n.dmax=1<<n.wbits,n.flags=0,b.adler=n.check=1,n.mode=I&512?ee:Z,I=0,U=0;break;case T:for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.flags=I,(n.flags&255)!==E){b.msg="unknown compression method",n.mode=ue;break}if(n.flags&57344){b.msg="unknown header flags set",n.mode=ue;break}n.head&&(n.head.text=I>>8&1),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0,n.mode=c;case c:for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.head&&(n.head.time=I),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,ye[2]=I>>>16&255,ye[3]=I>>>24&255,n.check=u(n.check,ye,4,0)),I=0,U=0,n.mode=g;case g:for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.head&&(n.head.xflags=I&255,n.head.os=I>>8),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0,n.mode=C;case C:if(n.flags&1024){for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.length=I,n.head&&(n.head.extra_len=I),n.flags&512&&n.wrap&4&&(ye[0]=I&255,ye[1]=I>>>8&255,n.check=u(n.check,ye,2,0)),I=0,U=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(n.flags&1024&&(e=n.length,e>H&&(e=H),e&&(n.head&&(be=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(N.subarray(q,q+e),be)),n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,n.length-=e),n.length))break e;n.length=0,n.mode=$;case $:if(n.flags&2048){if(H===0)break e;e=0;do be=N[q+e++],n.head&&be&&n.length<65536&&(n.head.name+=String.fromCharCode(be));while(be&&e<H);if(n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,be)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=A;case A:if(n.flags&4096){if(H===0)break e;e=0;do be=N[q+e++],n.head&&be&&n.length<65536&&(n.head.comment+=String.fromCharCode(be));while(be&&e<H);if(n.flags&512&&n.wrap&4&&(n.check=u(n.check,N,e,q)),H-=e,q+=e,be)break e}else n.head&&(n.head.comment=null);n.mode=O;case O:if(n.flags&512){for(;U<16;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&4&&I!==(n.check&65535)){b.msg="header crc mismatch",n.mode=ue;break}I=0,U=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),b.adler=n.check=0,n.mode=Z;break;case ee:for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}b.adler=n.check=Xe(I),I=0,U=0,n.mode=Y;case Y:if(n.havedict===0)return b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,L;b.adler=n.check=1,n.mode=Z;case Z:if(P===v||P===p)break e;case ie:if(n.last){I>>>=U&7,U-=U&7,n.mode=We;break}for(;U<3;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}switch(n.last=I&1,I>>>=1,U-=1,I&3){case 0:n.mode=de;break;case 1:if(s(n),n.mode=ce,P===p){I>>>=2,U-=2;break e}break;case 2:n.mode=le;break;case 3:b.msg="invalid block type",n.mode=ue}I>>>=2,U-=2;break;case de:for(I>>>=U&7,U-=U&7;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if((I&65535)!==(I>>>16^65535)){b.msg="invalid stored block lengths",n.mode=ue;break}if(n.length=I&65535,I=0,U=0,n.mode=_e,P===p)break e;case _e:n.mode=se;case se:if(e=n.length,e){if(e>H&&(e=H),e>he&&(e=he),e===0)break e;te.set(N.subarray(q,q+e),ne),H-=e,q+=e,he-=e,ne+=e,n.length-=e;break}n.mode=Z;break;case le:for(;U<14;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.nlen=(I&31)+257,I>>>=5,U-=5,n.ndist=(I&31)+1,I>>>=5,U-=5,n.ncode=(I&15)+4,I>>>=4,U-=4,n.nlen>286||n.ndist>30){b.msg="too many length or distance symbols",n.mode=ue;break}n.have=0,n.mode=Ee;case Ee:for(;n.have<n.ncode;){for(;U<3;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.lens[Br[n.have++]]=I&7,I>>>=3,U-=3}for(;n.have<19;)n.lens[Br[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Oe={bits:n.lenbits},De=a(i,n.lens,0,19,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,De){b.msg="invalid code lengths set",n.mode=ue;break}n.have=0,n.mode=Q;case Q:for(;n.have<n.nlen+n.ndist;){for(;m=n.lencode[I&(1<<n.lenbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(V<16)I>>>=k,U-=k,n.lens[n.have++]=V;else{if(V===16){for(Ie=k+2;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(I>>>=k,U-=k,n.have===0){b.msg="invalid bit length repeat",n.mode=ue;break}be=n.lens[n.have-1],e=3+(I&3),I>>>=2,U-=2}else if(V===17){for(Ie=k+3;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=k,U-=k,be=0,e=3+(I&7),I>>>=3,U-=3}else{for(Ie=k+7;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=k,U-=k,be=0,e=11+(I&127),I>>>=7,U-=7}if(n.have+e>n.nlen+n.ndist){b.msg="invalid bit length repeat",n.mode=ue;break}for(;e--;)n.lens[n.have++]=be}}if(n.mode===ue)break;if(n.lens[256]===0){b.msg="invalid code -- missing end-of-block",n.mode=ue;break}if(n.lenbits=9,Oe={bits:n.lenbits},De=a(t,n.lens,0,n.nlen,n.lencode,0,n.work,Oe),n.lenbits=Oe.bits,De){b.msg="invalid literal/lengths set",n.mode=ue;break}if(n.distbits=6,n.distcode=n.distdyn,Oe={bits:n.distbits},De=a(d,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Oe),n.distbits=Oe.bits,De){b.msg="invalid distances set",n.mode=ue;break}if(n.mode=ce,P===p)break e;case ce:n.mode=fe;case fe:if(H>=6&&he>=258){b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,o(b,pe),ne=b.next_out,te=b.output,he=b.avail_out,q=b.next_in,N=b.input,H=b.avail_in,I=n.hold,U=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;m=n.lencode[I&(1<<n.lenbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(B&&!(B&240)){for(G=k,Te=B,oe=V;m=n.lencode[oe+((I&(1<<G+Te)-1)>>G)],k=m>>>24,B=m>>>16&255,V=m&65535,!(G+k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=G,U-=G,n.back+=G}if(I>>>=k,U-=k,n.back+=k,n.length=V,B===0){n.mode=He;break}if(B&32){n.back=-1,n.mode=Z;break}if(B&64){b.msg="invalid literal/length code",n.mode=ue;break}n.extra=B&15,n.mode=ke;case ke:if(n.extra){for(Ie=n.extra;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.length+=I&(1<<n.extra)-1,I>>>=n.extra,U-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=we;case we:for(;m=n.distcode[I&(1<<n.distbits)-1],k=m>>>24,B=m>>>16&255,V=m&65535,!(k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(!(B&240)){for(G=k,Te=B,oe=V;m=n.distcode[oe+((I&(1<<G+Te)-1)>>G)],k=m>>>24,B=m>>>16&255,V=m&65535,!(G+k<=U);){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}I>>>=G,U-=G,n.back+=G}if(I>>>=k,U-=k,n.back+=k,B&64){b.msg="invalid distance code",n.mode=ue;break}n.offset=V,n.extra=B&15,n.mode=re;case re:if(n.extra){for(Ie=n.extra;U<Ie;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}n.offset+=I&(1<<n.extra)-1,I>>>=n.extra,U-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){b.msg="invalid distance too far back",n.mode=ue;break}n.mode=ge;case ge:if(he===0)break e;if(e=pe-he,n.offset>e){if(e=n.offset-e,e>n.whave&&n.sane){b.msg="invalid distance too far back",n.mode=ue;break}e>n.wnext?(e-=n.wnext,x=n.wsize-e):x=n.wnext-e,e>n.length&&(e=n.length),f=n.window}else f=te,x=ne-n.offset,e=n.length;e>he&&(e=he),he-=e,n.length-=e;do te[ne++]=f[x++];while(--e);n.length===0&&(n.mode=fe);break;case He:if(he===0)break e;te[ne++]=n.length,he--,n.mode=fe;break;case We:if(n.wrap){for(;U<32;){if(H===0)break e;H--,I|=N[q++]<<U,U+=8}if(pe-=he,b.total_out+=pe,n.total+=pe,n.wrap&4&&pe&&(b.adler=n.check=n.flags?u(n.check,te,pe,ne-pe):r(n.check,te,pe,ne-pe)),pe=he,n.wrap&4&&(n.flags?I:Xe(I))!==n.check){b.msg="incorrect data check",n.mode=ue;break}I=0,U=0}n.mode=Ye;case Ye:if(n.wrap&&n.flags){for(;U<32;){if(H===0)break e;H--,I+=N[q++]<<U,U+=8}if(n.wrap&4&&I!==(n.total&4294967295)){b.msg="incorrect length check",n.mode=ue;break}I=0,U=0}n.mode=xe;case xe:De=D;break e;case ue:De=j;break e;case ve:return w;case Ue:default:return R}return b.next_out=ne,b.avail_out=he,b.next_in=q,b.avail_in=H,n.hold=I,n.bits=U,(n.wsize||pe!==b.avail_out&&n.mode<ue&&(n.mode<We||P!==_))&&z(b,b.output,b.next_out,pe-b.avail_out),lt-=b.avail_in,pe-=b.avail_out,b.total_in+=lt,b.total_out+=pe,n.total+=pe,n.wrap&4&&pe&&(b.adler=n.check=n.flags?u(n.check,te,pe,b.next_out-pe):r(n.check,te,pe,b.next_out-pe)),b.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===ce||n.mode===_e?256:0),(lt===0&&pe===0||P===_)&&De===y&&(De=l),De},"inflate$1"),W=h(b=>{if(qe(b))return R;let P=b.state;return P.window&&(P.window=null),b.state=null,y},"inflateEnd"),X=h((b,P)=>{if(qe(b))return R;const n=b.state;return n.wrap&2?(n.head=P,P.done=!1,y):R},"inflateGetHeader"),J=h((b,P)=>{const n=P.length;let N,te,q;return qe(b)||(N=b.state,N.wrap!==0&&N.mode!==Y)?R:N.mode===Y&&(te=1,te=r(te,P,n,0),te!==N.check)?j:(q=z(b,P,n,n),q?(N.mode=ve,w):(N.havedict=1,y))},"inflateSetDictionary");return Pe.inflateReset=Ae,Pe.inflateReset2=me,Pe.inflateResetKeep=Gt,Pe.inflateInit=ae,Pe.inflateInit2=Ce,Pe.inflate=F,Pe.inflateEnd=W,Pe.inflateGetHeader=X,Pe.inflateSetDictionary=J,Pe.inflateInfo="pako inflate (from Nodeca project)",Pe}h(ra,"requireInflate$1");var gn,Wn;function aa(){if(Wn)return gn;Wn=1;function r(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return h(r,"GZheader"),gn=r,gn}h(aa,"requireGzheader");var Gn;function ia(){if(Gn)return et;Gn=1;const r=ra(),u=zn(),o=Nn(),a=dn(),i=qn(),t=aa(),d=Object.prototype.toString,{Z_NO_FLUSH:_,Z_FINISH:v,Z_OK:p,Z_STREAM_END:y,Z_NEED_DICT:D,Z_STREAM_ERROR:L,Z_DATA_ERROR:R,Z_MEM_ERROR:j}=Qe();function w(S){this.options=u.assign({chunkSize:1024*64,windowBits:15,to:""},S||{});const T=this.options;T.raw&&T.windowBits>=0&&T.windowBits<16&&(T.windowBits=-T.windowBits,T.windowBits===0&&(T.windowBits=-15)),T.windowBits>=0&&T.windowBits<16&&!(S&&S.windowBits)&&(T.windowBits+=32),T.windowBits>15&&T.windowBits<48&&(T.windowBits&15||(T.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;let c=r.inflateInit2(this.strm,T.windowBits);if(c!==p)throw new Error(a[c]);if(this.header=new t,r.inflateGetHeader(this.strm,this.header),T.dictionary&&(typeof T.dictionary=="string"?T.dictionary=o.string2buf(T.dictionary):d.call(T.dictionary)==="[object ArrayBuffer]"&&(T.dictionary=new Uint8Array(T.dictionary)),T.raw&&(c=r.inflateSetDictionary(this.strm,T.dictionary),c!==p)))throw new Error(a[c])}h(w,"Inflate"),w.prototype.push=function(S,T){const c=this.strm,g=this.options.chunkSize,C=this.options.dictionary;let M,$,A;if(this.ended)return!1;for(T===~~T?$=T:$=T===!0?v:_,d.call(S)==="[object ArrayBuffer]"?c.input=new Uint8Array(S):c.input=S,c.next_in=0,c.avail_in=c.input.length;;){for(c.avail_out===0&&(c.output=new Uint8Array(g),c.next_out=0,c.avail_out=g),M=r.inflate(c,$),M===D&&C&&(M=r.inflateSetDictionary(c,C),M===p?M=r.inflate(c,$):M===R&&(M=D));c.avail_in>0&&M===y&&c.state.wrap>0&&S[c.next_in]!==0;)r.inflateReset(c),M=r.inflate(c,$);switch(M){case L:case R:case D:case j:return this.onEnd(M),this.ended=!0,!1}if(A=c.avail_out,c.next_out&&(c.avail_out===0||M===y))if(this.options.to==="string"){let O=o.utf8border(c.output,c.next_out),ee=c.next_out-O,Y=o.buf2string(c.output,O);c.next_out=ee,c.avail_out=g-ee,ee&&c.output.set(c.output.subarray(O,O+ee),0),this.onData(Y)}else this.onData(c.output.length===c.next_out?c.output:c.output.subarray(0,c.next_out));if(!(M===p&&A===0)){if(M===y)return M=r.inflateEnd(this.strm),this.onEnd(M),this.ended=!0,!0;if(c.avail_in===0)break}}return!0},w.prototype.onData=function(S){this.chunks.push(S)},w.prototype.onEnd=function(S){S===p&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg};function l(S,T){const c=new w(T);if(c.push(S),c.err)throw c.msg||a[c.err];return c.result}h(l,"inflate");function E(S,T){return T=T||{},T.raw=!0,l(S,T)}return h(E,"inflateRaw"),et.Inflate=w,et.inflate=l,et.inflateRaw=E,et.ungzip=l,et.constants=Qe(),et}h(ia,"requireInflate");var Yn;function bn(){if(Yn)return Fe;Yn=1;const{Deflate:r,deflate:u,deflateRaw:o,gzip:a}=ea(),{Inflate:i,inflate:t,inflateRaw:d,ungzip:_}=ia(),v=Qe();return Fe.Deflate=r,Fe.deflate=u,Fe.deflateRaw=o,Fe.gzip=a,Fe.Inflate=i,Fe.inflate=t,Fe.inflateRaw=d,Fe.ungzip=_,Fe.constants=v,Fe}h(bn,"requirePako");var ht={},Xn;function Vn(){if(Xn)return ht;Xn=1,Object.defineProperty(ht,"__esModule",{value:!0}),ht.paethPredicator=void 0;function r(u,o,a){const i=u+o-a,t=Math.abs(i-u),d=Math.abs(i-o),_=Math.abs(i-a);return t<=d&&t<=_?u:d<=_?o:a}return h(r,"paethPredicator"),ht.paethPredicator=r,ht}h(Vn,"requirePaeth");var Kn;function oa(){if(Kn)return ct;Kn=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.parseChunk=void 0;const r=bn(),u=K,o=Vn();function a(w,l,E){const S=i(w,E);let T;l.interlaceMethod===1?T=L(w,l,S):T=t(w,l,S);const c=w.metadata.find(C=>C.type==="tRNS"),g=R(w,l,T,w.palette,c);return c&&(l.colorType===0||l.colorType===2)&&j(l,g,c),g}h(a,"parseChunk"),ct.parseChunk=a;function i(w,l){const E=new r.Inflate;let S=0;for(const T of l)S=T.offset+4+4,E.push(w.view.buffer.slice(w.view.byteOffset+S,w.view.byteOffset+S+T.dataLength));if(E.err)throw(0,u.createChunkDecodeError)(w,l[0],`Inflate error: ${E.msg}`,l[0].offset);if(E.result===void 0)throw new u.DecodeError(w,"IDAT: Failed to decompress data chunks",0);return E.result}h(i,"decompress");function t(w,l,E,S=0,T=l.width,c=l.height){let g=0;const C=v(l),M=p(l),$=y(l,T),A=Math.ceil(T*M),O=new Uint8Array(c*A),ee=new Map;for(let Y=0;Y<c;Y++){let Z=S+Y*($+1);const ie=E[Z++];if(!d)throw new u.DecodeError(w,`IDAT: Invalid filter type ${ie}`,0);let de=ee.get(ie);de||(de=_(M,$,T,ie),ee.set(ie,de));let _e=1,se=0;switch(ie){case 0:case 1:{for(;se<C;se++)O[g]=E[Z+se],g++;break}case 3:{let le=0;for(;se<C;se++)le=g-T*C,O[g]=E[Z+se]+Math.floor(0+(le<0?0:O[le]))/2,g++;break}case 2:{_e=0;break}case 4:{for(;se<C;se++){const le=Math.floor(g-$);O[g]=(E[Z+se]+(0,o.paethPredicator)(0,le<0?0:O[le],0))%256,g++}break}}if(l.bitDepth>=8)for(;_e<T;_e++)for(let le=0;le<C;le++)O[g]=de(E,Z+_e*C+le,O,g),g++;else{for(_e&&(g-=_e),se=_e;se<$;se++)O[g+se]=de(E,Z+se,O,g+se);g+=$}}return O}h(t,"defilter");function d(w){return w%1===0&&w>=0&&w<=4}h(d,"isValidFilterType");function _(w,l,E,S){let T=0,c=0,g=0;switch(S){case 0:return(C,M)=>C[M];case 1:return(C,M,$,A)=>(C[M]+$[Math.floor(A-w)])%256;case 2:return(C,M,$,A)=>(c=Math.floor(A-E*w),c<0?C[M]:(C[M]+$[c])%256);case 3:return(C,M,$,A)=>(T=Math.floor(A-w),c=Math.floor(A-E*w),C[M]+Math.floor((T<0?0:$[T])+(c<0?0:$[c]))/2);case 4:return(C,M,$,A)=>(T=Math.floor(A-Math.ceil(w)),c=Math.floor(A-l),g=Math.floor(A-l-Math.ceil(w)),(C[M]+(0,o.paethPredicator)(T<0?0:$[T],c<0?0:$[c],g<0?0:$[g]))%256)}}h(_,"buildDefilterFunction");function v(w){return Math.ceil(p(w))}h(v,"getBytesPerPixel");function p(w){return D(w.colorType)*w.bitDepth/8}h(p,"getBytesPerPixelFloat");function y(w,l){return Math.ceil(D(w.colorType)*w.bitDepth*l/8)}h(y,"getBytesPerLine");function D(w){switch(w){case 0:return 1;case 2:return 3;case 3:return 1;case 4:return 2;case 6:return 4}}h(D,"getChannelCount");function L(w,l,E){const S=p(l),T=Math.ceil(l.width*S),c=new Uint8Array(T*l.height),g=v(l),C=8/l.bitDepth,M=(1<<l.bitDepth)-1,$=[0,4,0,2,0,1,0],A=[0,0,4,0,2,0,1],O=[8,8,4,4,2,2,1],ee=[8,8,8,4,4,2,2];let Y=0;for(let Z=0;Z<7;Z++){const ie=$[Z],de=A[Z],_e=O[Z],se=ee[Z],le=Math.ceil((l.width-ie)/_e),Ee=Math.ceil((l.height-de)/se),Q=Math.ceil(S*le);if(le===0||Ee===0)continue;const ce=t(w,l,E,Y,le,Ee);let fe=0;for(let ke=0;ke<Ee;ke++){fe=(de+ke*se)*T+ie*S;for(let we=0;we<le;we++){if(l.bitDepth<8){let re=ce[ke*Q+Math.floor(we*S)];re>>=(C-we%C-1)*l.bitDepth,re&=M;const ge=(C-1-fe%1*C)*l.bitDepth;re<<=ge,c[Math.floor(fe)]|=re}else for(let re=0;re<g;re++)c[fe+re]=ce[(ke*le+we)*g+re];fe+=_e*S}}Y+=Ee*(1+y(l,le))}return c}h(L,"deinterlaceAdam7");function R(w,l,E,S,T){const c=new(l.bitDepth===16?Uint16Array:Uint8Array)(l.width*l.height*4);let g=0;const C=v(l),M=p(l),$=Math.ceil(l.width*M);switch(l.colorType){case 0:{switch(l.bitDepth){case 1:case 2:case 4:{const A=8/l.bitDepth,O=(1<<l.bitDepth)-1,ee=l.bitDepth/8;for(let Y=0;Y<l.height;Y++)for(let Z=0;Z<l.width;Z++)g=(Y*l.width+Z)*4,c[g]=E[Y*$+Math.floor(Z*ee)],c[g]>>=(A-Z%A-1)*l.bitDepth,c[g]&=O,c[g]*=255/O,c[g+1]=c[g],c[g+2]=c[g],c[g+3]=255;break}case 8:case 16:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1]:c[g]=E[(A*l.width+O)*C],c[g+1]=c[g],c[g+2]=c[g],c[g+3]=l.bitDepth===16?65535:255;break}}break}case 4:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1]:c[g]=E[(A*l.width+O)*C],c[g+1]=c[g],c[g+2]=c[g],l.bitDepth===16?c[g+3]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3]:c[g+3]=E[(A*l.width+O)*C+1];break}case 3:{if(!S)throw new u.DecodeError(w,"IDAT: Cannot decode indexed color type without a palette",0);switch(l.bitDepth){case 1:case 2:case 4:{const A=8/l.bitDepth,O=(1<<l.bitDepth)-1,ee=l.bitDepth/8;for(let Y=0;Y<l.height;Y++)for(let Z=0;Z<l.width;Z++){g=(Y*l.width+Z)*4;let ie=E[Y*$+Math.floor(Z*ee)];ie>>=(A-Z%A-1)*l.bitDepth,ie&=O,S.setRgba(c,g,ie),T&&T.transparency.length>ie&&(c[g+3]=T.transparency[ie])}break}case 8:{let A=0;for(let O=0;O<l.height;O++)for(let ee=0;ee<l.width;ee++)g=(O*l.width+ee)*4,A=E[O*l.width+ee],S.setRgba(c,g,A),T&&T.transparency.length>A&&(c[g+3]=T.transparency[A]);break}}break}case 2:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?(c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1],c[g+1]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3],c[g+2]=E[(A*l.width+O)*C+4]<<8|E[(A*l.width+O)*C+5]):(c[g]=E[(A*l.width+O)*C],c[g+1]=E[(A*l.width+O)*C+1],c[g+2]=E[(A*l.width+O)*C+2]),c[g+3]=l.bitDepth===16?65535:255;break}case 6:{for(let A=0;A<l.height;A++)for(let O=0;O<l.width;O++)g=(A*l.width+O)*4,l.bitDepth===16?(c[g]=E[(A*l.width+O)*C]<<8|E[(A*l.width+O)*C+1],c[g+1]=E[(A*l.width+O)*C+2]<<8|E[(A*l.width+O)*C+3],c[g+2]=E[(A*l.width+O)*C+4]<<8|E[(A*l.width+O)*C+5],c[g+3]=E[(A*l.width+O)*C+6]<<8|E[(A*l.width+O)*C+7]):(c[g]=E[(A*l.width+O)*C],c[g+1]=E[(A*l.width+O)*C+1],c[g+2]=E[(A*l.width+O)*C+2],c[g+3]=E[(A*l.width+O)*C+3]);break}}return c}h(R,"mapPackedDataToRgba");function j(w,l,E){const S=(1<<w.bitDepth)-1,T=w.bitDepth===16?65535:255;if(w.colorType===0){const c=T/S*E.transparency;for(let g=0;g<l.length;g+=4)l[g]===c&&(l[g+3]=0);return}if(w.colorType===2){const c=[T/S*E.transparency[0],T/S*E.transparency[1],T/S*E.transparency[2]];for(let g=0;g<l.length;g+=4)l[g]===c[0]&&l[g+1]===c[1]&&l[g+2]===c[2]&&(l[g+3]=0);return}}return h(j,"applyTransparency"),ct}h(oa,"requireChunk_IDAT");var _t={},Jn;function sa(){if(Jn)return _t;Jn=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkFollows)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,0)}return h(u,"parseChunk"),_t.parseChunk=u,_t}h(sa,"requireChunk_IEND");var pt={},je={},Qn;function la(){if(Qn)return je;Qn=1,Object.defineProperty(je,"__esModule",{value:!0}),je.isValidInterlaceMethod=je.isValidFilterMethod=je.isValidColorType=je.isValidBitDepth=void 0;function r(i){return i===1||i===2||i===4||i===8||i===16}h(r,"isValidBitDepth"),je.isValidBitDepth=r;function u(i,t){return i===0&&t>=1&&t<=16||i===2&&t>=8&&t<=16||i===3&&t>=1&&t<=8||i===4&&t>=8&&t<=16||i===6&&t>=8&&t<=16}h(u,"isValidColorType"),je.isValidColorType=u;function o(i){return i===0}h(o,"isValidFilterMethod"),je.isValidFilterMethod=o;function a(i){return i===0||i===1}return h(a,"isValidInterlaceMethod"),je.isValidInterlaceMethod=a,je}h(la,"requireValidate");var er;function ua(){if(er)return pt;er=1,Object.defineProperty(pt,"__esModule",{value:!0}),pt.parseChunk=void 0;const r=K,u=la();function o(a,i){(0,r.assertChunkDataLengthEquals)(a,i,13);let t=i.offset+4+4;const d=a.view.getUint32(t);t+=4;const _=a.view.getUint32(t);t+=4;const v=a.view.getUint8(t);if(!(0,u.isValidBitDepth)(v))throw(0,r.createChunkDecodeError)(a,i,`Bit depth "${v}" is not valid`,t);t++;const p=a.view.getUint8(t);if(!(0,u.isValidColorType)(p,v))throw(0,r.createChunkDecodeError)(a,i,`Color type "${p}" is not valid with bit depth "${v}"`,t);t++;const y=a.view.getUint8(t);(0,r.assertChunkCompressionMethod)(a,i,y,t),t++;let D=a.view.getUint8(t);(0,u.isValidFilterMethod)(D)||((0,r.handleWarning)(a,(0,r.createChunkDecodeWarning)(i,`Filter method "${D}" is not valid`,t)),D=0),t++;let L=a.view.getUint8(t);return(0,u.isValidInterlaceMethod)(L)||((0,r.handleWarning)(a,(0,r.createChunkDecodeWarning)(i,`Interlace method "${L}" is not valid`,t)),L=0),t++,{width:d,height:_,bitDepth:v,colorType:p,interlaceMethod:L}}return h(o,"parseChunk"),pt.parseChunk=o,pt}h(ua,"requireChunk_IHDR");var tt={},tr;function nr(){if(tr)return tt;tr=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.crc32=tt.getCrcTable=void 0;let r;function u(){if(r)return r;r=[];for(let i=0;i<256;i++){let t=i;for(let d=0;d<8;d++)t&1?t=3988292384^t>>>1:t=t>>>1;r[i]=t>>>0}return r}h(u,"getCrcTable"),tt.getCrcTable=u;function o(i,t,d,_){const v=u();let p=i;for(let y=0;y<_;y++)p=v[(p^t.getUint8(d+y))&255]^p>>>8;return p}h(o,"updateCrc");function a(i,t,d){return(o(4294967295,i,t,d)^4294967295)>>>0}return h(a,"crc32$1"),tt.crc32=a,tt}h(nr,"requireCrc32");var wt={},rr;function fa(){if(rr)return wt;rr=1,Object.defineProperty(wt,"__esModule",{value:!0}),wt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"IDAT");const t=i.offset+4+4;let d,_;switch(a.colorType){case 0:case 4:{d=o.view.getUint16(t),_=2;break}case 2:case 6:{d=[o.view.getUint16(t),o.view.getUint16(t+2),o.view.getUint16(t+4)],_=6;break}case 3:{d=o.view.getUint8(t),_=1;break}default:throw(0,r.createChunkDecodeWarning)(i,`Unrecognized color type "${a.colorType}"`,t)}return(0,r.assertChunkDataLengthEquals)(o,i,_),{type:"bKGD",color:d}}return h(u,"parseChunk"),wt.parseChunk=u,wt}h(fa,"requireChunk_bKGD");var gt={},ar;function ca(){if(ar)return gt;ar=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"PLTE"),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,32);let t=i.offset+4+4;const d={x:o.view.getUint32(t)/1e5,y:o.view.getUint32(t+4)/1e5};if(d.x>1||d.y>1)throw(0,r.createChunkDecodeWarning)(i,`Invalid white point (${d.x},${d.y})`,t);t+=8;const _={x:o.view.getUint32(t)/1e5,y:o.view.getUint32(t+4)/1e5};if(_.x>1||_.y>1)throw(0,r.createChunkDecodeWarning)(i,`Invalid red (${_.x},${_.y})`,t);t+=8;const v={x:o.view.getUint32(t)/1e5,y:o.view.getUint32(t+4)/1e5};if(v.x>1||v.y>1)throw(0,r.createChunkDecodeWarning)(i,`Invalid green (${v.x},${v.y})`,t);t+=8;const p={x:o.view.getUint32(t)/1e5,y:o.view.getUint32(t+4)/1e5};if(p.x>1||p.y>1)throw(0,r.createChunkDecodeWarning)(i,`Invalid blue (${p.x},${p.y})`,t);return{type:"cHRM",whitePoint:d,red:_,green:v,blue:p}}return h(u,"parseChunk"),gt.parseChunk=u,gt}h(ca,"requireChunk_cHRM");var bt={},ir;function da(){if(ir)return bt;ir=1,Object.defineProperty(bt,"__esModule",{value:!0}),bt.parseChunk=void 0;function r(u,o,a){const i=a.offset+4+4;return{type:"eXIf",value:u.view.buffer.slice(u.view.byteOffset+i,u.view.byteOffset+i+a.dataLength)}}return h(r,"parseChunk"),bt.parseChunk=r,bt}h(da,"requireChunk_eXIf");var vt={},or;function ha(){if(or)return vt;or=1,Object.defineProperty(vt,"__esModule",{value:!0}),vt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"PLTE"),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,4);const t=i.offset+4+4,d=o.view.getUint32(t)/1e5;return d===0&&(0,r.handleWarning)(o,(0,r.createChunkDecodeWarning)(i,"A value of 0 is meaningless",t)),{type:"gAMA",value:d}}return h(u,"parseChunk"),vt.parseChunk=u,vt}h(ha,"requireChunk_gAMA");var yt={},sr;function _a(){if(sr)return yt;sr=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkFollows)(o,i,"PLTE"),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,o.palette.size*2);const t=i.offset+4+4,d=[];for(let _=0;_<o.palette.size*2;_+=2)d.push(o.view.getUint16(t+_));return{type:"hIST",frequency:d}}return h(u,"parseChunk"),yt.parseChunk=u,yt}h(_a,"requireChunk_hIST");var mt={},kt={},lr;function nt(){if(lr)return kt;lr=1,Object.defineProperty(kt,"__esModule",{value:!0}),kt.readText=void 0;const r=bn(),u=K;function o(a,i,t,d,_,v,p,y){const D=[];let L=0,R=0;for(;(d===void 0||R<d)&&!(!p&&_===v);R++){try{L=a.view.getUint8(_)}catch(w){throw w instanceof Error&&w.message==="Offset is outside the bounds of the DataView"?(0,u.createChunkDecodeWarning)(i,"EOF while reading text",_):w}if(!y&&L===0)break;_++,D.push(L)}if(p&&a.view.getUint8(_)!==0)throw(0,u.createChunkDecodeWarning)(i,"No null character after text",_);let j=new Uint8Array(D);if(y){const w=new r.Inflate;if(w.push(j),w.err)throw(0,u.createChunkDecodeWarning)(i,`Inflate error: ${w.msg}`,_);j=w.result}return{text:t?t.decode(j):String.fromCharCode(...D),bytesRead:R+1}}return h(o,"readText"),kt.readText=o,kt}h(nt,"requireText");var ur;function pa(){if(ur)return mt;ur=1,Object.defineProperty(mt,"__esModule",{value:!0}),mt.parseChunk=void 0;const r=K,u=nt();function o(a,i,t){(0,r.assertChunkSinglular)(a,t),(0,r.assertChunkMutualExclusion)(a,t,"sRGB"),(0,r.assertChunkPrecedes)(a,t,"PLTE"),(0,r.assertChunkPrecedes)(a,t,"IDAT"),(0,r.assertChunkDataLengthGte)(a,t,3);const d=t.offset+4+4,_=d+t.dataLength;let v=d;const p=new TextDecoder("latin1"),y=(0,u.readText)(a,t,p,79,v,_,!0);v+=y.bytesRead;const D=y.text,L=a.view.getUint8(v);(0,r.assertChunkCompressionMethod)(a,t,L,v),v++;const R=new Uint8Array(a.view.buffer.slice(a.view.byteOffset+v,a.view.byteOffset+_));return{type:"iCCP",name:D,data:R}}return h(o,"parseChunk"),mt.parseChunk=o,mt}h(pa,"requireChunk_iCCP");var Ct={},fr;function wa(){if(fr)return Ct;fr=1,Object.defineProperty(Ct,"__esModule",{value:!0}),Ct.parseChunk=void 0;const r=K,u=nt();function o(a,i,t){(0,r.assertChunkDataLengthGte)(a,t,6);let d=t.offset+4+4;const _=d+t.dataLength,v=new TextDecoder("utf8");let p;p=(0,u.readText)(a,t,v,79,d,_,!0),d+=p.bytesRead;const y=p.text,D=a.view.getUint8(d++)===1,L=a.view.getUint8(d);D&&(0,r.assertChunkCompressionMethod)(a,t,L,d),d++,p=(0,u.readText)(a,t,v,void 0,d,_,!0),d+=p.bytesRead;const R=p.text;p=(0,u.readText)(a,t,v,void 0,d,_,!0),d+=p.bytesRead;const j=p.text;p=(0,u.readText)(a,t,v,void 0,d,_,!1,D),d+=p.bytesRead;const w=p.text;return{type:"iTXt",keyword:y,languageTag:R,translatedKeyword:j,text:w}}return h(o,"parseChunk"),Ct.parseChunk=o,Ct}h(wa,"requireChunk_iTXt");var Et={},cr;function ga(){if(cr)return Et;cr=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkDataLengthEquals)(o,i,7);let t=i.offset+4+4;const d=o.view.getUint16(t);t+=2;const _=o.view.getUint8(t++),v=o.view.getUint8(t++),p=o.view.getUint8(t++),y=o.view.getUint8(t++),D=o.view.getUint8(t++);return{type:"tIME",value:new Date(d,_,v,p,y,D)}}return h(u,"parseChunk"),Et.parseChunk=u,Et}h(ga,"requireChunk_tIME");var Tt={},dr;function ba(){if(dr)return Tt;dr=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,9);let t=i.offset+4+4;const d=o.view.getInt32(t);t+=4;const _=o.view.getInt32(t);t+=4;const v=o.view.getUint8(t);let p;switch(v){case 0:p="pixel";break;case 1:p="micrometer";break;default:throw(0,r.createChunkDecodeWarning)(i,`Invalid oFFs unit type ("${v}")`,t)}return{type:"oFFs",offset:{x:d,y:_},unitType:p}}return h(u,"parseChunk"),Tt.parseChunk=u,Tt}h(ba,"requireChunk_oFFs");var Dt={},xt={},hr;function _r(){if(hr)return xt;hr=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.readFloat=void 0;const r=K,u=nt();function o(i,t,d,_,v,p){const y=(0,u.readText)(i,t,d,void 0,_,v,p);_+=y.bytesRead,a(y.text)||(0,r.handleWarning)(i,(0,r.createChunkDecodeWarning)(t,`Invalid character in floating point number ("${y.text}")`,_));const D=parseFloat(y.text);return{bytesRead:y.bytesRead,value:D}}h(o,"readFloat"),xt.readFloat=o;function a(i){return i.match(/^[+-]?[0-9]+\.[0-9]+([eE][+-]?[0-9]+)?$/)||i.match(/^[+-]?[0-9]+\.?([eE][+-]?[0-9]+)?$/)||i.match(/^[+-]?\.[0-9]+([eE][+-]?[0-9]+)?$/)}return h(a,"isValidFloatingPoint"),xt}h(_r,"requireFloat");var pr;function va(){if(pr)return Dt;pr=1,Object.defineProperty(Dt,"__esModule",{value:!0}),Dt.parseChunk=void 0;const r=K,u=_r(),o=nt();function a(i,t,d){(0,r.assertChunkSinglular)(i,d),(0,r.assertChunkPrecedes)(i,d,"IDAT"),(0,r.assertChunkDataLengthGte)(i,d,4);const _=d.offset+4+4,v=_+d.dataLength;let p=_;const y=new TextDecoder("latin1");let D;D=(0,o.readText)(i,d,y,79,p,v,!0),p+=D.bytesRead;const L=D.text,R=i.view.getInt32(p);p+=4;const j=i.view.getInt32(p);p+=4;const w=i.view.getUint8(p++);let l;switch(w){case 0:l="linear-mapping";break;case 1:l="base-e exponential mapping";break;case 2:l="arbitrary-base exponential mapping";break;case 3:l="hyperbolic mapping";break;default:throw(0,r.createChunkDecodeWarning)(d,`Invalid equation type "${w}"`,p)}const E=i.view.getUint8(p++);D=(0,o.readText)(i,d,y,79,p,v,!0),p+=D.bytesRead;const S=D.text,T=[];let c;for(let g=0;g<E;g++)c=(0,u.readFloat)(i,d,y,p,v,g<E-1),p+=c.bytesRead,T.push(c.value);return{type:"pCAL",calibrationName:L,x0:R,x1:j,equationType:l,unitName:S,params:T}}return h(a,"parseChunk"),Dt.parseChunk=a,Dt}h(va,"requireChunk_pCAL");var St={},wr;function ya(){if(wr)return St;wr=1,Object.defineProperty(St,"__esModule",{value:!0}),St.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,9);let t=i.offset+4+4;const d=o.view.getUint32(t);t+=4;const _=o.view.getUint32(t);t+=4;const v=o.view.getUint8(t)===1?"meter":"unknown";return{type:"pHYs",pixelsPerUnit:{x:d,y:_},unitType:v}}return h(u,"parseChunk"),St.parseChunk=u,St}h(ya,"requireChunk_pHYs");var Rt={},gr;function ma(){if(gr)return Rt;gr=1,Object.defineProperty(Rt,"__esModule",{value:!0}),Rt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"PLTE"),(0,r.assertChunkPrecedes)(o,i,"IDAT");const t=i.offset+4+4;let d,_;switch(a.colorType){case 0:{d=o.view.getUint8(t),_=1;break}case 2:case 3:{d=[o.view.getUint8(t),o.view.getUint8(t+1),o.view.getUint8(t+2)],_=3;break}case 4:{d=[o.view.getUint8(t),o.view.getUint8(t+1)],_=2;break}case 6:{d=[o.view.getUint8(t),o.view.getUint8(t+1),o.view.getUint8(t+2),o.view.getUint8(t+3)],_=4;break}default:throw(0,r.createChunkDecodeWarning)(i,`Unrecognized color type "${a.colorType}"`,t)}return(0,r.assertChunkDataLengthEquals)(o,i,_),{type:"sBIT",value:d}}return h(u,"parseChunk"),Rt.parseChunk=u,Rt}h(ma,"requireChunk_sBIT");var At={},br;function ka(){if(br)return At;br=1,Object.defineProperty(At,"__esModule",{value:!0}),At.parseChunk=void 0;const r=K,u=_r();function o(a,i,t){(0,r.assertChunkSinglular)(a,t),(0,r.assertChunkPrecedes)(a,t,"IDAT"),(0,r.assertChunkDataLengthGte)(a,t,4);const d=t.offset+4+4,_=d+t.dataLength;let v=d;const p=new TextDecoder("latin1"),y=a.view.getUint8(v);let D;switch(y){case 0:D="meter";break;case 1:D="radian";break;default:throw(0,r.createChunkDecodeWarning)(t,`Invalid sCAL unit type ("${y}")`,v)}v++;let L;L=(0,u.readFloat)(a,t,p,v,_,!0),v+=L.bytesRead;const R=L.value;L=(0,u.readFloat)(a,t,p,v,_,!1),v+=L.bytesRead;const j=L.value;if(R<0||j<0)throw(0,r.createChunkDecodeWarning)(t,`Values cannot be negative (${R}, ${j})`,v);return{type:"sCAL",pixelsPerUnit:{x:R,y:j},unitType:D}}return h(o,"parseChunk"),At.parseChunk=o,At}h(ka,"requireChunk_sCAL");var It={},vr;function Ca(){if(vr)return It;vr=1,Object.defineProperty(It,"__esModule",{value:!0}),It.parseChunk=void 0;const r=K,u=nt();function o(a,i,t){(0,r.assertChunkPrecedes)(a,t,"IDAT");const d=t.offset+4+4;let _=d;const v=_+t.dataLength,p=new TextDecoder("latin1"),y=(0,u.readText)(a,t,p,void 0,_,v,!0);_+=y.bytesRead;const D=y.text,L=a.view.getUint8(_++),R=L===16?2:1,j=R*4+2,w=t.dataLength-(_-d),l=w/j;if(l%1!==0)throw(0,r.createChunkDecodeWarning)(t,`Invalid data length: ${w} should be divisible by entry size ${j}`,_);const E=[];for(let S=0;S<l;S++){const T=[];for(let g=0;g<4;g++)T.push(R===2?a.view.getUint16(_):a.view.getUint8(_)),_+=R;const c=a.view.getUint16(_);_+=2,E.push({red:T[0],green:T[1],blue:T[2],alpha:T[3],frequency:c})}return{type:"sPLT",name:D,sampleDepth:L,entries:E}}return h(o,"parseChunk"),It.parseChunk=o,It}h(Ca,"requireChunk_sPLT");var Pt={},yr;function Ea(){if(yr)return Pt;yr=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkMutualExclusion)(o,i,"iCCP"),(0,r.assertChunkPrecedes)(o,i,"PLTE"),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,1);const t=i.offset+4+4,d=o.view.getUint8(t);let _;switch(d){case 0:case 1:case 2:case 3:_=d;break;default:throw(0,r.createChunkDecodeWarning)(i,`Invalid rendering intent "${d}"`,t)}return{type:"sRGB",renderingIntent:_}}return h(u,"parseChunk"),Pt.parseChunk=u,Pt}h(Ea,"requireChunk_sRGB");var Ut={},mr;function Ta(){if(mr)return Ut;mr=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.parseChunk=void 0;const r=K;function u(o,a,i){(0,r.assertChunkSinglular)(o,i),(0,r.assertChunkPrecedes)(o,i,"IDAT"),(0,r.assertChunkDataLengthEquals)(o,i,1);const t=i.offset+4+4,d=o.view.getUint8(t);let _;switch(d){case 0:_="cross-fuse";break;case 1:_="diverging-fuse";break;default:throw(0,r.createChunkDecodeWarning)(i,`Invalid layout mode "${d}"`,t)}const v=15-(a.width-1)%16;if(v>7)throw(0,r.createChunkDecodeWarning)(i,`Invalid padding value "${v}" for image width ${a.width}`,t);const p=Math.floor((a.width-v)/2);return{type:"sTER",layoutMode:_,subimageWidth:p,padding:v}}return h(u,"parseChunk"),Ut.parseChunk=u,Ut}h(Ta,"requireChunk_sTER");var Mt={},kr;function Da(){if(kr)return Mt;kr=1,Object.defineProperty(Mt,"__esModule",{value:!0}),Mt.parseChunk=void 0;const r=K,u=nt();function o(a,i,t){(0,r.assertChunkDataLengthGte)(a,t,6);const d=t.offset+4+4,_=d+t.dataLength;let v=d;const p=new TextDecoder("latin1");let y;y=(0,u.readText)(a,t,p,79,v,_,!0),v+=y.bytesRead;const D=y.text;y=(0,u.readText)(a,t,p,void 0,v,_,!1),v+=y.bytesRead;const L=y.text;return{type:"tEXt",keyword:D,text:L}}return h(o,"parseChunk"),Mt.parseChunk=o,Mt}h(Da,"requireChunk_tEXt");var Lt={},Cr;function xa(){if(Cr)return Lt;Cr=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.parseChunk=void 0;const r=K;function u(o,a,i){switch((0,r.assertChunkPrecedes)(o,i,"IDAT"),a.colorType){case 0:(0,r.assertChunkDataLengthEquals)(o,i,2);break;case 2:(0,r.assertChunkDataLengthEquals)(o,i,6);break;case 3:if((0,r.assertChunkFollows)(o,i,"PLTE"),i.dataLength>o.palette.size)throw(0,r.createChunkDecodeWarning)(i,`Invalid data length for color type ${a.colorType}: ${i.dataLength} > ${o.palette.size}`,i.offset+4+4);break;case 4:case 6:throw(0,r.createChunkDecodeWarning)(i,`Chunk invalid when color type has alpha (${a.colorType})`,i.offset+4+4)}const t=i.offset+4+4;let d;switch(a.colorType){case 0:d=o.view.getUint16(t);break;case 2:d=[o.view.getUint16(t),o.view.getUint16(t+2),o.view.getUint16(t+4)];break;case 3:d=[];for(let _=0;_<i.dataLength;_++)d.push(o.view.getUint8(t+_));break}return{type:"tRNS",transparency:d}}return h(u,"parseChunk"),Lt.parseChunk=u,Lt}h(xa,"requireChunk_tRNS");var Ot={},Er;function Sa(){if(Er)return Ot;Er=1,Object.defineProperty(Ot,"__esModule",{value:!0}),Ot.parseChunk=void 0;const r=K,u=nt();function o(a,i,t){(0,r.assertChunkDataLengthGte)(a,t,6);const d=t.offset+4+4,_=d+t.dataLength;let v=d;const p=new TextDecoder("latin1");let y;y=(0,u.readText)(a,t,p,79,v,_,!0),v+=y.bytesRead;const D=y.text,L=a.view.getUint8(v);(0,r.assertChunkCompressionMethod)(a,t,L,v),v++,y=(0,u.readText)(a,t,p,void 0,v,_,!1,!0),v+=y.bytesRead;const R=y.text;return{type:"zTXt",keyword:D,text:R}}return h(o,"parseChunk"),Ot.parseChunk=o,Ot}h(Sa,"requireChunk_zTXt");var rt={},Tr;function Ra(){if(Tr)return rt;Tr=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.Palette=rt.parseChunk=void 0;const r=K;function u(i,t,d){(0,r.assertChunkSinglular)(i,d),(0,r.assertChunkPrecedes)(i,d,"bKGD"),(0,r.assertChunkPrecedes)(i,d,"hIST"),(0,r.assertChunkPrecedes)(i,d,"tRNS"),(0,r.assertChunkPrecedes)(i,d,"IDAT");let _=d.offset+4;if(t.colorType===0||t.colorType===4)throw(0,r.createChunkDecodeWarning)(d,`Color type "${t.colorType}" cannot have a palette`,_);if(_+=4,d.dataLength===0)throw(0,r.createChunkDecodeWarning)(d,"Cannot have 0 entries",_);if(d.dataLength%3!==0)throw(0,r.createChunkDecodeWarning)(d,`Chunk length must be divisible by 3 (actual "${d.dataLength}")`,_);return d.dataLength/3>256&&(0,r.handleWarning)(i,(0,r.createChunkDecodeWarning)(d,`Too many entries (${d.dataLength/3} > 256)`,_)),d.dataLength/3>Math.pow(2,t.bitDepth)&&(0,r.handleWarning)(i,(0,r.createChunkDecodeWarning)(d,`Too many entries for bit depth (${d.dataLength/3} > 2^${t.bitDepth})`,_)),new o(i.view,d.offset+4+4,d.dataLength)}h(u,"parseChunk"),rt.parseChunk=u;const a=class a{constructor(t,d,_){this._view=t,this._paletteOffset=d,this._length=_}get size(){return this._length/3}getRgb(t){return this._checkIndex(t),new Uint8Array(this._view.buffer.slice(this._view.byteOffset+this._paletteOffset+t*3,this._view.byteOffset+this._paletteOffset+t*3+3))}setRgba(t,d,_){this._checkIndex(_);const v=this._paletteOffset+_*3;t[d]=this._view.getUint8(v),t[d+1]=this._view.getUint8(v+1),t[d+2]=this._view.getUint8(v+2),t[d+3]=255}_checkIndex(t){if(t<0||t*3>this._length-3)throw new Error(`Palette does not contain color index "${t}"`)}};h(a,"Palette");let o=a;return rt.Palette=o,rt}h(Ra,"requireChunk_PLTE");var Dr;function Aa(){if(Dr)return ze;Dr=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.readChunk=ze.readChunks=ze.decodePng=ze.verifyPngSignature=void 0;const r=Kr(),u=K,o=oa(),a=sa(),i=ua(),t=nr();function d(w){if(w.view.byteLength<7)throw new u.DecodeError(w,`Not enough bytes in file for png signature (${w.view.byteLength})`,0);if(!(w.view.getUint8(0)===137&&w.view.getUint8(1)===80&&w.view.getUint8(2)===78&&w.view.getUint8(3)===71&&w.view.getUint8(4)===13&&w.view.getUint8(5)===10&&w.view.getUint8(6)===26&&w.view.getUint8(7)===10)){const E=_(Array.from(new Uint8Array(w.view.buffer).slice(w.view.byteOffset,w.view.byteOffset+8))),S=_([137,80,78,71,13,10,26,10]);throw new u.DecodeError(w,`Png signature is not correct (${E} !== ${S})`,0)}}h(d,"verifyPngSignature"),ze.verifyPngSignature=d;function _(w){return`0x${w.map(l=>l.toString(16).padStart(2,"0")).join("")}`}h(_,"formatHexAssertion");const v=Object.freeze(["tRNS"]),p=Object.freeze(["bKGD","cHRM","eXIf","gAMA","hIST","iCCP","iTXt","tIME","oFFs","pCAL","pHYs","sBIT","sCAL","sPLT","sRGB","sTER","tEXt","tRNS","zTXt"]);function y(w){switch(w){case"bKGD":return Promise.resolve().then(()=>fa());case"cHRM":return Promise.resolve().then(()=>ca());case"eXIf":return Promise.resolve().then(()=>da());case"gAMA":return Promise.resolve().then(()=>ha());case"hIST":return Promise.resolve().then(()=>_a());case"iCCP":return Promise.resolve().then(()=>pa());case"iTXt":return Promise.resolve().then(()=>wa());case"tIME":return Promise.resolve().then(()=>ga());case"oFFs":return Promise.resolve().then(()=>ba());case"pCAL":return Promise.resolve().then(()=>va());case"pHYs":return Promise.resolve().then(()=>ya());case"sBIT":return Promise.resolve().then(()=>ma());case"sCAL":return Promise.resolve().then(()=>ka());case"sPLT":return Promise.resolve().then(()=>Ca());case"sRGB":return Promise.resolve().then(()=>Ea());case"sTER":return Promise.resolve().then(()=>Ta());case"tEXt":return Promise.resolve().then(()=>Da());case"tRNS":return Promise.resolve().then(()=>xa());case"zTXt":return Promise.resolve().then(()=>Sa());default:throw new Error(`Could not get decoder for chunk type "${w}"`)}}h(y,"getChunkDecoder");async function D(w,l={}){const E={view:new DataView(w.buffer,w.byteOffset,w.byteLength),image:void 0,palette:void 0,metadata:[],parsedChunks:new Set,warnings:[],info:[],options:l};d(E);const S=L(E);E.rawChunks=S;const T=(0,i.parseChunk)(E,S[0]),c={...E,header:T};let g;l&&l.parseChunkTypes?l.parseChunkTypes==="*"?g=p:g=v.concat(l.parseChunkTypes):g=v;for(let C=1;C<S.length;C++){const M=S[C];switch(M.type){case"IHDR":(0,u.handleWarning)(c,(0,u.createChunkDecodeWarning)(M,"Multiple IHDR chunks not allowed",M.offset+4));break;case"IDAT":{const $=[M];for(;S.length>C+1&&S[C+1].type==="IDAT";)$.push(S[++C]);c.image={width:T.width,height:T.height,data:(0,o.parseChunk)(c,T,$)};break}case"PLTE":c.palette=(await Promise.resolve().then(()=>Ra())).parseChunk(c,T,M);break;case"IEND":(0,a.parseChunk)(c,T,M);break;default:if(g.includes(M.type))try{c.metadata.push((await y(M.type)).parseChunk(c,T,M))}catch($){if($ instanceof u.DecodeWarning)(0,u.handleWarning)(c,$);else throw $}else if(!p.includes(M.type))if(M.isAncillary)c.info.push(`Unrecognized chunk type "${M.type}"`);else throw new u.DecodeError(c,`Unrecognized critical chunk type "${M.type}"`,M.offset+4);break}c.parsedChunks.add(M.type)}if(!c.image)throw new u.DecodeError(c,"Failed to decode, no IDAT chunk",0);return l&&l.force32&&c.image.data.BYTES_PER_ELEMENT===2&&(c.image.data=(0,r.convert16BitTo8BitData)(c.image.data)),{image:c.image,details:{width:T.width,height:T.height,bitDepth:T.bitDepth,colorType:T.colorType,interlaceMethod:T.interlaceMethod},palette:c.palette,metadata:c.metadata,rawChunks:S,warnings:c.warnings,info:c.info}}h(D,"decodePng"),ze.decodePng=D;function L(w){const l=[];let E=8,S=!1,T=!1,c;for(;E<w.view.byteLength;){try{c=R(w,E)}catch(g){if(!T||!(g instanceof Error))throw g;(0,u.handleWarning)(w,new u.DecodeWarning("Could not parse chunk after IEND: "+g.message,E))}E+=8+c.dataLength+4,l.push(c),S||(S=c.type==="IDAT"),T||(T=c.type==="IEND")}if(l[0].type!=="IHDR")throw new u.DecodeError(w,"First chunk is not IHDR",l[0].offset+4);if(l[l.length-1].type!=="IEND"&&(0,u.handleWarning)(w,new u.DecodeWarning("Last chunk is not IEND",l[l.length-1].offset+4)),!S)throw new u.DecodeError(w,"No IDAT chunk",0);return l}h(L,"readChunks"),ze.readChunks=L;function R(w,l){if(w.view.byteLength<l+4)throw new u.DecodeError(w,"EOF while reading chunk length",l);const E=w.view.getUint32(l);if(w.view.byteLength<l+4+4)throw new u.DecodeError(w,"EOF while reading chunk type",l);const S=String.fromCharCode(w.view.getUint8(l+4),w.view.getUint8(l+5),w.view.getUint8(l+6),w.view.getUint8(l+7));if(w.view.byteLength<l+4+4+E+4)throw new u.DecodeError(w,`EOF while reading chunk "${S}"`,l);const T=w.view.getUint32(l+4+4+E)>>>0,c=(0,t.crc32)(w.view,l+4,4+E);return T!==c&&(0,u.handleWarning)(w,new u.DecodeWarning(`CRC for chunk "${S}" at offset 0x${l.toString(16)} doesn't match (0x${T.toString(16)} !== 0x${c.toString(16)})`,l)),{offset:l,type:S,dataLength:E,isAncillary:j(S,0),isPrivate:j(S,1),isSafeToCopy:j(S,3)}}h(R,"readChunk"),ze.readChunk=R;function j(w,l){return!!(w.charCodeAt(l)&32)}return h(j,"isCharLowercase"),ze}h(Aa,"requireDecoder");var zt={},Ft={},xr;function vn(){if(xr)return Ft;xr=1,Object.defineProperty(Ft,"__esModule",{value:!0}),Ft.ByteStream=void 0;const u=class u{constructor(a){this.offset=0,this.array=new Uint8Array(a),this.view=new DataView(this.array.buffer,this.array.byteOffset,this.array.byteLength)}writeUint8(a){this.view.setUint8(this.offset,a),this.offset+=1}writeUint16(a){this.view.setUint16(this.offset,a),this.offset+=2}writeUint32(a){this.view.setUint32(this.offset,a),this.offset+=4}writeArray(a){this.array.set(a,this.array.byteOffset+this.offset),this.offset+=a.length}assertAtEnd(){if(this.offset!==this.array.length)throw new Error("Writing finished before expected length of stream")}};h(u,"ByteStream");let r=u;return Ft.ByteStream=r,Ft}h(vn,"requireByteStream");var Nt={},Ze={},Sr;function ot(){if(Sr)return Ze;Sr=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.writeChunkDataFn=Ze.writeChunk=Ze.writeChunkType=void 0;const r=vn(),u=nr();function o(t,d){t.writeUint8(d.charCodeAt(0)),t.writeUint8(d.charCodeAt(1)),t.writeUint8(d.charCodeAt(2)),t.writeUint8(d.charCodeAt(3))}h(o,"writeChunkType"),Ze.writeChunkType=o;function a(t,d){const _=new r.ByteStream(8+d.length+4);if(_.writeUint32(d.length),t.length!==4)throw new Error(`Cannot encode a chunk type of length ${t.length}`);return o(_,t),_.writeArray(d),_.writeUint32((0,u.crc32)(_.view,4,4+d.length)),_.assertAtEnd(),_.array}h(a,"writeChunk"),Ze.writeChunk=a;function i(t,d,_){const v=new r.ByteStream(8+d+4);if(v.writeUint32(d),t.length!==4)throw new Error(`Cannot encode a chunk type of length ${t.length}`);return o(v,t),_(v),v.writeUint32((0,u.crc32)(v.view,4,4+d)),v.assertAtEnd(),v.array}return h(i,"writeChunkDataFn"),Ze.writeChunkDataFn=i,Ze}h(ot,"requireWrite");var Rr;function Ia(){if(Rr)return Nt;Rr=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.encodeChunk=void 0;const r=bn(),u=vn(),o=Vn(),a=ot();function i(y,D){const L=t(y,D),R=new u.ByteStream(L);d(y,D,R);const j=r.deflate(R.array);return(0,a.writeChunk)("IDAT",j)}h(i,"encodeChunk"),Nt.encodeChunk=i;function t(y,D){if(y.bitDepth<8)throw new Error("Only bit depth 8 and 16 is supported currently");if(D.data.BYTES_PER_ELEMENT===2&&y.bitDepth===8)throw new Error("16 to 8 bit conversion isn't supported yet");if(y.interlaceMethod!==0)throw new Error("Only interlace method 0 is supported currently");let L;switch(y.colorType){case 0:L=1;break;case 2:L=3;break;case 3:L=1;break;case 4:L=2;break;case 6:L=4;break}const R=y.bitDepth===16?2:1;return(1+L*R*D.width)*D.height}h(t,"calculateDataLength");function d(y,D,L){let R=0,j=0,w=0;if(y.colorType===3){if(!y.palette)throw new Error("Cannot encode indexed file without palette");if(D.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode indexed file from 16-bit image");for(;w<D.height;w++)for(L.writeUint8(0),j=0;j<D.width;j++)L.writeUint8(y.palette.get(D.data[R]<<24|D.data[R+1]<<16|D.data[R+2]<<8|D.data[R+3])),R+=4;return}let l;if(y.options.filterPattern){if(y.options.filterPattern.length===0)throw new Error("Filter pattern with 0 entries");l=y.options.filterPattern}const E=4*D.data.BYTES_PER_ELEMENT,S=[];for(const c of[0,1,2,3,4])S[c]=v(E,E*D.width,c);const T=p(y.colorType);for(;w<D.height;w++){const c=l?l[w%l.length]:_(y.colorType,D,w*D.width*4,S),g=new Uint8Array(D.data.buffer,D.data.byteOffset,D.data.byteLength);L.writeUint8(c);let C=0,M=0;for(j=0;j<D.width;j++){for(M of T)for(C=D.data.BYTES_PER_ELEMENT-1;C>=0;C--)L.writeUint8(S[c](g,(R+M)*D.data.BYTES_PER_ELEMENT+C,j===0));R+=4}}}h(d,"writeUncompressedData");function _(y,D,L,R){const j=[];4*D.data.BYTES_PER_ELEMENT;for(const E of[0,1,2,3,4]){let S=0;const T=p(y),c=new Uint8Array(D.data.buffer,D.data.byteOffset,D.data.byteLength);let g=0,C=0;for(let M=L;M<L+D.width*4;M+=4)for(g of T)for(C=D.data.BYTES_PER_ELEMENT-1;C>=0;C--)S+=R[E](c,(M+g)*D.data.BYTES_PER_ELEMENT+C,M===L);j[E]=S}let w=0,l=j[0];for(const E of[1,2,3,4])j[E]<l&&(w=E,l=j[E]);return w}h(_,"pickFilterType");function v(y,D,L){let R=0,j=0,w=0;switch(L){case 0:return(l,E)=>l[E];case 1:return(l,E,S)=>(R=S?-1:E-y,(l[E]-(R<0?0:l[E-y])+256)%256);case 2:return(l,E)=>(j=E-D,(l[E]-(j<0?0:l[j])+256)%256);case 3:return(l,E,S)=>(R=S?-1:E-y,j=E-D,(l[E]-Math.floor(((R<0?0:l[R])+(j<0?0:l[j]))/2)+256)%256);case 4:return(l,E,S)=>(R=S?-1:E-y,j=E-D,w=S?-1:E-y-D,(l[E]-(0,o.paethPredicator)(R<0?0:l[R],j<0?0:l[j],w<0?0:l[w])+256)%256)}}h(v,"buildFilterFunction");function p(y){switch(y){case 0:return[0];case 2:return[0,1,2];case 4:return[0,3];case 6:return[0,1,2,3]}}return h(p,"getChannelsToWrite"),Nt}h(Ia,"requireIDAT_encode");var jt={},Ar;function Pa(){if(Ar)return jt;Ar=1,Object.defineProperty(jt,"__esModule",{value:!0}),jt.encodeChunk=void 0;const r=ot();function u(){return(0,r.writeChunk)("IEND",new Uint8Array(0))}return h(u,"encodeChunk"),jt.encodeChunk=u,jt}h(Pa,"requireIEND_encode");var qt={},Ir;function Ua(){if(Ir)return qt;Ir=1,Object.defineProperty(qt,"__esModule",{value:!0}),qt.encodeChunk=void 0;const r=ot();function u(o,a){if(a.width<=0||a.height<=0)throw new Error(`Invalid dimensions ${a.width}x${a.height}`);return(0,r.writeChunkDataFn)("IHDR",13,i=>{i.writeUint32(a.width),i.writeUint32(a.height),i.writeUint8(o.bitDepth),i.writeUint8(o.colorType),i.writeUint8(0),i.writeUint8(0),i.writeUint8(o.interlaceMethod)})}return h(u,"encodeChunk"),qt.encodeChunk=u,qt}h(Ua,"requireIHDR_encode");var Bt={},Pr;function Ma(){if(Pr)return Bt;Pr=1,Object.defineProperty(Bt,"__esModule",{value:!0}),Bt.encodeChunk=void 0;const r=ot();function u(o,a){switch(o.colorType){case 0:{if(o.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for grayscale without any transparent colors");const i=o.firstTransparentColor;return(0,r.writeChunkDataFn)("tRNS",2,t=>{a.data.BYTES_PER_ELEMENT===2?t.writeUint16(i>>48&65535):t.writeUint16(i>>24&255)})}case 3:{if(!o.palette)throw new Error("Cannot encode tRNS chunk for indexed image without palette");return(0,r.writeChunkDataFn)("tRNS",o.palette.size,i=>{for(const t of o.colorSet)i.writeUint8(t&255)})}case 2:{if(o.firstTransparentColor===void 0)throw new Error("Cannot write tRNS for True color without any transparent colors");const i=o.firstTransparentColor;return(0,r.writeChunkDataFn)("tRNS",6,t=>{a.data.BYTES_PER_ELEMENT===2?(t.writeUint16(i>>48&65535),t.writeUint16(i>>32&65535),t.writeUint16(i>>16&65535)):(t.writeUint16(i>>24&255),t.writeUint16(i>>16&255),t.writeUint16(i>>8&255))})}default:throw new Error(`Cannot encode tRNS chunk for color type "${o.colorType}"`)}}return h(u,"encodeChunk"),Bt.encodeChunk=u,Bt}h(Ma,"requireTRNS_encode");var $t={},Ur;function La(){if(Ur)return $t;Ur=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.encodeChunk=void 0;const r=ot();function u(o,a){if(o.bitDepth===16||a.data.BYTES_PER_ELEMENT===2)throw new Error("Cannot encode 16 bit images using indexed color type");if(o.colorSet.size>Math.pow(2,o.bitDepth))throw new Error(`Too many colors ${o.colorSet.size} to encode into indexed image (2^${o.bitDepth} = ${Math.pow(2,o.bitDepth)})`);const i=(0,r.writeChunkDataFn)("PLTE",o.colorSet.size*3,d=>{for(const _ of o.colorSet.values())d.writeUint8(_>>24&255),d.writeUint8(_>>16&255),d.writeUint8(_>>8&255)}),t=new Map;for(const d of o.colorSet.values())t.set(d,t.size);return{chunkData:i,palette:t}}return h(u,"encodeChunk"),$t.encodeChunk=u,$t}h(La,"requirePLTE_encode");var Zt={},Mr;function Lr(){if(Mr)return Zt;Mr=1,Object.defineProperty(Zt,"__esModule",{value:!0}),Zt.encodeChunk=void 0;const r=Be,u=ot();function o(a,i,t,d){if(t.length===0||t.length>79)throw new r.EncodeError(`tEXt: Invalid keyword length: 0 < ${t.length} < 80`,0);const _=t.length+1+d.length;return(0,u.writeChunkDataFn)("tEXt",_,v=>{let p=0;for(;p<t.length;p++)v.writeUint8(t.charCodeAt(p));for(v.writeUint8(0),p=0;p<d.length;p++)v.writeUint8(d.charCodeAt(p))})}return h(o,"encodeChunk"),Zt.encodeChunk=o,Zt}h(Lr,"requireTEXt_encode");var Or;function Oa(){if(Or)return zt;Or=1,Object.defineProperty(zt,"__esModule",{value:!0}),zt.encodePng=void 0;const r=vn(),u=Ia(),o=Pa(),a=Ua(),i=Be;function t(p){switch(p){case"tRNS":return Promise.resolve().then(()=>Ma());default:throw new Error(`Could not get encoder for chunk type "${p}"`)}}h(t,"getChunkDecoder");async function d(p,y={}){if(p.data.length!==p.width*p.height*4)throw new i.EncodeError(`Provided image data length (${p.data.length}) is not expected length (${p.width*p.height*4})`,Math.min(p.data.length,p.width*p.height*4)-1);const D=[];D.push(_());const L=v(p,y);if(D.push((0,a.encodeChunk)(L,p)),L.colorType===3){const l=(await Promise.resolve().then(()=>La())).encodeChunk(L,p);L.palette=l.palette,D.push(l.chunkData)}if(L.useTransparencyChunk&&D.push((await t("tRNS")).encodeChunk(L,p)),D.push((0,u.encodeChunk)(L,p)),y?.ancillaryChunks===void 0)D.push((await Promise.resolve().then(()=>Lr())).encodeChunk(L,p,"Software","@lunapaint/png-codec"));else for(const l of y.ancillaryChunks)switch(l.type){case"tEXt":D.push((await Promise.resolve().then(()=>Lr())).encodeChunk(L,p,l.keyword,l.text));break;default:throw new Error(`Cannot encode chunk type "${l.type}"`)}D.push((0,o.encodeChunk)());const R=D.reduce((l,E)=>l+E.length,0),j=new Uint8Array(R);let w=0;for(const l of D)j.set(l,w),w+=l.length;return{data:j,warnings:L.warnings,info:L.info}}h(d,"encodePng"),zt.encodePng=d;function _(){const p=new r.ByteStream(8);return p.writeUint8(137),p.writeUint8(80),p.writeUint8(78),p.writeUint8(71),p.writeUint8(13),p.writeUint8(10),p.writeUint8(26),p.writeUint8(10),p.assertAtEnd(),p.array}h(_,"writePngSignature");function v(p,y={}){const D=[],L=[],j=p.width*p.height*4,w=new Set,l=new Set;let E=0;if(p.data.BYTES_PER_ELEMENT===2)for(let c=0;c<j;c+=4)E=p.data[c]<<48|p.data[c+1]<<32|p.data[c+2]<<16|p.data[c+3],p.data[c+3]<65535&&l.add(E),w.add(E);else for(let c=0;c<j;c+=4)E=p.data[c]<<24|p.data[c+1]<<16|p.data[c+2]<<8|p.data[c+3],p.data[c+3]<255&&l.add(E),w.add(E);let S=y.colorType;S===void 0&&(w.size>256||p.data.BYTES_PER_ELEMENT===2?S=2:S=3);let T;switch(S){case 0:case 2:T=l.size===1,!T&&l.size>1&&(S=S===2?6:4,y.colorType===2&&(0,i.handleWarning)({options:y,warnings:D},new i.EncodeWarning(`Cannot encode image as color type Truecolor as it contains ${l.size} transparent colors`,0)));break;case 3:T=l.size>0;break;default:T=!1}return y.colorType===void 0&&L.push(`Using color type ${S}`),{colorType:S,bitDepth:p.data.BYTES_PER_ELEMENT===2?16:8,interlaceMethod:0,colorSet:w,transparentColorCount:l.size,firstTransparentColor:l.size>0?l.values().next().value:void 0,useTransparencyChunk:T,options:y,warnings:D,info:L}}return h(v,"analyze"),zt}h(Oa,"requireEncoder"),function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.encodePng=r.decodePng=r.EncodeWarning=r.EncodeError=r.DecodeWarning=r.DecodeError=void 0;var u=K;Object.defineProperty(r,"DecodeError",{enumerable:!0,get:function(){return u.DecodeError}}),Object.defineProperty(r,"DecodeWarning",{enumerable:!0,get:function(){return u.DecodeWarning}});var o=Be;Object.defineProperty(r,"EncodeError",{enumerable:!0,get:function(){return o.EncodeError}}),Object.defineProperty(r,"EncodeWarning",{enumerable:!0,get:function(){return o.EncodeWarning}});async function a(t,d){return(await Promise.resolve().then(()=>Aa())).decodePng(t,d)}h(a,"decodePng"),r.decodePng=a;async function i(t,d){return(await Promise.resolve().then(()=>Oa())).encodePng(t,d)}h(i,"encodePng"),r.encodePng=i}(ut);function za(r,u){const o=r.length;for(let a=0;a<3;a++)u[a]=o/Math.pow(256,a)%256|0;u[3]=255;for(let a=4,i=0,t=u.length;a<t;a+=4,i+=3)u[a]=r[i]||0,u[a+1]=r[i+1]||0,u[a+2]=r[i+2]||0,u[a+3]=255;return u}h(za,"encodeDataIntoImage");function Fa(r){let u=0;for(let a=0;a<3;a++){const i=r[a]*Math.pow(256,a);u+=i}const o=new Uint8Array(u);e:for(let a=4,i=0,t=r.length;i<t;a+=4,i+=3)for(let d=0;d<3;d++){if(i+d>=u)break e;o[i+d]=r[a+d]}return o.buffer}h(Fa,"decodeDataFromImage");async function Na(r){const u=new Uint8Array(r),o=Math.ceil(Math.sqrt(u.length/3+1)),a=new ImageData(o,o);return za(u,a.data),(await ut.encodePng({width:o,height:o,data:new Uint8Array(a.data.buffer)})).data.buffer}h(Na,"encodeBinaryToPng");async function ja(r){const u=await Na(r);return new Blob([u],{type:"image/png"})}h(ja,"encodeBinaryToBlob");async function qa(r){if(!(r instanceof ArrayBuffer))throw new Error("Expected ArrayBuffer but got "+typeof r);const u=await ut.decodePng(new Uint8Array(r));return Fa(new Uint8ClampedArray(u.image.data.buffer))}h(qa,"decodeBinaryFromPng");const{CompressionStream:Ba,DecompressionStream:$a,Response:Kt}=globalThis,yn="gzip";async function Za(r,u=yn){const o=new Ba(u),a=new Kt(r).body?.pipeThrough(o);return await new Kt(a).arrayBuffer()}h(Za,"compress");async function Ha(r,u=yn){const o=new $a(u),a=new Kt(r).body?.pipeThrough(o);return new Kt(a)}h(Ha,"decompressAsResponse");async function Wa(r,u=yn){return(await Ha(r,u)).arrayBuffer()}h(Wa,"decompressAsArrayBuffer");function Ga(r){return new TextEncoder().encode(JSON.stringify(r)).buffer}h(Ga,"valueToArrayBuffer");function Ya(r){return JSON.parse(new TextDecoder().decode(r))}h(Ya,"arrayBufferToValue");async function Xa(r){return await ja(await Za(Ga(r)))}h(Xa,"encodeToBlob");async function Va(r){return Ya(await Ka(r))}h(Va,"decode");async function Ka(r){return await Wa(await qa(r))}h(Ka,"decodeBinary");function Ja(r,u="compressed.png"){const o=URL.createObjectURL(r),a=document.createElement("a");a.download=u,a.href=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(o)}h(Ja,"downloadImage");const{Tangible:{ajax:Jt}}=window,Qt="tangible_template_import_export__";var Qa=Object.defineProperty,ei=h((r,u)=>Qa(r,"name",{value:u,configurable:!0}),"c");function mn({mode:r,inputStateRef:u,setInputState:o}){const{importData:a}=u.current;if(!a||!a.post_types){console.warn("Import data not found",a);return}const i={...a,post_types:{},handle_duplicates:r};for(const{id:t,title:d,post_type:_}of u.current.duplicatesFound){const v=a.post_types[_].filter(p=>p.id===t)[0];if(!v){console.warn("Corresponding post not found",t,_,d);continue}i.post_types[_]||(i.post_types[_]=[]),i.post_types[_].push(v)}o({...u.current,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:""}),Jt(Qt+"import",i).then(t=>{const d={...i,old_to_new_id:{...u.current.old_to_new_id||{},...t.old_to_new_id||{}}};console.log("Imported duplicates",d),o({...u.current,importing:!1,importData:{},importedData:d,duplicatesFound:[],duplicatesHandledMessage:"",message:t.post_count+" template"+(t.post_count!==1?"s":"")+" imported"})}).catch(t=>{o({...u.current,duplicatesHandledMessage:"Error: "+t.message})})}h(mn,"m$2"),ei(mn,"handleDuplicates");var ti=Object.defineProperty,Ht=h((r,u)=>ti(r,"name",{value:u,configurable:!0}),"l");const ni=!1,en=Ht((...r)=>ni,"log"),{FileReader:ri}=window,kn={tangible_template:"Templates",tangible_style:"Styles",tangible_script:"Scripts",tangible_layout:"Layouts",tangible_block:"Blocks"},ai=Ht(({useInput:r=!0,directImportData:u})=>{const[o,a]=wp.element.useState({importing:!1,importData:{},importedData:{},message:"",duplicatesFound:[],duplicatesHandledMessage:""}),i=wp.element.useRef();i.current=o;const t=Ht(()=>{a({...i.current,importing:!0,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:"Importing.."})},"preImport"),d=Ht(p=>a({...i.current,importing:!1,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:"Error: "+p}),"onError"),_=Ht(p=>{a({...i.current,importData:p}),Jt(Qt+"import",p).then(y=>{en("Import success",y);const{importData:D}=i.current,L={post_types:Object.keys(D.post_types).reduce((R,j)=>{const w=y.duplicates_found.filter(l=>l.post_type===j).map(l=>l.id);return R[j]=D.post_types[j].filter(l=>w.indexOf(l.id)<0),R},{}),old_to_new_id:y.old_to_new_id||{}};en("Imported minus duplicates",L),a({...i.current,importing:!1,duplicatesFound:y.duplicates_found,importData:y.duplicates_found.length?D:{},importedData:L,message:y.post_count+" template"+(y.post_count!==1?"s":"")+" imported"+(y.failed_post_count?" - "+y.failed_post_count+" template"+(y.failed_post_count!==1?"s":"")+" failed":"")})}).catch(y=>{console.error(y),d(y.message)})},"importJSON");wp.element.useEffect(()=>{u&&(t(),_(u))},[]);const v=wp.element.useRef();return wp.element.createElement("div",{id:"importer"},r&&wp.element.createElement("p",null,wp.element.createElement("input",{type:"file",hidden:!0,ref:v,accept:".json,text/json,.png,image/png",onChange:({target:{files:p}})=>{const y=p[0],D=y.name.endsWith(".png"),L=new ri;t(),L.onload=function(R){const j=R.target.result;if(D){Va(j).then(w=>{_(w)}).catch(w=>{console.error(w),d(w.message)});return}try{const w=JSON.parse(j);en("Import data",w),_(w)}catch{en("Invalid JSON",j),d("Invalid JSON")}},L.onerror=function(R){d(R.message)},D?L.readAsArrayBuffer(y):L.readAsText(y)}}),wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{o.importing||v.current&&v.current.click()}},"Import")),o.message&&wp.element.createElement("p",null,o.message),Object.keys(o.importedData.post_types||{}).map(p=>o.importedData.post_types[p]&&o.importedData.post_types[p].length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",null,wp.element.createElement("b",null,kn[p]||"Templates")),wp.element.createElement("ul",null,o.importedData.post_types[p].map((y,D)=>wp.element.createElement("li",{key:`post-${D}`},o.importedData.old_to_new_id&&o.importedData.old_to_new_id[y.id]?wp.element.createElement("a",{href:`post.php?post=${o.importedData.old_to_new_id[y.id]}&action=edit`},y.title):y.title))))),o.duplicatesFound.length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("p",{style:{fontWeight:"bold",color:"red"}},o.duplicatesFound.length," duplicate template",o.duplicatesFound!==1?"s":""," found"),Object.keys(kn).map(p=>{const y=o.duplicatesFound.filter(D=>D.post_type===p);if(y.length)return wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("div",null,wp.element.createElement("b",null,kn[p]||"Templates")),wp.element.createElement("ul",null,y.map((D,L)=>wp.element.createElement("li",{key:`duplicate-post-${L}`},D.title))))}),wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{mn({mode:"overwrite",inputStateRef:i,setInputState:a})}},"Overwrite"),"\xA0",wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{mn({mode:"keep_both",inputStateRef:i,setInputState:a})}},"Keep both"),"\xA0",wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:()=>{a({...i.current,importing:!1,importData:{},importedData:{},duplicatesFound:[],duplicatesHandledMessage:"",message:""})}},"Skip"),o.duplicatesHandledMessage&&wp.element.createElement("p",null,o.duplicatesHandledMessage)))},"Importer");var ii=Object.defineProperty,oi=h((r,u)=>ii(r,"name",{value:u,configurable:!0}),"a");const{jQuery:si}=window,tn=oi(({labelForEmptyValue:r="",options:u=[],value:o="",onChange:a,multiSelect:i,style:t})=>{const d=wp.element.useRef();if(wp.element.useEffect(()=>{const _=si(d.current);d.current.$el=_,a(o),_.tangibleSelect({minimumResultsForSearch:5}),i&&(_.val(o),_.trigger("change")),_.on("change",function(p){if(!i){a(p.target.value);return}if(!d.current)return;const y=_.select2("data").map(D=>D.id);a(y)});const v=d.current.select2=_.data("select2");return()=>{v&&v.destroy()}},[]),d.current&&d.current.$el)if(i){const _=d.current.$el.val();o.length!==_.length&&u.length&&setTimeout(function(){d.current.$el.val(o),d.current.$el.trigger("change")},0)}else d.current.value!==o&&(d.current.$el.val(o),d.current.$el.trigger("change"));return wp.element.createElement("select",{ref:d,defaultValue:o,autoComplete:"off",multiple:i,style:{display:"none",width:"160px",...t}},r&&wp.element.createElement("option",{value:"",disabled:!0},r),u.map((_,v)=>wp.element.createElement("option",{key:`option-${v}`,value:_.value},_.label)))},"Select");var li=Object.defineProperty,ui=h((r,u)=>li(r,"name",{value:u,configurable:!0}),"d");const fi=ui(({rule:r,ruleIndex:u,exportRulesRef:o,setExportRules:a,templateTypeItemOptionsRef:i,ensureTemplateTypeItemOptions:t,templateCategoryOptions:d,hasPlugin:_})=>wp.element.createElement("div",{className:"export-rule"},wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(tn,{labelForEmptyValue:"Select template type",options:[..._.blocks&&_.blocks_editor?[{label:"Block",value:"tangible_block"}]:[],..._.loops||_.template_system?[{label:"Template",value:"tangible_template"},{label:"Style",value:"tangible_style"},{label:"Script",value:"tangible_script"},{label:"Layout",value:"tangible_layout"}]:[]],value:r.field,onChange(v){r.field=v,o.current[u]=r,a(o.current)}})),r.field&&wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(tn,{options:[{label:"All",value:"all"},{label:"Include",value:"include"},{label:"Exclude",value:"exclude"},{label:"Include category",value:"include_template_categories"},{label:"Exclude category",value:"exclude_template_categories"}],value:r.operator,onChange(v){r.operator=v,v==="all"&&(r.values=[]),o.current[u]=r,a(o.current),["include","exclude"].includes(v)&&t(r.field)},style:{width:"auto"}})),r.field&&r.operator!=="all"&&(["include_template_categories","exclude_template_categories"].includes(r.operator)?wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(tn,{options:d,value:r.values,onChange(v){r.values=v,o.current[u]=r,a(o.current)},multiSelect:!0})):i.current[r.field]&&wp.element.createElement("div",{className:"export-rule-part"},wp.element.createElement(tn,{options:i.current[r.field]instanceof Promise?[]:i.current[r.field],value:r.values,onChange(v){r.values=v,o.current[u]=r,a(o.current)},multiSelect:!0}))),wp.element.createElement("div",{className:"export-rule-part export-rule-part--remove-rule"},wp.element.createElement("div",{className:"icon",onClick:()=>{o.current.splice(u,1),a(o.current)}},wp.element.createElement("svg",{viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement("path",{d:"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"}))))),"ExportRule");var ci=Object.defineProperty,zr=h((r,u)=>ci(r,"name",{value:u,configurable:!0}),"e$1");function Fr(r){window.localStorage&&window.localStorage.setItem("exporterState",JSON.stringify(r))}h(Fr,"saveStateToLocalStorage"),zr(Fr,"saveStateToLocalStorage");function Nr(){if(!window.localStorage)return;let r=window.localStorage.getItem("exporterState");if(r)try{return r=JSON.parse(r),r}catch{}}h(Nr,"getSavedStateFromLocalStorage"),zr(Nr,"getSavedStateFromLocalStorage");var di=Object.defineProperty,st=h((r,u)=>di(r,"name",{value:u,configurable:!0}),"n$1");const hi=!1,nn=st((...r)=>hi,"log"),rn=Nr(),jr=rn&&rn.name||"tangible-templates",_i=rn&&rn.rules||[{field:"tangible_template",operator:"all",values:[]}],pi=st(({templateCategoryOptions:r,hasPlugin:u})=>{const o=wp.element.useRef(),[a,i]=wp.element.useState(_i),t=wp.element.useRef();t.current=a;const d=st(l=>{i([...l])},"setExportRules"),[_,v]=wp.element.useState({}),p=wp.element.useRef();p.current=_;const[y,D]=wp.element.useState({exporting:!1,message:"",json:"",packageName:""}),L=wp.element.useRef();L.current=y;const R=st(l=>{D({...L.current,...l})},"setExportState"),j=st(async l=>{if(p.current[l])return;nn("ensureTemplateTypeItemOptions",l,p.current);const E=Jt(Qt+"get_template_type_item_options",{post_type:l}).then(S=>{nn("ensureTemplateTypeItemOptions Success",S),v({...p.current,[l]:S})}).catch(S=>{nn("ensureTemplateTypeItemOptions Fail",S)});v({...p.current,[l]:E})},"ensureTemplateTypeItemOptions"),w=wp.element.useCallback((l="json")=>{const E=o.current&&o.current.value||jr;Fr({name:E,rules:t.current}),nn("Export start",t.current),R({exporting:!0,message:"Exporting.."});function S(T){console.error(T),R({exporting:!1,message:"Error: "+T.message})}h(S,"r"),st(S,"handleError"),Jt(Qt+"export",{export_rules:t.current}).then(T=>{console.log("Export success",T),R({exporting:!1,message:"Export success"});const c={package_name:E,...T},g=new Date().toISOString().slice(0,10).replace(/-/g,"");if(l==="png"){Xa(c).then(M=>{Ja(M,`${E}-${g}.png`)}).catch(S);return}const C=document.createElement("a");C.href="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c,null,2)),C.download=`${E}-${g}.json`,C.style.display="none",document.body.appendChild(C),C.click()}).catch(S)},[]);return wp.element.createElement("div",{id:"exporter"},wp.element.createElement("div",{className:"export-name"},"Package name:"," ",wp.element.createElement("input",{type:"text",name:"name",defaultValue:jr,ref:o})),wp.element.createElement("div",{className:"export-rules"},a.map((l,E)=>wp.element.createElement(fi,{key:`export-rule-${E}`,rule:l,ruleIndex:E,exportRulesRef:t,setExportRules:d,templateTypeItemOptionsRef:p,ensureTemplateTypeItemOptions:j,templateCategoryOptions:r,hasPlugin:u}))),wp.element.createElement("p",null,wp.element.createElement("button",{type:"button",className:"button button-secondary",onClick:()=>{t.current.push({field:"tangible_template",operator:"all",values:[]}),d(t.current)}},"Add export rule")),t.current.length>0&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("p",null,wp.element.createElement("button",{type:"button",className:"button button-primary",onClick:l=>{l.preventDefault(),!y.exporting&&w("png")}},"Export")),wp.element.createElement("p",null,wp.element.createElement("a",{href:"#",style:{},onClick:l=>{l.preventDefault(),!y.exporting&&w()}},"Export as JSON (Uncompressed)")),wp.element.createElement("p",null,y.message)))},"Exporter"),{hasPlugin:an={},templateCategoryOptions:wi=[]}=window.TangibleTemplateImportExport,qr=document.getElementById("tangible_template_import_export_form");qr.addEventListener("submit",function(r){r.preventDefault()});const gi=an.loops||an.blocks_editor||an.template_system;wp.element.createRoot(qr).render(wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("h1",{className:"wp-heading-inline"},"Import"),wp.element.createElement(ai,null),gi&&wp.element.createElement(wp.element.Fragment,null,wp.element.createElement("hr",null),wp.element.createElement("h1",{className:"wp-heading-inline"},"Export"),wp.element.createElement(pi,{templateCategoryOptions:wi,hasPlugin:an}))))})();
