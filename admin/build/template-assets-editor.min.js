var C=Object.defineProperty;var v=(o,n)=>C(o,"name",{value:n,configurable:!0});(function(){"use strict";(function(){const a={NODE_ENV:"production"};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,a);return}}catch{}globalThis.process={env:a}})();var o=Object.defineProperty,n=v((a,c)=>o(a,"name",{value:c,configurable:!0}),"a");const{wp:e}=window;let m,u;const y=n(()=>{if(m){m.open();return}m=e.media({title:"Select media attachment",button:{text:"Select"},multiple:!0}),m.on("select",u),m.open()},"openMediaModal");function g(a){return a.name&&(a.name=a.name.replace(/[^\w_\-]/g,"")),a}v(g,"C"),n(g,"withValidName");const q=n(({assets:a})=>{const[c,k]=wp.element.useState(a),l=wp.element.useRef();l.current=c;const p=wp.element.useRef(),w=n(()=>{p.current.value=JSON.stringify(l.current)},"updateAssetsElement");wp.element.useEffect(()=>{w()},[p.current]);const E=n(()=>{k([...l.current]),w()},"refreshAssets"),O=n(t=>{l.current.push(g(t)),E()},"addAsset"),_=n((t,s)=>{l.current[t]={...l.current[t]||{},...s},E()},"updateAsset"),x=n(t=>{l.current.splice(t,1),E()},"removeAsset");u||(u=n(()=>{const t=m.state().get("selection").toJSON();for(const s of t){let r=!1;for(const i of l.current)if(i.id===s.id){r=!0;break}if(r)continue;const f=["id","name","title","filename","mime","alt","caption","description"].reduce((i,h)=>(i[h]=s[h],i),{});O(f)}},"mediaModalCallback"));const N={};return e.element.createElement(e.element.Fragment,null,e.element.createElement("input",{type:"hidden",name:"assets",ref:p}),e.element.createElement("div",{className:"template-assets"},c.map((t,s)=>{const r=!!N[t.name];return r||(N[t.name]=!0),e.element.createElement("div",{key:`asset-${s}`,className:"template-asset"},e.element.createElement("div",{className:"template-asset-fields"},e.element.createElement("div",{className:"template-asset-field template-asset-field--name"},e.element.createElement("label",null,"Name"),e.element.createElement("input",{type:"text",value:t.name,onChange:f=>{_(s,{name:f.target.value})}})),e.element.createElement("div",{className:"template-asset-field template-asset-field--attachment"},e.element.createElement("div",null,r&&e.element.createElement("div",{className:"template-asset--duplicate-name-message"},"Duplicate name exists"),"ID:"," ",e.element.createElement("a",{href:`post.php?post=${t.id}&action=edit`,target:"_blank"},t.id),e.element.createElement("br",null),"Title: ",t.title,e.element.createElement("br",null),"File name: ",e.element.createElement("code",null,t.filename),e.element.createElement("br",null)))),e.element.createElement("div",{className:"template-asset-actions"},e.element.createElement("div",{className:"template-asset-action template-asset-action--remove-asset"},e.element.createElement("div",{className:"icon",onClick:()=>x(s)},e.element.createElement("svg",{viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},e.element.createElement("path",{d:"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"}))))))})),e.element.createElement("button",{type:"button",className:"button button--add-rule-group",onClick:()=>y()},"Add asset"))},"AssetsEditor"),{jQuery:A}=window,b=document.getElementById("tangible_template_assets_editor");let d=A(b).data("assets");Array.isArray(d)||(d=[]),wp.element.createRoot(b).render(wp.element.createElement(q,{assets:d}))})();
//# sourceMappingURL=template-assets-editor.min.js.map
