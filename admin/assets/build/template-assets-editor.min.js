(function(){"use strict";(function(){const e={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,e);return}}catch(a){}globalThis.process={env:e}})();var y=Object.defineProperty,g=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,d=(e,a,n)=>a in e?y(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,f=(e,a)=>{for(var n in a||(a={}))w.call(a,n)&&d(e,n,a[n]);if(g)for(var n of g(a))N.call(a,n)&&d(e,n,a[n]);return e};const{wp:h}=window;let c,m;const O=()=>{if(c){c.open();return}c=h.media({title:"Select media attachment",button:{text:"Select"},multiple:!0}),c.on("select",m),c.open()};function q(e){return e.name&&(e.name=e.name.replace(/[^\w_\-]/g,"")),e}const j=({assets:e})=>{const[a,n]=Tangible.Preact.useState(e),l=Tangible.Preact.useRef();l.current=a;const u=Tangible.Preact.useRef(),v=()=>{u.current.value=JSON.stringify(l.current)};Tangible.Preact.useEffect(()=>{v()},[u.current]);const b=()=>{n([...l.current]),v()},k=t=>{l.current.push(q(t)),b()},x=(t,r)=>{l.current[t]=f(f({},l.current[t]||{}),r),b()},_=t=>{l.current.splice(t,1),b()};m||(m=()=>{const t=c.state().get("selection").toJSON();for(const r of t){let s=!1;for(const i of l.current)if(i.id===r.id){s=!0;break}if(s)continue;const p=["id","name","title","filename","mime","alt","caption","description"].reduce((i,E)=>(i[E]=r[E],i),{});k(p)}});const T={};return Tangible.Preact.createElement(Tangible.Preact.Fragment,null,Tangible.Preact.createElement("input",{type:"hidden",name:"assets",ref:u}),Tangible.Preact.createElement("div",{className:"template-assets"},a.map((t,r)=>{const s=!!T[t.name];return s||(T[t.name]=!0),Tangible.Preact.createElement("div",{key:`asset-${r}`,className:"template-asset"},Tangible.Preact.createElement("div",{className:"template-asset-fields"},Tangible.Preact.createElement("div",{className:"template-asset-field template-asset-field--name"},Tangible.Preact.createElement("label",null,"Name"),Tangible.Preact.createElement("input",{type:"text",value:t.name,onChange:p=>{x(r,{name:p.target.value})}})),Tangible.Preact.createElement("div",{className:"template-asset-field template-asset-field--attachment"},Tangible.Preact.createElement("div",null,s&&Tangible.Preact.createElement("div",{className:"template-asset--duplicate-name-message"},"Duplicate name exists"),"ID:"," ",Tangible.Preact.createElement("a",{href:`post.php?post=${t.id}&action=edit`,target:"_blank"},t.id),Tangible.Preact.createElement("br",null),"Title: ",t.title,Tangible.Preact.createElement("br",null),"File name: ",Tangible.Preact.createElement("code",null,t.filename),Tangible.Preact.createElement("br",null)))),Tangible.Preact.createElement("div",{className:"template-asset-actions"},Tangible.Preact.createElement("div",{className:"template-asset-action template-asset-action--remove-asset"},Tangible.Preact.createElement("div",{className:"icon",onClick:()=>_(r)},Tangible.Preact.createElement("svg",{viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"},Tangible.Preact.createElement("path",{d:"M1490 1322q0 40-28 68l-136 136q-28 28-68 28t-68-28l-294-294-294 294q-28 28-68 28t-68-28l-136-136q-28-28-28-68t28-68l294-294-294-294q-28-28-28-68t28-68l136-136q28-28 68-28t68 28l294 294 294-294q28-28 68-28t68 28l136 136q28 28 28 68t-28 68l-294 294 294 294q28 28 28 68z"}))))))})),Tangible.Preact.createElement("button",{type:"button",className:"button button--add-rule-group",onClick:()=>O()},"Add asset"))},{jQuery:S}=window,P=document.getElementById("tangible_template_assets_editor");let o=S(P).data("assets");Array.isArray(o)||(o=[]),Tangible.Preact.render(Tangible.Preact.createElement(j,{assets:o}),P)})();
//# sourceMappingURL=template-assets-editor.min.js.map
