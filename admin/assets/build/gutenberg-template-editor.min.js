var L=Object.defineProperty;var m=(d,u)=>L(d,"name",{value:u,configurable:!0});(function(){"use strict";(function(){const n={env:{NODE_ENV:"production"}};try{if(process){process.env=Object.assign({},process.env),Object.assign(process.env,n);return}}catch(e){}globalThis.process={env:n}})();var d=Object.defineProperty,u=m((n,e,a)=>e in n?d(n,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[e]=a,"f"),p=m((n,e)=>d(n,"name",{value:e,configurable:!0}),"p"),b=m((n,e,a)=>(u(n,typeof e!="symbol"?e+"":e,a),a),"m");const{wp:t,Tangible:H,HTMLHint:B}=window,{element:{Component:v},blockEditor:{BlockControls:k,InspectorControls:N},blocks:{registerBlockType:P},components:{Button:E,DropdownMenu:V,KeyboardShortcuts:M,SelectControl:O,TextControl:U,ToolbarItem:j,ToolbarButton:z,ToolbarGroup:f,Panel:A,PanelBody:D,PanelRow:I,withConstrainedTabbing:R},i18n:{__:c},keycodes:{rawShortcut:s},serverSideRender:S}=t,{CodeMirror:G,createCodeEditor:_,gutenbergConfig:w}=H,l=p(n=>n.stopImmediatePropagation(),"stop"),x={tab:l,[s.shift("tab")]:l,[s.ctrl("[")]:l,[s.primary("[")]:l,[s.ctrl("]")]:l,[s.primary("]")]:l,[s.ctrl("a")]:l,[s.primary("a")]:l,[s.ctrl("d")]:l,[s.primary("d")]:l,[s.ctrl("z")]:l,[s.ctrlShift("z")]:l,[s.primary("z")]:l,[s.primaryShift("z")]:l},y=p(()=>t.element.createElement("div",null,"\xA0"),"EmptyTemplate");class g extends v{constructor(){super(...arguments),b(this,"onEditorUpdate",p(()=>{const{onChange:e}=this.props;e&&e(this.editor.getValue())},"onEditorUpdate"))}componentDidMount(){const e=_(this.el,{language:"html",resizable:!0});this.editor=e,this.editor.on("change",this.onEditorUpdate)}componentWillUnmount(){this.editor.off("change",this.onEditorUpdate)}componentShouldUpdate(){return!1}render(){const{value:e,onChange:a}=this.props;return t.element.createElement(M,{shortcuts:x},t.element.createElement("textarea",{ref:i=>this.el=i,value:e,onChange:i=>{a(i.target.value)},cols:"30",rows:"10"}))}}m(g,"C"),p(g,"TemplateEditor");class T extends v{constructor(e){super(e),b(this,"canEditTemplate",w.canEditTemplate),b(this,"state",{currentTab:this.props.attributes.template_selected||!this.canEditTemplate?"selectTemplate":"editor"}),this.templateOptions=[];const a=w.templateOptions,i=Object.keys(a);for(const o of i)this.templateOptions.push({value:o&&parseInt(o,10),label:a[o]})}showTab(e){this.state.currentTab!==e&&(this.setState({currentTab:e}),e==="editor"&&this.props.attributes.template_selected?this.props.setAttributes({template_selected:0}):e==="selectTemplate"&&!this.props.attributes.template_selected&&this.props.setAttributes({template_selected:this.templateOptions[0].value}))}render(){const{className:e,attributes:a,setAttributes:i}=this.props,{currentTab:o}=this.state;return t.element.createElement(t.element.Fragment,null,t.element.createElement(k,null,t.element.createElement(f,null,this.canEditTemplate&&t.element.createElement(E,{className:"components-tab-button",isPressed:o==="editor",onClick:()=>this.showTab("editor")},t.element.createElement("span",null,c("Editor"))),t.element.createElement(E,{className:"components-tab-button",isPressed:o==="selectTemplate",onClick:()=>this.showTab("selectTemplate")},t.element.createElement("span",null,c("Saved templates")))),t.element.createElement(f,null,t.element.createElement(E,{className:"components-tab-button",isPressed:o==="preview",onClick:()=>this.showTab("preview")},t.element.createElement("span",null,c("Preview"))))),o==="preview"?t.element.createElement(S,{block:"tangible/template",className:e,attributes:a,EmptyResponsePlaceholder:y,LoadingResponsePlaceholder:y}):this.canEditTemplate&&o==="editor"?t.element.createElement(g,{value:a.template,onChange:h=>i({template:h})}):t.element.createElement(O,{label:"Select template",value:a.template_selected,style:{height:"60px"},onChange:h=>i({template_selected:h&&parseInt(h,10)}),options:this.templateOptions}))}}m(T,"v"),p(T,"edit"),P("tangible/template",{title:c("Tangible Template"),description:c("Dynamic template"),icon:"editor-code",category:"common",keywords:[c("template","loop","content")],edit:T,save(){return null}});const{wp:r}=window,{blocks:{registerBlockCollection:C}}=r;C&&C("tangible",{title:"Tangible",icon:r.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 99"},r.element.createElement("path",{d:"M0 0 H 33 V 33 H 0 L 0 0",fill:"#262262"}),r.element.createElement("path",{d:"M33 0 H 66 V 33 H 33 L 33 0",fill:"#662d91"}),r.element.createElement("path",{d:"M66 0 H 99 V 33 H 66 L 66 0",fill:"#9f1f63"}),r.element.createElement("path",{d:"M0 33 H 33 V 66 H 0 L 0 33",fill:"#2e3192"}),r.element.createElement("path",{d:"M66 33 H 99 V 66 H 66 L 66 33",fill:"#ec008c"}),r.element.createElement("path",{d:"M33 66 H 66 V 99 H 33 L 33 66",fill:"#02aeef"}))})})();
//# sourceMappingURL=gutenberg-template-editor.min.js.map
